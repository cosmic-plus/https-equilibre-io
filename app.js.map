{"version":3,"sources":["webpack:///./src/app.js","webpack:///./src/asset.js","webpack:///./src/side-frame.js","webpack:///./src/market-data.js","webpack:///./src/orderbook.js","webpack:///./src/balance.js","webpack:///./src/order.js","webpack:///./src/click-wall.js","webpack:///./src/portfolio.js","webpack:///./src/anchor.js","webpack:///./src/offers.js","webpack:///./src/helpers.js","webpack:///./src/activity-gui.js","webpack:///./src/portfolio-gui.js","webpack:///./src/highcharts-theme.js","webpack:///./src/asset-gui.js","webpack:///./src/settings-gui.js","webpack:///./src/share-gui.js","webpack:///./src/share.js","webpack:///./src/strategy.js","webpack:///./src/html/license.html","webpack:///./src/html/welcome.html","webpack:///./src/footer.js","webpack:///./src/svg/donate.svg"],"names":["dom","require","Form","Gui","html","Tabs","params","__","clickWall","global","Portfolio","isOverflowing","ActivityGui","PortfolioGui","SettingsGui","ShareGui","license","welcome","tabs","nav","header","view","main","add","loginForm","select","location","hash","selected","fitScreen","replace","domNode","selector","ledger","addValidator","login","_callee","_regeneratorRuntime","wrap","_context","prev","next","Promise","all","__webpack_require__","e","then","t","bind","sent","setInfo","connect","loginAddressBox","value","publicKey","t0","console","error","setError","stop","_callee2","address","_args2","arguments","_context2","length","undefined","Error","disconnect","$set","enable","resolve","portfolio","concat","setTimeout","listen","initGui","disable","remove","href","show","autocomplete","ledgerLoginButton","onclick","loginWithLedgerWallet","page","window","scrollTo","FIAT_BASEURL","FIAT_IMAGEFORMAT","Mirrorable","Projectable","marketData","Orderbook","Asset","module","exports","_Projectable","id","_this","_classCallCheck","this","_getPrototypeOf","call","table","_assertThisInitialized","image","info","code","Object","assign","type","fiats","push","toLowerCase","cryptos","name","anchors","balances","offers","shares","mirror","balance","anchor","watch","compute","orderbook","forAsset","define","globalPrice","price","_inherits","_createClass","key","_getInfo","_asyncToGenerator","mark","abrupt","crypto","small","apply","addChild","reduce","sum","el","amount","rawLiabilities","entry","buying","selling","refreshPrices","_ref","array","refreshCryptoPrices","refreshFiatPrices","filter","asset","map","_x","_callee3","assets","prices","_args3","_context3","forEach","_callee4","_args4","_context4","fiat","USD","EUR","CNY","BTC","ETH","XRP","XLM","KIN","BAT","ZRX","BCH","STEEM","SBD","LINK","SLT","MOBI","SHX","RMT","TERN","PEDI","GRAT","REPO","currency","setInterval","log","Observable","timeout","SideFrame","url","current","close","create","title","className","src","sandbox","hidden","style","append","document","body","_this2","htmlOverflow","documentElement","overflow","bodyOverflow","shadow","animationName","background","trigger","_this3","hide","_this4","destroy","addEventListener","event","frameWindow","contentWindow","source","data","position","zIndex","right","top","width","maxWidth","height","border","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","padding","color","fontSize","fontWeight","cursor","borderBottomLeftRadius","insertBefore","firstChild","transition","axios","nice","day","coingeckoCall","get","exchangeratesCall","_callee8","symbols","_args8","_context8","base","x","join","response","start_at","rates","cacheHistory","localStorage","JSON","stringify","cachedHistory","json","parse","assetHistory","limit","history","list","symbol","toUpperCase","stellarNative","tickers","coin_id","_ref3","localization","market_data","community_data","developer_data","sparkline","_ref4","ids","quote","vs_currencies","assetData","_x2","_ref5","_callee5","_args5","_context5","vs_currency","days","record","index","time","volume","total_volumes","_x3","_ref6","_callee6","_context6","_x6","_ref7","_callee7","cached","end_at","today","_args7","_context7","Date","toISOString","slice","setDate","getDate","keys","sort","date","getTime","_x7","cosmicLib","StellarSdk","_possibleConstructorReturn","offersCallBuilder","updateOffersPrices","childs","streamOffers","addOrderbook","_streamOffers","getOffers","_getOffers","ingest","areOffersEquals","bids","normalizeOffers","asks","set","side","merged","child","sortOffers","a","b","baseVolume","quoteVolume","row","mergedRow","quoteAmount","mergeOffers","baseAsset","quoteAsset","server","array1","array2","basePrice","bestBid","bestAsk","marketPrice","spread","prototype","findOffer","last","childsNum","offer","findAsk","findBid","depth","Anchor","Balance","entryId","asset_code","asset_issuer","known","buying_liabilities","selling_liabilities","project","forBalance","issuer","CosmicLink","Order","method","operations","_len","parameters","Array","_key","refresh","share","order","splice","_toConsumableArray","make","operation","find","newOperation","getOperation","setOperation","Number","cost","operationDirection","op","filterTradableBalances","amountTraded","amountTradable","addBalancingOperation","size","noMinValue","mode","skipMarginalOffers","minOfferValue","makeOfferFilter","Math","abs","clamp","min","max","operationsToCosmicLink","operationsToDescription","cosmicLink","memo","maxTime","accountId","addOperation","odesc","price_r","n","d","toFixed","offerId","operationToOdesc","desc","market","percentage","spreadTightening","clone","diff","maxSpread","refPrice","clampOfferPrice","updateOfferPriceR","tightenSpread","target","amountDelta","liabilities","outdated","description","deviation","balanceShareDeviation","amountTarget","amountMin","amountMax","amountDiff","setBalancesLimits","isOneOperationEnough","tradableBalances","tradableAmounts","tradableTotal","tradeAmounts","addSplitTrade","_len2","_key2","_construct","_loop","overlay","Offers","checkNetwork","horizon","accountCallBuilder","isSupported","_resolve","destination","isAccountEmpty","account_id","config","streamAccount","_streamAccount","getAccount","_getAccount","account","_ingest","indexOf","getInfo","forPortfolio","stream","accounts","total","aliases","helpers","alias","shorter","USD:GDUKMGUGDZQK6YHYA5Z6AY2G4XDSZPSZ3SW5UN3ARVMO6QSRDWP5YLEX","WSD:GDSVWEA7XV6M5XNLODVTPCGMAJTNBLZBXOFNQD3BNPNYALEYBNT6CE2V","USD:GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP","USD:GBUYUAI75XXWDZEKLY66CFYKQPET5JR4EENXZBUZ3YXZ7DS56Z4OKOFU","USD:GBSTRUSD7IRX73RQZBL3RQUH6KS3O4NYFY3QCALDLZD77XMZOPWAVTUK","CNY:GAREELUB43IRHWEASCFBLKHURCGMHE5IF6XSE7EXDLACYHGRHM43RFOX","XCN:GCNY5OXYSY4FKHOPT2SPOQZAOEIGXB5LBYW3HVU3OWSTQITS65M5RCNY","BCNY:GBCNYBHAAPDSU3UIHXXQTHYZVSBJBI4YUNWXMKJBCPDHTVYR75G6NFHD","EURT:GAP5LETOV6YIE62YAM56STDANPRDO7ZFDBGSNHJQIYGGKSMOZAHOOS2S","SLT:GCKA6K5PCQ6PNF5RQBF7PQDJWRHO6UOGFMRLK3DYHDOI244V47XKQ4GP","MOBI:GA6HCMBLTZS5VYYBCATRBRZ3BZJMAFUDKYYF6AH6MVCMGWMRDNSWJPIH","SHX:GDSTRSHXHGJ7ZIVRBXEYE5Q74XUVCUSEKEBR7UCHEUUEK72N7I7KJ6JH","RMT:GDEGOXPCHXWFYY234D2YZSPEJ24BX42ESJNVHY5H7TWWQSYRN5ZKZE3N","TERN:GDGQDVO6XPFSY4NMX75A7AOVYCF5JYGW2SHCJJNWCQWIDGOZB53DGP6C","PEDI:GBVUDZLMHTLMZANLZB6P4S4RYF52MVWTYVYXTQ2EJBPBX4DZI2SDOLLY","GRAT:GAJ7V3EMD3FRWAPBEJAP7EC4223XI5EACDZ46RFMY5DYOMCIMWEFR5II","REPO:GCZNF24HPMYTV6NOEHI7Q5RJFFUI23JKUKY3H3XTQAFBQIBOHD5OXG3B","BTC:GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG","BTC:GATEMHCCKCY67ZUCKTROYN24ZYT5GK4EQZ65JJLDHKHRUZI3EUEKMTCH","BTC:GAUTUYY2THLF7SGITDFMXJVYH3LHDSMGEAKSBU267M2K7A3W543CKUEF","BTC:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P","BTC:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5","ETH:GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG","ETH:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P","ETH:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5","ETH:GBETHKBL5TCUTQ3JPDIYOZ5RDARTMHMEKIO2QZQ7IOZ4YC5XV3C2IKYU","ETH:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR","LTC:GC5LOR3BK6KIOK7GKAUD5EGHQCMFOGHJTC7I3ELB66PTDFXORC2VM5LP","LTC:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5","LTC:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P","XRP:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5","XRP:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P","KIN:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR","BAT:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR","ZRX:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR","BCH:GAEGOS7I6TYZSVHPSN76RSPIVL3SELATXZWLFO4DIAFYJF7MPAHFE7H4","STEEM:GB3KBOFUCVTWEZ7YIZ7PAKLQMKPCTGWU3LOMANMCT7V6I3AAK4USTEEM","SBD:GB3KBOFUCVTWEZ7YIZ7PAKLQMKPCTGWU3LOMANMCT7V6I3AAK4USTEEM","LINK:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR","loopcall","hiddenKey","setHiddenProperty","delay","callBuilder","records","alive","Offer","clean","forAccount","intern","recordToId","rawPrice","update","rawAmount","last_modified_time","last_modified_ledger","element","scrollHeight","clientHeight","scrollWidth","clientWidth","_Gui2","ActivityOffers","globalCurrency","txParams","network","uri","_Gui3","ActivityOffer","link","number","toLocaleDateString","Highcharts","Highstock","AssetGui","summary","Summary","coingecko","chart","Chart","makeAssetPoint","y","PortfolioSummary","parent","Table","Graph","PortfolioTable","assetsGui","assetGui","simpleView","detailledView","_Gui4","PortfolioGraph","makePie","_this5","container","legend","enabled","tooltip","pointFormat","plotOptions","pie","dataLabels","format","point","events","options","legendItemClick","series","colorByPoint","ignoreHiddenPoint","_Gui5","PortfolioChart","_this6","makeChart","stockChart","rangeSelector","backgroundColor","yAxis","labels","align","resize","offset","credits","theme","allowPointSelect","animation","responsive","rules","condition","chartOptions","showInLegend","distance","colors","setOptions","msg","cell","amounts","node","object","trap","priceDetails","values","feed","anchorName","simple","anchorTotal","anchorHeader","func","reload","i18n","Share","RebalanceGui","template","errors","modified","hideRebalance","hideApply","setupGui","Setup","toString","listOperations","remaining","pop","RebalanceTable","sortShares","shareGui","goal","descriptionToList","ShareSetup","assetName","switchMode","strategy","rebalance","fromString","isValid","findIndex","hasChanged","beautify","toTemplate","group","root","string","fromTemplate","delta","used","computed","strat","targets","space","makeTotal100","MYPUBKEY","Footer","icons","links","Icon","action","match","rel","prompt","isNaN","confirm","demoConfig","footer","displayDemo","displayLicense","displayAbout"],"mappings":"iZAIA,IAAMA,EAAMC,EAAQ,GACdC,EAAOD,EAAQ,IACfE,EAAMF,EAAQ,IACdG,EAAOH,EAAQ,GACfI,EAAOJ,EAAQ,IACfK,EAASL,EAAQ,IACfM,EAAON,EAAQ,GAAfM,GAEFC,EAAYP,EAAQ,IACpBQ,EAASR,EAAQ,GACjBS,EAAYT,EAAQ,IAClBU,EAAkBV,EAAQ,IAA1BU,cAEFC,EAAcX,EAAQ,IACtBY,EAAeZ,EAAQ,IACvBa,EAAcb,EAAQ,IACtBc,EAAWd,EAAQ,IAEnBe,EAAU,IAAIb,EAAIF,EAAQ,KAC1BgB,EAAU,IAAId,EAAIF,EAAQ,KAEhCA,EAAQ,IAKR,IAAMiB,EAAOT,EAAOS,KAAO,IAAIb,EAAK,CAAEc,IAAKnB,EAAIoB,OAAQC,KAAMrB,EAAIsB,OACjEJ,EAAKK,IAAI,WAAYhB,EAAG,WAAYU,GACpCC,EAAKK,IAAI,SAAUhB,EAAG,SAAUP,EAAIwB,WACpCN,EAAKK,IAAI,WAAY,KAAMP,GAC3BE,EAAKK,IAAI,SAAU,KAAMN,GAEzBC,EAAKO,OAAOC,SAASC,MAChBT,EAAKU,UAAUV,EAAKO,OAAO,YAEhCP,EAAKW,UAAY,WACXlB,EAAcX,EAAIoB,SACpBhB,EAAK0B,QAAQZ,EAAKC,IAAIY,QAASb,EAAKc,SAASD,UAGjDb,EAAKW,YAEL,IAoBII,EApBET,EAAY,IAAItB,EAAKF,EAAIwB,WAAWU,aAAaC,kCAqBvD,SAAAC,IAAA,OAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAoESC,QAAAC,IAAA,CAAAC,EAAAC,EAAA,GAAAD,EAAAC,EAAA,KAAAC,KAAAF,EAAAG,EAAAC,KAAA,YAAsEF,KAC3E,SAAAb,GAAM,OAAIA,EAAM,UArEpB,cACEA,EADFM,EAAAU,KAEEzB,EAAU0B,QAAQ3C,EAAG,sDAFvBgC,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAIUR,EAAOkB,UAJjB,OAKInD,EAAIoD,gBAAgBC,MAAQpB,EAAOqB,UACnCnB,IANJI,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAgB,GAAAhB,EAAA,SAQIiB,QAAQC,MAARlB,EAAAgB,IACA/B,EAAUkC,SAAVnB,EAAAgB,IATJ,yBAAAhB,EAAAoB,SAAAvB,EAAA,kDAaeD,kEAAf,SAAAyB,IAAA,IAAAC,EAAAC,EAAAC,UAAA,OAAA1B,EAAAC,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,UAAsBoB,EAAtBC,EAAAG,OAAA,QAAAC,IAAAJ,EAAA,GAAAA,EAAA,GAAgC9D,EAAIoD,gBAAgBC,MAApD,CAAAW,EAAAvB,KAAA,cACsB,IAAI0B,MAAM5D,EAAG,6BADnC,cAEM0B,GAAQA,EAAOmC,aAEnB5C,EAAU0B,QAAQ3C,EAAG,kCACrBD,EAAO+D,KAAK,CAAER,YACdrD,EAAU8D,SANZN,EAAAxB,KAAA,EAAAwB,EAAAvB,KAAA,GAS6B/B,EAAU6D,QAAQV,GAT/C,QASIpD,EAAO+D,UATXR,EAAAf,KAUIzB,EAAU0B,QAAV,GAAAuB,OAAqBlE,EAAG,wBAAxB,QACAmE,WACE,kBAAMlD,EAAU0B,QAAV,GAAAuB,OAAqBlE,EAAG,kCAAxB,SACN,KAEFmE,WAAW,kBAAMlD,EAAU0B,QAAV,GAAAuB,OAAqBlE,EAAG,gBAAxB,SAA+C,KAChEmE,WACE,kBAAMlD,EAAU0B,QAAV,GAAAuB,OAAqBlE,EAAG,4BAAxB,SACN,KAEFE,EAAO+D,UAAUG,OAAO,OAAQ,WAC9BC,IACApE,EAAUqE,YAtBhBb,EAAAvB,KAAA,iBAAAuB,EAAAxB,KAAA,GAAAwB,EAAAT,GAAAS,EAAA,SAyBIR,QAAQC,MAARO,EAAAT,IACA/B,EAAUkC,SAAVM,EAAAT,IACA/C,EAAUqE,UA3Bd,yBAAAb,EAAAL,SAAAC,EAAA,yCA+BA,SAASgB,IACP,IAAMJ,EAAY/D,EAAO+D,UAEnB5C,EAAWF,SAASC,KAC1BT,EAAK4D,OAAO,YACZ5D,EAAK4D,OAAO,UACZ5D,EAAKK,IAAI,aAAchB,EAAG,aAAc,IAAIM,EAAa2D,IACzDtD,EAAKK,IAAI,aAAchB,EAAG,aAAc,IAAIQ,EAASyD,IACrDtD,EAAKK,IAAI,YAAahB,EAAG,YAAa,IAAIK,EAAY4D,IACtDtD,EAAKK,IAAI,YAAahB,EAAG,YAAa,IAAIO,GAC1CI,EAAKK,IAAI,UAAWhB,EAAG,UAAW,WAChCmB,SAASI,QAAQJ,SAASqD,KAAKjD,QAAQ,QAAS,aAElDZ,EAAKW,YAELX,EAAKO,OAAOG,GACPV,EAAKU,UAAUV,EAAKO,OAAO,cAhFlCrB,EAAK4E,KAAKhF,EAAIwB,WACdxB,EAAIwB,UAAUyD,aAAe,KACzB3E,EAAOuD,SACT3C,EAAKO,OAAO,UACZzB,EAAIoD,gBAAgBC,MAAQ/C,EAAOuD,QACnC1B,KAEAnC,EAAIkF,kBAAkBC,QAAU,4DAAMC,IAGxClE,EAAKyD,OAAO,SAAU,SAAAU,GACpB3D,SAASC,KAAO0D,EAChBC,OAAOC,SAAS,EAAG,0nCCtDrB,IAGMC,EAAe,iDACfC,EAAmB,OAEnBC,EAAazF,EAAQ,IACrB0F,EAAc1F,EAAQ,GAEtBQ,EAASR,EAAQ,GACjB2F,EAAa3F,EAAQ,IACrB4F,EAAY5F,EAAQ,IAMpB6F,EAAQC,EAAOC,QAAP,SAAAC,GAAA,aAKZ,SAAAH,EAAaI,GAAI,IAAAC,MAAA,mGAAAC,CAAAC,KAAAP,KACfO,OAAAC,EAAAR,GAAAS,KAAAF,OAAAF,oDAEKD,GAAKA,EACVJ,EAAMU,MAAMN,GAAZO,EAAAN,GAGAA,EAAKO,MAAQ,6DAETZ,EAAMa,KAAKT,IACbC,EAAKS,KAAOV,EACZW,OAAOC,OAAPL,EAAAN,GAAoBL,EAAMa,KAAKT,IACb,SAAdC,EAAKY,MACPjB,EAAMkB,MAAMC,KAAZR,EAAAN,IACAA,EAAKO,MAAL,GAAAjC,OAAgBe,GAAhBf,OAA+ByB,EAAGgB,eAAlCzC,OAAkDgB,KAElDK,EAAMqB,QAAQF,KAAdR,EAAAN,IACAA,EAAKY,KAAO,YAGdZ,EAAKS,KAAOV,EAAGpE,QAAQ,MAAO,IAC9BqE,EAAKiB,KAAOjB,EAAKS,KACjBT,EAAKY,KAAO,WAGdZ,EAAKkB,QAAU,IAAI3B,EACnBS,EAAKmB,SAAW,IAAI5B,EACpBS,EAAKoB,OAAS,IAAI7B,EAClBS,EAAKqB,OAAS,IAAI9B,EAElBS,EAAKmB,SAASG,OAAO,SAAAC,GACnBvB,EAAKkB,QAAQJ,KAAKS,EAAQC,QAC1BxB,EAAKyB,MAAMF,EAAS,SAAU,kBAAMvB,EAAK0B,QAAQ,YACjD1B,EAAKyB,MAAMF,EAAS,CAAC,SAAU,WAAY,WACzCvB,EAAK0B,QAAQ,mBAIjB1B,EAAK2B,UAAYjC,EAAUkC,SAAVtB,EAAAN,IACjBA,EAAK6B,OAAO,QAAS,cAAe,WAClC,OAAO7B,EAAK8B,aAAe9B,EAAK2B,UAAUI,QAE5C/B,EAAKyB,MAAMzB,EAAK2B,UAAW,QAAS,kBAAM3B,EAAK0B,QAAQ,WA1CxC1B,EALL,yOAAAgC,CAAArC,EAAqCH,GAArCyC,EAAAtC,EAAA,OAAAuC,IAAA,UAAAhF,MAAA,SACI6C,GACd,OAAOJ,EAAMU,MAAMN,IAAO,IAAIJ,EAAMI,OAF1BkC,EAAAtC,EAAA,EAAAuC,IAAA,UAAAhF,MAAA,eAAAiF,EAAAC,EAAAlG,EAAAmG,KAAA,SAAApG,IAAA,OAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WAoDN4D,KAAKe,MAAsB,WAAdf,KAAKU,KApDZ,CAAAxE,EAAAE,KAAA,eAAAF,EAAAkG,OAAA,wBAAAlG,EAAAE,KAAA,EAqDQmD,EAAW8C,OAAO/B,KAAKN,MArD/B,OAqDVA,KAAKM,KArDKpE,EAAAU,KAsDVoD,KAAKe,KAAOf,KAAKM,KAAKS,KACtBf,KAAKK,MAAQL,KAAKM,KAAKD,MAAMiC,MAvDnB,wBAAApG,EAAAoB,SAAAvB,EAAAiE,SAAA,yBAAAiC,EAAAM,MAAAvC,KAAAtC,YAAA,KAAAsE,IAAA,eAAAhF,MAAA,SA0DEyE,GACZzB,KAAKyB,UAAUe,SAASf,OA3DdhC,EAAA,GA+DdA,EAAMkC,OAAO,SAAU,WAAY,WACjC,OAAO3B,KAAKiB,UAAYjB,KAAKiB,SAASwB,OAAO,SAACC,EAAKC,GAAN,OAAaD,EAAMC,EAAGC,QAAQ,KAG7EnD,EAAMkC,OAAO,QAAS,CAAC,SAAU,SAAU,WACzC,OAAuB,IAAhB3B,KAAK4C,OAAe,EAAI5C,KAAK4C,OAAS5C,KAAK6B,QAGpDpC,EAAMkC,OAAO,cAAe,CAAC,WAAY,SAAU,WACjD,GAAI3B,KAAKiB,SAAU,CACjB,IAAM4B,EAAiB7C,KAAKiB,SAASwB,OACnC,SAACC,EAAKI,GAAN,OAAgBJ,EAAMI,EAAMC,OAASD,EAAME,SAC3C,GAEF,OAAOhD,KAAK6B,MAAQgB,KAIxBpD,EAAMkC,OAAO,cAAe,CAAC,OAAQ,SAAU,WAC7C,QAAwB,YAAd3B,KAAKU,OAAsBV,KAAK6B,SAO5CpC,EAAMwD,cAAN,eAAAC,EAAAhB,EAAAlG,EAAAmG,KAAsB,SAAA5E,EAAgB4F,GAAhB,OAAAnH,EAAAC,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,UACf+G,EADe,CAAAxF,EAAAvB,KAAA,eAAAuB,EAAAvB,KAAA,EAEZqD,EAAM2D,sBAFM,cAAAzF,EAAAvB,KAAA,EAGZqD,EAAM4D,oBAHM,OAAA1F,EAAAvB,KAAA,uBAAAuB,EAAAvB,KAAA,EAKZqD,EAAM2D,oBACVD,EAAMG,OAAO,SAAAC,GAAK,MAAmB,WAAfA,EAAM7C,OAAmB8C,IAAI,SAAAD,GAAK,OAAIA,EAAMhD,QANlD,cAAA5C,EAAAvB,KAAA,GAQZqD,EAAM4D,kBACVF,EAAMG,OAAO,SAAAC,GAAK,MAAmB,SAAfA,EAAM7C,OAAiB8C,IAAI,SAAAD,GAAK,OAAIA,EAAMhD,QAThD,yBAAA5C,EAAAL,SAAAC,MAAtB,gBAAAkG,GAAA,OAAAP,EAAAX,MAAAvC,KAAAtC,YAAA,GAcA+B,EAAM2D,oBAANlB,EAAAlG,EAAAmG,KAA4B,SAAAuB,IAAA,IAAAC,EAAAC,EAAAC,EAAAnG,UAAA,OAAA1B,EAAAC,KAAA,SAAA6H,GAAA,cAAAA,EAAA3H,KAAA2H,EAAA1H,MAAA,WAAgBuH,EAAhBE,EAAAjG,OAAA,QAAAC,IAAAgG,EAAA,GAAAA,EAAA,GAAyBpE,EAAMqB,SAC7ClD,OADc,CAAAkG,EAAA1H,KAAA,eAAA0H,EAAA1B,OAAA,wBAAA0B,EAAA1H,KAAA,EAELmD,EAAW8C,OAAOuB,OAAOD,GAFpB,OAEpBC,EAFoBE,EAAAlH,KAG1B+G,EAAOI,QAAQ,SAAAR,GAAK,OAAIA,EAAM3B,YAAcgC,EAAOL,EAAMhD,QAH/B,wBAAAuD,EAAAxG,SAAAoG,MAM5BjE,EAAM4D,kBAANnB,EAAAlG,EAAAmG,KAA0B,SAAA6B,IAAA,IAAArD,EAAAiD,EAAAK,EAAAvG,UAAA,OAAA1B,EAAAC,KAAA,SAAAiI,GAAA,cAAAA,EAAA/H,KAAA+H,EAAA9H,MAAA,WAAgBuE,EAAhBsD,EAAArG,OAAA,QAAAC,IAAAoG,EAAA,GAAAA,EAAA,GAAwBxE,EAAMkB,OAC3C/C,OADa,CAAAsG,EAAA9H,KAAA,eAAA8H,EAAA9B,OAAA,wBAAA8B,EAAA9H,KAAA,EAEHmD,EAAW4E,KAAKP,OAAOjD,GAFpB,OAElBiD,EAFkBM,EAAAtH,KAGxB+D,EAAMoD,QAAQ,SAAAR,GAAK,OAAIA,EAAM1B,MAAQ0B,EAAM3B,YAAcgC,EAAOL,EAAMhD,QAH9C,wBAAA2D,EAAA5G,SAAA0G,MAU1BvE,EAAMa,KAAO,CACX8D,IAAK,CAAE1D,KAAM,OAAQK,KAAM,aAC3BsD,IAAK,CAAE3D,KAAM,OAAQK,KAAM,QAC3BuD,IAAK,CAAE5D,KAAM,OAAQK,KAAM,YAE3BwD,IAAK,CAAE1E,GAAI,WACX2E,IAAK,CAAE3E,GAAI,YACX4E,IAAK,CAAE5E,GAAI,UACX6E,IAAK,CAAE7E,GAAI,WACX8E,IAAK,CAAE9E,GAAI,OACX+E,IAAK,CAAE/E,GAAI,yBACXgF,IAAK,CAAEhF,GAAI,MACXiF,IAAK,CAAEjF,GAAI,gBACXkF,MAAO,CAAElF,GAAI,SACbmF,IAAK,CAAEnF,GAAI,gBACXoF,KAAM,CAAEpF,GAAI,aAEZqF,IAAK,CAAErF,GAAI,cACXsF,KAAM,CAAEtF,GAAI,UACZuF,IAAK,CAAEvF,GAAI,oBACXwF,IAAK,CAAExF,GAAI,aACXyF,KAAM,CAAEzF,GAAI,UACZ0F,KAAM,CAAE1F,GAAI,UACZ2F,KAAM,CAAE3F,GAAI,SACZ4F,KAAM,CAAE5F,GAAI,SAOdJ,EAAMU,MAAQ,GACdV,EAAMqB,QAAU,GAChBrB,EAAMkB,MAAQ,GACd,IAAIlB,EAAMrF,EAAOsL,UAIfC,YAAYlG,EAAM2D,oBA7KgB,KA8KlCuC,YAAYlG,EAAM4D,kBA7Kc,MAiLlClG,QAAQyI,IAAInG,EAAMU,8vBCpLlB,IAAMpG,EAAOH,EAAQ,GACfiM,EAAajM,EAAQ,IACnBkM,EAAYlM,EAAQ,GAApBkM,QACA5L,EAAON,EAAQ,GAAfM,GAMF6L,2BACJ,SAAAA,EAAaC,GAAK,IAAAlG,MAAA,mGAAAC,CAAAC,KAAA+F,KAChB/F,KAAAF,MAAAG,EAAA8F,GAAA7F,KAAAF,qDAEI+F,EAAUE,SAASF,EAAUE,QAAQC,QACzCH,EAAUE,QAAV7F,EAAAN,GAEAA,EAAKpE,QAAU3B,EAAKoM,OAAO,SAAU,CACnCC,MAAO,gBACPC,UAAW,WACXC,IAAKN,EACLO,QAAS,2DACTC,QAAQ,IAEVhG,OAAOC,OAAOX,EAAKpE,QAAQ+K,MAAOV,EAAUU,OAC5C1M,EAAK2M,OAAOC,SAASC,KAAM9G,EAAKpE,SAEhCoE,EAAKnB,OAhBWmB,wPADI+F,wCAoBd,IAAAgB,EAAA7G,KACN,GAAKA,KAAKtE,QAAQ8K,OAWlB,OATAxG,KAAK8G,aAAeH,SAASI,gBAAgBN,MAAMO,SACnDhH,KAAKiH,aAAeN,SAASC,KAAKH,MAAMO,SACxCL,SAASI,gBAAgBN,MAAMO,SAAW,SAC1CL,SAASC,KAAKH,MAAMO,SAAW,SAE/BjN,EAAK4E,KAAKoH,EAAUmB,OAAQnB,EAAUG,MAAOlG,KAAKtE,SAClDsE,KAAKtE,QAAQ+K,MAAMU,cAAgB,eACnCpB,EAAUmB,OAAOT,MAAMW,WAAa,kBAE7BtB,EAAQ,KAAKrJ,KAAK,WACvBsJ,EAAUmB,OAAOpI,QAAU,kBAAM+H,EAAKX,SACtCH,EAAUG,MAAMpH,QAAU,kBAAM+H,EAAKX,SACrCW,EAAKQ,QAAQ,yCAIT,IAAAC,EAAAtH,KACN,IAAIA,KAAKtE,QAAQ8K,OAWjB,OATAG,SAASI,gBAAgBN,MAAMO,SAAWhH,KAAK8G,aAC/CH,SAASC,KAAKH,MAAMO,SAAWhH,KAAKiH,aAEpClB,EAAUmB,OAAOpI,QAAU,KAC3B/E,EAAKwN,KAAKxB,EAAUG,OAEpBlG,KAAKtE,QAAQ+K,MAAMU,cAAgB,gBACnCpB,EAAUmB,OAAOT,MAAMW,WAAa,cAE7BtB,EAAQ,KAAKrJ,KAAK,WACvB1C,EAAKwN,KAAKxB,EAAUmB,OAAQnB,EAAUG,MAAOoB,EAAK5L,SAClD4L,EAAKD,QAAQ,0CAIR,IAAAG,EAAAxH,KACP+F,EAAUE,QAAU,KACpBjG,KAAKuH,OAAO9K,KAAK,WACf1C,EAAK0N,QAAQD,EAAK9L,SAClB8L,EAAKH,QAAQ,SACbG,EAAKC,iDASXxI,OAAOyI,iBAAiB,UAAW,SAAAC,GACjC,IAAMC,EACJ7B,EAAUE,SAAWF,EAAUE,QAAQvK,QAAQmM,cAEjD,GAAIF,EAAMG,SAAWF,EACnB,OAAQD,EAAMI,MACd,IAAK,OACHhC,EAAUE,QAAQtH,OAClB,MACF,IAAK,OACHoH,EAAUE,QAAQsB,OAClB,MACF,IAAK,QACHxB,EAAUE,QAAQC,WAUxBH,EAAUU,MAAQ,CAChBuB,SAAU,QACVC,OAAQ,IACRC,MAAO,EACPC,IAAK,EACLC,MAAO,OACPC,SAAU,OACVC,OAAQ,QACRC,OAAQ,iCACRnB,WAAY,qBACZoB,gBAAe,kCACfC,iBAAkB,YAClBC,mBAAoB,SACpBC,eAAgB,YAChBC,QAAS,GAOX7C,EAAUG,MAAQnM,EAAKoM,OAAO,OAAQ,CAAEK,QAAQ,GAA9B,KAAApI,OAA2ClE,EAAG,WAChEsG,OAAOC,OAAOsF,EAAUG,MAAMO,MAAO,CACnCuB,SAAU,QACVC,OAAQ,IACRE,IAAK,QACLD,MAAO,QACPW,MAAO,kBACPC,SAAU,QACVC,WAAY,OACZC,OAAQ,UACR5B,WAAY,kBACZ6B,uBAAwB,QACxBL,QAAS,gBAEXjC,SAASC,KAAKsC,aAAanD,EAAUG,MAAOS,SAASC,KAAKuC,YAM1DpD,EAAUmB,OAASnN,EAAKoM,OAAO,MAAO,CAAEK,QAAQ,IAChDhG,OAAOC,OAAOsF,EAAUmB,OAAOT,MAAO,CACpCuB,SAAU,QACVC,OAAQ,IACRE,IAAK,EACLC,MAAO,OACPE,OAAQ,OACRlB,WAAY,cACZgC,WAAY,oBAEdzC,SAASC,KAAKsC,aAAanD,EAAUmB,OAAQP,SAASC,KAAKuC,YAM3DzJ,EAAOC,QAAUoG,2VC9JjB,IAAMxG,EAAaI,EAEb0J,EAAQzP,EAAQ,IAChB0P,EAAO1P,EAAQ,IACb2P,EAAQ3P,EAAQ,GAAhB2P,IAEFnP,EAASR,EAAQ,GAiBvB,SAAS4P,EAAexK,EAAM/E,GAC5B,OAAOoP,EAAMI,IAAN,oCAAArL,OAA8CY,GAAQ,CAAE/E,oBAmElDyP,qEAAf,SAAAC,EAAkC3K,EAAM4K,GAAxC,IAAA3P,EAAA4P,EAAAnM,UAAA,OAAA1B,EAAAC,KAAA,SAAA6N,GAAA,cAAAA,EAAA3N,KAAA2N,EAAA1N,MAAA,cAAiDnC,EAAjD4P,EAAAjM,OAAA,QAAAC,IAAAgM,EAAA,GAAAA,EAAA,GAA0D,IACjDE,KAAO3P,EAAOsL,SACE,iBAAZkE,EACT3P,EAAO2P,QAAUA,GAEO,QAApBxP,EAAOsL,WAAoBkE,EAAUA,EAAQtG,OAAO,SAAA0G,GAAC,MAAU,QAANA,KAC7D/P,EAAO2P,QAAUA,EAAQK,KAAK,MAEhChQ,EAAO6N,OAAS,eARlBgC,EAAA1H,OAAA,SAUSiH,EACJI,IADI,mCAAArL,OACmCY,GAAQ,CAAE/E,WACjDwC,KAAK,SAAAyN,GAIJ,MAHwB,QAApB9P,EAAOsL,UAAuBwE,EAASnC,KAAKoC,WAC9CD,EAASnC,KAAKqC,MAAM/F,IAAM,GAErB6F,KAhBb,wBAAAJ,EAAAxM,SAAAqM,6BA2DA,SAASU,EAAc9G,EAAOwE,GAC5BuC,aAAY,UAAAlM,OAAWmF,EAAMhD,OAAUgK,KAAKC,UAAU,CAACjB,IAAOxB,IAGhE,SAAS0C,EAAelH,GACtB,IAAMmH,EAAOJ,aAAY,UAAAlM,OAAWmF,EAAMhD,OAC1C,GAAKmK,EAAL,CACA,IAAM3C,EAAOwC,KAAKI,MAAMD,GACxB,OAAI3C,EAAK,KAAOwB,IAAcxB,EAAK,QAAnC,GAlJFxI,EAAWqL,aAAe,SAAUrH,GAAqB,IAAdsH,EAAcnN,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAAN,IACjD,MAAmB,WAAf6F,EAAM7C,KAA0BnB,EAAW8C,OAAOyI,QAAQvH,EAAOsH,GAC7C,SAAftH,EAAM7C,KAAwBnB,EAAW4E,KAAK2G,QAAQvH,EAAOsH,QAAjE,GAOPtL,EAAW8C,OAAS,GAMpB9C,EAAW8C,OAAO0I,KAAlB7I,EAAAlG,EAAAmG,KAAyB,SAAApG,IAAA,IAAAmO,EAAAa,EAAA,OAAA/O,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACAoN,EAAc,cADd,cACjBU,EADiBhO,EAAAU,KAEjBmO,EAAO,GACbb,EAASnC,KAAKhE,QAAQ,SAAAjB,GACpB,IAAMkI,EAASlI,EAAMkI,OAAOC,cAC5BF,EAAKC,GAAU,CAAEnL,GAAIiD,EAAMjD,GAAIkB,KAAM+B,EAAM/B,QALtB7E,EAAAkG,OAAA,SAOhB2I,GAPgB,wBAAA7O,EAAAoB,SAAAvB,MAUzBwD,EAAW8C,OAAO6I,cAAlBhJ,EAAAlG,EAAAmG,KAAkC,SAAA5E,IAAA,IAAA2M,EAAA,OAAAlO,EAAAC,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EACToN,EAAc,0BADL,cAC1BU,EAD0BvM,EAAAf,KAAAe,EAAAyE,OAAA,SAEzB8H,EAASnC,KAAKoD,QAAQ3H,IAAI,SAAAwG,GAAC,OAAIA,EAAEoB,UAAS9H,OAAO,SAAA0G,GAAC,OAAIA,KAF7B,wBAAArM,EAAAL,SAAAC,MAKlCgC,EAAW8C,OAAO/B,KAAlB,eAAA+K,EAAAnJ,EAAAlG,EAAAmG,KAAyB,SAAAuB,EAAgBH,GAAhB,IAAA2G,EAAA,OAAAlO,EAAAC,KAAA,SAAA6H,GAAA,cAAAA,EAAA3H,KAAA2H,EAAA1H,MAAA,cAAA0H,EAAA1H,KAAA,EACAoN,EAAa,SAAApL,OAAUmF,EAAM1D,IAAM,CACxDyL,cAAc,EACdH,SAAS,EACTI,aAAa,EACbC,gBAAgB,EAChBC,gBAAgB,EAChBC,WAAW,IAPU,cACjBxB,EADiBpG,EAAAlH,KAAAkH,EAAA1B,OAAA,SAShB8H,EAASnC,MATO,wBAAAjE,EAAAxG,SAAAoG,MAAzB,gBAAAD,GAAA,OAAA4H,EAAA9I,MAAAvC,KAAAtC,YAAA,GAYA6B,EAAW8C,OAAOuB,OAAlB,eAAA+H,EAAAzJ,EAAAlG,EAAAmG,KAA2B,SAAA6B,EAAgBL,GAAhB,IAAAiI,EAAAC,EAAA3B,EAAAtG,EAAA,OAAA5H,EAAAC,KAAA,SAAAiI,GAAA,cAAAA,EAAA/H,KAAA+H,EAAA9H,MAAA,cACnBwP,EAAMjI,EAAOH,IAAI,SAAAD,GAAK,OAAIA,EAAM1D,KAAIoK,KAAK,KACzC4B,EAAQzR,EAAOsL,SAAS7E,cAFLqD,EAAA9H,KAAA,EAGFoN,EAAc,eAAgB,CACnDoC,MACAE,cAAeD,IALQ,cAGnB3B,EAHmBhG,EAAAtH,KAOnBgH,EAAS,GACfD,EAAOI,QAAQ,SAAAR,GACb,IAAMwI,EAAY7B,EAASnC,KAAKxE,EAAM1D,IAClCkM,IAAWnI,EAAOL,EAAMhD,MAAQwL,EAAUF,MAVvB3H,EAAA9B,OAAA,SAYlBwB,GAZkB,wBAAAM,EAAA5G,SAAA0G,MAA3B,gBAAAgI,GAAA,OAAAL,EAAApJ,MAAAvC,KAAAtC,YAAA,GAeA6B,EAAW8C,OAAOyI,QAAlB,eAAAmB,EAAA/J,EAAAlG,EAAAmG,KAA4B,SAAA+J,EAAgB3I,GAAhB,IAAAsH,EAAAX,EAAAnC,EAAAoE,EAAAzO,UAAA,OAAA1B,EAAAC,KAAA,SAAAmQ,GAAA,cAAAA,EAAAjQ,KAAAiQ,EAAAhQ,MAAA,cAAuByO,EAAvBsB,EAAAvO,OAAA,QAAAC,IAAAsO,EAAA,GAAAA,EAAA,GAA+B,IAA/BC,EAAAhQ,KAAA,EACHoN,EAAa,SAAApL,OAAUmF,EAAM1D,GAAhB,iBAAmC,CACrEwM,YAAajS,EAAOsL,SACpB4G,KAAMzB,IAHkB,cACpBX,EADoBkC,EAAAxP,KAKpBmL,EAAOmC,EAASnC,KAAKnE,OAAOJ,IAAI,SAAC+I,EAAQC,GAC7C,MAAO,CACLC,KAAMF,EAAO,GACb1K,MAAO0K,EAAO,GAEdG,QAASpD,EAAKY,EAASnC,KAAK4E,cAAcH,GAAO,GAAKD,EAAO,OAVvCH,EAAAhK,OAAA,SAanB2F,GAbmB,wBAAAqE,EAAA9O,SAAA4O,MAA5B,gBAAAU,GAAA,OAAAX,EAAA1J,MAAAvC,KAAAtC,YAAA,GAoBA6B,EAAW4E,KAAO,GAsBlB5E,EAAW4E,KAAKP,OAAhB,eAAAiJ,EAAA3K,EAAAlG,EAAAmG,KAAyB,SAAA2K,EAAgBnJ,GAAhB,IAAAiG,EAAAM,EAAAnC,EAAAiD,EAAA,OAAAhP,EAAAC,KAAA,SAAA8Q,GAAA,cAAAA,EAAA5Q,KAAA4Q,EAAA3Q,MAAA,cACjBwN,EAAUjG,EAAOH,IAAI,SAAAD,GAAK,OAAIA,EAAMhD,OADnBwM,EAAA3Q,KAAA,EAEAsN,EAAkB,SAAUE,GAF5B,OAIvB,IAASoB,KAFHd,EAFiB6C,EAAAnQ,KAGjBmL,EAAOmC,EAASnC,KAAKqC,MAEzBrC,EAAKiD,GAAU1B,EAAK,EAAIvB,EAAKiD,GAAS,GALjB,OAAA+B,EAAA3K,OAAA,SAOhB2F,GAPgB,wBAAAgF,EAAAzP,SAAAwP,MAAzB,gBAAAE,GAAA,OAAAH,EAAAtK,MAAAvC,KAAAtC,YAAA,GAUA6B,EAAW4E,KAAK2G,QAAhB,eAAAmC,EAAA/K,EAAAlG,EAAAmG,KAA0B,SAAA+K,EAAgB3J,GAAhB,IAAAsH,EAAAsC,EAAAC,EAAAC,EAAAlD,EAAAD,EAAAnC,EAAAuF,EAAA5P,UAAA,OAAA1B,EAAAC,KAAA,SAAAsR,GAAA,cAAAA,EAAApR,KAAAoR,EAAAnR,MAAA,UAAuByO,EAAvByC,EAAA1P,OAAA,QAAAC,IAAAyP,EAAA,GAAAA,EAAA,GAA+B,MACjDH,EAAS1C,EAAclH,IADL,CAAAgK,EAAAnR,KAAA,eAAAmR,EAAAnL,OAAA,SAEL+K,GAFK,cAIlBC,GAAS,IAAII,MAAOC,cAAcC,MAAM,EAAG,KAC3CL,EAAQ,IAAIG,KAAKJ,IACjBO,QAAQN,EAAMO,UAAY/C,GAC1BV,EAAWkD,EAAMI,cAAcC,MAAM,EAAG,IAPtBH,EAAAnR,KAAA,GAQDsN,EAAkB,UAAWnG,EAAMhD,KAAM,CAC9D4J,WACAiD,WAVsB,eAQlBlD,EARkBqD,EAAA3Q,KAalBmL,EAAOvH,OAAOqN,KAAK3D,EAASnC,KAAKqC,OACpC0D,OACAtK,IAAI,SAAAuK,GACH,MAAO,CACLtB,KAAM,IAAIe,KAAKO,GAAMC,UACrBnM,OAAQyH,EAAK,EAAIY,EAASnC,KAAKqC,MAAM2D,GAAMxK,EAAMhD,MAAO,MAG9D8J,EAAa9G,EAAOwE,GArBIwF,EAAAnL,OAAA,SAsBjB2F,GAtBiB,yBAAAwF,EAAAjQ,SAAA4P,MAA1B,gBAAAe,GAAA,OAAAhB,EAAA1K,MAAAvC,KAAAtC,YAAA,4rCC1HA,IAAMwQ,EAAYtU,EAAQ,IACpB0P,EAAO1P,EAAQ,IACf0F,EAAc1F,EAAQ,GACtBuU,EAAavU,EAAQ,IACnBkM,EAAYlM,EAAQ,GAApBkM,QACA5L,EAAON,EAAQ,GAAfM,GAEFsF,EAAYE,EAAOC,QAAP,SAAAC,GAAA,aAiBhB,SAAAJ,EAAavF,GAAQ,IAAA6F,EAAA,mGAAAC,CAAAC,KAAAR,GACnBM,EAAAsO,EAAApO,KAAAC,EAAAT,GAAAU,KAAAF,OAEI/F,EAAOoH,SACTvB,EAAKY,KAAO,SACZZ,EAAKuB,QAAUpH,EAAOoH,QACtBvB,EAAKiK,KAAO9P,EAAOoH,QAAQkC,MAC3BzD,EAAK+L,MAAQ5R,EAAO4R,MACpB/L,EAAKiB,KAAL,GAAA3C,OAAe0B,EAAKiK,KAAKxJ,KAAzB,KAAAnC,OAAiC0B,EAAK+L,MAAMtL,MAC5CT,EAAKuO,kBAAoB7O,EAAU6O,kBAAkBvO,EAAKuB,SAE1DvB,EAAKyB,MAAMzB,EAAK+L,MAAO,QAAS,kBAAM/L,EAAKwO,wBAClCrU,EAAOsJ,QAChBzD,EAAKY,KAAO,YACZZ,EAAKiK,KAAO9P,EAAOsJ,MACnBzD,EAAKiB,KAAL,GAAA3C,OAAe0B,EAAKiK,KAAKxJ,KAAzB,MAAAnC,OAAkClE,EAAG,aAArC,KACA4F,EAAKyO,OAAS,IAGhBzO,EAAKyB,MAAMzB,EAAKiK,KAAM,cAAe,kBAAMjK,EAAK0B,QAAQ,WAnBrC1B,EAjBL,yOAAAgC,CAAAtC,EAAyCF,GAAzCyC,EAAAvC,EAAA,OAAAwC,IAAA,aAAAhF,MAAA,SACGqE,EAASwK,GAC1B,GAAIxK,EAAQkC,QAAUsI,EAAtB,CAEA,IAAMpK,EAAY,IAAIjC,EAAU,CAAE6B,UAASwK,UAM3C,OALApK,EAAU+M,eAEVnN,EAAQI,UAAYA,EACpBJ,EAAQkC,MAAMkL,aAAahN,GAEpBA,KAVO,CAAAO,IAAA,WAAAhF,MAAA,SAaCuG,GACf,OAAO,IAAI/D,EAAU,CAAE+D,cAdTxB,EAAAvC,EAAA,EAAAwC,IAAA,eAAAhF,MAAA,eAAA0R,EAAAxM,EAAAlG,EAAAmG,KAAA,SAAApG,IAAA,OAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAiDN4D,KAAK2O,YAjDC,cAAAzS,EAAAE,KAAA,EAkDN0J,EAAQ,MAlDF,OAAA5J,EAAAE,KAAA,gCAAAF,EAAAoB,SAAAvB,EAAAiE,SAAA,yBAAA0O,EAAAnM,MAAAvC,KAAAtC,YAAA,KAAAsE,IAAA,YAAAhF,MAAA,eAAA4R,EAAA1M,EAAAlG,EAAAmG,KAAA,SAAA5E,IAAA,IAAA2D,EAAA,OAAAlF,EAAAC,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAxB,KAAA,EAAAwB,EAAAvB,KAAA,EAwDS4D,KAAKqO,kBAAkBnO,OAxDhC,OAwDNgB,EAxDMvD,EAAAf,KAyDZoD,KAAK6O,OAAO3N,GAzDAvD,EAAAvB,KAAA,gBAAAuB,EAAAxB,KAAA,EAAAwB,EAAAT,GAAAS,EAAA,SA2DZR,QAAQC,MAARO,EAAAT,IA3DY,yBAAAS,EAAAL,SAAAC,EAAAyC,KAAA,qCAAA4O,EAAArM,MAAAvC,KAAAtC,YAAA,KAAAsE,IAAA,SAAAhF,MAAA,SA+DRkE,GACD4N,EAAgB9O,KAAK+O,KAAM7N,EAAO6N,QACrC/O,KAAK+O,KAAOC,EAAgB9N,EAAO6N,KAAM/O,KAAK6L,MAAO7L,KAAKqB,QAAS,SAEhEyN,EAAgB9O,KAAKiP,KAAM/N,EAAO+N,QACrCjP,KAAKiP,KAAOD,EAAgB9N,EAAO+N,KAAMjP,KAAK6L,MAAO7L,KAAKqB,QAAS,WApEvD,CAAAW,IAAA,qBAAAhF,MAAA,WAyEVgD,KAAK+O,MACP/O,KAAKkP,IAAI,OAAQZ,EAAmBtO,KAAK+O,KAAM/O,KAAK6L,QAElD7L,KAAKiP,MACPjP,KAAKkP,IAAI,OAAQZ,EAAmBtO,KAAKiP,KAAMjP,KAAK6L,UA7ExC,CAAA7J,IAAA,cAAAhF,MAAA,SAiFHmS,GACX,GAAInP,KAAKuO,OAAO3Q,OAAS,EACvBoC,KAAKkP,IAAIC,EAAMnP,KAAKuO,OAAO,IAAMvO,KAAKuO,OAAO,GAAGY,QADlD,CAMA,IAAMC,EAASpP,KAAKuO,OAAO9L,OAAO,SAAC2M,EAAQC,GACzC,OAAOA,EAAMF,GAAQC,EAAOhR,OAAOiR,EAAMF,IAASC,GACjD,IACH,GAAKA,EAAOxR,OAAZ,CAKA,IAAM0R,EACK,SAATH,EACI,SAACI,EAAGC,GAAJ,OAAUA,EAAE3N,MAAQ0N,EAAE1N,OACtB,SAAC0N,EAAGC,GAAJ,OAAUD,EAAE1N,MAAQ2N,EAAE3N,OAGxB6K,EAAS,EACX+C,EAAa,EACbC,EAAc,EAChB1P,KAAKkP,IACHC,EACAC,EAAOtB,KAAKwB,GAAY9L,IAAI,SAAAmM,GAC1B,IAAMC,EAAYpP,OAAOC,OAAO,GAAIkP,GAIpC,OAHAC,EAAUlD,OAASA,IAAWpD,EAAKqG,EAAI/M,OAAS+M,EAAI9N,MAAO,GAC3D+N,EAAUH,WAAaA,IAAeE,EAAI/M,OAC1CgN,EAAUF,YAAcA,IAAgBC,EAAIE,YACrCD,UApBT5P,KAAKmP,GAAQ,QA5FD,CAAAnN,IAAA,WAAAhF,MAAA,SAqHNyE,GAAW,IAAAoF,EAAA7G,KACnBA,KAAKuO,OAAO3N,KAAKa,GACjBzB,KAAKuB,MAAME,EAAW,OAAQ,kBAAMoF,EAAKiJ,YAAY,UACrD9P,KAAKuB,MAAME,EAAW,OAAQ,kBAAMoF,EAAKiJ,YAAY,aAxHvC,EAAA9N,IAAA,oBAAAhF,MAAA,SAuCUqE,GACxB,IAAM0O,EAAY,IAAI5B,EAAW1O,MAAM4B,EAAQd,KAAMc,EAAQC,OAAO9D,SAC9DwS,EAAa7B,EAAW1O,MAAX,SAEnB,OADeyO,EAAUhQ,QAAQ+R,SACnBxO,UAAUsO,EAAWC,OA3CrBxQ,EAAA,GAoMlB,SAASsP,EAAiBoB,EAAQC,GAChC,IAAKD,EAAQ,OAAO,EACpB,GAAIA,EAAOtS,SAAWuS,EAAOvS,OAAQ,OAAO,EAC5C,IAAK,IAAI4O,KAAS0D,EAAOtS,OAAQ,CAC/B,GAAIsS,EAAO1D,GAAO5J,SAAWuN,EAAO3D,GAAO5J,OAAQ,OAAO,EAC1D,GAAIsN,EAAO1D,GAAO3K,QAAUsO,EAAO3D,GAAO3K,MAAO,OAAO,EAE1D,OAAO,EAGT,SAASmN,EAAiB9N,EAAQ2K,EAAOxK,EAAS8N,GAUhD,OATAjO,EAAO6C,QAAQ,SAAA4L,GACbA,EAAIjD,YAAS7O,EACb8R,EAAIF,gBAAa5R,EACjB8R,EAAIS,WAAaT,EAAI9N,MACrB8N,EAAIE,aAAeF,EAAI/M,OACvB+M,EAAID,iBAAc7R,EAClB8R,EAAItO,QAAUA,EACdsO,EAAIR,KAAOA,IAENb,EAAmBpN,EAAQ2K,GAGpC,SAASyC,EAAoBpN,EAAQ2K,GACnC,IAAIa,EAAS,EACXgD,EAAc,EACdD,EAAa,EAYf,OAXAvO,EAAO6C,QAAQ,SAAA4L,GACI,SAAbA,EAAIR,KACNQ,EAAIE,aAAevG,EAAKqG,EAAI/M,OAAS+M,EAAIS,UAAW,GAEpDT,EAAI/M,QAAU0G,EAAKqG,EAAIE,YAAcF,EAAIS,UAAW,GAEtDT,EAAI9N,OAASyH,EAAKqG,EAAIS,UAAYvE,EAAMhK,MAAO,GAC/C8N,EAAIjD,OAASA,IAAWpD,EAAKqG,EAAI/M,OAAS+M,EAAI9N,MAAO,GACrD8N,EAAIF,WAAaA,IAAeE,EAAI/M,OACpC+M,EAAID,YAAcA,IAAgBC,EAAIE,cAEjC3O,EA9GT1B,EAAUmC,OAAO,UAAW,OAAQ,WAClC,OAAO3B,KAAK+O,MAAQ/O,KAAK+O,KAAK,IAAM/O,KAAK+O,KAAK,GAAGlN,QAEnDrC,EAAUmC,OAAO,UAAW,OAAQ,WAClC,OAAO3B,KAAKiP,MAAQjP,KAAKiP,KAAK,IAAMjP,KAAKiP,KAAK,GAAGpN,QAEnDrC,EAAUmC,OAAO,QAAS,CAAC,UAAW,WAAY,WAChD,OAAI3B,KAAK+J,KAAKnI,aAAqB5B,KAAKqQ,QAAUrQ,KAAKsQ,SAAW,EACtDtQ,KAAKuQ,gBAEnB/Q,EAAUmC,OAAO,SAAU,CAAC,UAAW,WAAY,WACjD,OAAO3B,KAAKsQ,QAAUtQ,KAAKqQ,UAE7B7Q,EAAUmC,OAAO,UAAW,CAAC,SAAU,WAAY,WACjD,OAAO,IAAM3B,KAAKwQ,OAASxQ,KAAKsQ,UAgBlC9Q,EAAUiR,UAAUC,UAAY,SAAUvB,EAAM7L,GAC9C,IAIIqN,EAJEzP,EAASlB,KAAKmP,GACdyB,EAAY5Q,KAAKuO,OAASvO,KAAKuO,OAAO3Q,OAAS,EAC/CoD,EAAU,GAGhB,IAAK,IAAIwL,KAAStL,EAAQ,CACxB,IAAM2P,EAAQ3P,EAAOsL,GACrB,IAAIlJ,GAAWA,EAAOuN,GAAtB,CACA,IAAMvP,EAASuP,EAAMxP,QAAQC,OAAO9D,QAKpC,GAJKwD,EAAQM,KACXN,EAAQM,IAAU,EAClBqP,EAAOE,GAELrQ,OAAOqN,KAAK7M,GAASpD,SAAWgT,EAAW,OAEjD,OAAOD,GAGTnR,EAAUiR,UAAUK,QAAU,SAAUxN,GACtC,OAAOtD,KAAK0Q,UAAU,OAAQpN,IAEhC9D,EAAUiR,UAAUM,QAAU,SAAUzN,GACtC,OAAOtD,KAAK0Q,UAAU,OAAQpN,IAUhC9D,EAAUiR,UAAUF,YAAc,WAAqC,IAA3BpB,EAA2BzR,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAApB,OAAQsT,EAAYtT,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAAJ,GAC3DmT,EAAQ7Q,KAAK0Q,UAAUvB,EAAM,SAAA0B,GAAK,OAAIA,EAAMnB,YAAcsB,IAChE,OAAOH,EAAQA,EAAMhP,MAAQ,0vBCrM/B,IAAMxC,EAAazF,EAAQ,IACrB0F,EAAc1F,EAAQ,GAEtBqX,EAASrX,EAAQ,IACjB6F,EAAQ7F,EAAQ,IAChB4F,EAAY5F,EAAQ,IAEpBsX,EAAUxR,EAAOC,QAAP,SAAAC,GAAA,uBAiBd,SAAAsR,EAAapO,GAAO,IAAAhD,MAAA,mGAAAC,CAAAC,KAAAkR,KAClBlR,MAAAF,MAAAG,EAAAiR,GAAAhR,KAAAF,sDAEKH,GAAKsR,EAAQrO,GAClBhD,EAAKS,KAAOuC,EAAMsO,YAAc,MAChCtR,EAAKwB,OAAS2P,EAAO/S,QAAQ4E,EAAMuO,cAAgB,eACnDH,EAAQ/Q,MAAML,EAAKD,IAAnBO,EAAAN,GAEgB,QAAZA,EAAKD,IAAgBC,EAAKD,MAAMoR,EAAOK,OACzCxR,EAAKyD,MAAQ9D,EAAMvB,QAAQ+S,EAAOK,MAAMxR,EAAKD,KAAOC,EAAKS,MACzDT,EAAKwR,OAAQ,IAEbxR,EAAKyD,MAAQ9D,EAAMvB,QAAQ4B,EAAKD,IAChCC,EAAKwR,OAAQ,GAEfxR,EAAK8C,QAAUE,EAAMzB,QACrBvB,EAAKiD,QAAUD,EAAMyO,mBACrBzR,EAAKoB,OAAS,IAAI7B,EAClBS,EAAKkD,SAAWF,EAAM0O,oBAEtB1R,EAAKyD,MAAMtC,SAASL,KAApBR,EAAAN,IAEkB,QAAdA,EAAKS,KACPT,EAAKyD,MAAMkO,QAAQ,QAAnBrR,EAAAN,KAEAA,EAAK2B,UAAYjC,EAAUkS,WAAVtR,EAAAN,GAA2BL,EAAMvB,QAAQ,QAC1D4B,EAAK2B,UAAUgQ,QAAQ,QAAvBrR,EAAAN,KA1BgBA,EAjBN,yOAAAgC,CAAAoP,EAAuC5R,KAAvC4R,IAAA,EAAAlP,IAAA,UAAAhF,MAAA,SACEuD,EAAMoR,GACpB,IAAM9R,EAAKU,EAAI,GAAAnC,OAAMmC,EAAN,KAAAnC,OAAcuT,GAAW,MACxC,OAAOT,EAAQ/Q,MAAMN,KAHT,CAAAmC,IAAA,SAAAhF,MAAA,SAMC8F,GACb,IAAMjD,EAAKsR,EAAQrO,GACbzB,EAAU6P,EAAQ/Q,MAAMN,GAC9B,OAAKwB,GAELA,EAAQuB,QAAUE,EAAMzB,QACxBA,EAAQ0B,QAAUD,EAAMyO,mBACxBlQ,EAAQ2B,SAAWF,EAAM0O,oBAClBnQ,GALc,IAAI6P,EAAQpO,EAAOjD,SAT5B,kCAAAqR,EAAA,GAyDhB,SAASC,EAASrO,GAChB,OAAOA,EAAMsO,WAAN,GAAAhT,OAAsB0E,EAAMsO,WAA5B,KAAAhT,OAA0C0E,EAAMuO,cAAiB,MAV1EH,EAAQ/Q,MAAQ,GAChB+Q,EAAQvP,OAAO,QAAS,CAAC,SAAU,SAAU,WAC3C,OAAuB,IAAhB3B,KAAK4C,OAAe,EAAI5C,KAAK4C,OAAS5C,KAAK6B,+nDCxDpD,IACM+P,EADYhY,EAAQ,IACGgY,WACvBvS,EAAazF,EAAQ,IACrB0P,EAAO1P,EAAQ,IACf0F,EAAc1F,EAAQ,GACpBM,EAAON,EAAQ,GAAfM,GAEFE,EAASR,EAAQ,GAMjBiY,EAAQnS,EAAOC,QAAP,SAAAC,GAAA,aAaZ,SAAAiS,EAAanR,EAAMe,GAA0B,IAAA3B,+FAAAC,CAAAC,KAAA6R,IAC3C/R,EAAAsO,EAAApO,KAAAC,EAAA4R,GAAA3R,KAAAF,QACKU,KAAOA,EACZZ,EAAKgS,OAASD,EAAMnR,KAAKZ,EAAKY,MAC9BZ,EAAKiS,WAAa,IAAI1S,EACtBS,EAAK2B,UAAYA,EAL0B,QAAAuQ,EAAAtU,UAAAE,OAAZqU,EAAY,IAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAZF,EAAYE,EAAA,GAAAzU,UAAAyU,GAAA,OAM3CrS,EAAKmS,WAAaA,EAElBnS,EAAKiS,WAAWzT,OAAO,SAAU,WAC/BwB,EAAK0B,QAAQ,CAAC,aAAc,kBAG9B1B,EAAKsS,UAZsCtS,EAbjC,yOAAAgC,CAAA+P,EAAqCvS,GAArCyC,EAAA8P,EAAA,OAAA7P,IAAA,YAAAhF,MAAA,SACMqV,GAChB,GAAyB,QAArBA,EAAM9O,MAAMhD,KAAhB,CAEA,IAAM+R,EAAQ,IAAIT,EAAM,UAAWQ,EAAM9O,MAAM9B,UAAW4Q,GAM1D,OALAC,EAAM/Q,MAAM8Q,EAAO,CAAC,QAAS,UAAW,kBAAMC,EAAMF,YACpDE,EAAM/Q,MAAM8Q,EAAM9O,MAAO,cAAe,kBAAM+O,EAAMF,YACpDE,EAAM/Q,MAAM8Q,EAAM9O,MAAM9B,UAAW,CAAC,OAAQ,QAAS,kBAAM6Q,EAAMF,YACjEC,EAAM9O,MAAMrC,OAAO5C,OAAO,SAAU,kBAAMgU,EAAMF,WAAWE,GAEpDA,OAVGvQ,EAAA8P,EAAA,EAAA7P,IAAA,UAAAhF,MAAA,WA6BVgD,KAAK+R,WAAWQ,OAAO,EAAGvS,KAAK+R,WAAWnU,QAC1CoC,KAAK+R,WAAW1K,QAAQ,UACxBrH,KAAK8R,OAALvP,MAAAvC,KAAA,CAAYA,MAAZ5B,OAAAoU,EAAqBxS,KAAKiS,cAC1BjS,KAAKqH,QAAQ,aAhCH,CAAArF,IAAA,eAAAhF,MAAA,SAuCE6T,EAAO4B,GACnB,IAAM5S,EAAE,GAAAzB,OAAMyS,EAAMxP,QAAQC,OAAOP,KAA3B,KAAA3C,OAAmCqU,EAAO5B,EAAMhP,MAAQ,QAC1D6Q,EAAY1S,KAAK+R,WAAWY,KAAK,SAAA3I,GAAC,OAAIA,EAAEnK,KAAOA,IACrD,GAAI6S,EACF,OAAOA,EAEP,IAAME,EAAe,CAAE/S,MAEvB,OADAG,KAAK+R,WAAWnR,KAAKgS,GACdA,IA/CC,CAAA5Q,IAAA,eAAAhF,MAAA,SAmDE6T,EAAOjO,GACnB,IAAM8P,EAAY1S,KAAK6S,aAAahC,EAAOjO,EAAS,GACpD5C,KAAK8S,aAAaJ,EAAW7B,EAAOkC,OAAOnQ,IAAW8P,EAAU9P,UArDtD,CAAAZ,IAAA,eAAAhF,MAAA,SAwDE0V,EAAW7B,EAAOjO,GAC9B8P,EAAU9P,OAASA,EACnB8P,EAAUM,KAAOpQ,EAASiO,EAAMhP,MAChC6Q,EAAU7B,MAAQA,EAClB7Q,KAAK+R,WAAW1K,QAAQ,cA5DdwK,EAAA,GA8Gd,SAASoB,EAAoBC,GAC3B,OACEA,EAAGtQ,OAAS,GAAuB,SAAlBsQ,EAAGrC,MAAM1B,MACvB+D,EAAGtQ,OAAS,GAAuB,SAAlBsQ,EAAGrC,MAAM1B,KAEtB,MAEA,OA+HX,SAASgE,EAAwBlS,GAA4B,IAAlBmS,EAAkB1V,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAAH,EACxD,OAAOuD,EAASqC,OAAO,SAAAjC,GAAO,OAAIA,EAAQgS,gBAAkBD,IAO9D,SAASE,EAAuBjB,EAAO5Q,EAAW8R,GAChD,IAAMjQ,EAuBR,SAA0B+O,EAAOe,GAC/B,IAAMI,EAA4B,aAAfnB,EAAMoB,MAAwC,IAAjBpB,EAAMzP,OACtD,OAAO,SAAAiO,GACL,OACEA,EAAMxP,QAAQgS,gBAAkBD,GAC7BvC,EAAMpB,WAAa2D,EAAehZ,EAAOsZ,qBACxCF,GAAcJ,EAAevC,EAAMT,UAAYhW,EAAOuZ,gBA7B/CC,CAAgBvB,EAAOwB,KAAKC,IAAIP,IAC/C1B,EAAMnR,KAAKmK,MAAMwH,EAAMC,MAAOiB,EAAM,CAAE9R,YAAW6B,WA0EnD,SAASyQ,EAAO/W,EAAOgX,EAAKC,GAC1B,OAAOJ,KAAKG,IAAIH,KAAKI,IAAIjX,EAAOgX,GAAMC,GAzQxCpC,EAAMlQ,OAAO,aAAc,aAAc,WACvC,OAAOkQ,EAAMqC,uBAAuBlU,KAAK+R,cAE3CF,EAAMlQ,OAAO,cAAe,aAAc,WACxC,OAAOkQ,EAAMsC,wBAAwBnU,KAAK+R,cAO5CF,EAAMqC,uBAAyB,WAA2B,IAAjBnC,EAAiBrU,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAAJ,GAC9C0W,EAAa,IAAIxC,EAAW,CAChCyC,KAAM,eACNC,QAAS,KACTxM,OAAQ1N,EAAO+D,UAAUoW,YAM3B,OAJAxC,EAAWhO,QAAQ,SAAA2O,GACjB0B,EAAWI,aAAa,cAuC5B,SAA2B9B,GACzB,IAII+B,EAJE5D,EAAQ6B,EAAU7B,MAClB9G,EAAO8G,EAAMxP,QAAQd,KAAO,IAAMsQ,EAAMxP,QAAQC,OAAO9D,QAK3DiX,EADoC,QAAlCxB,EAAmBP,GACb,CACN3P,OAAQgH,EACR/G,QANU,MAOVJ,OAAQ8P,EAAU9P,OAASiO,EAAM6D,QAAQC,EAAI9D,EAAM6D,QAAQE,EAC3D/S,MAAO,CAAE8S,EAAG9D,EAAM6D,QAAQE,EAAGA,EAAG/D,EAAM6D,QAAQC,IAGxC,CACN5R,OAZU,MAaVC,QAAS+G,EACTnH,OAAQ8P,EAAU9P,OAClBf,MAAOgP,EAAM6D,SAMjB,OAHAD,EAAM7R,OAASiR,KAAKC,IAAIW,EAAM7R,QAAQiS,QAAQ,GAC9CJ,EAAMK,QAAUpC,EAAU7B,MAAMhR,GAEzB4U,EA/DkCM,CAAiBrC,MAGnD0B,GAGTvC,EAAMsC,wBAA0B,WAA2B,IAAjBpC,EAAiBrU,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAAJ,GAC/CsX,EAAO,GAcb,OAbAjD,EAAWhO,QAAQ,SAAAmP,GACc,QAA3BD,EAAmBC,GACrB8B,EAAKpU,KAAL,KAAAxC,OACJlE,EAAG,OADC,KAAAkE,OACSkL,EAAK4J,EAAGtQ,QADjB,KAAAxE,OAC4B8U,EAAGrC,MAAMxP,QAAQd,KAD7C,KAAAnC,OACqDlE,EAAG,MADxD,KAAAkE,OAEJkL,EAAK4J,EAAGrC,MAAMhP,OAFV,KAAAzD,OAEoBhE,EAAOsL,SAF3B,aAKAsP,EAAKpU,KAAL,KAAAxC,OACJlE,EAAG,QADC,KAAAkE,OACUkL,EAAK4J,EAAGtQ,QADlB,KAAAxE,OAC6B8U,EAAGrC,MAAMxP,QAAQd,KAD9C,KAAAnC,OACsDlE,EAAG,MADzD,KAAAkE,OAEJkL,EAAK4J,EAAGrC,MAAMhP,OAFV,KAAAzD,OAEoBhE,EAAOsL,SAF3B,eAMGsP,GAiDTnD,EAAMnR,KAAO,GAEbmR,EAAMnR,KAAKuU,OAAS,SAAU3C,EAAOiB,GACnC,GAAKA,EAAL,CAEA,IAAMpE,EAAOoE,EAAO,EAAI,OAAS,OAC3B3Q,EAASiR,KAAKC,IAAIP,GAClB1C,EAAQyB,EAAM7Q,UAAUiP,UAAUvB,EAAM,SAAA0B,GAC5C,OAAOA,EAAMpB,WAAa7M,IAE5B0P,EAAMkC,aAAa3D,EAAOjO,KAG5BiP,EAAMnR,KAAKmK,MAAQ,SAAUyH,EAAOiB,EAAjBrQ,GAA8C,IAArBzB,EAAqByB,EAArBzB,UAAW6B,EAAUJ,EAAVI,OACrD,GAAKiQ,EAAL,CAEA,IAAMpE,EAAOoE,EAAO,EAAI,OAAS,OAC3B1C,GAASpP,GAAa6Q,EAAM7Q,WAAWiP,UAAUvB,EAAM7L,GACzDuN,GAAOyB,EAAMkC,aAyHnB,SAAwB3D,GAA6C,IAAtCqE,EAAsCxX,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAAzBtD,EAAO+a,iBAC3CC,EAAQ5U,OAAOC,OAAO,GAAIoQ,GAC1BwE,EAAOH,EAAarE,EAAMxP,QAAQkC,MAAM9B,UAAU,WAAa,IAElD,SAAfoP,EAAM1B,KAAiBiG,EAAMvT,MAAQgP,EAAMhP,OAAS,EAAIwT,GACvDD,EAAMvT,MAAQgP,EAAMhP,OAAS,EAAIwT,GAElCxE,EAAMxP,QAAQkC,MAAM3B,aAa1B,SAA0BiP,GAAsC,IAA/BL,EAA+B9S,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAAtBtD,EAAOkb,UAAY,EACrDC,EAAW1E,EAAMxP,QAAQkC,MAAM1B,MAClB,SAAfgP,EAAM1B,KACR0B,EAAMhP,MAAQkS,EAAMlD,EAAMhP,MAAO0T,GAAY,EAAI/E,GAAS+E,GAE1D1E,EAAMhP,MAAQkS,EAAMlD,EAAMhP,MAAO0T,EAAUA,GAAY,EAAI/E,IAlBxBgF,CAAgBJ,GAGrD,OAoCF,SAA4BvE,GAC1B,IAAMhF,EAAQgF,EAAMxP,QAAQI,UAAUoK,MAQtC,IANAgF,EAAM6D,QAAU,CACdC,EAAGrL,EAAmB,KAAduH,EAAMhP,MAAqB,GACnC+S,EAAGtL,EAAmB,KAAduC,EAAMhK,MAAqB,IAI9BgP,EAAM6D,QAAQC,EAAI,WAAa9D,EAAM6D,QAAQE,EAAI,WACtD/D,EAAM6D,QAAQC,EAAIrL,EAAKuH,EAAM6D,QAAQC,EAAI,GAAI,GAC7C9D,EAAM6D,QAAQE,EAAItL,EAAKuH,EAAM6D,QAAQE,EAAI,GAAI,GAjD/Ca,CAAkBL,GAEXA,EAnIuBM,CAAc7E,GAAQgD,KAAKC,IAAIP,MAO/D1B,EAAMnR,KAAKW,QAAU,SAAUiR,EAAOD,GACpC,IAAM9O,EAAQ8O,EAAM9O,MACd9B,EAAY8B,EAAM9B,UAIxB,GAAqB,OAAjB4Q,EAAMsD,QAAyC,IAAtBtD,EAAMuD,YAEnC,GAAKnU,EAAU4O,SAAY5O,EAAU6O,QAArC,CAKA,GAAI/M,EAAMsS,YAER,GADsBtS,EAAMrC,OAAOoC,OAAO,SAAAuN,GAAK,OAAKA,EAAMiF,WACxClY,OAEhB,YADA0U,EAAMyD,YAAc,CAAC7b,EAAG,qBAmB9B,SAA4BmY,GAAiD,IAA1C2D,EAA0CtY,UAAAE,OAAA,QAAAC,IAAAH,UAAA,GAAAA,UAAA,GAA9BtD,EAAO6b,sBAC9ChV,EAAWoR,EAAM9O,MAAMtC,SAC7B,GAAwB,IAApBA,EAASrD,OAEX,YADAqD,EAAS,GAAGoS,eAAiBhB,EAAMuD,aAIrC,IAAMM,GAAgB5M,EAAK+I,EAAMzP,OAAS3B,EAASrD,OAAQ,GACrDuY,GAAa7M,EAAK4M,GAAgB,EAAIF,GAAY,GAClDI,GAAa9M,EAAK4M,GAAgB,EAAIF,GAAY,GAExD/U,EAAS8C,QAAQ,SAAA1C,GACXgR,EAAMgE,WAAa,EACrBhV,EAAQgS,eAAiB+C,EAAY/U,EAAQuB,OAE7CvB,EAAQgS,eAAiBhS,EAAQuB,OAASuT,IA3B9CG,CAAkBjE,IAoCpB,SAA+BA,GAE7B,QAASc,EADQd,EAAM9O,MAAMtC,SACaoR,EAAMuD,aAAahY,OArCzD2Y,CAAqBlE,GA2D3B,SAAwBA,GACtB,IAAMmE,EAAmBrD,EAAuBd,EAAM9O,MAAMtC,UACtDwV,EAAkBD,EAAiBhT,IAAI,SAAAwG,GAAC,OAAIA,EAAEqJ,iBAC9CqD,EAAgBD,EAAgBhU,OAAO,SAACuH,EAAGtH,GAAJ,OAAYsH,EAAItH,GAAK,GAE5DiU,EADcF,EAAgBjT,IAAI,SAAAwG,GAAC,OAAIA,EAAI0M,IAChBlT,IAAI,SAAAwG,GAAC,OAAKV,EAAKU,EAAIqI,EAAMgE,WAAY,KAEtEG,EAAiBzS,QAAQ,SAAC1C,EAASmL,GACjC8G,EAAsBjB,EAAOhR,EAAQI,UAAWkV,EAAanK,MAhE7DoK,CAAcvE,GAFdiB,EAAsBjB,EAAO5Q,EAAW4Q,EAAMgE,iBAhB9C/D,EAAMyD,YAAc,CAAC7b,EAAG,0CA0KnB8H,GACF6P,EAAM7P,KAAM6P,EAAM7P,GAAO,mBAAA6U,EAAAnZ,UAAAE,OAAIqU,EAAJ,IAAAC,MAAA2E,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAI7E,EAAJ6E,GAAApZ,UAAAoZ,GAAA,OAAAC,EAAuBlF,EAAvB,CAA6B7P,GAA7B5D,OAAqC6T,OADrE,IAAK,IAAIjQ,KAAO6P,EAAMnR,KAAMsW,EAAnBhV,uBClXT,IAAM7H,EAAYuF,EAAOC,QAEnB5F,EAAOH,EAAQ,GAEfqd,EAAUld,EAAKoM,OAAO,MAAO,CAAEK,QAAQ,IAC7CzM,EAAK2M,OAAOC,SAASC,KAAMqQ,GAE3BzW,OAAOC,OAAOwW,EAAQxQ,MAAO,CAC3BuB,SAAU,QACVC,OAAQ,IACRE,IAAK,EACLC,MAAO,OACPE,OAAQ,SAGVnO,EAAU8D,OAAS,kBAAMlE,EAAK4E,KAAKsY,IACnC9c,EAAUqE,QAAU,kBAAMzE,EAAKwN,KAAK0P,ynCChBpC,IAAM5N,EAAQzP,EAAQ,IAChBsU,EAAYtU,EAAQ,IACpByF,EAAazF,EAAQ,IACrB0F,EAAc1F,EAAQ,GACpBkM,EAAYlM,EAAQ,GAApBkM,QACA5L,EAAON,EAAQ,GAAfM,GAEFuF,EAAQ7F,EAAQ,IAChBsX,EAAUtX,EAAQ,IAClBQ,EAASR,EAAQ,GAEjBsd,EAAStd,EAAQ,aA2GRud,kEAAf,SAAAjL,IAAA,IAAAkL,EAAA,OAAApb,EAAAC,KAAA,SAAAmQ,GAAA,cAAAA,EAAAjQ,KAAAiQ,EAAAhQ,MAAA,cACQgb,EAAUlJ,EAAUhQ,QAAQkZ,UADpChL,EAAAjQ,KAAA,EAAAiQ,EAAAhQ,KAAA,EAGUiN,EAAMI,IAAI2N,GAHpB,OAAAhL,EAAAhQ,KAAA,qBAAAgQ,EAAAjQ,KAAA,EAAAiQ,EAAAlP,GAAAkP,EAAA,SAKU,IAAItO,MAAM5D,EAAG,4CALvB,wBAAAkS,EAAA9O,SAAA4O,EAAA,wCArGAxM,EAAOC,QAAP,SAAAC,GAAA,aAiBE,SAAAvF,EAAaka,GAAW,IAAAzU,MAAA,mGAAAC,CAAAC,KAAA3F,KACtB2F,OAAAC,EAAA5F,GAAA6F,KAAAF,MAAAF,mDAGA3C,QAAQyI,IAARxF,EAAAN,IAEAA,EAAKyU,UAAYA,EACjBzU,EAAK6D,OAAS,IAAItE,EAClBS,EAAKmB,SAAW,IAAI5B,EACpBS,EAAKuX,mBAAqBhd,EAAUgd,mBAAmB9C,GAEvDzU,EAAK6B,OAAO,QAAS,SAAU,WAC7B,OAAO7B,EAAK6D,OACTL,OAAO,SAAAC,GAAK,OAAIA,EAAM+T,cACtB7U,OAAO,SAACC,EAAKsH,GAAN,OAAYtH,EAAMsH,EAAEhN,OAAO,KAEvC8C,EAAK6D,OAAOvC,OAAO,SAAAmC,GAAK,OACtBzD,EAAKyB,MAAMgC,EAAO,CAAC,QAAS,eAAgB,kBAAMzD,EAAK0B,QAAQ,aAGjE1B,EAAA,KAAW,EApBWA,EAjB1B,yOAAAgC,CAAAzH,EAAyCiF,GAAzCyC,EAAA1H,EAAA,OAAA2H,IAAA,UAAAhF,MAAA,eAAAua,EAAArV,EAAAlG,EAAAmG,KAAA,SAAApG,EACwByB,GADxB,IAAAga,EAAArZ,EAAA,OAAAnC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEU+a,IAFV,cAAAjb,EAAAE,KAAA,EAI8B8R,EAAUhQ,QAAQV,QAAQA,GAJxD,YAIUga,EAJVtb,EAAAU,MAKoByX,KALpB,CAAAnY,EAAAE,KAAA,cAMY,IAAI0B,MAAM5D,EAAG,+CANzB,cAAAgC,EAAAE,KAAA,EAOc8R,EAAUhQ,QAAQuZ,eAAeD,EAAYE,YAP3D,WAAAxb,EAAAU,KAAA,CAAAV,EAAAE,KAAA,eAQY,IAAI0B,MAAM5D,EAAG,kBARzB,eAUUiE,EAAY,IAAI9D,EAAUmd,EAAYE,YAC5CxJ,EAAUyJ,OAAO7P,OAAS3J,EAAUX,QAAUA,EAC9CW,EAAUyZ,gBAZd1b,EAAAkG,OAAA,SAcWjE,GAdX,yBAAAjC,EAAAoB,SAAAvB,MAAA,gBAAA0H,GAAA,OAAA8T,EAAAhV,MAAAvC,KAAAtC,YAAA,MAAAqE,EAAA1H,EAAA,EAAA2H,IAAA,gBAAAhF,MAAA,eAAA6a,EAAA3V,EAAAlG,EAAAmG,KAAA,SAAA5E,IAAA,OAAAvB,EAAAC,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EAgDY4D,KAAK8X,aAhDjB,cAAAna,EAAAvB,KAAA,EAiDY0J,EAAQ,KAjDpB,OAAAnI,EAAAvB,KAAA,gCAAAuB,EAAAL,SAAAC,EAAAyC,SAAA,yBAAA6X,EAAAtV,MAAAvC,KAAAtC,YAAA,KAAAsE,IAAA,aAAAhF,MAAA,eAAA+a,EAAA7V,EAAAlG,EAAAmG,KAAA,SAAAuB,IAAA,IAAAsU,EAAA,OAAAhc,EAAAC,KAAA,SAAA6H,GAAA,cAAAA,EAAA3H,KAAA2H,EAAA1H,MAAA,cAAA0H,EAAA3H,KAAA,EAAA2H,EAAA1H,KAAA,EAuD4B4D,KAAKqX,mBAAmBnX,OAvDpD,OAuDY8X,EAvDZlU,EAAAlH,KAwDMoD,KAAK6O,OAAOmJ,GAxDlBlU,EAAA1H,KAAA,gBAAA0H,EAAA3H,KAAA,EAAA2H,EAAA5G,GAAA4G,EAAA,SA0DM3G,QAAQC,MAAR0G,EAAA5G,IA1DN,yBAAA4G,EAAAxG,SAAAoG,EAAA1D,KAAA,qCAAA+X,EAAAxV,MAAAvC,KAAAtC,YAAA,KAAAsE,IAAA,SAAAhF,MAAA,eAAAib,EAAA/V,EAAAlG,EAAAmG,KAAA,SAAA6B,EA8DgBgU,GA9DhB,IAAAhB,EAAAxK,EAAA3F,EAAA7G,KAAA,OAAAhE,EAAAC,KAAA,SAAAiI,GAAA,cAAAA,EAAA/H,KAAA+H,EAAA9H,MAAA,OAiEI,IAASoQ,KAFTxM,KAAKgY,QAAUA,EA/DnBhB,EAAA,SAiEaxK,GACP,IAAMnL,EAAU6P,EAAQrC,OAAOmJ,EAAQ/W,SAASuL,IAC1CjJ,EAAQlC,EAAQkC,OAEc,IAAhCsD,EAAKlD,OAAOuU,QAAQ3U,IACtBsD,EAAKlD,OAAO/C,KAAK2C,GACjBsD,EAAK5F,SAASL,KAAKS,GACnBkC,EAAMhC,MAAMsF,EAAM,QAAS,kBAAMtD,EAAM/B,QAAQ,WAC/C+B,EAAM4U,YACuC,IAApCtR,EAAK5F,SAASiX,QAAQ7W,IAC/BwF,EAAK5F,SAASL,KAAKS,IAVL2W,EAAQ/W,SAAU+V,EAA3BxK,GAjEb,IA+EQxM,KAAA,IA/ER,CAAAkE,EAAA9H,KAAA,uBAgFa4D,KAAA,IAhFbkE,EAAA9H,KAAA,EAiFYqD,EAAMwD,gBAjFlB,cAkFMjD,KAAKkB,OAASgW,EAAOkB,aAAapY,MAlFxCkE,EAAA9H,KAAA,GAmFY4D,KAAKkB,OAAOmX,SAnFxB,QAoFMrY,KAAKqH,QAAQ,QApFnB,yBAAAnD,EAAA5G,SAAA0G,EAAAhE,SAAA,gBAAAgM,GAAA,OAAAiM,EAAA1V,MAAAvC,KAAAtC,YAAA,OAAAsE,IAAA,qBAAAhF,MAAA,SAwC6BuX,GAEzB,OADerG,EAAUhQ,QAAQ+R,SACnBqI,WAAW/D,UAAUA,OA1CvCla,EAAA,GA6FAoF,EAAMkC,OAAO,QAAS,QAAS,WAC7B,OAAOvH,EAAO+D,WAAa,IAAM6B,KAAKhD,MAAQ5C,EAAO+D,UAAUoa,+vBC/GjE,IAAMC,EAAU5e,EAAQ,IAClB6e,EAAU7e,EAAQ,GAClB0F,EAAc1F,EAAQ,GAMtBqX,EAASvR,EAAOC,QAAP,SAAAC,GAAA,uBAKb,SAAAqR,EAAazT,GAAS,IAAAsC,MAAA,mGAAAC,CAAAC,KAAAiR,KACpBjR,MAAAF,MAAAG,EAAAgR,GAAA/Q,KAAAF,sDAEKxC,QAAUA,EACfsC,EAAK4Y,MAAQF,EAAQlc,IAAIkB,GACzBsC,EAAKiB,KAAO0X,EAAQE,QAAQ7Y,EAAK4Y,OAAS5Y,EAAKtC,SAC/CyT,EAAO3U,IAAIkB,GAAX4C,EAAAN,GAEAA,EAAK6D,OAAS,GARM7D,EALT,yOAAAgC,CAAAmP,EAAsC3R,KAAtC2R,IAAA,EAAAjP,IAAA,UAAAhF,MAAA,SACGQ,GACd,OAAOyT,EAAO3U,IAAIkB,IAAY,IAAIyT,EAAOzT,SAF9B,kCAAAyT,EAAA,GAiBfA,EAAO3U,IAAM,GAMb2U,EAAOK,MAAQ,CACbsH,+DAAgE,MAChEC,+DAAgE,MAChEC,+DAAgE,MAChEC,+DAAgE,MAChEC,+DAAgE,MAChEC,+DAAgE,MAChEC,+DAAgE,MAChEC,gEAAiE,MACjEC,gEAAiE,MAEjEC,+DAAgE,KAChEC,gEAAiE,KACjEC,+DAAgE,KAChEC,+DAAgE,KAChEC,gEAAiE,KACjEC,gEAAiE,KACjEC,gEAAiE,KACjEC,gEAAiE,KAEjEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,+DAAgE,KAChEC,iEAAkE,KAClEC,+DAAgE,KAChEC,gEAAiE,y1DCvEnE,IAAMhN,EAAYtU,EAAQ,IACpBuhB,EAAWvhB,EAAQ,IACnByF,EAAazF,EAAQ,IACrB0P,EAAO1P,EAAQ,IACf0F,EAAc1F,EAAQ,GACtBwhB,EAAYxhB,EAAQ,GAA6ByhB,kBAC/C9R,EAAQ3P,EAAQ,GAAhB2P,IAEF9J,EAAQ7F,EAAQ,IAChBsX,EAAUtX,EAAQ,IAMlBsd,uGAAe7X,iKAmBLic,iCAAQ,uBAEbtb,KAAKyJ,MAAMhN,KAAK,kBAAM4B,WAAW,kBAAMyB,EAAKuY,UAAUiD,+PAKrCH,EAASnb,KAAKub,YAAa,CAAE1Q,MAAO,aAApD2Q,SACNxb,KAAK6O,OAAO2M,mDAEZre,QAAQC,MAARO,EAAAT,8IAIIse,GACNxb,KAAK+D,QAAQ,SAAA8M,GAAK,OAAIA,EAAM4K,OAAQ,IACpC,IAAMva,EAASsa,EAAQhY,IAAI,SAAA+I,GAAM,OAAImP,EAAM7M,OAAOtC,KAASjJ,OAAO,SAAA0G,GAAC,OAAIA,IACvEhK,KAAKuS,OAALhQ,MAAAvC,KAAA,CAAY,EAAG,GAAf5B,OAAAoU,EAAqBtR,KACrBlB,KAAK2b,wCAIL,IAAK,IAAInP,EAAQxM,KAAKpC,OAAS,EAAG4O,GAAS,EAAGA,IAAS,CACrD,IAAMqE,EAAQ7Q,KAAKwM,GACdqE,EAAM4K,QACTzb,KAAKuS,OAAO/F,EAAO,GACnBqE,EAAMpJ,mDA5CStJ,GACnB,IAAM+C,EAASgW,EAAO0E,WAAWzd,EAAUoW,WAE3C,OADA6G,EAAUla,EAAQ,YAAa/C,GACxB+C,qCAGUqT,GACjB,IAAMrT,EAAS,IAAIgW,EAGnB,OAFAkE,EAAUla,EAAQ,YAAaqT,GAC/B6G,EAAUla,EAAQ,cAAegW,EAAOqE,YAAYhH,IAC7CrT,sCAGWqT,GAElB,OADerG,EAAUhQ,QAAQ+R,SACnB/O,OAAO,WAAYqT,YAmC/BmH,2BAWJ,SAAAA,EAAanP,GAAQ,IAAA1F,EAAA9G,EAAAC,KAAA0b,IACnB7U,EAAAuH,EAAApO,KAAAC,EAAAyb,GAAAxb,KAAAF,QAEK6b,OAASC,EAAWvP,GACzBmP,EAAMvb,MAAM0G,EAAKgV,QAAjBzb,EAAAyG,GAEA,IAAMgF,EAAQpM,EAAMvB,QAAQ,OACtBqF,EAAQgJ,EAAOxJ,OAAOqO,WAAa7E,EAAOxJ,OAASwJ,EAAOvJ,QAP7C,OAQnB6D,EAAKxF,QAAU6P,EAAQhT,QAAQqF,EAAM6N,WAAY7N,EAAM8N,cACvDxK,EAAKtD,MAAQsD,EAAKxF,QAAQkC,MAC1BsD,EAAKsI,KAAO5C,EAAOxJ,OAAOqO,WAAa,MAAQ,OAE/CvK,EAAKlF,OACH,QACA,WACc,SAAdkF,EAAKsI,KACD,kBAAMtD,EAAMhK,MAAQgF,EAAKkV,UACzB,kBAAMlQ,EAAMhK,MAAQgF,EAAKkV,WAE/BlV,EAAKtF,MAAMsK,EAAO,QAAS,kBAAMhF,EAAKrF,QAAQ,WAE9CqF,EAAKmV,OAAOzP,GAEZ1F,EAAKxF,QAAQH,OAAON,KAApBR,EAAAyG,IACAA,EAAKtD,MAAMrC,OAAON,KAAlBR,EAAAyG,IAEAA,EAAKvI,OAAO,UAAW,kBACdod,EAAMvb,MAAM0G,EAAKgV,QACxBhV,EAAKxF,QAAQH,OAAOqR,OAAO1L,EAAKxF,QAAQH,OAAOgX,QAApB9X,EAAAyG,IAAmC,GAC9DA,EAAKtD,MAAMrC,OAAOqR,OAAO1L,EAAKtD,MAAMrC,OAAOgX,QAAlB9X,EAAAyG,IAAiC,KA7BzCA,aAXHvH,2CACFiN,GACd,OAAOmP,EAAMvb,MAAM2b,EAAWvP,mCAGjBA,GACb,IAAMsE,EAAQ6K,EAAMxd,QAAQqO,GAC5B,IAAIsE,EACC,OAAO,IAAI6K,EAAMnP,GADXsE,EAAMmL,OAAOzP,yCAqClBA,GACN/L,OAAOC,OAAOT,KAAMuM,GACpBvM,KAAKyb,OAAQ,EAEbzb,KAAK+b,SAAWxP,EAAO1K,MACvB7B,KAAKwB,QAAQ,SACbxB,KAAKic,UAAY1P,EAAO3J,OACN,QAAd5C,KAAKmP,OACPnP,KAAK4C,OAAS0G,EAAKtJ,KAAKic,UAAYjc,KAAK+b,SAAU,IAGrD/b,KAAK+N,KAAOxE,EAAIvJ,KAAKkc,oBACrBlc,KAAK8V,SAAW9V,KAAK+N,OAASxE,aAUlC,SAASuS,EAAYvP,GACnB,SAAAnO,OAAUmO,EAAO1M,GAAjB,KAAAzB,OAAuBmO,EAAO4P,sBAPhCT,EAAMvb,MAAQ,GAcdT,EAAOC,QAAUuX,oBC5IDvX,EAERrF,cAAgB,SAAU8hB,GAChC,OACEA,EAAQC,aAAeD,EAAQE,cAC5BF,EAAQG,YAAcH,EAAQI,ssCCLrC,IAAM1iB,EAAMF,EAAQ,IACd0P,EAAO1P,EAAQ,IACfI,EAAOJ,EAAQ,IACbM,EAAON,EAAQ,GAAfM,GACA0X,EAAehY,EAAQ,IAAvBgY,WAEF7L,EAAYnM,EAAQ,IACpBQ,EAASR,EAAQ,GAMjBW,2BACJ,SAAAA,EAAa4D,GAAW,IAAA2B,EAAAC,EAAAC,KAAAzF,IACtBuF,EAAAsO,EAAApO,KAAAC,EAAA1F,GAAA2F,KAAAF,KAAA,sBAAA5B,OAEIlE,EAAG,YAFP,oDAQKiE,UAAYA,EAEjB,IAAMtD,EAAO,IAAIb,EAXK,OAatBa,EAAK4W,QAAQ,OAAbrR,EAAAN,IAEAjF,EAAKK,IACH,SACAhB,EAAG,eACH,IAAIK,EAAY2c,OAAO/Y,GACvB,UAnBoB2B,aADAhG,QA4B1BS,EAAY2c,OAAZ,SAAAuF,GAAA,aACE,SAAAC,EAAave,GAAW,IAAA0I,EAAA,OAAA9G,EAAAC,KAAA0c,IACtB7V,EAAAuH,EAAApO,KAAAC,EAAAyc,GAAAxc,KAAAF,KAAA,+CAAA5B,OAIQlE,EAAG,QAJX,qBAAAkE,OAKQlE,EAAG,SALX,qBAAAkE,OAMQlE,EAAG,aANX,qBAAAkE,OAOQlE,EAAG,UAPX,qBAAAkE,OAQQlE,EAAG,SARX,6IAAAkE,OAYQlE,EAAG,cAZX,yEAAAkE,OAkBAlE,EAAG,uDAlBH,QAAAkE,OAmBAlE,EACA,gFApBA,QAAAkE,OAsBAlE,EACA,gFAvBA,mBA4BKiE,UAAYA,EACjB0I,EAAK3F,OAAS/C,EAAU+C,OACxB2F,EAAK8V,eAAiBviB,EAAOsL,SA/BPmB,EAD1B,OAAA/E,EAAA4a,EAAkD5iB,GAAlDiI,EAAA2a,EAAA,EAAA1a,IAAA,cAAAhF,MAAA,SAmCe6T,GACX,OAAO,IAAItW,EAAYmhB,MAAM7K,KApCjC,CAAA7O,IAAA,eAAAhF,MAAA,WAuCkB,IAAAsK,EAAAtH,KACd,GAAKA,KAAKkB,OAAOtD,OAAjB,CAEA,IAAMgf,EAAW,CACfvI,KAAM,eACNwI,QAAS,SACTvI,QAAS,KACTxM,OAAQ9H,KAAK7B,UAAUoW,WAGnBH,EAAa,IAAIxC,EAAWgL,GAClC5c,KAAKkB,OAAO6C,QAAQ,SAAA8M,GAClBuD,EAAWI,aAAa,cAAe,CAAEM,QAASjE,EAAMhR,GAAI+C,OAAQ,MAGpD,IAAImD,EAAUqO,EAAW0I,KACjCxe,OAAO,UAAW,WAC1BgJ,EAAKnJ,UAAU2Z,aACfxQ,EAAKnJ,UAAU+C,OAAOuI,aAzD5BiT,EAAA,GA8DAniB,EAAYmhB,MAAZ,SAAAqB,GAAA,aACE,SAAAC,EAAanM,GAAO,IAAArJ,EAAA,OAAAzH,EAAAC,KAAAgd,IAClBxV,EAAA4G,EAAApO,KAAAC,EAAA+c,GAAA9c,KAAAF,KAAA,mPAaK6Q,MAAQA,EACbA,EAAMY,QAAQ,CAAC,qBAAsB,SAAU,SAA/CrR,EAAAoH,IAEAA,EAAKzG,KAAO8P,EAAMtN,MAAMhD,KACxBiH,EAAK2H,KAAsB,QAAf0B,EAAM1B,KAAiBjV,EAAG,OAASA,EAAG,QAClDsN,EAAKlG,OAASuP,EAAMxP,QAAQC,OAAOP,KACnC8P,EAAMtN,MAAM0Z,KAAK,QAAjB7c,EAAAoH,IApBkBA,EADtB,OAAA1F,EAAAkb,EAAgDljB,GAAhDiI,EAAAib,EAAA,EAAAhb,IAAA,OAAAhF,MAAA,SAwBQkgB,GACJ,OAAO5T,EAAK4T,KAzBhB,CAAAlb,IAAA,aAAAhF,MAAA,SA4BcA,GAEV,OADaA,EAAQ,IAAIwQ,KAAKxQ,GAAS,IAAIwQ,MAC/B2P,yBA9BhBH,EAAA,GAkFAtd,EAAOC,QAAUpF,2rCC1LjB,IAAM6iB,EAAaxjB,EAAQ,IACrByjB,EAAYzjB,EAAQ,IAC1BA,EAAQ,IAER,IAAME,EAAMF,EAAQ,IACd0P,EAAO1P,EAAQ,IACfI,EAAOJ,EAAQ,IACbM,EAAON,EAAQ,GAAfM,GAEFojB,EAAW1jB,EAAQ,IACnBQ,EAASR,EAAQ,GACjB2F,EAAa3F,EAAQ,IAMrBY,2BACJ,SAAAA,EAAa2D,GAAW,IAAA2B,EAAA,OAAAC,EAAAC,KAAAxF,IACtBsF,EAAAsO,EAAApO,KAAAC,EAAAzF,GAAA0F,KAAAF,KAAA,kBAAA5B,OACWlE,EAAG,aADd,4FAAAkE,OAMElE,EAAG,sCANL,YAAAkE,OAOElE,EAAG,sDAPL,+BAYKiE,UAAYA,EAEjBA,EAAUsT,QAAQ,QAAlBrR,EAAAN,GAAiC,SAAAkK,GAAC,OAAIV,EAAKU,EAAG,KAC9ClK,EAAK4F,SAAWtL,EAAOsL,SACvB5F,EAAKyd,QAAU,IAAI/iB,EAAagjB,QAAjBpd,EAAAN,IACfA,EAAK2d,UAAY,IAAI3jB,EAAJ,gFAlBKgG,aADChG,qCAwBjByJ,GACFvD,KAAK0d,OAAO1d,KAAK0d,MAAMjW,UACvBlE,GAASA,EAAM3B,aAAe2B,EAAMhD,OAASnG,EAAOsL,SACtD1F,KAAK0d,MAAQ,IAAIljB,EAAamjB,MAAMpa,GAEpCvD,KAAK0d,MAAQ,cAyHnB,SAASE,EAAgBra,GACvB,MAAO,CACLxC,KAAMwC,EAAMxC,KACZR,KAAMgD,EAAMhD,KACZgD,MAAOA,EACPsa,GAAIvU,EAAK/F,EAAMvG,MAAO,GACtB4F,OAAQ0G,EAAK/F,EAAMX,QACnBf,MAAOyH,EAAK/F,EAAM1B,OAClBqT,WAAY3R,EAAM2R,YA5HtB1a,EAAagjB,QAAb,SAAAf,GAAA,aACE,SAAAqB,EAAaC,GAAQ,IAAAlX,EAAA9G,EAAAC,KAAA8d,GACnB,IAAMjjB,EAAO,IAAIb,EADE,OAEnB6M,EAAAuH,EAAApO,KAAAC,EAAA6d,GAAA5d,KAAAF,KAAA,gCAAuCnF,IAEvCA,EAAKK,IAAI,QAAShB,EAAG,SAAU,IAAIM,EAAawjB,MAAMD,IACtDljB,EAAKK,IAAI,QAAShB,EAAG,SAAU,kBAAM,IAAIM,EAAayjB,MAAMF,KAC5DljB,EAAKyD,OAAO,SAAU,SAAAuB,GAAE,OAAIyK,aAAa,wBAA0BzK,IACnEhF,EAAKO,OAAOkP,aAAa,yBAA2B,SAPjCzD,EADvB,OAAA/E,EAAAgc,EAAsDhkB,GAAtDgkB,EAAA,GAYAtjB,EAAawjB,MAAb,SAAAjB,GAAA,aACE,SAAAmB,EAAaH,GAAQ,IAAAzW,EAAA,OAAAvH,EAAAC,KAAAke,IACnB5W,EAAA8G,EAAApO,KAAAC,EAAAie,GAAAhe,KAAAF,KAAA,8BAAA5B,OAGMlE,EAAG,QAHT,mBAAAkE,OAIMlE,EAAG,UAJT,mBAAAkE,OAKMlE,EAAG,UALT,mBAAAkE,OAMMlE,EAAG,SANT,mBAAAkE,OAOMlE,EAAG,SAPT,kDAaK6jB,OAASA,EAEdzW,EAAK6W,UAAYJ,EAAO5f,UAAUwF,OAAOvC,OAAO,SAAAmC,GAC9C,IAAM6a,EAAW,IAAId,EAAS/Z,GAE9B,OADA6a,EAAS1iB,QAAQoD,QAAU,kBAAMwI,EAAKlM,OAAOgjB,IACtCA,IAGT9W,EAAK/F,MAAMwc,EAAO5f,UAAW,QAAS,kBAAMmJ,EAAKwG,SAtB9BxG,EADvB,OAAAxF,EAAAoc,EAAkDpkB,GAAlDiI,EAAAmc,EAAA,EAAAlc,IAAA,OAAAhF,MAAA,WA2BIgD,KAAKme,UAAUrQ,KAAK,SAACyB,EAAGC,GAAJ,OAAUA,EAAEjM,MAAMvG,MAAQuS,EAAEhM,MAAMvG,UA3B1D,CAAAgF,IAAA,SAAAhF,MAAA,SA8BUohB,GACFpe,KAAKzE,WACPyE,KAAKzE,SAASG,QAAQ2K,UAAY,GAClCrG,KAAKzE,SAAS8iB,cAGZre,KAAKzE,WAAa6iB,GACpBpe,KAAK+d,OAAO3iB,SACZ4E,KAAKzE,SAAW,OAEhByE,KAAK+d,OAAO3iB,OAAOgjB,EAAS7a,OAC5B6a,EAAS1iB,QAAQ2K,UAAY,WAC7BrG,KAAKzE,SAAW6iB,EAChBA,EAASE,qBA3CfJ,EAAA,GAgDA1jB,EAAayjB,MAAb,SAAAM,GAAA,aACE,SAAAC,EAAaT,GAAQ,IAAAvW,EAAA,OAAAzH,EAAAC,KAAAwe,IACnBhX,EAAA4G,EAAApO,KAAAC,EAAAue,GAAAte,KAAAF,KAAA,gDACK+d,OAASA,EAEdvW,EAAKlJ,OAAO,UAAW,kBAAMkJ,EAAKkW,OAASlW,EAAKkW,MAAMjW,YACtDD,EAAKjG,MAAMwc,EAAO5f,UAAW,QAAS,WAEpCE,WAAW,kBAAMmJ,EAAKiX,WAAW,KAPhBjX,EADvB,OAAA1F,EAAA0c,EAAkD1kB,GAAlDiI,EAAAyc,EAAA,EAAAxc,IAAA,UAAAhF,MAAA,WAYa,IAAA0hB,EAAA1e,KACLA,KAAK0d,OAAO1d,KAAK0d,MAAMjW,UAE3BzH,KAAK0d,MAAQN,EAAWM,MAAM1d,KAAK2e,UAAW,CAC5CvY,MAAO,GACPwY,OAAQ,CAAEC,SAAS,GACnBnB,MAAO,CAAEhd,KAAM,OACfoe,QAAS,CACPC,YAAW,KAAA3gB,OACjBlE,EAAG,UADc,uCAAAkE,OAEjBlE,EAAG,SAFc,oBAAAkE,OAEahE,EAAOsL,SAFpB,aAAAtH,OAGdlE,EAAG,SAHW,gBAAAkE,OAGYhE,EAAOsL,SAHnB,WAObsZ,YAAa,CACXC,IAAK,CACHC,WAAY,CACVC,OAAQ,4DAEVC,MAAO,CACLC,OAAQ,CACNjkB,OAAQ,SAAA4O,GAAC,OAAI0U,EAAKX,OAAO3iB,OAAO4O,EAAE2L,OAAO2J,QAAQ/b,QACjDgc,gBAAiB,kBAAM,OAM/BC,OAAQ,CACN,CACEze,KAAM7G,EAAG,UACTulB,cAAc,EACdC,mBAAmB,EACnB3X,KAAM/H,KAAK+d,OAAO5f,UAAUwF,OACzBL,OAAO,SAAAC,GAAK,OAAIA,EAAMvG,QACtBwG,IAAIoa,GACJ9P,KAAK,SAACyB,EAAGC,GAAJ,OAAUA,EAAEqO,EAAItO,EAAEsO,YAjDpCW,EAAA,GAoEAhkB,EAAamjB,MAAb,SAAAgC,GAAA,aACE,SAAAC,EAAarc,GAAO,IAAAsc,EAAA,OAAA9f,EAAAC,KAAA4f,IAClBC,EAAAzR,EAAApO,KAAAC,EAAA2f,GAAA1f,KAAAF,KAAA,wBAAA5B,OACiBmF,EAAMhD,KADvB,KAAAnC,OAC+BlE,EAAG,MADlC,KAAAkE,OAC2ChE,EAAOsL,SADlD,2CAAAtH,OAE8BlE,EAAG,cAFjC,yCAMKqJ,MAAQA,EACbsc,EAAKvhB,OAAO,UAAW,kBAAMuhB,EAAKnC,OAASmC,EAAKnC,MAAMjW,YACtDlI,EAAWqL,aAAarH,GAAO9G,KAAK,SAAAsL,GAAI,OAAI8X,EAAKC,UAAU/X,KATzC8X,EADtB,OAAA/d,EAAA8d,EAAkD9lB,GAAlDiI,EAAA6d,EAAA,EAAA5d,IAAA,YAAAhF,MAAA,SAaa+K,GACT/H,KAAK0d,MAAQL,EAAU0C,WAAW/f,KAAK2e,UAAW,CAChDqB,cAAe,CAAEzkB,SAAU,GAC3BmiB,MAAO,CACLuC,gBAAiB,WAEnBC,MAAO,CACL,CAAEC,OAAQ,CAAEC,MAAO,QAAU9X,OAAQ,MAAO+X,OAAQ,CAAExB,SAAS,IAC/D,CAAEsB,OAAQ,CAAEC,MAAO,QAAUjY,IAAK,MAAOG,OAAQ,MAAOgY,OAAQ,IAElEd,OAAQ,CACN,CACE9e,KAAM,SACNK,KAAM,QACNgH,KAAMA,EAAKvE,IAAI,SAAAwG,GAAC,MAAI,CAACA,EAAEyC,MAAOnD,EAAKU,EAAEnI,WAEvC,CACEnB,KAAM,SACNK,KAAM,SACNgH,KAAMA,EAAKvE,IAAI,SAAAwG,GAAC,MAAI,CAACA,EAAEyC,KAAMzC,EAAE0C,UAC/BwT,MAAO,IAGXK,QAAS,CAAE1B,SAAS,SApC1Be,EAAA,GA6CAlgB,EAAOC,QAAUnF,sBC/NjB,IAAM4iB,EAAaxjB,EAAQ,IAE3BwjB,EAAWoD,MAAQ,CACjB9C,MAAO,CAAEuC,gBAAiB,WAC1BnB,QAAS,CAAErY,MAAO,CAAEqC,SAAU,SAC9ByX,QAAS,CAAE1B,SAAS,GAEpBG,YAAa,CACXC,IAAK,CACHwB,kBAAkB,EAClBC,WAAW,EACX1X,OAAQ,UACRkW,WAAY,CAAEzY,MAAO,CAAEqC,SAAU,WAIrC6X,WAAY,CACVC,MAAO,CACL,CACEC,UAAW,CACTxY,SAAU,KAEZyY,aAAc,CACZlC,OAAQ,CAAEC,SAAS,GACnBG,YAAa,CACXC,IAAK,CACH8B,cAAc,EACd7B,WAAY,CACVC,OAAQ,0BACR6B,UAAW,UASzBC,OAAQ,CACN,2BACA,2BACA,2BACA,2BACA,2BACA,2BAEA,2BACA,2BACA,2BACA,2BACA,2BACA,2BAEA,2BACA,2BACA,2BACA,2BACA,2BACA,6BAIJ7D,EAAW8D,WAAW9D,EAAWoD,8vBC/DjC,IAAM1mB,EAAMF,EAAQ,IACdG,EAAOH,EAAQ,GACf0P,EAAO1P,EAAQ,IACfunB,EAAMvnB,EAAQ,GAAqBM,GAMnCojB,2BACJ,SAAAA,EAAa/Z,GAAO,IAAAzD,mGAAAC,CAAAC,KAAAsd,KAClBtd,OAAAC,EAAAqd,GAAApd,KAAAF,KAAA,yjBAAAF,oDAyBKyD,MAAQA,EAEbzD,EAAKiB,KAAOwC,EAAMhD,KAClBT,EAAKkB,QAAUuC,EAAMtC,SAASG,OAAO,SAAA4I,GAAC,OAAIoX,EAAKpX,EAAE1I,OAAQ,UACzDxB,EAAKuhB,QAAU9d,EAAMtC,SAASG,OAAO,SAAA4I,GAAC,OAAIoX,EAAKpX,EAAG,SAAUV,KAC5DxJ,EAAK8D,OAASL,EAAMtC,SAASG,OAAO,SAAA4I,GAAC,OAoDjCsX,EAAOF,EADKG,EAnDmCvX,EAoD3B,QApDuCV,GAqDjEiY,EAAOC,KAAK,YAAa,WACnBD,EAAO9f,WACT8f,EAAO9f,UAAU+f,KAAK,CAAC,UAAW,UAAW,WAAY,WACvDF,EAAKlb,MAAQqb,EAAaF,EAAO9f,eAIhC6f,EATT,IAAoBC,EACZD,IAnDJxhB,EAAK4hB,OAASne,EAAMtC,SAASG,OAAO,SAAA4I,GAAC,OAAIoX,EAAKpX,EAAG,QAAS,SAAAA,GAAC,OAAIV,EAAKU,EAAG,OACvEzG,EAAM0Z,KAAK,QAAX7c,EAAAN,IACAyD,EAAM0Z,KAAK,SAAX7c,EAAAN,GAA2B,cAAewJ,GAC1C/F,EAAM0Z,KAAK,QAAX7c,EAAAN,GAA0B,aAAcwJ,GACxC/F,EAAM0Z,KAAK,QAAX7c,EAAAN,GAA0B,aAAc,SAAAkK,GAAC,OAAIV,EAAKU,EAAG,KACrDzG,EAAMvC,QAAQ2gB,KAAdvhB,EAAAN,GAAyB,eAAgB8hB,GAEzC,IAAMngB,EAAY3B,EAAKyD,MAAM9B,UAvCX,OAwClB3B,EAAK6B,OAAO,eAAgB,YAAa,kBAAM8f,EAAahgB,KAC5D3B,EAAKyB,MAAME,EAAW,CAAC,UAAW,UAAW,WAAY,WACvD3B,EAAK0B,QAAQ,kBAGf1B,EAAKue,aA7Cave,wPADChG,8CAkDnBkG,KAAK6hB,QAAS,EACd7hB,KAAA,MAAa,GACbA,KAAK8hB,YAAc9hB,KAAK+hB,qDAIxB/hB,KAAK6hB,QAAS,EACd7hB,KAAA,MAAa,SACbA,KAAK8hB,YAAc,6CAcvB,SAASF,EAAY5gB,GACnB,OAAuB,IAAnBA,EAAQpD,OAAqBoD,EAAQ,GAAGD,KACvC,GAAA3C,OAAU+iB,EAAI,YAAd,MAAA/iB,OAA8B4C,EAAQpD,OAAtC,KAGP,SAASwjB,EAAMG,EAAQvf,EAAKggB,GAC1B,IAAMV,EAAOvnB,EAAKoM,OAAO,MAAO,KAAMob,EAAOvf,IAE7C,OADAuf,EAAOtE,KAAKjb,EAAKsf,EAAM,cAAeU,GAC/BV,EAeT,SAASG,EAAchgB,GACrB,MAA4B,QAAxBA,EAAUsI,KAAKxJ,KAAuB,GAC1C,UAAAnC,OACKkL,EAAK7H,EAAU4O,SADpB,aAAAjS,OAEQkL,EAAK7H,EAAU6O,SAFvB,eAAAlS,OAGUkL,EAAK7H,EAAU,WAAY,GAHrC,SA/BF/B,EAAOC,QAAU2d,mlBC3EjB,IAAMxjB,EAAMF,EAAQ,IACZM,EAAON,EAAQ,GAAfM,GAEFE,EAASR,EAAQ,GAMjBa,2BACJ,SAAAA,IAAe,IAAAqF,MAAA,mGAAAC,CAAAC,KAAAvF,KACbuF,KAAAF,MAAAG,EAAAxF,GAAAyF,KAAAF,KAAA,wBAAA5B,OACiBlE,EAAG,YADpB,gCAAAkE,OAEmBlE,EAAG,oBAFtB,sDAAAkE,OAIuBlE,EAAG,YAJ1B,yOAAAkE,OAUuBlE,EAAG,YAV1B,wWAuBAE,EAAOqX,QAAQ,CAAC,WAAY,YAA5BrR,EAAAN,IACAA,EAAK2R,QAAQ,CAAC,WAAY,YAAarX,GAGvC0F,EAAKxB,OAAO,kBAAmB,kBAAMjD,SAAS4mB,WAC9CniB,EAAKxB,OAAO,kBAAmB,kBAAMjD,SAAS4mB,WA7BjCniB,8OADShG,QAsC1B4F,EAAOC,QAAUlF,2rCC/CjB,IAAMX,EAAMF,EAAQ,IACdsoB,EAAOtoB,EAAQ,GACfG,EAAOH,EAAQ,GACf0P,EAAO1P,EAAQ,IACbM,EAAOgoB,EAAPhoB,GAEF6L,EAAYnM,EAAQ,IACpBQ,EAASR,EAAQ,GACjBiY,EAAQjY,EAAQ,IAChBuoB,EAAQvoB,EAAQ,IAMhBwoB,2BACJ,SAAAA,EAAajkB,GAAW,IAAA2B,EAAAC,EAAAC,KAAAoiB,IACtBtiB,EAAAsO,EAAApO,KAAAC,EAAAmiB,GAAAliB,KAAAF,KAAA,2CAAA5B,OAEIlE,EAAG,aAFP,8MAAAkE,OAO0ClE,EAAG,aAP7C,sHAAAkE,OAU0ClE,EAAG,SAV7C,6CAAAkE,OAW4BlE,EAAG,UAX/B,0EAkBKiE,UAAYA,EACjB,IAAMkkB,EAAW/X,aAAY,UAAAlM,OAAWD,EAAU6Z,QAAQnY,KApBpC,OAqBtBC,EAAKuS,MAAQ8P,EAAM/J,aAAaja,EAAWkkB,GAE3CviB,EAAKK,MAAQ,IAAIiiB,EAAapE,MAAjB5d,EAAAN,IACbA,EAAKK,MAAMsR,QAAQ,WAAnBrR,EAAAN,IACAA,EAAK2R,QAAQ,WAAY3R,EAAKK,OAE9BL,EAAKwiB,OAASxiB,EAAKuS,MAAMiQ,OACzBxiB,EAAKwiB,OAAOX,KAAZvhB,EAAAN,GAAuB,QAAS,SAAAwiB,GAAM,QAAMA,EAAO1kB,SAEnDkC,EAAK6B,OAAO,gBAAiB,CAAC,WAAY,YAAa,WACrD,OAAO7B,EAAKvE,UAAYuE,EAAKyiB,WAE/BziB,EAAK6B,OAAO,YAAa,CAAC,WAAY,YAAa,WACjD,OAAO7B,EAAKvE,WAAauE,EAAKyiB,WAEhCziB,EAAK6B,OAAO,cAAe,CAAC,gBAAiB,aAAc,WACzD,OAAO7B,EAAK0iB,eAAiB1iB,EAAK2iB,YAGpC3iB,EAAKuS,MAAMZ,QAAQ,WAAnBrR,EAAAN,IAEAA,EAAK6B,OAAO,WAAY,WAAY,WAElC,OADI7B,EAAK4iB,UAAU5iB,EAAK4iB,SAASjb,UAC1B3H,EAAKvE,UAAY,IAAIb,EAASioB,MAAM7iB,EAAKvE,SAAxB6E,EAAAN,MA5CJA,aADChG,0CAiDZsD,GACX,OAAO,IAAItD,EAAJ,kCAA2C,CAAEsD,2CAKpD,OADA/B,SAAS4mB,UACF,kCAIP,IACE,IAAM1N,EAAYvU,KAAK7B,UAAU6Z,QAAQnY,GACzCyK,aAAY,UAAAlM,OACAmW,IACRvU,KAAKqS,MAAMgQ,SAAWriB,KAAKqS,MAAMuQ,WACrC5iB,KAAKqS,MAAMkQ,UAAW,EACtB,MAAOnlB,GACPD,QAAQC,MAAMA,GAEhB,OAAO,sCAGI,IAAAyJ,EAAA7G,KACX,IACE,IAAM+R,EA4BZ,SAAyBM,GACvB,IAAIN,EAAa,GAIjB,OAHAM,EAAM9D,OAAOxK,QAAQ,SAAAsL,GACfA,EAAMiD,QAAOP,EAAaA,EAAW3T,OAAOiR,EAAMiD,MAAMP,eAEvDA,EAjCgB8Q,CAAe7iB,KAAKqS,OAEjCyQ,EADW9iB,KAAK7B,UAAU+C,OAAOoC,OAAO,SAAAuN,GAAK,OAAIA,EAAMiF,WAClCxS,OAAO,SAAAuN,GAChC,OAAQkB,EAAWY,KAAK,SAAAO,GAAE,OAAIA,EAAGrC,MAAMhR,KAAOgR,EAAMhR,OAMtD,GAJAkS,EAAWhO,QAAQ,SAAAmP,IACZA,EAAGrC,MAAMhR,IAAMijB,EAAUllB,SAAQsV,EAAGrC,MAAMhR,GAAKijB,EAAUC,MAAMljB,OAGjEkS,EAAWnU,OAAQ,OAAO,EAC/B,IAAMwW,EAAavC,EAAMqC,uBAAuBnC,GAIhD,GAHA+Q,EAAU/e,QAAQ,SAAA8M,GAChBuD,EAAWI,aAAa,cAAe,CAAE5R,OAAQ,EAAGkS,QAASjE,EAAMhR,OAEjEuU,EACgB,IAAIrO,EAAUqO,EAAW0I,KACjCxe,OAAO,UAAW,WAC1BuI,EAAK1I,UAAU2Z,aACfjR,EAAK1I,UAAU+C,OAAOuI,QAG1B,MAAOrM,GACPD,QAAQC,MAAMA,GAEhB,OAAO,WAYXglB,EAAapE,MAAb,SAAAvB,GAAA,aACE,SAAAuG,EAAajF,GAAQ,IAAAzW,EAAA,OAAAvH,EAAAC,KAAAgjB,IACnB1b,EAAA8G,EAAApO,KAAAC,EAAA+iB,GAAA9iB,KAAAF,KAAA,sEAAA5B,OAIQlE,EAAG,QAJX,qBAAAkE,OAKQlE,EAAG,QALX,qBAAAkE,OAMQlE,EAAG,cANX,qBAAAkE,OAOQlE,EAAG,aAPX,iHAAAkE,OAWuClE,EAAG,aAX1C,0DAiBKqB,cAAWsC,EAChByJ,EAAKnG,OAAS4c,EAAO1L,MAAM9D,OAC3BjH,EAAK2b,WAAW3b,EAAKnG,QACrB4c,EAAO1L,MAAM/T,OAAO,SAAU,kBAAMgJ,EAAK2b,WAAW3b,EAAKnG,UArBtCmG,EADvB,OAAAxF,EAAAkhB,EAAkDlpB,GAAlDiI,EAAAihB,EAAA,EAAAhhB,IAAA,cAAAhF,MAAA,SAyBeqV,GAAO,IAAA7K,EAAAxH,KACZkjB,EAAW,IAAIxoB,EAAS2X,GAE9B,OADA6Q,EAASxnB,QAAQoD,QAAU,kBAAM0I,EAAKjM,SAAW8W,GAC1C6Q,IA5BX,CAAAlhB,IAAA,aAAAhF,MAAA,SA+BcmG,GACV,OAAOA,EAAM2K,KAAK,SAACyB,EAAGC,GAAJ,OAAUA,EAAE2T,KAAO5T,EAAE4T,MAAQ5T,EAAE3N,kBAhCrDohB,EAAA,OAoCMtoB,2BACJ,SAAAA,EAAa2X,GAAO,IAAAqM,EAAA,OAAA3e,EAAAC,KAAAtF,IAClBgkB,EAAAtQ,EAAApO,KAAAC,EAAAvF,GAAAwF,KAAAF,KAAA,8OAYKqS,MAAQA,EAEbqM,EAAK3d,KAAOsR,EAAMtR,MAAQsR,EAAM9O,OAAS8O,EAAM9O,MAAMhD,KACrD8R,EAAM9O,MAAMkO,QAAQ,QAApBrR,EAAAse,IACArM,EAAMZ,QAAQ,OAAdrR,EAAAse,GAA4B,SAAA1U,GAAC,OAAIV,EAAKU,EAAG,KACzCqI,EAAMZ,QAAQ,aAAdrR,EAAAse,GAAkC,SAAA1U,GAChC,OAAY,MAALA,EAAY,IAAMV,EAAS,IAAJU,EAAS,GAAK,MAG9C0U,EAAKnd,MAAM8Q,EAAO,QAAS,WACpBA,EAAMC,OAGTD,EAAMC,MAAMb,QAAQ,aAApBrR,EAAAse,IACArM,EAAMC,MAAMb,QAAQ,cAApBrR,EAAAse,GAAyC0E,IAHzC1E,EAAKtK,WAAasK,EAAK3I,YAAc,OAxBvB2I,aADC5kB,QAuGvB,SAASspB,EAAmBrN,GAC1B,OAAOA,EAAYvS,IAAI,SAAAhH,GAAC,OAAIzC,EAAKoM,OAAO,MAAO,KAAM3J,KAtEvD9B,EAASioB,MAAT,SAAApE,GAAA,aACE,SAAA8E,EAAahR,EAAO0L,GAAQ,IAAA8B,EAAA,OAAA9f,EAAAC,KAAAqjB,IAC1BxD,EAAAzR,EAAApO,KAAAC,EAAAojB,GAAAnjB,KAAAF,KAAA,8FAAA5B,OAKelE,EAAG,QALlB,oOAAAkE,OAS4BlE,EAAG,eAT/B,kDAAAkE,OAUiClE,EAAG,cAVpC,8CAAAkE,OAW6BlE,EAAG,UAXhC,4FAAAkE,OAiB8BlE,EAAG,SAjBjC,sCAsBK6jB,OAASA,EACd8B,EAAKxN,MAAQA,EAEbwN,EAAKyD,UAAYjR,EAAM9O,MAAMxC,KAE7BsR,EAAMZ,QAAQ,OAAdrR,EAAAyf,GAA4B,SAAA7V,GAAC,OAAIV,EAAKU,EAAG,KAEzCqI,EAAMZ,QAAQ,OAAdrR,EAAAyf,IACAA,EAAKpO,QAAQ,OAAQY,EAAO,SAAArI,GAAC,OAAS,MAALA,EAAY+I,OAAO/I,GAAK,OAEzDqI,EAAMZ,QAAQ,OAAdrR,EAAAyf,GAA4B,SAAApM,GAAI,OAAIA,GAAQ,UAC5CoM,EAAKpO,QAAQ,OAAQY,GAlCKwN,EAD9B,OAAA/d,EAAAuhB,EAA0CvpB,GAA1CiI,EAAAshB,EAAA,EAAArhB,IAAA,aAAAhF,MAAA,WAuCQgD,KAAKuT,MAAsB,UAAdvT,KAAKyT,OAAkBzT,KAAKyT,KAAO,gBAvCxD,CAAAzR,IAAA,UAAAhF,MAAA,WA2CI,OAAQgD,KAAKyT,MACb,IAAK,QACHzT,KAAKuT,KAAO,KACZ,MACF,IAAK,aACHvT,KAAKuT,MAAQjK,EAAK,IAAMtJ,KAAKqS,MAAMrV,MAAQ5C,EAAO+D,UAAUoa,MAAO,GACnEvY,KAAKiU,IAAM,IACX,MACF,IAAK,SACHjU,KAAKuT,KAAOvT,KAAKqS,MAAM9O,MAAMX,OAC7B5C,KAAKiU,IAAM,QArDjB,CAAAjS,IAAA,QAAAhF,MAAA,WA6DI,OAFAgD,KAAKujB,aACLvjB,KAAK+d,OAAOxiB,SAAW,MAChB,MA7DX8nB,EAAA,GA6EA3jB,EAAOC,QAAUyiB,kzBCxQjB,IAAM/iB,EAAazF,EAAQ,IACrB0P,EAAO1P,EAAQ,IACf0F,EAAc1F,EAAQ,GAEtB6F,EAAQ7F,EAAQ,IAChBiY,EAAQjY,EAAQ,IAChB4pB,EAAW5pB,EAAQ,IAWnBuoB,EAAQziB,EAAOC,QAAP,SAAAC,GAAA,aAoCZ,SAAAuiB,EAAa5e,GAAO,IAAAzD,MAAA,mGAAAC,CAAAC,KAAAmiB,KAClBniB,OAAAC,EAAAkiB,GAAAjiB,KAAAF,MAAAF,mDAEIyD,GACFzD,EAAKyD,MAAQA,EACbzD,EAAK2T,KAAO,SACZ3T,EAAKyT,KAAOhQ,EAAMX,OAClB9C,EAAKwS,MAAQT,EAAM4R,UAANrjB,EAAAN,IACbyD,EAAMpC,OAAOP,KAAbR,EAAAN,IACAyD,EAAMkO,QAAQ,QAAdrR,EAAAN,MAEAA,EAAKyO,OAAS,IAAIlP,EAClBS,EAAKyO,OAAOjQ,OAAO,MAAO,SAAA+Q,GACxBA,EAAM0O,OAAN3d,EAAAN,GACAA,EAAK0B,aAKT1B,EAAK0hB,KAAK,OAAQ,WACZ1hB,EAAKyT,OACPzT,EAAKyT,KAAOM,KAAKI,IAAI,EAAGnU,EAAKyT,MACX,eAAdzT,EAAK2T,OAAuB3T,EAAKyT,KAAOM,KAAKG,IAAI,IAAKlU,EAAKyT,QAEjEzT,EAAK0B,YAxBW1B,EApCR,yOAAAgC,CAAAqgB,EAAqC7iB,GAArCyC,EAAAogB,EAAA,OAAAngB,IAAA,eAAAhF,MAAA,SACSmB,EAAWkkB,GAC9B,IAAMhQ,EAAQgQ,EAAWF,EAAMuB,WAAWrB,GAAY,IAAIF,EA+B1D,OA9BA9P,EAAMlU,UAAYA,EAClBkU,EAAMiQ,OAAS,IAAIjjB,EACnBgT,EAAM8Q,KAAO,IAEbhlB,EAAUkU,MAAQA,EAClBA,EAAM9Q,MAAMpD,EAAW,QAAS,kBAAMkU,EAAM7Q,QAAQrD,EAAUoa,SAG9Dpa,EAAUwF,OAAOI,QAAQ,SAAAR,IAEpB8O,EAAM9D,OAAOoE,KAAK,SAAAtD,GAAK,OAAI9L,IAAU8L,EAAM9L,SACzCA,EAAM+T,aAETjF,EAAM9D,OAAO3N,KAAK,IAAIuhB,EAAM5e,MAEhC8O,EAAM9D,OAAOxK,QAAQ,SAACsL,EAAO7C,GAExBrO,EAAUwF,OAAOgP,KAAK,SAAApP,GAAK,OAAIA,IAAU8L,EAAM9L,SAC5C8L,EAAM9L,MAAM+T,aAEhBjF,EAAM9D,OAAOgE,OAAO/F,EAAO,KAE/BrO,EAAUwF,OAAOrF,OAAO,MAAO,SAAAiF,GACzBA,EAAMogB,SAAStR,EAAM9D,OAAO3N,KAAK,IAAIuhB,EAAM5e,MAEjDpF,EAAUwF,OAAOrF,OAAO,SAAU,SAAAiF,GAChC,IAAMiJ,EAAQ6F,EAAM9D,OAAOqV,UAAU,SAAAvU,GAAK,OAAIA,EAAM9L,QAAUA,IAC9D8O,EAAM9D,OAAOgE,OAAO/F,EAAO,KAGtB6F,MAjCGtQ,EAAAogB,EAAA,EAAAngB,IAAA,UAAAhF,MAAA,WAsENgD,KAAK+d,OACP/d,KAAK+d,OAAOvc,UACHxB,KAAK7B,WAAa6B,KAAK7B,UAAUoa,QAC1CvY,KAAKsiB,OAAO/P,OAAO,EAAGvS,KAAKsiB,OAAO1kB,QAClCoC,KAAKuiB,SAAWviB,KAAK6jB,aACrBL,EAASjhB,MAAMvC,KAAMA,KAAK7B,UAAUoa,UA3E5B,CAAAvW,IAAA,aAAAhF,MAAA,WAgFV,OAAOgD,KAAKqiB,WAAariB,KAAK4iB,aAhFpB,CAAA5gB,IAAA,WAAAhF,MAAA,SA8GF8mB,GACR,IAAMzB,EAAWriB,KAAK+jB,aACtB,OAAOxZ,KAAKC,UAAU6X,EAAU,KAAMyB,GAAY,KAhHxC,CAAA9hB,IAAA,aAAAhF,MAAA,WAoHV,IAAIqlB,EAAW,GAcf,OAZiB,MAAbriB,KAAKuT,OAAc8O,EAAS9O,KAAOvT,KAAKuT,MAC3B,MAAbvT,KAAKyT,MAA8B,UAAdzT,KAAKyT,OAAkB4O,EAAS5O,KAAOzT,KAAKyT,MAEjEzT,KAAKuD,OACiB,YAApBvD,KAAKuD,MAAM7C,KAAoB2hB,EAAS9e,MAAQvD,KAAKuD,MAAM1D,GAC1DwiB,EAAS9e,MAAQvD,KAAKuD,MAAMhD,KACI,IAAjCC,OAAOqN,KAAKwU,GAAUzkB,SAAcykB,EAAWA,EAAS9e,QACnDvD,KAAKuO,SACVvO,KAAKe,OAAMshB,EAAS2B,MAAQhkB,KAAKe,MACrCshB,EAAS9T,OAASvO,KAAKuO,OAAO/K,IAAI,SAAA6O,GAAK,OAAIA,EAAM0R,gBAG5C1B,IAlIG,CAAArgB,IAAA,OAAAyH,IAAA,WAiEV,OAAIzJ,KAAK+d,OAAe/d,KAAK+d,OAAOkG,KACxBjkB,QAlEF,EAAAgC,IAAA,aAAAhF,MAAA,SAmFOknB,GACjB,IAAM7B,EAAW9X,KAAKI,MAAMuZ,GACtB7R,EAAQ8P,EAAMgC,aAAa9B,GAEjC,OADAhQ,EAAMgQ,SAAW6B,EACV7R,IAvFG,CAAArQ,IAAA,eAAAhF,MAAA,SA0FSqlB,GACK,iBAAbA,IAAuBA,EAAW,CAAE9e,MAAO8e,IAEtD,IAAMhQ,EAAQgQ,EAAS9e,MACnB,IAAI4e,EAAM1iB,EAAMvB,QAAQmkB,EAAS9e,QACjC,IAAI4e,EAYR,OAVA9P,EAAMkB,KAAO8O,EAAS9O,KACtBlB,EAAMoB,KAAO4O,EAAS5O,KAEjB4O,EAAS9e,QACZ8O,EAAMtR,KAAOshB,EAAS2B,MACtB3B,EAAS9T,OAAOxK,QAAQ,SAAAjB,GAAK,OAC3BuP,EAAM9D,OAAO3N,KAAKuhB,EAAMgC,aAAarhB,OAIlCuP,MA3GG8P,EAAA,GAsIdA,EAAMxgB,OAAO,QAAS,CAAC,QAAS,UAAW,WACzC,OAAQ2H,EAAKtJ,KAAKhD,MAAQgD,KAAK2V,OAAQ,KAEzCwM,EAAMxgB,OAAO,aAAc,CAAC,QAAS,UAAW,WAC9C,OAAO3B,KAAK2V,OAAS3V,KAAKokB,MAAQpkB,KAAK2V,OAAS,OAElDwM,EAAMxgB,OAAO,SAAU,CAAC,UAAW,WACjC,OAAQ2H,EAAKtJ,KAAK2V,OAAS3V,KAAKuD,MAAM1B,MAAO,KAE/CsgB,EAAMxgB,OAAO,aAAc,CAAC,UAAW,WACrC,OAAQ2H,EAAKtJ,KAAK4C,OAAS5C,KAAKuD,MAAMX,OAAQ,KAEhDuf,EAAMxgB,OAAO,cAAe,CAAC,cAAe,WAC1C,OAAOkS,KAAKC,IAAI9T,KAAKqW,kCC3KvB,IAAMmN,EAAW7jB,EAETzF,EAAON,EAAQ,GAAfM,GAERspB,EAASjhB,MAAQ,SAAU8P,EAAOkG,GAChC,IAAKlG,EAAM9D,OAAQ,OAAO8D,EAAMsD,OAAS4C,EAEzC,IAAI8L,EAAO,EACLC,EAAW,GACXxB,EAAY,GACZyB,EAAQlS,EAAMoB,MAAQ,QAwB5B,GAtBApB,EAAM9D,OAAOxK,QAAQ,SAAAsL,GACA,SAAfA,EAAMoE,MAAkC,WAAfpE,EAAMoE,MACjCpE,EAAMsG,OACU,MAAdtG,EAAMkE,KACFlE,EAAM9L,MAAM1B,MAAQwN,EAAMkE,KAC1BlE,EAAM9L,MAAM1B,MAAQwN,EAAM9L,MAAMX,OACtCyM,EAAM8T,KAAO,IAAM9T,EAAMsG,OAAS4C,EAC9BlJ,EAAM8T,KAAO,KACf9T,EAAM4U,KAAK3B,OAAO1hB,KAAlB,GAAAxC,OACKiR,EAAM9L,MAAMhD,KADjB,MAAAnC,OAC0BlE,EAAG,gCAG/BmqB,GAAQhV,EAAM8T,MACS,MAAd9T,EAAMkE,MACflE,EAAM8T,KAAO9T,EAAMkE,KACnB8Q,GAAQhV,EAAMkE,KACd+Q,EAAS1jB,KAAKyO,IAEdyT,EAAUliB,KAAKyO,KAIfkJ,EAAQ,EAAG,MAAM,IAAIza,MAAM,0BAE3BumB,EAAO,KAAgB,MAATA,IAAiBvB,EAAUllB,SAY/C,SAAuB4mB,EAASH,GAC9B,IAAMI,EAAQ,IAAMJ,EACpBG,EAAQzgB,QAAQ,SAAA4R,GAAM,OAAIA,EAAOwN,MAAQsB,EAAQ9O,EAAOwN,KAAOkB,IAb7DK,CAAaJ,EAAUD,GACvBvB,EAAU/e,QAAQ,SAAAsO,GAAK,OAAIA,EAAM8Q,KAAO,KAC/BL,EAAUllB,QACnBkU,EAAOyS,GAAOzB,EAAW,IAAMuB,GAGjCC,EAASlmB,OAAO0kB,GAAW/e,QAAQ,SAAAsL,GACjCmU,EAASjhB,MAAM8M,EAAOkJ,EAAQlJ,EAAM8T,KAAO,QAa/C,IAAMrR,EAAS,CAEfA,MAAe,SAAU3Q,EAAQsjB,GAC/B,IAAMtB,EAAOsB,EAAQtjB,EAAOvD,OAC5BuD,EAAO4C,QAAQ,SAAAsO,GAAK,OAAIA,EAAM8Q,KAAOA,wBCjEvCzjB,EAAAC,QAAA,i1CCAAD,EAAAC,QAAA,mxECIQiS,EAAehY,EAAQ,IAAvBgY,WAEF9X,EAAMF,EAAQ,IACdG,EAAOH,EAAQ,GACbM,EAAON,EAAQ,GAAfM,GAEFE,EAASR,EAAQ,GACjBmM,EAAYnM,EAAQ,IAEpB+qB,EAAW,2DAMXC,2BACJ,SAAAA,EAAaC,EAAOC,GAAO,OAAA/kB,EAAAC,KAAA4kB,GAAAxW,EAAApO,KAAAC,EAAA2kB,GAAA1kB,KAAAF,KAAA,+GAQvB,CAAE6kB,QAAOC,sBATMhrB,QAkBfirB,2BACJ,SAAAA,EAAa1kB,EAAOU,EAAMikB,GAAQ,IAAAllB,EAAA,OAAAC,EAAAC,KAAA+kB,IAChCjlB,EAAAsO,EAAApO,KAAAC,EAAA8kB,GAAA7kB,KAAAF,KAAA,2CAEKK,MAAyB,iBAAVA,EAAqB,IAAIvG,EAAIuG,GAASA,EAC1DP,EAAKmd,KAAK7W,MAAQrF,EAEI,mBAAXikB,EACTllB,EAAKmd,KAAKne,QAAUkmB,EACO,iBAAXA,IAChBllB,EAAKmd,KAAKve,KAAOsmB,EACbA,EAAOC,MAAM,WACfnlB,EAAKmd,KAAKtH,OAAS,SACnB7V,EAAKmd,KAAKiI,IAAM,aAZYplB,aADjBhG,QAoDnB,IAAM+qB,EAAQ,CACZ,IAAIE,EACFnrB,EAAQ,IACR,UACA,uCAEF,IAAImrB,EACFnrB,EAAQ,IACR,WACA,4BAEF,IAAImrB,EACFnrB,EAAQ,IACR,SACA,oCAEF,IAAImrB,EACFnrB,EAAQ,IACR,UACA,mCAEF,IAAImrB,EACFnrB,EAAQ,IACR,SACA,kCAEF,IAAImrB,EACFnrB,EAAQ,IACR,SACA,sDAEF,IAAImrB,EACFnrB,EAAQ,IACRM,EAAG,WACH,uBAEF,IAAI6qB,EACFnrB,EAAQ,IACRM,EAAG,SACH,mCAEF,IAAI6qB,EAAKnrB,EAAQ,IAAqBM,EAAG,UAtE3C,WACE,IAAM0I,EAASuiB,OAAM,GAAA/mB,OACrBlE,EAAG,kCADkB,QAAAkE,OAGrBlE,EACE,uFAJmB,QAAAkE,OAOrBlE,EAAG,+BAPkB,MAUrB,GAAe,MAAX0I,GAAkBwiB,OAAOxiB,GAC3ByiB,QAAO,GAAAjnB,OAAIlE,EAAG,sBAAP,MAAAkE,OAAiCwE,SACnC,GAAIA,EAAQ,CACjB,IAAMwR,EAAa,IAAIxC,EAAW,CAChCyC,KAAMna,EAAG,4BACT2iB,QAAS,WACRrI,aAAa,UAAW,CAAE5R,SAAQ4U,YAAamN,IAClD,IAAI5e,EAAUqO,EAAW0I,SA+D7B,IAAMwI,EAAU,8WA4BVC,EAAS,IAAIX,EAAOC,EAvBZ,IAAI/qB,EAAJ,yEAAAsE,OAGmDlE,EAC7D,0BAJU,sCAAAkE,OAMgBlE,EAAG,QANnB,kJAAAkE,OAQmBlE,EAAG,WARtB,uCAAAkE,OASiBlE,EAAG,SATpB,gBAYZ,CACEsrB,YAvBJ,WACElb,aAAY,UAAAlM,OAAWumB,IAAcW,EACrCjqB,SAASqD,KAAT,YAAAN,OAA4BumB,IAsB1Bc,eAAgB,kBAAMrrB,EAAOS,KAAKO,OAAO,aACzCsqB,aAAc,kBAAMtrB,EAAOS,KAAKO,OAAO,cAS3CrB,EAAK2M,OAAOC,SAASC,KAAM2e,qBC1K3B7lB,EAAAC,QAAA","file":"app.js","sourcesContent":["\"use_strict\"\n/**\n * Login interface\n */\nconst dom = require(\"@cosmic-plus/jsutils/dom\")\nconst Form = require(\"@cosmic-plus/jsutils/form\")\nconst Gui = require(\"@cosmic-plus/jsutils/gui\")\nconst html = require(\"@cosmic-plus/jsutils/html\")\nconst Tabs = require(\"@cosmic-plus/jsutils/tabs\")\nconst params = require(\"@cosmic-plus/jsutils/params\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nconst clickWall = require(\"./click-wall\")\nconst global = require(\"./global\")\nconst Portfolio = require(\"./portfolio\")\nconst { isOverflowing } = require(\"./helpers\")\n\nconst ActivityGui = require(\"./activity-gui\")\nconst PortfolioGui = require(\"./portfolio-gui\")\nconst SettingsGui = require(\"./settings-gui\")\nconst ShareGui = require(\"./share-gui\")\n\nconst license = new Gui(require(\"./html/license.html\"))\nconst welcome = new Gui(require(\"./html/welcome.html\"))\n\nrequire(\"./footer\")\n\n/**\n * Init\n */\nconst tabs = global.tabs = new Tabs({ nav: dom.header, view: dom.main })\ntabs.add(\"#welcome\", __(\"Welcome\"), welcome)\ntabs.add(\"#login\", __(\"Login\"), dom.loginForm)\ntabs.add(\"#license\", null, license)\ntabs.add(\"#about\", null, welcome)\n\ntabs.select(location.hash)\nif (!tabs.selected) tabs.select(\"#welcome\")\n\ntabs.fitScreen = function () {\n  if (isOverflowing(dom.header)) {\n    html.replace(tabs.nav.domNode, tabs.selector.domNode)\n  }\n}\ntabs.fitScreen()\n\nconst loginForm = new Form(dom.loginForm).addValidator(login)\nhtml.show(dom.loginForm)\ndom.loginForm.autocomplete = \"on\"\nif (params.address) {\n  tabs.select(\"#login\")\n  dom.loginAddressBox.value = params.address\n  login()\n} else {\n  dom.ledgerLoginButton.onclick = () => loginWithLedgerWallet()\n}\n\ntabs.listen(\"select\", page => {\n  location.hash = page\n  window.scrollTo(0, 0)\n})\n\n/**\n * Functions\n */\n\nlet ledger\nasync function loginWithLedgerWallet () {\n  ledger = await getLedgerModule()\n  loginForm.setInfo(__(\"Please open the Stellar App in your Ledger Wallet\"))\n  try {\n    await ledger.connect()\n    dom.loginAddressBox.value = ledger.publicKey\n    login()\n  } catch (error) {\n    console.error(error)\n    loginForm.setError(error)\n  }\n}\n\nasync function login (address = dom.loginAddressBox.value) {\n  if (!address) throw new Error(__(\"Please enter an address.\"))\n  if (ledger) ledger.disconnect()\n\n  loginForm.setInfo(__(\"Connecting to your account...\"))\n  params.$set({ address })\n  clickWall.enable()\n\n  try {\n    global.portfolio = await Portfolio.resolve(address)\n    loginForm.setInfo(`${__(\"Fetching market data\")}...`)\n    setTimeout(\n      () => loginForm.setInfo(`${__(\"Sorry, it takes a while (^.^)\\\"\")}...`),\n      10000\n    )\n    setTimeout(() => loginForm.setInfo(`${__(\"Almost there\")}...`), 20000)\n    setTimeout(\n      () => loginForm.setInfo(`${__(\"I'm running, I'm running\")}...`),\n      30000\n    )\n    global.portfolio.listen(\"open\", () => {\n      initGui()\n      clickWall.disable()\n    })\n  } catch (error) {\n    console.error(error)\n    loginForm.setError(error)\n    clickWall.disable()\n  }\n}\n\nfunction initGui () {\n  const portfolio = global.portfolio\n\n  const selected = location.hash\n  tabs.remove(\"#welcome\")\n  tabs.remove(\"#login\")\n  tabs.add(\"#portfolio\", __(\"Portfolio\"), new PortfolioGui(portfolio))\n  tabs.add(\"#rebalance\", __(\"Rebalance\"), new ShareGui(portfolio))\n  tabs.add(\"#activity\", __(\"Activity\"), new ActivityGui(portfolio))\n  tabs.add(\"#settings\", __(\"Settings\"), new SettingsGui())\n  tabs.add(\"#logout\", __(\"Logout\"), () => {\n    location.replace(location.href.replace(/\\?.*$/, \"#login\"))\n  })\n  tabs.fitScreen()\n\n  tabs.select(selected)\n  if (!tabs.selected) tabs.select(\"#portfolio\")\n}\n\n/**\n * Module loading\n */\n\nfunction getLedgerModule () {\n  return import(/* webpackChunkName: \"ledger\" */ \"@cosmic-plus/ledger-wallet\").then(\n    ledger => ledger.default\n  )\n}\n","\"use_strict\"\n/**\n * Asset class\n */\n\nconst AUTO_REFRESH_PRICES = true\nconst CRYPTO_PRICES_REFRESH_DELAY = 60 * 1000\nconst FIAT_PRICES_REFRESH_DELAY = 60 * 60 * 1000\nconst FIAT_BASEURL = \"https://www.xe.com/themes/xe/images/flags/svg/\"\nconst FIAT_IMAGEFORMAT = \".svg\"\n\nconst Mirrorable = require(\"@cosmic-plus/jsutils/mirrorable\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\n\nconst global = require(\"./global\")\nconst marketData = require(\"./market-data\")\nconst Orderbook = require(\"./orderbook\")\n\n/**\n * Class\n */\n\nconst Asset = module.exports = class Asset extends Projectable {\n  static resolve (id) {\n    return Asset.table[id] || new Asset(id)\n  }\n\n  constructor (id) {\n    super()\n\n    this.id = id\n    Asset.table[id] = this\n\n    // Empty image by default\n    this.image = \"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\"\n\n    if (Asset.info[id]) {\n      this.code = id\n      Object.assign(this, Asset.info[id])\n      if (this.type === \"fiat\") {\n        Asset.fiats.push(this)\n        this.image = `${FIAT_BASEURL}${id.toLowerCase()}${FIAT_IMAGEFORMAT}`\n      } else {\n        Asset.cryptos.push(this)\n        this.type = \"crypto\"\n      }\n    } else {\n      this.code = id.replace(/:.*/, \"\")\n      this.name = this.code\n      this.type = \"unknown\"\n    }\n\n    this.anchors = new Mirrorable()\n    this.balances = new Mirrorable()\n    this.offers = new Mirrorable()\n    this.shares = new Mirrorable()\n\n    this.balances.mirror(balance => {\n      this.anchors.push(balance.anchor)\n      this.watch(balance, \"amount\", () => this.compute(\"amount\"))\n      this.watch(balance, [\"buying\", \"selling\"], () => {\n        this.compute(\"liabilities\")\n      })\n    })\n\n    this.orderbook = Orderbook.forAsset(this)\n    this.define(\"price\", \"globalPrice\", () => {\n      return this.globalPrice || this.orderbook.price\n    })\n    this.watch(this.orderbook, \"price\", () => this.compute(\"price\"))\n  }\n\n  async getInfo () {\n    // Happens once & only for cryptos.\n    if (this.name || this.type !== \"crypto\") return\n    this.info = await marketData.crypto.info(this)\n    this.name = this.info.name\n    this.image = this.info.image.small\n  }\n\n  addOrderbook (orderbook) {\n    this.orderbook.addChild(orderbook)\n  }\n}\n\nAsset.define(\"amount\", \"balances\", function () {\n  return this.balances && this.balances.reduce((sum, el) => sum + el.amount, 0)\n})\n\nAsset.define(\"value\", [\"amount\", \"price\"], function () {\n  return this.amount === 0 ? 0 : this.amount * this.price\n})\n\nAsset.define(\"liabilities\", [\"balances\", \"price\"], function () {\n  if (this.balances) {\n    const rawLiabilities = this.balances.reduce(\n      (sum, entry) => sum + entry.buying - entry.selling,\n      0\n    )\n    return this.price * rawLiabilities\n  }\n})\n\nAsset.define(\"isSupported\", [\"type\", \"price\"], function () {\n  return !!(this.type !== \"unknown\" || this.price)\n})\n\n/**\n * Utilities\n */\n\nAsset.refreshPrices = async function (array) {\n  if (!array) {\n    await Asset.refreshCryptoPrices()\n    await Asset.refreshFiatPrices()\n  } else {\n    await Asset.refreshCryptoPrices(\n      array.filter(asset => asset.type === \"crypto\").map(asset => asset.code)\n    )\n    await Asset.refreshFiatPrices(\n      array.filter(asset => asset.type === \"fiat\").map(asset => asset.code)\n    )\n  }\n}\n\nAsset.refreshCryptoPrices = async function (assets = Asset.cryptos) {\n  if (!assets.length) return\n  const prices = await marketData.crypto.prices(assets)\n  assets.forEach(asset => asset.globalPrice = prices[asset.code])\n}\n\nAsset.refreshFiatPrices = async function (fiats = Asset.fiats) {\n  if (!fiats.length) return\n  const prices = await marketData.fiat.prices(fiats)\n  fiats.forEach(asset => asset.price = asset.globalPrice = prices[asset.code])\n}\n\n/**\n * Known Assets\n */\n\nAsset.info = {\n  USD: { type: \"fiat\", name: \"US Dollar\" },\n  EUR: { type: \"fiat\", name: \"Euro\" },\n  CNY: { type: \"fiat\", name: \"Renminbi\" },\n\n  BTC: { id: \"bitcoin\" },\n  ETH: { id: \"ethereum\" },\n  XRP: { id: \"ripple\" },\n  XLM: { id: \"stellar\" },\n  KIN: { id: \"kin\" },\n  BAT: { id: \"basic-attention-token\" },\n  ZRX: { id: \"0x\" },\n  BCH: { id: \"bitcoin-cash\" },\n  STEEM: { id: \"steem\" },\n  SBD: { id: \"steem-dollar\" },\n  LINK: { id: \"chainlink\" },\n\n  SLT: { id: \"smartlands\" },\n  MOBI: { id: \"mobius\" },\n  SHX: { id: \"stronghold-token\" },\n  RMT: { id: \"sureremit\" },\n  TERN: { id: \"ternio\" },\n  PEDI: { id: \"pedity\" },\n  GRAT: { id: \"gratz\" },\n  REPO: { id: \"repo\" }\n}\n\n/**\n * Init\n */\n\nAsset.table = {}\nAsset.cryptos = []\nAsset.fiats = []\nnew Asset(global.currency)\n\n// Automatic global price refresh\nif (AUTO_REFRESH_PRICES) {\n  setInterval(Asset.refreshCryptoPrices, CRYPTO_PRICES_REFRESH_DELAY)\n  setInterval(Asset.refreshFiatPrices, FIAT_PRICES_REFRESH_DELAY)\n}\n\n// eslint-disable-next-line no-console\nconsole.log(Asset.table)\n","\"use_strict\"\n/**\n * Signing Side Frame\n */\nconst html = require(\"@cosmic-plus/jsutils/html\")\nconst Observable = require(\"@cosmic-plus/jsutils/observable\")\nconst { timeout } = require(\"@cosmic-plus/jsutils/misc\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\n/**\n * Class\n */\n\nclass SideFrame extends Observable {\n  constructor (url) {\n    super()\n\n    if (SideFrame.current) SideFrame.current.close()\n    SideFrame.current = this\n\n    this.domNode = html.create(\"iframe\", {\n      title: \"Signing Frame\",\n      className: \"animated\",\n      src: url,\n      sandbox: \"allow-same-origin allow-scripts allow-forms allow-popups\",\n      hidden: true\n    })\n    Object.assign(this.domNode.style, SideFrame.style)\n    html.append(document.body, this.domNode)\n\n    this.show()\n  }\n\n  show () {\n    if (!this.domNode.hidden) return\n\n    this.htmlOverflow = document.documentElement.style.overflow\n    this.bodyOverflow = document.body.style.overflow\n    document.documentElement.style.overflow = \"hidden\"\n    document.body.style.overflow = \"hidden\"\n\n    html.show(SideFrame.shadow, SideFrame.close, this.domNode)\n    this.domNode.style.animationName = \"slideInRight\"\n    SideFrame.shadow.style.background = \"rgba(0,0,0,0.3)\"\n\n    return timeout(400).then(() => {\n      SideFrame.shadow.onclick = () => this.close()\n      SideFrame.close.onclick = () => this.close()\n      this.trigger(\"show\")\n    })\n  }\n\n  hide () {\n    if (this.domNode.hidden) return\n\n    document.documentElement.style.overflow = this.htmlOverflow\n    document.body.style.overflow = this.bodyOverflow\n\n    SideFrame.shadow.onclick = null\n    html.hide(SideFrame.close)\n\n    this.domNode.style.animationName = \"slideOutRight\"\n    SideFrame.shadow.style.background = \"transparent\"\n\n    return timeout(400).then(() => {\n      html.hide(SideFrame.shadow, SideFrame.close, this.domNode)\n      this.trigger(\"hide\")\n    })\n  }\n\n  close () {\n    SideFrame.current = null\n    this.hide().then(() => {\n      html.destroy(this.domNode)\n      this.trigger(\"close\")\n      this.destroy()\n    })\n  }\n}\n\n/**\n * Event\n */\n\nwindow.addEventListener(\"message\", event => {\n  const frameWindow =\n    SideFrame.current && SideFrame.current.domNode.contentWindow\n\n  if (event.source === frameWindow) {\n    switch (event.data) {\n    case \"show\":\n      SideFrame.current.show()\n      break\n    case \"hide\":\n      SideFrame.current.hide()\n      break\n    case \"close\":\n      SideFrame.current.close()\n      break\n    }\n  }\n})\n\n/**\n * Frame style\n */\n\nSideFrame.style = {\n  position: \"fixed\",\n  zIndex: 998,\n  right: 0,\n  top: 0,\n  width: \"30em\",\n  maxWidth: \"100%\",\n  height: \"100vh\",\n  border: \"0.1em solid hsl(240, 10%, 75%)\",\n  background: \"hsl(240, 40%, 98%)\",\n  backgroundImage: `url('./images/cosmic-link.svg')`,\n  backgroundRepeat: \"no-repeat\",\n  backgroundPosition: \"center\",\n  backgroundSize: \"12em 12em\",\n  padding: 0\n}\n\n/**\n * Closing button\n */\n\nSideFrame.close = html.create(\"span\", { hidden: true }, `× ${__(\"Close\")}`)\nObject.assign(SideFrame.close.style, {\n  position: \"fixed\",\n  zIndex: 999,\n  top: \"0.1em\",\n  right: \"0.1em\",\n  color: \"hsl(0, 0%, 40%)\",\n  fontSize: \"0.9em\",\n  fontWeight: \"bold\",\n  cursor: \"pointer\",\n  background: \"hsl(0, 0%, 95%)\",\n  borderBottomLeftRadius: \"0.1em\",\n  padding: \"0.1em 0.3em\"\n})\ndocument.body.insertBefore(SideFrame.close, document.body.firstChild)\n\n/**\n * Shadow Layer\n */\n\nSideFrame.shadow = html.create(\"div\", { hidden: true })\nObject.assign(SideFrame.shadow.style, {\n  position: \"fixed\",\n  zIndex: 997,\n  top: 0,\n  width: \"100%\",\n  height: \"100%\",\n  background: \"transparent\",\n  transition: \"background 0.4s\"\n})\ndocument.body.insertBefore(SideFrame.shadow, document.body.firstChild)\n\n/**\n * Export\n */\n\nmodule.exports = SideFrame\n","\"use_strict\"\n/**\n * Markets statistics & data\n *\n * @exports marketData\n */\nconst marketData = exports\n\nconst axios = require(\"@cosmic-plus/base/axios\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst { day } = require(\"@cosmic-plus/jsutils/misc\")\n\nconst global = require(\"./global\")\n\n/**\n * Generic price/history\n */\n\nmarketData.assetHistory = function (asset, limit = 1000) {\n  if (asset.type === \"crypto\") return marketData.crypto.history(asset, limit)\n  else if (asset.type === \"fiat\") return marketData.fiat.history(asset, limit)\n}\n\n/**\n * Crypto price/history by \"https://www.coingecko.com\"\n */\n\nmarketData.crypto = {}\n\nfunction coingeckoCall (page, params) {\n  return axios.get(`https://api.coingecko.com/api/v3/${page}`, { params })\n}\n\nmarketData.crypto.list = async function () {\n  const response = await coingeckoCall(\"coins/list\")\n  const list = {}\n  response.data.forEach(entry => {\n    const symbol = entry.symbol.toUpperCase()\n    list[symbol] = { id: entry.id, name: entry.name }\n  })\n  return list\n}\n\nmarketData.crypto.stellarNative = async function () {\n  const response = await coingeckoCall(\"exchanges/stellar_term\")\n  return response.data.tickers.map(x => x.coin_id).filter(x => x)\n}\n\nmarketData.crypto.info = async function (asset) {\n  const response = await coingeckoCall(`coins/${asset.id}`, {\n    localization: false,\n    tickers: false,\n    market_data: false,\n    community_data: false,\n    developer_data: false,\n    sparkline: false\n  })\n  return response.data\n}\n\nmarketData.crypto.prices = async function (assets) {\n  const ids = assets.map(asset => asset.id).join(\",\")\n  const quote = global.currency.toLowerCase()\n  const response = await coingeckoCall(\"simple/price\", {\n    ids,\n    vs_currencies: quote\n  })\n  const prices = {}\n  assets.forEach(asset => {\n    const assetData = response.data[asset.id]\n    if (assetData) prices[asset.code] = assetData[quote]\n  })\n  return prices\n}\n\nmarketData.crypto.history = async function (asset, limit = 1000) {\n  const response = await coingeckoCall(`coins/${asset.id}/market_chart`, {\n    vs_currency: global.currency,\n    days: limit\n  })\n  const data = response.data.prices.map((record, index) => {\n    return {\n      time: record[0],\n      price: record[1],\n      // volume: response.data.total_volumes[index][1]\n      volume: +nice(response.data.total_volumes[index][1] / record[1])\n    }\n  })\n  return data\n}\n\n/**\n * Fiat prices / history by \"https://exchangeratesapi.io\"\n */\n\nmarketData.fiat = {}\n\nasync function exchangeratesCall (page, symbols, params = {}) {\n  params.base = global.currency\n  if (typeof symbols === \"string\") {\n    params.symbols = symbols\n  } else {\n    if (global.currency === \"EUR\") symbols = symbols.filter(x => x !== \"EUR\")\n    params.symbols = symbols.join(\",\")\n  }\n  params.source = \"equilibre.io\"\n\n  return axios\n    .get(`https://api.exchangeratesapi.io/${page}`, { params })\n    .then(response => {\n      if (global.currency === \"EUR\" && !response.data.start_at) {\n        response.data.rates.EUR = 1\n      }\n      return response\n    })\n}\n\nmarketData.fiat.prices = async function (assets) {\n  const symbols = assets.map(asset => asset.code)\n  const response = await exchangeratesCall(\"latest\", symbols)\n  const data = response.data.rates\n  for (let symbol in data) {\n    data[symbol] = nice(1 / data[symbol], 8)\n  }\n  return data\n}\n\nmarketData.fiat.history = async function (asset, limit = 1000) {\n  const cached = cachedHistory(asset)\n  if (cached) return cached\n\n  const end_at = new Date().toISOString().slice(0, 10)\n  const today = new Date(end_at)\n  today.setDate(today.getDate() - limit)\n  const start_at = today.toISOString().slice(0, 10)\n  const response = await exchangeratesCall(\"history\", asset.code, {\n    start_at,\n    end_at\n  })\n\n  const data = Object.keys(response.data.rates)\n    .sort()\n    .map(date => {\n      return {\n        time: new Date(date).getTime(),\n        price: +nice(1 / response.data.rates[date][asset.code], 8)\n      }\n    })\n  cacheHistory(asset, data)\n  return data\n}\n\n/**\n * Helpers\n */\n\nfunction cacheHistory (asset, data) {\n  localStorage[`prices.${asset.code}`] = JSON.stringify([day(), data])\n}\n\nfunction cachedHistory (asset) {\n  const json = localStorage[`prices.${asset.code}`]\n  if (!json) return\n  const data = JSON.parse(json)\n  if (data[0] === day()) return data[1]\n}\n","\"use_strict\"\n/**\n * Orderbook class\n */\n\nconst cosmicLib = require(\"cosmic-lib\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\nconst StellarSdk = require(\"@cosmic-plus/base/stellar-sdk\")\nconst { timeout } = require(\"@cosmic-plus/jsutils/misc\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nconst Orderbook = module.exports = class Orderbook extends Projectable {\n  static forBalance (balance, quote) {\n    if (balance.asset === quote) return\n\n    const orderbook = new Orderbook({ balance, quote })\n    orderbook.streamOffers()\n\n    balance.orderbook = orderbook\n    balance.asset.addOrderbook(orderbook)\n\n    return orderbook\n  }\n\n  static forAsset (asset) {\n    return new Orderbook({ asset })\n  }\n\n  constructor (params) {\n    super()\n\n    if (params.balance) {\n      this.type = \"native\"\n      this.balance = params.balance\n      this.base = params.balance.asset\n      this.quote = params.quote\n      this.name = `${this.base.code}/${this.quote.code}`\n      this.offersCallBuilder = Orderbook.offersCallBuilder(this.balance)\n\n      this.watch(this.quote, \"price\", () => this.updateOffersPrices())\n    } else if (params.asset) {\n      this.type = \"agregated\"\n      this.base = params.asset\n      this.name = `${this.base.code} (${__(\"Agregated\")})`\n      this.childs = []\n    }\n\n    this.watch(this.base, \"globalPrice\", () => this.compute(\"price\"))\n  }\n\n  static offersCallBuilder (balance) {\n    const baseAsset = new StellarSdk.Asset(balance.code, balance.anchor.address)\n    const quoteAsset = StellarSdk.Asset.native()\n    const server = cosmicLib.resolve.server()\n    return server.orderbook(baseAsset, quoteAsset)\n  }\n\n  async streamOffers () {\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      await this.getOffers()\n      await timeout(15000)\n    }\n  }\n\n  async getOffers () {\n    try {\n      const offers = await this.offersCallBuilder.call()\n      this.ingest(offers)\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  ingest (offers) {\n    if (!areOffersEquals(this.bids, offers.bids)) {\n      this.bids = normalizeOffers(offers.bids, this.quote, this.balance, \"bids\")\n    }\n    if (!areOffersEquals(this.asks, offers.asks)) {\n      this.asks = normalizeOffers(offers.asks, this.quote, this.balance, \"asks\")\n    }\n  }\n\n  updateOffersPrices () {\n    if (this.bids) {\n      this.set(\"bids\", updateOffersPrices(this.bids, this.quote))\n    }\n    if (this.asks) {\n      this.set(\"asks\", updateOffersPrices(this.asks, this.quote))\n    }\n  }\n\n  mergeOffers (side) {\n    if (this.childs.length < 2) {\n      this.set(side, this.childs[0] && this.childs[0][side])\n      return\n    }\n\n    /// Merge order books\n    const merged = this.childs.reduce((merged, child) => {\n      return child[side] ? merged.concat(child[side]) : merged\n    }, [])\n    if (!merged.length) {\n      this[side] = null\n      return\n    }\n\n    const sortOffers =\n      side === \"bids\"\n        ? (a, b) => b.price - a.price\n        : (a, b) => a.price - b.price\n\n    /// Update volumes.\n    let volume = 0,\n      baseVolume = 0,\n      quoteVolume = 0\n    this.set(\n      side,\n      merged.sort(sortOffers).map(row => {\n        const mergedRow = Object.assign({}, row)\n        mergedRow.volume = volume += +nice(row.amount * row.price, 7)\n        mergedRow.baseVolume = baseVolume += +row.amount\n        mergedRow.quoteVolume = quoteVolume += +row.quoteAmount\n        return mergedRow\n      })\n    )\n  }\n\n  addChild (orderbook) {\n    this.childs.push(orderbook)\n    this.watch(orderbook, \"bids\", () => this.mergeOffers(\"bids\"))\n    this.watch(orderbook, \"asks\", () => this.mergeOffers(\"asks\"))\n  }\n}\n\nOrderbook.define(\"bestBid\", \"bids\", function () {\n  return this.bids && this.bids[0] && this.bids[0].price\n})\nOrderbook.define(\"bestAsk\", \"asks\", function () {\n  return this.asks && this.asks[0] && this.asks[0].price\n})\nOrderbook.define(\"price\", [\"bestBid\", \"bestAsk\"], function () {\n  if (this.base.globalPrice) return (this.bestBid + this.bestAsk) / 2\n  else return this.marketPrice()\n})\nOrderbook.define(\"spread\", [\"bestBid\", \"bestAsk\"], function () {\n  return this.bestAsk - this.bestBid\n})\nOrderbook.define(\"spread%\", [\"spread\", \"bestAsk\"], function () {\n  return 100 * this.spread / this.bestAsk\n})\n\n/**\n * Utilities\n */\n\n/**\n * Look for the best first offer in **orderbook** **side** that match **filter**\n * (if provided) among child orderbooks.\n *\n * @param  {Orderbook} orderbook [description]\n * @param  {String}    side      `bids` or `asks`\n * @param  {Function}  [filter]  A filter that is passed by the returned offer\n * @return {Object}    An orderbook offer\n */\nOrderbook.prototype.findOffer = function (side, filter) {\n  const offers = this[side]\n  const childsNum = this.childs ? this.childs.length : 1\n  const anchors = {}\n\n  let last\n  for (let index in offers) {\n    const offer = offers[index]\n    if (filter && !filter(offer)) continue\n    const anchor = offer.balance.anchor.address\n    if (!anchors[anchor]) {\n      anchors[anchor] = true\n      last = offer\n    }\n    if (Object.keys(anchors).length === childsNum) break\n  }\n  return last\n}\n\nOrderbook.prototype.findAsk = function (filter) {\n  return this.findOffer(\"asks\", filter)\n}\nOrderbook.prototype.findBid = function (filter) {\n  return this.findOffer(\"bids\", filter)\n}\n\n/**\n * Returns the price of asset at **depth** XLM of orderbook's **side**.\n *\n * @param  {String} [side=\"bids\"] Either \"bids\" or \"asks\"\n * @param  {Number} [depth] The depth to look at, in term of XLM\n * @return {Number} Offer price at requested depth\n */\nOrderbook.prototype.marketPrice = function (side = \"bids\", depth = 50) {\n  const offer = this.findOffer(side, offer => offer.quoteVolume > depth)\n  return offer ? offer.price : 0\n}\n\n/**\n * Helpers\n */\n\nfunction areOffersEquals (array1, array2) {\n  if (!array1) return false\n  if (array1.length !== array2.length) return false\n  for (let index in array1.length) {\n    if (array1[index].amount !== array2[index].amount) return false\n    if (array1[index].price !== array2[index].price) return false\n  }\n  return true\n}\n\nfunction normalizeOffers (offers, quote, balance, side) {\n  offers.forEach(row => {\n    row.volume = undefined\n    row.baseVolume = undefined\n    row.basePrice = +row.price\n    row.quoteAmount = +row.amount\n    row.quoteVolume = undefined\n    row.balance = balance\n    row.side = side\n  })\n  return updateOffersPrices(offers, quote)\n}\n\nfunction updateOffersPrices (offers, quote) {\n  let volume = 0,\n    quoteVolume = 0,\n    baseVolume = 0\n  offers.forEach(row => {\n    if (row.side === \"asks\") {\n      row.quoteAmount = +nice(row.amount * row.basePrice, 7)\n    } else {\n      row.amount = +nice(row.quoteAmount / row.basePrice, 7)\n    }\n    row.price = +nice(row.basePrice * quote.price, 7)\n    row.volume = volume += +nice(row.amount * row.price, 7)\n    row.baseVolume = baseVolume += +row.amount\n    row.quoteVolume = quoteVolume += +row.quoteAmount\n  })\n  return offers\n}\n","\"use_strict\"\n/**\n * Balance entry\n */\nconst Mirrorable = require(\"@cosmic-plus/jsutils/mirrorable\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\n\nconst Anchor = require(\"./anchor\")\nconst Asset = require(\"./asset\")\nconst Orderbook = require(\"./orderbook\")\n\nconst Balance = module.exports = class Balance extends Projectable {\n  static resolve (code, issuer) {\n    const id = code ? `${code}:${issuer}` : \"XLM\"\n    return Balance.table[id]\n  }\n\n  static ingest (entry) {\n    const id = entryId(entry)\n    const balance = Balance.table[id]\n    if (!balance) return new Balance(entry, id)\n\n    balance.amount = +entry.balance\n    balance.buying = +entry.buying_liabilities\n    balance.selling = +entry.selling_liabilities\n    return balance\n  }\n\n  constructor (entry) {\n    super()\n\n    this.id = entryId(entry)\n    this.code = entry.asset_code || \"XLM\"\n    this.anchor = Anchor.resolve(entry.asset_issuer || \"stellar.org\")\n    Balance.table[this.id] = this\n\n    if (this.id === \"XLM\" || this.id in Anchor.known) {\n      this.asset = Asset.resolve(Anchor.known[this.id] || this.code)\n      this.known = true\n    } else {\n      this.asset = Asset.resolve(this.id)\n      this.known = false\n    }\n    this.amount = +entry.balance\n    this.buying = +entry.buying_liabilities\n    this.offers = new Mirrorable()\n    this.selling = +entry.selling_liabilities\n\n    this.asset.balances.push(this)\n\n    if (this.code === \"XLM\") {\n      this.asset.project(\"price\", this)\n    } else {\n      this.orderbook = Orderbook.forBalance(this, Asset.resolve(\"XLM\"))\n      this.orderbook.project(\"price\", this)\n    }\n  }\n}\n\nBalance.table = {}\nBalance.define(\"value\", [\"amount\", \"price\"], function () {\n  return this.amount === 0 ? 0 : this.amount * this.price\n})\n\n/**\n * Helpers\n */\n\nfunction entryId (entry) {\n  return entry.asset_code ? `${entry.asset_code}:${entry.asset_issuer}` : \"XLM\"\n}\n","\"use_strict\"\n/**\n * Order class\n */\n\nconst cosmicLib = require(\"cosmic-lib\")\nconst CosmicLink = cosmicLib.CosmicLink\nconst Mirrorable = require(\"@cosmic-plus/jsutils/mirrorable\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nconst global = require(\"./global\")\n\n/**\n * Class\n */\n\nconst Order = module.exports = class Order extends Projectable {\n  static rebalance (share) {\n    if (share.asset.code === \"XLM\") return\n\n    const order = new Order(\"balance\", share.asset.orderbook, share)\n    order.watch(share, [\"value\", \"target\"], () => order.refresh())\n    order.watch(share.asset, \"liabilities\", () => order.refresh())\n    order.watch(share.asset.orderbook, [\"bids\", \"asks\"], () => order.refresh())\n    share.asset.offers.listen(\"change\", () => order.refresh(), order)\n\n    return order\n  }\n\n  constructor (type, orderbook, ...parameters) {\n    super()\n    this.type = type\n    this.method = Order.type[this.type]\n    this.operations = new Mirrorable()\n    this.orderbook = orderbook\n    this.parameters = parameters\n\n    this.operations.listen(\"update\", () => {\n      this.compute([\"cosmicLink\", \"description\"])\n    })\n\n    this.refresh()\n  }\n\n  refresh () {\n    this.operations.splice(0, this.operations.length)\n    this.operations.trigger(\"update\")\n    this.method(this, ...this.parameters)\n    this.trigger(\"refresh\")\n  }\n\n  /**\n   * Operations Management\n   */\n\n  getOperation (offer, make) {\n    const id = `${offer.balance.anchor.name}:${make ? offer.price : \"take\"}`\n    const operation = this.operations.find(x => x.id === id)\n    if (operation) {\n      return operation\n    } else {\n      const newOperation = { id }\n      this.operations.push(newOperation)\n      return newOperation\n    }\n  }\n\n  addOperation (offer, amount) {\n    const operation = this.getOperation(offer, amount > 0)\n    this.setOperation(operation, offer, Number(amount) || operation.amount)\n  }\n\n  setOperation (operation, offer, amount) {\n    operation.amount = amount\n    operation.cost = amount * offer.price\n    operation.offer = offer\n    this.operations.trigger(\"update\")\n  }\n}\n\nOrder.define(\"cosmicLink\", \"operations\", function () {\n  return Order.operationsToCosmicLink(this.operations)\n})\nOrder.define(\"description\", \"operations\", function () {\n  return Order.operationsToDescription(this.operations)\n})\n\n/**\n * Utilities\n */\n\nOrder.operationsToCosmicLink = function (operations = []) {\n  const cosmicLink = new CosmicLink({\n    memo: \"Equilibre.io\",\n    maxTime: \"+5\",\n    source: global.portfolio.accountId\n  })\n  operations.forEach(operation => {\n    cosmicLink.addOperation(\"manageOffer\", operationToOdesc(operation))\n  })\n\n  return cosmicLink\n}\n\nOrder.operationsToDescription = function (operations = []) {\n  const desc = []\n  operations.forEach(op => {\n    if (operationDirection(op) === \"buy\") {\n      desc.push(`\n${__(\"Buy\")} ${nice(op.amount)} ${op.offer.balance.code} ${__(\"at\")} \\\n${nice(op.offer.price)} ${global.currency}\n      `)\n    } else {\n      desc.push(`\n${__(\"Sell\")} ${nice(op.amount)} ${op.offer.balance.code} ${__(\"at\")} \\\n${nice(op.offer.price)} ${global.currency}\n      `)\n    }\n  })\n  return desc\n}\n\n/**\n * Helpers\n */\n\nfunction operationDirection (op) {\n  if (\n    op.amount > 0 && op.offer.side === \"bids\"\n    || op.amount < 0 && op.offer.side === \"asks\"\n  ) {\n    return \"buy\"\n  } else {\n    return \"sell\"\n  }\n}\n\nfunction operationToOdesc (operation) {\n  const offer = operation.offer\n  const base = offer.balance.code + \":\" + offer.balance.anchor.address\n  const quote = \"XLM\"\n\n  let odesc\n  if (operationDirection(operation) === \"buy\") {\n    odesc = {\n      buying: base,\n      selling: quote,\n      amount: operation.amount * offer.price_r.n / offer.price_r.d,\n      price: { n: offer.price_r.d, d: offer.price_r.n }\n    }\n  } else {\n    odesc = {\n      buying: quote,\n      selling: base,\n      amount: operation.amount,\n      price: offer.price_r\n    }\n  }\n  odesc.amount = Math.abs(odesc.amount).toFixed(7)\n  odesc.offerId = operation.offer.id\n\n  return odesc\n}\n\n/**\n * Orders types\n */\n\nOrder.type = {}\n\nOrder.type.market = function (order, size) {\n  if (!size) return\n\n  const side = size > 0 ? \"asks\" : \"bids\"\n  const amount = Math.abs(size)\n  const offer = order.orderbook.findOffer(side, offer => {\n    return offer.baseVolume > amount\n  })\n  order.addOperation(offer, amount)\n}\n\nOrder.type.limit = function (order, size, { orderbook, filter }) {\n  if (!size) return\n\n  const side = size > 0 ? \"bids\" : \"asks\"\n  const offer = (orderbook || order.orderbook).findOffer(side, filter)\n  if (offer) order.addOperation(tightenSpread(offer), Math.abs(size))\n}\n\n/**\n * Rebalancing\n */\n\nOrder.type.balance = function (order, share) {\n  const asset = share.asset\n  const orderbook = asset.orderbook\n\n  // Requirements\n\n  if (share.target === null || share.amountDelta === 0) return\n\n  if (!orderbook.bestBid || !orderbook.bestAsk) {\n    order.description = [__(\"Fetching orderbook...\")]\n    return\n  }\n\n  if (asset.liabilities) {\n    const currentOffers = asset.offers.filter(offer => !offer.outdated)\n    if (currentOffers.length) {\n      order.description = [__(\"Rebalancing...\")]\n      return\n    }\n  }\n\n  // Rebalancing\n\n  setBalancesLimits(share)\n  if (isOneOperationEnough(share)) {\n    addBalancingOperation(share, orderbook, share.amountDiff)\n  } else {\n    addSplitTrade(share)\n  }\n}\n\n/**\n * Set the `amountTradable` property of **share** balances according to\n * **share** target.\n */\nfunction setBalancesLimits (share, deviation = global.balanceShareDeviation) {\n  const balances = share.asset.balances\n  if (balances.length === 1) {\n    balances[0].amountTradable = share.amountDelta\n    return\n  }\n\n  const amountTarget = +nice(share.amount / balances.length, 7)\n  const amountMin = +nice(amountTarget * (1 - deviation), 7)\n  const amountMax = +nice(amountTarget * (1 + deviation), 7)\n\n  balances.forEach(balance => {\n    if (share.amountDiff > 0) {\n      balance.amountTradable = amountMax - balance.amount\n    } else {\n      balance.amountTradable = balance.amount - amountMin\n    }\n  })\n}\n\n/**\n * Returns whether or not it is possible meet **share** rebalancing target in\n * one operation.\n */\nfunction isOneOperationEnough (share) {\n  const balances = share.asset.balances\n  return !!filterTradableBalances(balances, share.amountDelta).length\n}\n\n/**\n * Return the **balances** that can be traded for **amountTraded**.\n */\nfunction filterTradableBalances (balances, amountTraded = 0) {\n  return balances.filter(balance => balance.amountTradable >= amountTraded)\n}\n\n/**\n * Adds an operation to `share.order` that trades **size** `share.asset` on\n * **orderbook**.\n */\nfunction addBalancingOperation (share, orderbook, size) {\n  const filter = makeOfferFilter(share, Math.abs(size))\n  Order.type.limit(share.order, size, { orderbook, filter })\n}\n\n/**\n * Split a trade over multiple anchors.\n */\nfunction addSplitTrade (share) {\n  const tradableBalances = filterTradableBalances(share.asset.balances)\n  const tradableAmounts = tradableBalances.map(x => x.amountTradable)\n  const tradableTotal = tradableAmounts.reduce((x, sum) => x + sum, 0)\n  const tradeShares = tradableAmounts.map(x => x / tradableTotal)\n  const tradeAmounts = tradeShares.map(x => +nice(x * share.amountDiff, 7))\n\n  tradableBalances.forEach((balance, index) => {\n    addBalancingOperation(share, balance.orderbook, tradeAmounts[index])\n  })\n}\n\n/**\n * Returns a balancing offer filter for **tradedAmount** to be used with\n * `Orderbook.findOffer()`.\n */\nfunction makeOfferFilter (share, amountTraded) {\n  const noMinValue = share.mode === \"quantity\" || share.amount === 0\n  return offer => {\n    return (\n      offer.balance.amountTradable >= amountTraded\n      && offer.baseVolume > amountTraded * global.skipMarginalOffers\n      && (noMinValue || amountTraded * offer.basePrice > global.minOfferValue)\n    )\n  }\n}\n\n/**\n * Create a copy of **offer** with a delta to global market price reduced by\n * **percentage**.\n */\nfunction tightenSpread (offer, percentage = global.spreadTightening) {\n  const clone = Object.assign({}, offer)\n  const diff = percentage * offer.balance.asset.orderbook[\"spread%\"] / 100\n\n  if (offer.side === \"bids\") clone.price = offer.price * (1 + diff)\n  else clone.price = offer.price * (1 - diff)\n\n  if (offer.balance.asset.globalPrice) clampOfferPrice(clone)\n  updateOfferPriceR(clone)\n\n  return clone\n}\n\n/**\n * Floor/ceil **offer**'s price to maintain a maximum spread of **spread**\n * from its price.\n *\n * @param {Object} offer offer to price-cap\n * @param {Number} [spread=0.025] Maximum spread from asset price (in percent)\n */\nfunction clampOfferPrice (offer, spread = global.maxSpread / 2) {\n  const refPrice = offer.balance.asset.price\n  if (offer.side === \"bids\") {\n    offer.price = clamp(offer.price, refPrice * (1 - spread), refPrice)\n  } else {\n    offer.price = clamp(offer.price, refPrice, refPrice * (1 + spread))\n  }\n}\n\n/**\n * Returns a number whose value is limited to the given range.\n *\n * @param  {Number} value An arbitrary number\n * @param  {Number} min Lower boundary\n * @param  {[type]} max Upper boundary\n * @return {Number}\n */\nfunction clamp (value, min, max) {\n  return Math.min(Math.max(value, min), max)\n}\n\n/**\n * Set `offer.price_r` according to `offer.price`.\n *\n * @param  {Object} offer\n */\nfunction updateOfferPriceR (offer) {\n  const quote = offer.balance.orderbook.quote\n\n  offer.price_r = {\n    n: nice(offer.price * 10000000000, 0),\n    d: nice(quote.price * 10000000000, 0)\n  }\n\n  // Ten characters maximum\n  while (offer.price_r.n > 999999999 || offer.price_r.d > 999999999) {\n    offer.price_r.n = nice(offer.price_r.n / 10, 0)\n    offer.price_r.d = nice(offer.price_r.d / 10, 0)\n  }\n}\n\n/**\n * Append Order.type to Order class\n */\n\nfor (let key in Order.type) {\n  if (!Order[key]) Order[key] = (...parameters) => new Order(key, ...parameters)\n}\n","\"use_strict\"\n/**\n * Overlay that prevent user interaction\n */\nconst clickWall = module.exports\n\nconst html = require(\"@cosmic-plus/jsutils/html\")\n\nconst overlay = html.create(\"div\", { hidden: true })\nhtml.append(document.body, overlay)\n\nObject.assign(overlay.style, {\n  position: \"fixed\",\n  zIndex: 999,\n  top: 0,\n  width: \"100%\",\n  height: \"100%\"\n})\n\nclickWall.enable = () => html.show(overlay)\nclickWall.disable = () => html.hide(overlay)\n","\"use_strict\"\n/**\n * Compute portfolio data from Account object.\n */\nconst axios = require(\"@cosmic-plus/base/axios\")\nconst cosmicLib = require(\"cosmic-lib\")\nconst Mirrorable = require(\"@cosmic-plus/jsutils/mirrorable\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\nconst { timeout } = require(\"@cosmic-plus/jsutils/misc\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nconst Asset = require(\"./asset\")\nconst Balance = require(\"./balance\")\nconst global = require(\"./global\")\n// const History = require(\"./portfolio-history\")\nconst Offers = require(\"./offers\")\n\n/**\n * Class\n */\n\nmodule.exports = class Portfolio extends Projectable {\n  static async resolve (address) {\n    await checkNetwork()\n\n    const destination = await cosmicLib.resolve.address(address)\n    if (destination.memo)\n      throw new Error(__(\"Invalid federated address: shared account.\"))\n    if (await cosmicLib.resolve.isAccountEmpty(destination.account_id))\n      throw new Error(__(\"Empty account\"))\n\n    const portfolio = new Portfolio(destination.account_id)\n    cosmicLib.config.source = portfolio.address = address\n    portfolio.streamAccount()\n\n    return portfolio\n  }\n\n  constructor (accountId) {\n    super()\n\n    // eslint-disable-next-line no-console\n    console.log(this)\n\n    this.accountId = accountId\n    this.assets = new Mirrorable()\n    this.balances = new Mirrorable()\n    this.accountCallBuilder = Portfolio.accountCallBuilder(accountId)\n\n    this.define(\"total\", \"assets\", () => {\n      return this.assets\n        .filter(asset => asset.isSupported)\n        .reduce((sum, x) => sum + x.value, 0)\n    })\n    this.assets.mirror(asset =>\n      this.watch(asset, [\"value\", \"isSupported\"], () => this.compute(\"total\"))\n    )\n\n    this.new = true\n  }\n\n  static accountCallBuilder (accountId) {\n    const server = cosmicLib.resolve.server()\n    return server.accounts().accountId(accountId)\n  }\n\n  async streamAccount () {\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      await this.getAccount()\n      await timeout(5000)\n    }\n  }\n\n  async getAccount () {\n    try {\n      const account = await this.accountCallBuilder.call()\n      this.ingest(account)\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  async ingest (account) {\n    this.account = account\n\n    for (let index in account.balances) {\n      const balance = Balance.ingest(account.balances[index])\n      const asset = balance.asset\n\n      if (this.assets.indexOf(asset) === -1) {\n        this.assets.push(asset)\n        this.balances.push(balance)\n        asset.watch(this, \"total\", () => asset.compute(\"share\"))\n        asset.getInfo()\n      } else if (this.balances.indexOf(balance) === -1) {\n        this.balances.push(balance)\n      }\n    }\n\n    if (this.new) {\n      delete this.new\n      await Asset.refreshPrices()\n      this.offers = Offers.forPortfolio(this)\n      await this.offers.stream()\n      this.trigger(\"open\")\n    }\n  }\n}\n\n/**\n * Extension\n */\n\nAsset.define(\"share\", \"value\", function () {\n  return global.portfolio && 100 * this.value / global.portfolio.total\n})\n\n/**\n * Helpers\n */\n\nasync function checkNetwork () {\n  const horizon = cosmicLib.resolve.horizon()\n  try {\n    await axios.get(horizon)\n  } catch (error) {\n    throw new Error(__(\"Can't connect to the Stellar blockchain\"))\n  }\n}\n","\"use_strict\"\n/**\n * Anchor class\n */\nconst aliases = require(\"@cosmic-plus/base/aliases\")\nconst helpers = require(\"@cosmic-plus/jsutils/misc\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\n\n/**\n * Class\n */\n\nconst Anchor = module.exports = class Anchor extends Projectable {\n  static resolve (address) {\n    return Anchor.all[address] || new Anchor(address)\n  }\n\n  constructor (address) {\n    super()\n\n    this.address = address\n    this.alias = aliases.all[address]\n    this.name = helpers.shorter(this.alias || this.address)\n    Anchor.all[address] = this\n\n    this.assets = {}\n  }\n}\n\nAnchor.all = {}\n\n/**\n * Known Anchors\n */\n\nAnchor.known = {\n  \"USD:GDUKMGUGDZQK6YHYA5Z6AY2G4XDSZPSZ3SW5UN3ARVMO6QSRDWP5YLEX\": \"USD\",\n  \"WSD:GDSVWEA7XV6M5XNLODVTPCGMAJTNBLZBXOFNQD3BNPNYALEYBNT6CE2V\": \"USD\",\n  \"USD:GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP\": \"USD\",\n  \"USD:GBUYUAI75XXWDZEKLY66CFYKQPET5JR4EENXZBUZ3YXZ7DS56Z4OKOFU\": \"USD\",\n  \"USD:GBSTRUSD7IRX73RQZBL3RQUH6KS3O4NYFY3QCALDLZD77XMZOPWAVTUK\": \"USD\",\n  \"CNY:GAREELUB43IRHWEASCFBLKHURCGMHE5IF6XSE7EXDLACYHGRHM43RFOX\": \"CNY\",\n  \"XCN:GCNY5OXYSY4FKHOPT2SPOQZAOEIGXB5LBYW3HVU3OWSTQITS65M5RCNY\": \"CNY\",\n  \"BCNY:GBCNYBHAAPDSU3UIHXXQTHYZVSBJBI4YUNWXMKJBCPDHTVYR75G6NFHD\": \"CNY\",\n  \"EURT:GAP5LETOV6YIE62YAM56STDANPRDO7ZFDBGSNHJQIYGGKSMOZAHOOS2S\": \"EUR\",\n\n  \"SLT:GCKA6K5PCQ6PNF5RQBF7PQDJWRHO6UOGFMRLK3DYHDOI244V47XKQ4GP\": null,\n  \"MOBI:GA6HCMBLTZS5VYYBCATRBRZ3BZJMAFUDKYYF6AH6MVCMGWMRDNSWJPIH\": null,\n  \"SHX:GDSTRSHXHGJ7ZIVRBXEYE5Q74XUVCUSEKEBR7UCHEUUEK72N7I7KJ6JH\": null,\n  \"RMT:GDEGOXPCHXWFYY234D2YZSPEJ24BX42ESJNVHY5H7TWWQSYRN5ZKZE3N\": null,\n  \"TERN:GDGQDVO6XPFSY4NMX75A7AOVYCF5JYGW2SHCJJNWCQWIDGOZB53DGP6C\": null,\n  \"PEDI:GBVUDZLMHTLMZANLZB6P4S4RYF52MVWTYVYXTQ2EJBPBX4DZI2SDOLLY\": null,\n  \"GRAT:GAJ7V3EMD3FRWAPBEJAP7EC4223XI5EACDZ46RFMY5DYOMCIMWEFR5II\": null,\n  \"REPO:GCZNF24HPMYTV6NOEHI7Q5RJFFUI23JKUKY3H3XTQAFBQIBOHD5OXG3B\": null,\n\n  \"BTC:GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG\": null,\n  \"BTC:GATEMHCCKCY67ZUCKTROYN24ZYT5GK4EQZ65JJLDHKHRUZI3EUEKMTCH\": null,\n  \"BTC:GAUTUYY2THLF7SGITDFMXJVYH3LHDSMGEAKSBU267M2K7A3W543CKUEF\": null,\n  \"BTC:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P\": null,\n  \"BTC:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5\": null,\n  \"ETH:GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG\": null,\n  \"ETH:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P\": null,\n  \"ETH:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5\": null,\n  \"ETH:GBETHKBL5TCUTQ3JPDIYOZ5RDARTMHMEKIO2QZQ7IOZ4YC5XV3C2IKYU\": null,\n  \"ETH:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR\": null,\n  \"LTC:GC5LOR3BK6KIOK7GKAUD5EGHQCMFOGHJTC7I3ELB66PTDFXORC2VM5LP\": null,\n  \"LTC:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5\": null,\n  \"LTC:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P\": null,\n  \"XRP:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5\": null,\n  \"XRP:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P\": null,\n  \"KIN:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR\": null,\n  \"BAT:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR\": null,\n  \"ZRX:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR\": null,\n  \"BCH:GAEGOS7I6TYZSVHPSN76RSPIVL3SELATXZWLFO4DIAFYJF7MPAHFE7H4\": null,\n  \"STEEM:GB3KBOFUCVTWEZ7YIZ7PAKLQMKPCTGWU3LOMANMCT7V6I3AAK4USTEEM\": null,\n  \"SBD:GB3KBOFUCVTWEZ7YIZ7PAKLQMKPCTGWU3LOMANMCT7V6I3AAK4USTEEM\": null,\n  \"LINK:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR\": null\n}\n","\"use_strict\"\n/**\n * Account offers\n */\n\nconst cosmicLib = require(\"cosmic-lib\")\nconst loopcall = require(\"@cosmic-plus/loopcall\")\nconst Mirrorable = require(\"@cosmic-plus/jsutils/mirrorable\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\nconst hiddenKey = require(\"@cosmic-plus/jsutils/misc\").setHiddenProperty\nconst { day } = require(\"@cosmic-plus/jsutils/misc\")\n\nconst Asset = require(\"./asset\")\nconst Balance = require(\"./balance\")\n\n/**\n * Class\n */\n\nclass Offers extends Mirrorable {\n  static forPortfolio (portfolio) {\n    const offers = Offers.forAccount(portfolio.accountId)\n    hiddenKey(offers, \"portfolio\", portfolio)\n    return offers\n  }\n\n  static forAccount (accountId) {\n    const offers = new Offers()\n    hiddenKey(offers, \"accountId\", accountId)\n    hiddenKey(offers, \"callBuilder\", Offers.callBuilder(accountId))\n    return offers\n  }\n\n  static callBuilder (accountId) {\n    const server = cosmicLib.resolve.server()\n    return server.offers(\"accounts\", accountId)\n  }\n\n  async stream (delay = 15000) {\n    // Resolves after first get().\n    return this.get().then(() => setTimeout(() => this.stream(), delay))\n  }\n\n  async get () {\n    try {\n      const records = await loopcall(this.callBuilder, { limit: 200 })\n      this.ingest(records)\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  ingest (records) {\n    this.forEach(offer => offer.alive = false)\n    const offers = records.map(record => Offer.ingest(record)).filter(x => x)\n    this.splice(0, 0, ...offers)\n    this.clean()\n  }\n\n  clean () {\n    for (let index = this.length - 1; index > -1; index--) {\n      const offer = this[index]\n      if (!offer.alive) {\n        this.splice(index, 1)\n        offer.destroy()\n      }\n    }\n  }\n}\n\nclass Offer extends Projectable {\n  static resolve (record) {\n    return Offer.table[recordToId(record)]\n  }\n\n  static ingest (record) {\n    const offer = Offer.resolve(record)\n    if (offer) offer.update(record)\n    else return new Offer(record)\n  }\n\n  constructor (record) {\n    super()\n\n    this.intern = recordToId(record)\n    Offer.table[this.intern] = this\n\n    const quote = Asset.resolve(\"XLM\")\n    const asset = record.buying.asset_code ? record.buying : record.selling\n    this.balance = Balance.resolve(asset.asset_code, asset.asset_issuer)\n    this.asset = this.balance.asset\n    this.side = record.buying.asset_code ? \"buy\" : \"sell\"\n\n    this.define(\n      \"price\",\n      \"rawPrice\",\n      this.side === \"sell\"\n        ? () => quote.price * this.rawPrice\n        : () => quote.price / this.rawPrice\n    )\n    this.watch(quote, \"price\", () => this.compute(\"price\"))\n\n    this.update(record)\n\n    this.balance.offers.push(this)\n    this.asset.offers.push(this)\n\n    this.listen(\"destroy\", () => {\n      delete Offer.table[this.intern]\n      this.balance.offers.splice(this.balance.offers.indexOf(this), 1)\n      this.asset.offers.splice(this.asset.offers.indexOf(this), 1)\n    })\n  }\n\n  update (record) {\n    Object.assign(this, record)\n    this.alive = true\n\n    this.rawPrice = record.price\n    this.compute(\"price\")\n    this.rawAmount = record.amount\n    if (this.side === \"buy\") {\n      this.amount = nice(this.rawAmount * this.rawPrice, 7)\n    }\n\n    this.date = day(this.last_modified_time)\n    this.outdated = this.date !== day()\n  }\n}\n\nOffer.table = {}\n\n/**\n * Helpers\n */\n\nfunction recordToId (record) {\n  return `${record.id}-${record.last_modified_ledger}`\n}\n\n/**\n * Export\n */\n\nmodule.exports = Offers\n","\"use_strict\"\n/**\n * Various helpers\n */\n\nconst helpers = exports\n\nhelpers.isOverflowing = function (element) {\n  return (\n    element.scrollHeight > element.clientHeight\n    || element.scrollWidth > element.clientWidth\n  )\n}\n","\"use_strict\"\n/**\n * Activity Gui\n */\n\nconst Gui = require(\"@cosmic-plus/jsutils/gui\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst Tabs = require(\"@cosmic-plus/jsutils/tabs\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\nconst { CosmicLink } = require(\"cosmic-lib\")\n\nconst SideFrame = require(\"./side-frame\")\nconst global = require(\"./global\")\n\n/**\n * Class\n */\n\nclass ActivityGui extends Gui {\n  constructor (portfolio) {\n    super(`\n<section>\n  <h2>${__(\"Activity\")}</h2>\n  %selector\n  %view\n</section>\n    `)\n\n    this.portfolio = portfolio\n\n    const tabs = new Tabs()\n    // tabs.project([\"selector\", \"view\"], this)\n    tabs.project(\"view\", this)\n\n    tabs.add(\n      \"offers\",\n      __(\"Open Orders\"),\n      new ActivityGui.Offers(portfolio),\n      \"select\"\n    )\n    // tabs.add(\"orders\", __(\"Orders\"), new ActivityGui.Orders(portfolio))\n    // tabs.add(\"transfers\", __(\"Transfers\"), new ActivityGui.Transfers(portfolio))\n    // tabs.select(__(\"Orders\"))\n  }\n}\n\nActivityGui.Offers = class ActivityOffers extends Gui {\n  constructor (portfolio) {\n    super(`\n<section>\n  <table>\n    <tr>\n      <th>${__(\"Date\")}</th>\n      <th>${__(\"Asset\")}</th>\n      <th>${__(\"Direction\")}</th>\n      <th>${__(\"Amount\")}</th>\n      <th>${__(\"Price\")} (%globalCurrency)</th>\n    </tr>\n    %formatOffer:offers...\n    <tr><td colspan=\"5\" align=\"center\" onclick=%cancelOffers>\n      <h3>${__(\"Cancel All\")}</h3>\n    </td></tr>\n  </table>\n</section>\n\n<p class=\"note\">\n  ${__(\"All orders are passed against Stellar Lumens (XLM).\")}\n  ${__(\n    \"For your comfort, prices are displayed in their %%globalCurrency equivalent.\"\n  )}\n  ${__(\n    \"However, those converted values will change according to XLM price movement.\"\n  )}\n</p>\n    `)\n\n    this.portfolio = portfolio\n    this.offers = portfolio.offers\n    this.globalCurrency = global.currency\n  }\n\n  formatOffer (offer) {\n    return new ActivityGui.Offer(offer)\n  }\n\n  cancelOffers () {\n    if (!this.offers.length) return\n\n    const txParams = {\n      memo: \"Equilibre.io\",\n      network: \"public\",\n      maxTime: \"+5\",\n      source: this.portfolio.accountId\n    }\n\n    const cosmicLink = new CosmicLink(txParams)\n    this.offers.forEach(offer => {\n      cosmicLink.addOperation(\"manageOffer\", { offerId: offer.id, amount: 0 })\n    })\n\n    const sideFrame = new SideFrame(cosmicLink.uri)\n    sideFrame.listen(\"destroy\", () => {\n      this.portfolio.getAccount()\n      this.portfolio.offers.get()\n    })\n  }\n}\n\nActivityGui.Offer = class ActivityOffer extends Gui {\n  constructor (offer) {\n    super(`\n<tr>\n  <td>%formatDate:last_modified_time</td>\n  <td>\n    <img src=%image alt=\"\">\n    <span>%name / %anchor</span>\n  </td>\n  <td>%side</td>\n  <td align=\"right\">%nice:amount</td>\n  <td align=\"right\">%nice:price</td>\n</tr>\n    `)\n\n    this.offer = offer\n    offer.project([\"last_modified_time\", \"amount\", \"price\"], this)\n\n    this.name = offer.asset.code\n    this.side = offer.side === \"buy\" ? __(\"Buy\") : __(\"Sell\")\n    this.anchor = offer.balance.anchor.name\n    offer.asset.link(\"image\", this)\n  }\n\n  nice (number) {\n    return nice(number)\n  }\n\n  formatDate (value) {\n    const date = value ? new Date(value) : new Date()\n    return date.toLocaleDateString()\n  }\n}\n\n// ## Unused code\n//\n// ActivityGui.Orders = class ActivityOrders extends Gui {\n//   constructor (portfolio) {\n//     super(`\n// <table>\n//   <tr>\n//     <th>${__(\"Date\")}</th>\n//     <th>${__(\"Asset\")}</th>\n//     <th>${__(\"Direction\")}</th>\n//     <th>${__(\"Amount\")}</th>\n//     <th>${__(\"Price\")}</th>\n//   </tr>\n//   <tr>\n//     <td colspan=\"6\"><h3><i18n>${__(\"Open Orders\")}</i18n></h3></td>\n//   </tr>\n//   %openOrders...\n//   <tr>\n//     <td colspan=\"6\"><h3><i18n>${__(\"Completed Orders\")}</i18n></h3></td>\n//   </tr>\n//   %completedOrders...\n// </table>\n//     `)\n//     this.portfolio = portfolio\n//   }\n// }\n\n// ActivityGui.Transfers = class ActivityTransfers extends Gui {\n//   constructor (portfolio) {\n//     super(`\n// <table>\n//   <tr>\n//     <th>${__(\"Date\")}</th>\n//     <th>${__(\"Asset\")}</th>\n//     <th>${__(\"With\")}</th>\n//     <th>${__(\"Amount\")}</th>\n//   </tr>\n//   %transfers...\n// </table>\n//     `)\n//     this.portfolio = portfolio\n//   }\n// }\n\n/**\n * Export\n */\n\nmodule.exports = ActivityGui\n","\"use_strict\"\n/**\n * Portfolio Graphical User Interface\n */\nconst Highcharts = require(\"highcharts\")\nconst Highstock = require(\"highcharts/highstock\")\nrequire(\"./highcharts-theme\")\n\nconst Gui = require(\"@cosmic-plus/jsutils/gui\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst Tabs = require(\"@cosmic-plus/jsutils/tabs\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nconst AssetGui = require(\"./asset-gui\")\nconst global = require(\"./global\")\nconst marketData = require(\"./market-data\")\n\n/**\n * Class\n */\n\nclass PortfolioGui extends Gui {\n  constructor (portfolio) {\n    super(`\n<section><h2>${__(\"Portfolio\")}: %total %currency</h2>\n  %summary\n  %chart\n\n  <p class=\"note\" align=\"center\">\n    ${__(\"Anchor prices are from Stellar DEX\")} /\n    ${__(\"Global prices are from %%coingecko when available.\")}\n    </p>\n\n</section>`)\n\n    this.portfolio = portfolio\n\n    portfolio.project(\"total\", this, x => nice(x, 2))\n    this.currency = global.currency\n    this.summary = new PortfolioGui.Summary(this)\n    this.coingecko = new Gui(\n      `<a target=\"_blank\" rel=\"noopener\" href=\"https://coingecko.com\">coingecko</a>`\n    )\n  }\n\n  select (asset) {\n    if (this.chart) this.chart.destroy()\n    if (asset && asset.globalPrice && asset.code !== global.currency) {\n      this.chart = new PortfolioGui.Chart(asset)\n    } else {\n      this.chart = null\n    }\n  }\n}\n\nPortfolioGui.Summary = class PortfolioSummary extends Gui {\n  constructor (parent) {\n    const tabs = new Tabs()\n    super(`%nav <section>%view</section>`, tabs)\n\n    tabs.add(\"table\", __(\"Table\"), new PortfolioGui.Table(parent))\n    tabs.add(\"graph\", __(\"Graph\"), () => new PortfolioGui.Graph(parent))\n    tabs.listen(\"select\", id => localStorage[\"PortfolioSummary.tab\"] = id)\n    tabs.select(localStorage[\"PortfolioSummary.tab\"] || \"table\")\n  }\n}\n\nPortfolioGui.Table = class PortfolioTable extends Gui {\n  constructor (parent) {\n    super(`\n<table>\n  <tr>\n    <th>${__(\"Name\")}</th>\n    <th>${__(\"Anchor\")}</th>\n    <th>${__(\"Amount\")}</th>\n    <th>${__(\"Price\")}</th>\n    <th>${__(\"Value\")}</th>\n  </tr>\n  %assetsGui...\n</table>\n`)\n\n    this.parent = parent\n\n    this.assetsGui = parent.portfolio.assets.mirror(asset => {\n      const assetGui = new AssetGui(asset)\n      assetGui.domNode.onclick = () => this.select(assetGui)\n      return assetGui\n    })\n\n    this.watch(parent.portfolio, \"total\", () => this.sort())\n  }\n\n  sort () {\n    this.assetsGui.sort((a, b) => b.asset.value - a.asset.value)\n  }\n\n  select (assetGui) {\n    if (this.selected) {\n      this.selected.domNode.className = \"\"\n      this.selected.simpleView()\n    }\n\n    if (this.selected === assetGui) {\n      this.parent.select()\n      this.selected = null\n    } else {\n      this.parent.select(assetGui.asset)\n      assetGui.domNode.className = \"selected\"\n      this.selected = assetGui\n      assetGui.detailledView()\n    }\n  }\n}\n\nPortfolioGui.Graph = class PortfolioGraph extends Gui {\n  constructor (parent) {\n    super(`<div -ref=%container align=\"center\"></div>`)\n    this.parent = parent\n\n    this.listen(\"destroy\", () => this.chart && this.chart.destroy())\n    this.watch(parent.portfolio, \"total\", () => {\n      // For some unknow reason the timeout makes the chart draw better.\n      setTimeout(() => this.makePie(), 1)\n    })\n  }\n\n  makePie () {\n    if (this.chart) this.chart.destroy()\n\n    this.chart = Highcharts.chart(this.container, {\n      title: \"\",\n      legend: { enabled: false },\n      chart: { type: \"pie\" },\n      tooltip: {\n        pointFormat: `\n${__(\"Amount\")}: {point.amount} {point.code}<br>\n${__(\"Price\")}: {point.price} ${global.currency}<br>\n<b>${__(\"Value\")}: {point.y} ${global.currency}</b>\n`\n      },\n\n      plotOptions: {\n        pie: {\n          dataLabels: {\n            format: \"{point.amount} {point.code}<br>({point.percentage:.0f}%)\"\n          },\n          point: {\n            events: {\n              select: x => this.parent.select(x.target.options.asset),\n              legendItemClick: () => false\n            }\n          }\n        }\n      },\n\n      series: [\n        {\n          name: __(\"Amount\"),\n          colorByPoint: true,\n          ignoreHiddenPoint: true,\n          data: this.parent.portfolio.assets\n            .filter(asset => asset.value)\n            .map(makeAssetPoint)\n            .sort((a, b) => b.y - a.y)\n        }\n      ]\n    })\n  }\n}\n\nfunction makeAssetPoint (asset) {\n  return {\n    name: asset.name,\n    code: asset.code,\n    asset: asset,\n    y: +nice(asset.value, 2),\n    amount: nice(asset.amount),\n    price: nice(asset.price),\n    percentage: asset.percentage\n  }\n}\n\nPortfolioGui.Chart = class PortfolioChart extends Gui {\n  constructor (asset) {\n    super(`\n      <section><h3>${asset.code} ${__(\"to\")} ${global.currency}</h3>\n        <div -ref=%container><p>${__(\"Loading...\")}</p></div>\n      </section>\n    `)\n\n    this.asset = asset\n    this.listen(\"destroy\", () => this.chart && this.chart.destroy())\n    marketData.assetHistory(asset).then(data => this.makeChart(data))\n  }\n\n  makeChart (data) {\n    this.chart = Highstock.stockChart(this.container, {\n      rangeSelector: { selected: 2 },\n      chart: {\n        backgroundColor: \"#fbfbfd\"\n      },\n      yAxis: [\n        { labels: { align: \"left\" }, height: \"80%\", resize: { enabled: true } },\n        { labels: { align: \"left\" }, top: \"80%\", height: \"20%\", offset: 0 }\n      ],\n      series: [\n        {\n          type: \"spline\",\n          name: \"Price\",\n          data: data.map(x => [x.time, +nice(x.price)])\n        },\n        {\n          type: \"column\",\n          name: \"Volume\",\n          data: data.map(x => [x.time, x.volume]),\n          yAxis: 1\n        }\n      ],\n      credits: { enabled: false }\n    })\n  }\n}\n\n/**\n * Export\n */\n\nmodule.exports = PortfolioGui\n","\"use_strict\"\n/**\n * Theme for Highchart\n */\n\nconst Highcharts = require(\"highcharts\")\n\nHighcharts.theme = {\n  chart: { backgroundColor: \"#fbfbfd\" },\n  tooltip: { style: { fontSize: \"14px\" } },\n  credits: { enabled: false },\n\n  plotOptions: {\n    pie: {\n      allowPointSelect: true,\n      animation: false,\n      cursor: \"pointer\",\n      dataLabels: { style: { fontSize: \"14px\" } }\n    }\n  },\n\n  responsive: {\n    rules: [\n      {\n        condition: {\n          maxWidth: 500\n        },\n        chartOptions: {\n          legend: { enabled: true },\n          plotOptions: {\n            pie: {\n              showInLegend: true,\n              dataLabels: {\n                format: \"{point.percentage:.0f}%\",\n                distance: -20\n              }\n            }\n          }\n        }\n      }\n    ]\n  },\n\n  colors: [\n    \"rgba(231,  76,  60, 0.8)\",\n    \"rgba(230, 126,  34, 0.8)\",\n    \"rgba(242, 202,  39, 0.8)\",\n    \"rgba(46,  204, 112, 0.8)\",\n    \"rgba(52,  152, 219, 0.8)\",\n    \"rgba(155,  89, 182, 0.8)\",\n\n    \"rgba(231,  76,  60, 0.6)\",\n    \"rgba(230, 126,  34, 0.6)\",\n    \"rgba(242, 202,  39, 0.6)\",\n    \"rgba(46,  204, 112, 0.6)\",\n    \"rgba(52,  152, 219, 0.6)\",\n    \"rgba(155,  89, 182, 0.6)\",\n\n    \"rgba(231,  76,  60, 0.4)\",\n    \"rgba(230, 126,  34, 0.4)\",\n    \"rgba(242, 202,  39, 0.4)\",\n    \"rgba(46,  204, 112, 0.4)\",\n    \"rgba(52,  152, 219, 0.4)\",\n    \"rgba(155,  89, 182, 0.4)\"\n  ]\n}\n\nHighcharts.setOptions(Highcharts.theme)\n","\"use_strict\"\n/**\n * Asset GUI\n */\nconst Gui = require(\"@cosmic-plus/jsutils/gui\")\nconst html = require(\"@cosmic-plus/jsutils/html\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst msg = require(\"@cosmic-plus/i18n\").__\n\n/**\n * Class\n */\n\nclass AssetGui extends Gui {\n  constructor (asset) {\n    super(`\n<tr %style>\n  <td align=\"left\">\n    <img src=%image alt=\"\">\n    <span>%name</span>\n  </td>\n  <td align=\"left\">\n    <div hidden=%simple>%anchors...</div>\n    <div %class>%anchorTotal</div>\n  </td>\n  <td align=\"right\">\n    <div hidden=%simple>%amounts...</div>\n    <div %class>%amountTotal</div>\n  </td>\n  <td align=\"right\">\n    <div hidden=%simple>%prices...</div>\n    <div %class title=%priceDetails>%priceTotal</div>\n  </td>\n  <td align=\"right\">\n    <div hidden=%simple>%values...</div>\n    <div %class>%valueTotal</div>\n  </td>\n</tr>\n    `)\n\n    this.asset = asset\n\n    this.name = asset.code\n    this.anchors = asset.balances.mirror(x => cell(x.anchor, \"name\"))\n    this.amounts = asset.balances.mirror(x => cell(x, \"amount\", nice))\n    this.prices = asset.balances.mirror(x => priceCell(x, \"price\", nice))\n    this.values = asset.balances.mirror(x => cell(x, \"value\", x => nice(x, 2)))\n    asset.link(\"image\", this)\n    asset.link(\"amount\", this, \"amountTotal\", nice)\n    asset.link(\"price\", this, \"priceTotal\", nice)\n    asset.link(\"value\", this, \"valueTotal\", x => nice(x, 2))\n    asset.anchors.feed(this, \"anchorHeader\", anchorName)\n\n    const orderbook = this.asset.orderbook\n    this.define(\"priceDetails\", \"orderbook\", () => priceDetails(orderbook))\n    this.watch(orderbook, [\"bestAsk\", \"bestBid\", \"spread%\"], () => {\n      this.compute(\"priceDetails\")\n    })\n\n    this.simpleView()\n  }\n\n  simpleView () {\n    this.simple = true\n    this.class = \"\"\n    this.anchorTotal = this.anchorHeader\n  }\n\n  detailledView () {\n    this.simple = false\n    this.class = \"footer\"\n    this.anchorTotal = \"Total\"\n  }\n}\n\n/**\n * Export\n */\n\nmodule.exports = AssetGui\n\n/**\n * Helpers\n */\n\nfunction anchorName (anchors) {\n  if (anchors.length === 1) return anchors[0].name\n  else return `${msg(\"Multiple\")} (${anchors.length})`\n}\n\nfunction cell (object, key, func) {\n  const node = html.create(\"div\", null, object[key])\n  object.link(key, node, \"textContent\", func)\n  return node\n}\n\nfunction priceCell (object, key, func) {\n  const node = cell(object, \"price\", func)\n  object.trap(\"orderbook\", () => {\n    if (object.orderbook) {\n      object.orderbook.trap([\"bestAsk\", \"bestBid\", \"spread%\"], () => {\n        node.title = priceDetails(object.orderbook)\n      })\n    }\n  })\n  return node\n}\n\nfunction priceDetails (orderbook) {\n  if (orderbook.base.code === \"XLM\") return \"\"\n  return `\nBuy: ${nice(orderbook.bestBid)} \\\n- Sell: ${nice(orderbook.bestAsk)} \\\n- Spread: ${nice(orderbook[\"spread%\"], 2)}%\n  `\n}\n","\"use_strict\"\n/**\n * Settings Graphical User Interface\n */\nconst Gui = require(\"@cosmic-plus/jsutils/gui\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nconst global = require(\"./global\")\n\n/**\n * Class\n */\n\nclass SettingsGui extends Gui {\n  constructor () {\n    super(`\n      <section><h2>${__(\"Settings\")}</h2>\n        <section><h3>${__(\"General Settings\")}</h3>\n          <form>\n            <label><span>${__(\"Language\")}:</span>\n              <select value=%language>\n                <option value=\"us\">English</option>\n                <option value=\"fr\">Français</option>\n              </select>\n            </label>\n            <label><span>${__(\"Currency\")}:</span>\n              <select value=%currency>\n                <option value=\"CNY\">CNY</option>\n                <option value=\"EUR\">EUR</option>\n                <option value=\"USD\">USD</option>\n              </select>\n            </label>\n          </form>\n        </section>\n      </section>\n    `)\n\n    // Two-way binding\n    global.project([\"currency\", \"language\"], this)\n    this.project([\"currency\", \"language\"], global)\n\n    // Refresh interface\n    this.listen(\"change:currency\", () => location.reload())\n    this.listen(\"change:language\", () => location.reload())\n  }\n}\n\n/**\n * Export\n */\n\nmodule.exports = SettingsGui\n","\"use_strict\"\n/**\n * Share Graphical User Interface\n */\nconst Gui = require(\"@cosmic-plus/jsutils/gui\")\nconst i18n = require(\"@cosmic-plus/i18n\")\nconst html = require(\"@cosmic-plus/jsutils/html\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst { __ } = i18n\n\nconst SideFrame = require(\"./side-frame\")\nconst global = require(\"./global\")\nconst Order = require(\"./order\")\nconst Share = require(\"./share\")\n\n/**\n * Class\n */\n\nclass RebalanceGui extends Gui {\n  constructor (portfolio) {\n    super(`\n<section class=\"RebalanceGui\">\n  <h2>${__(\"Rebalance\")}</h2>\n  %table\n  <section hidden=%hideSection>\n    <div class=\"errors\">%formatError:errors...</div>\n    <form onsubmit=%rebalance hidden=%hideRebalance>\n      <button type=\"submit\" disabled=%block>${__(\"Rebalance\")}</button>\n    </form>\n    <form onsubmit=%apply hidden=%hideApply>\n      <button type=\"submit\" disabled=%block>${__(\"Apply\")}</button>\n      <button onclick=%cancel>${__(\"Cancel\")}</button>\n    </form>\n  </section>\n  %setupGui\n</section>\n    `)\n\n    this.portfolio = portfolio\n    const template = localStorage[`target:${portfolio.account.id}`]\n    this.share = Share.forPortfolio(portfolio, template)\n\n    this.table = new RebalanceGui.Table(this)\n    this.table.project(\"selected\", this)\n    this.project(\"selected\", this.table)\n\n    this.errors = this.share.errors\n    this.errors.feed(this, \"block\", errors => !!errors.length)\n\n    this.define(\"hideRebalance\", [\"selected\", \"modified\"], () => {\n      return this.selected || this.modified\n    })\n    this.define(\"hideApply\", [\"selected\", \"modified\"], () => {\n      return this.selected || !this.modified\n    })\n    this.define(\"hideSection\", [\"hideRebalance\", \"hideApply\"], () => {\n      return this.hideRebalance && this.hideApply\n    })\n\n    this.share.project(\"modified\", this)\n\n    this.define(\"setupGui\", \"selected\", () => {\n      if (this.setupGui) this.setupGui.destroy()\n      return this.selected && new ShareGui.Setup(this.selected, this)\n    })\n  }\n\n  formatError (error) {\n    return new Gui(`<div class=\"error\">%error</div>`, { error })\n  }\n\n  cancel () {\n    location.reload()\n    return false\n  }\n\n  apply () {\n    try {\n      const accountId = this.portfolio.account.id\n      localStorage[\n        `target:${accountId}`\n      ] = this.share.template = this.share.toString()\n      this.share.modified = false\n    } catch (error) {\n      console.error(error)\n    }\n    return false\n  }\n\n  rebalance () {\n    try {\n      const operations = listOperations(this.share)\n      const outdated = this.portfolio.offers.filter(offer => offer.outdated)\n      const remaining = outdated.filter(offer => {\n        return !operations.find(op => op.offer.id === offer.id)\n      })\n      operations.forEach(op => {\n        if (!op.offer.id && remaining.length) op.offer.id = remaining.pop().id\n      })\n\n      if (!operations.length) return false\n      const cosmicLink = Order.operationsToCosmicLink(operations)\n      remaining.forEach(offer => {\n        cosmicLink.addOperation(\"manageOffer\", { amount: 0, offerId: offer.id })\n      })\n      if (cosmicLink) {\n        const sideFrame = new SideFrame(cosmicLink.uri)\n        sideFrame.listen(\"destroy\", () => {\n          this.portfolio.getAccount()\n          this.portfolio.offers.get()\n        })\n      }\n    } catch (error) {\n      console.error(error)\n    }\n    return false\n  }\n}\n\nfunction listOperations (share) {\n  let operations = []\n  share.childs.forEach(child => {\n    if (child.order) operations = operations.concat(child.order.operations)\n  })\n  return operations\n}\n\nRebalanceGui.Table = class RebalanceTable extends Gui {\n  constructor (parent) {\n    super(`\n<section class=\"RebalanceTable\">\n  <table>\n    <tr>\n      <th>${__(\"Name\")}</th>\n      <th>${__(\"Goal\")}</th>\n      <th>${__(\"Divergence\")}</th>\n      <th>${__(\"Operation\")}</th>\n    </tr>\n    %formatShare:shares...\n    <tr hidden=true>\n      <td align=\"center\" colspan=\"4\"><h3>${__(\"Add Asset\")}</h3></td>\n    </tr>\n  </table>\n</section>\n    `)\n\n    this.selected = undefined\n    this.shares = parent.share.childs\n    this.sortShares(this.shares)\n    parent.share.listen(\"update\", () => this.sortShares(this.shares))\n  }\n\n  formatShare (share) {\n    const shareGui = new ShareGui(share)\n    shareGui.domNode.onclick = () => this.selected = share\n    return shareGui\n  }\n\n  sortShares (array) {\n    return array.sort((a, b) => b.goal - a.goal || a.globalPrice)\n  }\n}\n\nclass ShareGui extends Gui {\n  constructor (share) {\n    super(`\n<tr class=\"ShareGui\">\n  <td align=\"left\">\n    <img src=%image alt=\"\">\n    <span>%name</span>\n  </td>\n  <td align=\"right\">%goal%</td>\n  <td align=\"right\">%divergence</td>\n  <td align=\"right\">%description...</td>\n</tr>\n    `)\n\n    this.share = share\n\n    this.name = share.name || share.asset && share.asset.code\n    share.asset.project(\"image\", this)\n    share.project(\"goal\", this, x => nice(x, 2))\n    share.project(\"divergence\", this, x => {\n      return x == null ? \"-\" : nice(x * 100, 2) + \"%\"\n    })\n\n    this.watch(share, \"order\", () => {\n      if (!share.order) {\n        this.cosmicLink = this.description = null\n      } else {\n        share.order.project(\"cosmicLink\", this)\n        share.order.project(\"description\", this, descriptionToList)\n      }\n    })\n  }\n}\n\nShareGui.Setup = class ShareSetup extends Gui {\n  constructor (share, parent) {\n    super(`\n<section>\n  <form onsubmit=%close>\n    <h3>%assetName</h3>\n    <hr>\n    <label><span>${__(\"Size\")}:</span>\n      <input class=\"half\" type=\"number\" step=\"any\" min=\"0\" %max value=%size\n       placeholder=%goal onchange=%switchMode>\n      <select class=\"half\" onchange=%setMode value=%mode>\n        <option value=\"equal\">${__(\"Equal Share\")}</option>\n        <option value=\"percentage\">${__(\"Percentage\")}</option>\n        <option value=\"amount\">${__(\"Amount\")}</option>\n      </select>\n    </label>\n\n    <hr>\n\n    <input type=\"submit\" value=\"${__(\"Close\")}\">\n  </form>\n</section>\n    `)\n\n    this.parent = parent\n    this.share = share\n\n    this.assetName = share.asset.name\n\n    share.project(\"goal\", this, x => nice(x, 2))\n\n    share.project(\"size\", this)\n    this.project(\"size\", share, x => x != null ? Number(x) : null)\n\n    share.project(\"mode\", this, mode => mode || \"equal\")\n    this.project(\"mode\", share)\n  }\n\n  switchMode () {\n    if (this.size && this.mode === \"equal\") this.mode = \"percentage\"\n  }\n\n  setMode () {\n    switch (this.mode) {\n    case \"equal\":\n      this.size = null\n      break\n    case \"percentage\":\n      this.size = +nice(100 * this.share.value / global.portfolio.total, 2)\n      this.max = 100\n      break\n    case \"amount\":\n      this.size = this.share.asset.amount\n      this.max = null\n      break\n    }\n  }\n\n  close () {\n    this.switchMode()\n    this.parent.selected = null\n    return false\n  }\n}\n\n/**\n * Helpers\n */\n\nfunction descriptionToList (description) {\n  return description.map(e => html.create(\"div\", null, e))\n}\n\n/**\n * Export\n */\n\nmodule.exports = RebalanceGui\n","\"use_strict\"\n/**\n * Share class.\n *\n * A (portfolio) Share object represents a statically or dynamically allocated\n * share of the user portfolio. It is a theoric goal that the rebalancing\n * process aims to reach as much as possible.\n *\n * A Share may be composed by several Share subentries, in such a way that the\n * complete portfolio balancing target ends up being a tree made of Shares.\n */\nconst Mirrorable = require(\"@cosmic-plus/jsutils/mirrorable\")\nconst nice = require(\"@cosmic-plus/jsutils/nice\")\nconst Projectable = require(\"@cosmic-plus/jsutils/projectable\")\n\nconst Asset = require(\"./asset\")\nconst Order = require(\"./order\")\nconst strategy = require(\"./strategy\")\n\n/**\n * Share sizing attributes:\n * size, sizeMin, sizeMax, sizeLock\n * amountMin, amountMax, amountLock\n *\n * Strategies: equal, marketCap,... (inertia, change7D, RSI)\n * Filters: change30d, RSI\n */\n\nconst Share = module.exports = class Share extends Projectable {\n  static forPortfolio (portfolio, template) {\n    const share = template ? Share.fromString(template) : new Share()\n    share.portfolio = portfolio\n    share.errors = new Mirrorable()\n    share.goal = 100\n\n    portfolio.share = share\n    share.watch(portfolio, \"total\", () => share.compute(portfolio.total))\n\n    // Add/Remove assets after trustline change.\n    portfolio.assets.forEach(asset => {\n      if (\n        !share.childs.find(child => asset === child.asset)\n        && asset.isSupported\n      )\n        share.childs.push(new Share(asset))\n    })\n    share.childs.forEach((child, index) => {\n      if (\n        !portfolio.assets.find(asset => asset === child.asset)\n        || !child.asset.isSupported\n      )\n        share.childs.splice(index, 1)\n    })\n    portfolio.assets.listen(\"add\", asset => {\n      if (asset.isValid) share.childs.push(new Share(asset))\n    })\n    portfolio.assets.listen(\"remove\", asset => {\n      const index = share.childs.findIndex(child => child.asset === asset)\n      share.childs.splice(index, 1)\n    })\n\n    return share\n  }\n\n  constructor (asset) {\n    super()\n\n    if (asset) {\n      this.asset = asset\n      this.mode = \"amount\"\n      this.size = asset.amount\n      this.order = Order.rebalance(this)\n      asset.shares.push(this)\n      asset.project(\"value\", this)\n    } else {\n      this.childs = new Mirrorable()\n      this.childs.listen(\"add\", child => {\n        child.parent = this\n        this.compute()\n      })\n    }\n\n    // Normalize & compute\n    this.trap(\"size\", () => {\n      if (this.size) {\n        this.size = Math.max(0, this.size)\n        if (this.mode === \"percentage\") this.size = Math.min(100, this.size)\n      }\n      this.compute()\n    })\n  }\n\n  get root () {\n    if (this.parent) return this.parent.root\n    else return this\n  }\n\n  compute () {\n    if (this.parent) {\n      this.parent.compute()\n    } else if (this.portfolio && this.portfolio.total) {\n      this.errors.splice(0, this.errors.length)\n      this.modified = this.hasChanged()\n      strategy.apply(this, this.portfolio.total)\n    }\n  }\n\n  hasChanged () {\n    return this.template !== this.toString()\n  }\n\n  static fromString (string) {\n    const template = JSON.parse(string)\n    const share = Share.fromTemplate(template)\n    share.template = string\n    return share\n  }\n\n  static fromTemplate (template) {\n    if (typeof template === \"string\") template = { asset: template }\n\n    const share = template.asset\n      ? new Share(Asset.resolve(template.asset))\n      : new Share()\n\n    share.size = template.size\n    share.mode = template.mode\n\n    if (!template.asset) {\n      share.name = template.group\n      template.childs.forEach(entry =>\n        share.childs.push(Share.fromTemplate(entry))\n      )\n    }\n\n    return share\n  }\n\n  toString (beautify) {\n    const template = this.toTemplate()\n    return JSON.stringify(template, null, beautify && 2)\n  }\n\n  toTemplate () {\n    let template = {}\n\n    if (this.size != null) template.size = this.size\n    if (this.mode != null && this.mode !== \"equal\") template.mode = this.mode\n\n    if (this.asset) {\n      if (this.asset.type === \"unknown\") template.asset = this.asset.id\n      else template.asset = this.asset.code\n      if (Object.keys(template).length === 1) template = template.asset\n    } else if (this.childs) {\n      if (this.name) template.group = this.name\n      template.childs = this.childs.map(share => share.toTemplate())\n    }\n\n    return template\n  }\n}\n\nShare.define(\"delta\", [\"value\", \"target\"], function () {\n  return +nice(this.value - this.target, 7)\n})\nShare.define(\"divergence\", [\"delta\", \"target\"], function () {\n  return this.target ? this.delta / this.target : null\n})\nShare.define(\"amount\", [\"target\"], function () {\n  return +nice(this.target / this.asset.price, 7)\n})\nShare.define(\"amountDiff\", [\"amount\"], function () {\n  return +nice(this.amount - this.asset.amount, 7)\n})\nShare.define(\"amountDelta\", [\"amountDiff\"], function () {\n  return Math.abs(this.amountDiff)\n})\n\n/*\n[\n  {\n    \"group\": \"Fiats\"\n    \"size\": \"50\",\n    \"childs\": [\n      { \"asset\": \"USD\", \"size\": \"30\", \"min\": { \"amount\": \"2000\" }},\n      { \"asset\": \"EUR\", \"size\": \"20\", \"min\": { \"amount\": \"500\" }},\n      { \"asset\": \"CNY\", \"size\": \"20\" },\n      { \"asset\": \"GBP\", \"size\": \"20\" }\n  },\n  {\n    //\"group\": \"Native\"\n    \"size\": \"25\",\n    \"strategy\": \"marketCap\",\n    \"childs\": [\"XLM\", \"SLT\", \"MOBI\"]\n  },\n  {\n    //\"group\": \"Tether\",\n    \"size\": \"25\",\n    \"strategy\": [[\"marketCap\", 25], [\"equal\", 25], [\"change7D\", 25], [\"inertia\", 25]],\n    \"childs\": [{ \"asset\": \"BTC\", \"min\": { \"amount\": \"0.05\", \"size\": \"20\" }}, \"ETH\", [10, \"byMarketCap\"]]\n  }\n]\n\n[\n  {\n    \"group\": \"Fiat\",\n    \"size\": 50,\n    \"strategy\": \"equal\",\n    \"childs\": [\"USD\", \"EUR\", \"GBP\", \"CNY\"]\n  },\n  {\n    \"group\": \"Native\",\n    \"size\": 20,\n    \"strategy\": [[\"marketCap\", 25], [\"equal\", 25], [\"inertia\", 50]]\n  }\n  { \"asset\": \"BTC\", \"size\": 10 },\n  { \"asset\": \"ETH\", \"size\": 5 },\n  { \"asset\": \"XRP\", \"size\": 3 }\n]\n\n*/\n","\"use_strict\"\n/**\n * Rebalancing strategies\n */\nconst strategy = exports\n\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nstrategy.apply = function (share, total) {\n  if (!share.childs) return share.target = total\n\n  let used = 0\n  const computed = []\n  const remaining = []\n  const strat = share.mode || \"equal\"\n\n  share.childs.forEach(child => {\n    if (child.mode === \"skip\" || child.mode === \"amount\") {\n      child.target =\n        child.size != null\n          ? child.asset.price * child.size\n          : child.asset.price * child.asset.amount\n      child.goal = 100 * child.target / total\n      if (child.goal > 100) {\n        child.root.errors.push(\n          `${child.asset.code}: ${__(\"Order over portfolio total\")}`\n        )\n      }\n      used += child.goal\n    } else if (child.size != null) {\n      child.goal = child.size\n      used += child.size\n      computed.push(child)\n    } else {\n      remaining.push(child)\n    }\n  })\n\n  if (total < 0) throw new Error(\"Rebalancing impossible\")\n\n  if (used > 100 || used !== 100 && !remaining.length) {\n    makeTotal100(computed, used)\n    remaining.forEach(share => share.goal = 0)\n  } else if (remaining.length) {\n    method[strat](remaining, 100 - used)\n  }\n\n  computed.concat(remaining).forEach(child => {\n    strategy.apply(child, total * child.goal / 100)\n  })\n}\n\nfunction makeTotal100 (targets, used) {\n  const space = 100 - used\n  targets.forEach(target => target.goal += space * target.goal / used)\n}\n\n/*******************************************************************************\n * Strategies\n */\n\nconst method = {}\n\nmethod.equal = function (shares, space) {\n  const goal = space / shares.length\n  shares.forEach(share => share.goal = goal)\n}\n","module.exports = \"<section><h2>License</h2>\\n  <section><h3>MIT License</h3>\\n\\n    <p>Copyright (c) 2019 Antoine Bodin &lt;<a\\n    href=\\\"mailto:mister.ticot@cosmic.plus\\\">mister.ticot@cosmic.plus</a>&gt;</p>\\n\\n    <p>Permission is hereby granted, free of charge, to any person obtaining a\\n    copy of this software and associated documentation files (the \\\"Software\\\"),\\n    to deal in the Software without restriction, including without limitation\\n    the rights to use, copy, modify, merge, publish, distribute, sublicense,\\n    and/or sell copies of the Software, and to permit persons to whom the\\n    Software is furnished to do so, subject to the following conditions:</p>\\n\\n    <p>The above copyright notice and this permission notice shall be included\\n    in all copies or substantial portions of the Software.</p>\\n\\n    <p>THE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\\n    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\\n    IN THE SOFTWARE.</p>\\n  </section>\\n</section>\\n\"","module.exports = \"<section><h2>February, 16th − Beta 1 Release</h2>\\n  <section><h3>Welcome!</h3>\\n\\n    <p>Equilibre.io is a portfolio balancer that runs on the Stellar\\n    Decentralized Exchange. It is a convenient trading tool to manage positions\\n    over the long term.</p>\\n\\n    <p>Regularly balancing an investment portfolio is known to boost its\\n    performances, providing you choose wisely the assets to bet on. Equilibre.io\\n    also let you spread your position over several anchors, for a better fund\\n    safety.</p>\\n\\n    <p>Equilibre.io is still under testing & development. If you use it now,\\n    I'll ask you to consider yourself as a tester. Please report any bug you\\n    could encounter, and double-check transactions before signing them.</p>\\n\\n    <p>Your feedback matters to me and will be listened to.</p>\\n\\n    <p>Respectfully, <br>MisterTicot</p>\\n\\n  </section>\\n\\n  <section><h3>To Be Implemented</h3>\\n    <ul>\\n      <li>Interface to add/remove assets</li>\\n      <li>Portfolio historic value</li>\\n      <li>Customizable rebalancing periodicity</li>\\n      <li>Pie graph for rebalancing tab</li>\\n    </ul>\\n  </section>\\n\\n  <section><h3>Known Limitations</h3>\\n    <ul>\\n\\n      <li>It is required to \\\"Cancel All\\\" offers between applying a new balance\\n      setup</li>\\n\\n    </ul>\\n  </section>\\n</section>\\n\"","\"use_strict\"\n/**\n * Footer\n */\nconst { CosmicLink } = require(\"cosmic-lib\")\n\nconst Gui = require(\"@cosmic-plus/jsutils/gui\")\nconst html = require(\"@cosmic-plus/jsutils/html\")\nconst { __ } = require(\"@cosmic-plus/i18n\")\n\nconst global = require(\"./global\")\nconst SideFrame = require(\"./side-frame\")\n\nconst MYPUBKEY = \"GAWO2C52D57XBT7SQL6YB3XPHFLFD2J4Z5RN7HPFZSHXJMXH72HRXNV3\"\n\n/**\n * Class\n */\n\nclass Footer extends Gui {\n  constructor (icons, links) {\n    super(\n      `\n<footer id=\"footer\" class=\"scrollable\">\n  <div class=\"nobreak\">%icons...</div>\n  %links\n</footer>\n    `,\n      { icons, links }\n    )\n  }\n}\n\n/**\n * Footer Icons\n */\n\nclass Icon extends Gui {\n  constructor (image, name, action) {\n    super(`<a -ref=%link class=\"Icon\">%image</a>`)\n\n    this.image = typeof image === \"string\" ? new Gui(image) : image\n    this.link.title = name\n\n    if (typeof action === \"function\") {\n      this.link.onclick = action\n    } else if (typeof action === \"string\") {\n      this.link.href = action\n      if (action.match(/^http/)) {\n        this.link.target = \"_blank\"\n        this.link.rel = \"noopener\"\n      }\n    }\n  }\n}\n\n/**\n * Donate\n */\n\nfunction donate () {\n  const amount = prompt(`\\\n${__(\"Equilibre.io runs on donation.\")}\n\n${__(\n    \"Please contribute to its development according to what you think the service worth.\"\n  )}\n\n${__(\"Enter an amount (in Lumens)\")}:\\\n`)\n\n  if (amount === \"0\" || isNaN(+amount)) {\n    confirm(`${__(\"Not a valid amount\")}: ${amount}`)\n  } else if (amount) {\n    const cosmicLink = new CosmicLink({\n      memo: __(\"Donation to Equilibre.io\"),\n      network: \"public\"\n    }).addOperation(\"payment\", { amount, destination: MYPUBKEY })\n    new SideFrame(cosmicLink.uri)\n  }\n}\n\n/**\n * Icons\n *\n * SVG from @fortawesome/font-awesome-free\n * CC BY 4.0 License (https://creativecommons.org/licenses/by/4.0/)\n */\n\nconst icons = [\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/brands/keybase.svg\"),\n    \"Keybase\",\n    \"https://keybase.io/team/cosmic_plus\"\n  ),\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/brands/telegram-plane.svg\"),\n    \"Telegram\",\n    \"https://t.me/cosmic_plus\"\n  ),\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/brands/reddit.svg\"),\n    \"Reddit\",\n    \"https://reddit.com/r/cosmic_plus\"\n  ),\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/brands/twitter.svg\"),\n    \"Twitter\",\n    \"https://twitter.com/cosmic_plus\"\n  ),\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/brands/medium.svg\"),\n    \"Medium\",\n    \"https://medium.com/cosmic-plus\"\n  ),\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/brands/github.svg\"),\n    \"GitHub\",\n    \"https://github.com/cosmic-plus/webapp-equilibre-io\"\n  ),\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/solid/globe.svg\"),\n    __(\"Website\"),\n    \"https://cosmic.plus\"\n  ),\n  new Icon(\n    require(\"@fortawesome/fontawesome-free/svgs/solid/envelope.svg\"),\n    __(\"Email\"),\n    \"mailto:mister.ticot@cosmic.plus\"\n  ),\n  new Icon(require(\"./svg/donate.svg\"), __(\"Donate\"), donate)\n]\n\n/**\n * Demo Page\n */\nfunction displayDemo () {\n  localStorage[`target:${MYPUBKEY}`] = demoConfig\n  location.href = `?address=${MYPUBKEY}`\n}\n\nconst demoConfig = `{\"childs\":[\"EUR\",\"CNY\",\"USD\",{\"size\":12.5,\"mode\":\"percentage\",\"asset\":\"XLM\"},{\"size\":12.5,\"mode\":\"percentage\",\"asset\":\"ETH\"},{\"size\":12.5,\"mode\":\"percentage\",\"asset\":\"BTC\"},{\"size\":4,\"mode\":\"percentage\",\"asset\":\"SLT\"},{\"size\":4,\"mode\":\"percentage\",\"asset\":\"REPO\"},{\"size\":2.25,\"mode\":\"percentage\",\"asset\":\"PEDI\"},{\"size\":2.25,\"mode\":\"percentage\",\"asset\":\"TERN\"}]}`\n\n/**\n * Links\n */\nconst links = new Gui(\n  `\n<p>\n  <a target=\"_blank\" rel=\"noopener\" href=\"https://cosmic.plus\">${__(\n    \"A Cosmic.Plus Software\"\n  )}</a>\n  − <a onclick=%displayDemo>${__(\"Demo\")}</a>\n  − <a target=\"_blank\" rel=\"noopener\" href=\"https://nucleo.fi/leaderboard/top/?span=3m\">Performance</a>\n  − <a onclick=%displayLicense>${__(\"License\")}</a>\n  − <a onclick=%displayAbout>${__(\"About\")}</a>\n</p>\n`,\n  {\n    displayDemo,\n    displayLicense: () => global.tabs.select(\"#license\"),\n    displayAbout: () => global.tabs.select(\"#about\")\n  }\n)\n\n/**\n * Create footer\n */\n\nconst footer = new Footer(icons, links)\nhtml.append(document.body, footer)\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path fill=\\\"none\\\" d=\\\"M0 0h512v512H0z\\\"/><path d=\\\"M211.719 367.797C219.469 379.281 224 393.109 224 408c0 39.734-32.266 72-72 72-39.758 0-72-32.266-72-72 0-23.172 11.148-43.563 28.164-56.734 1.852 5.594 4.336 11.125 8.289 15.906 7.055 8.516 20.336 18.266 43.531 16.344 7.578-.641 15.844-2.547 24.586-5.641 8.875-3.078 18.508-6.5 27.149-10.078zM389.875 32.578c-13.344 3.797-24.156 10.672-38.813 18.328-90 47-196.25 39.25-220 77-27.469 51.672-48.883 89.203-48.945 107.625-.016.063-.055.094-.07.141.586 19.953 19.625 58.438 29.07 75.969 6.789-15.516 17.492-29.219 32.25-40.688 7.414-5.766 13.289-9.922 18.617-13.5-3.016-9.25-6.945-20.016-10.875-28.203 10.742-7.391 26.078-26.484 31.398-40.313 13.227.094 30.25-3.172 44.773-6.938 6.406 6.844 12.977 13.563 21.766 20.016-3.961 14.344-7.07 27.063-23.438 38.359-22.313 15.438-42.734 21.578-69.484 43.109-16.086 12.953-26.07 28.203-30.625 45.641-3.148 12.094 4.734 53.016 58 33.141 10.023-3.75 23.398-8.531 34.875-14.25 23.797-11.813 52.922-40.781 61-44.828 15.234-7.641 49.813-10.656 86.313-35.016 12.531-8.375 22.063-20.688 26.477-33.625 33.242-64.828 60.883-59.656 68.633-72.563C477.734 133.734 423.563 23 389.875 32.578z\\\"/></svg>\\n\""],"sourceRoot":""}