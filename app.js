(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(t,e,n){"use strict";n(65),n(76),n(45),n(77),n(170);var r=n(15);n(17);var i,o,a=n(16),c=n(95),s=n(133),u=n(29),l=n(206),f=n(266),h=n(43).__,p=n(67),d=n(267),v=n(221),m=n(222),y=n(298),g=n(300),b=n(305),k=n(306),w=new s(n(321)),x=new s(n(322)),R=new s(n(323));function A(){return(A=a(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(),H["stellar-public-key"]=null,t.next=4,I();case 4:return i=t.sent,H.info(h("Please open the Stellar App in your Ledger Wallet")),t.prev=6,t.next=9,i.connect();case 9:H["stellar-public-key"]=i.publicKey,T(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),H.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}function S(){return(S=a(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(),H["stellar-public-key"]=null,t.next=4,L();case 4:return o=t.sent,H.info(h("Please import your Trezor public key")),t.prev=6,t.next=9,o.connect();case 9:H["stellar-public-key"]=o.publicKey,T(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),H.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}function D(){i&&i.disconnect(),o&&o.disconnect()}function T(){return P.apply(this,arguments)}function P(){return(P=a(r.mark((function t(){var e,n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=H["stellar-public-key"])||H.error(h("Please enter an address.")),D(),H.info(h("Connecting to your account...")),f.$set({address:e}),(n=new v).enable(),t.prev=7,t.next=10,d.resolve(e);case 10:p.portfolio=t.sent,H.info("".concat(h("Fetching market data"),"...")),setTimeout((function(){return H.info("".concat(h('Sorry, it takes a while (^.^)"'),"..."))}),1e4),setTimeout((function(){return H.info("".concat(h("Almost there"),"..."))}),2e4),setTimeout((function(){return H.info("".concat(h("I'm running, I'm running"),"..."))}),3e4),p.portfolio.listen("open",(function(){C(),n.destroy()})),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(7),n.destroy(),H.error(t.t0);case 22:case"end":return t.stop()}}),t,null,[[7,18]])})))).apply(this,arguments)}function C(){var t=p.portfolio,e=location.hash;_.remove("#welcome"),_.remove("#login"),_.remove("#demo"),_.add("#portfolio",h("Portfolio"),new g(t)),_.add("#rebalance",h("Rebalance"),new k(t)),_.add("#activity",h("Activity"),new y(t)),_.add("#settings",h("Settings"),new b),_.add("#logout",h("Logout"),(function(){location.replace(location.href.replace(/\?.*$/,"#login"))})),_.listen("select",(function(){if(_.selected){var t=_.selected.content;t.reflow&&t.reflow()}})),_.select(e),_.selected||_.select("#portfolio")}var O="GAWO2C52D57XBT7SQL6YB3XPHFLFD2J4Z5RN7HPFZSHXJMXH72HRXNV3";function E(){localStorage["target:".concat(O)]=M,location.href="?address=".concat(O)}var M='{"childs":[{"size":24,"asset":"BTC","closing":["GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P"]},{"size":32,"asset":"CNY"},{"size":24,"asset":"ETH"},{"size":32,"asset":"EUR"},{"size":6,"asset":"LTC"},{"size":3,"asset":"MOBI"},{"size":3,"asset":"RMT"},{"size":3,"asset":"SHX"},{"size":3,"asset":"TERN"},{"size":32,"asset":"USD","closing":["GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP"]},{"size":24,"asset":"XLM"},{"size":6,"asset":"XRP"}]}';function I(){return Promise.all([n.e(4),n.e(2)]).then(n.t.bind(null,339,7)).then((function(t){return t.default}))}function L(){return B.apply(this,arguments)}function B(){return(B=a(r.mark((function t(){var e;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(5).then(n.t.bind(null,363,7)).then((function(t){return t.default}));case 2:return(e=t.sent).register("equilibre.io","mister.ticot@cosmic.plus"),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var N=n(143),G=n(324);N.register(G.fiat,{type:"fiat",isTether:!0}),N.register(G.foreign,{type:"crypto",isTether:!0}),N.register(G.native,{type:"crypto",isTether:!1}),N.resolve(p.currency,{type:"fiat",isTether:!0}),n(199).register(n(325)),n(326);var _=p.tabs=new l({nav:c.header,selector:c.header,view:c.main});_.add("#welcome",h("Welcome"),x),_.add("#demo",h("Demo"),E),_.add("#login",h("Login"),c.loginTab),_.add("#license",null,w),_.add("#disclaimer",null,R),_.add("#about",null,x),c.demoLink.onclick=E,u.show(c.loginTab),_.select(null),_.select(location.hash),_.selected||(localStorage["PortfolioSummary.tab"]?_.select("#login"):_.select("#welcome"));var H=new m(c.loginForm,{onsubmit:T});H.dom.loginWithLedger.onclick=function(){return A.apply(this,arguments)},H.dom.loginWithTrezor.onclick=function(){return S.apply(this,arguments)},f.address&&(_.select("#login"),H["stellar-public-key"]=f.address,T()),_.listen("select",(function(t){location.hash=t,window.scrollTo(0,0)}))},141:function(t,e,n){"use strict";n(137),n(196),n(138),n(175),n(166),n(197),n(286);var r=e;r.positive=function(t){return Math.max(0,t)},r.negative=function(t){return Math.min(0,t)},r.fixed7=function(t){return+Number(t).toFixed(7)},r.clamp=function(t,e,n){return Math.min(Math.max(t,e),n)},r.absoluteMin=function(t,e){return Math.abs(t)<=Math.abs(e)?t:e},r.arrayContains=function(t,e){return-1!==t.indexOf(e)},r.arrayRemove=function(t,e){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},r.arrayOnlyInFirst=function(t,e){return t.filter((function(t){return!r.arrayContains(e,t)}))},r.arraySum=function(t,e){return e?t.reduce((function(t,n){return t+n[e]}),0):t.reduce((function(t,e){return t+e}),0)},r.arrayScale=function(t,e,n){var i=r.arraySum(t,n);return i?n?t.map((function(t){return t[n]*e/i})):t.map((function(t){return t*e/i})):t.map((function(){return 0}))}},143:function(t,e,n){"use strict";n(132),n(137),n(134),n(138),n(175),n(129),n(68),n(139),n(65),n(184),n(130),n(45),n(131),n(77),n(278),n(136),n(170);var r=n(15);n(17);var i=n(16),o=n(14),a=n(66),c=n(26),s=n(64),u=n(63),l=n(62);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var h=n(146),p=n(69),d=n(279),v=n(219),m=n(141),y=m.fixed7,g=m.arrayContains,b=m.arrayRemove,k=m.arraySum,w=t.exports=function(t){s(l,t);var e,n,u=f(l);function l(t,e){var n;return o(this,l),n=u.call(this),e&&Object.assign(a(n),e),n.id=t,l.table[t]=a(n),n.image="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",n.type?(n.code=t,"fiat"===n.type?(l.fiats.push(a(n)),n.image="".concat("https://www.xe.com/themes/xe/images/flags/svg/").concat(t.toLowerCase()).concat(".svg"),n.useGlobalPrice=!0):(l.cryptos.push(a(n)),n.type="crypto",(n.isTether||"XLM"===n.id)&&(n.useGlobalPrice=!0))):(n.code=t.replace(/:.*/,""),n.name=n.code,n.type="unknown"),n.anchors=new h,n.balances=new h,n.offers=new h,n.balances.mirror((function(t){n.watch(t,"amount",(function(){return n.compute("amount")})),n.watch(t,["buying","selling"],(function(){n.compute("liabilities")}))})),n.orderbook=v.forAsset(a(n)),n.define("price","globalPrice",(function(){return n.globalPrice||n.orderbook.price})),n.watch(n.orderbook,"price",(function(){return n.compute("price")})),n}return c(l,null,[{key:"resolve",value:function(t,e){return l.table[t]||new l(t,e)}}]),c(l,[{key:"maybeAddBalance",value:function(t){g(this.balances,t)||(this.balances.push(t),t.orderbook||t.streamPrice())}},{key:"maybeRemoveBalance",value:function(t){b(this.balances,t)}},{key:"getInfo",value:(n=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.name&&"crypto"===this.type){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,d.crypto.info(this);case 4:this.info=t.sent,this.name=this.info.name,this.image=this.info.image.small;case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getHistoricPrice",value:(e=i(r.mark((function t(){var e=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.historicPrice){t.next=2;break}return t.abrupt("return",this.historicPrice);case 2:return t.next=4,d.assetHistory(this);case 4:if(this.historicPrice=t.sent,this.historicPrice){t.next=7;break}return t.abrupt("return");case 7:return this.trap("price",(function(){e.historicPrice[e.historicPrice.length-1].price=e.price})),t.abrupt("return",this.historicPrice);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),l}(p);w.define("amount","balances",(function(){return this.balances&&y(k(this.balances,"amount"))})),w.define("value",["amount","price"],(function(){return 0===this.amount?0:this.amount*this.price})),w.define("valueMin",["amountMin","price"],(function(){return this.amountMin?this.amountMin*this.price:0})),w.define("liabilities",["balances","price"],(function(){if(this.balances){var t=this.balances.reduce((function(t,e){return t+e.buying-e.selling}),0);return this.price*t}})),w.define("isSupported",["type","price"],(function(){return!("unknown"===this.type&&!this.price)})),w.register=function(t,e){for(var n in t){var r=Object.assign({},e,t[n]);w.resolve(n,r)}},w.getAllInfo=function(){Object.values(w.table).forEach((function(t){return t.getInfo()}))},w.refreshPrices=function(){var t=i(r.mark((function t(e){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=7;break}return t.next=3,w.refreshCryptoPrices();case 3:return t.next=5,w.refreshFiatPrices();case 5:t.next=11;break;case 7:return t.next=9,w.refreshCryptoPrices(e.filter((function(t){return"crypto"===t.type})).map((function(t){return t.code})));case 9:return t.next=11,w.refreshFiatPrices(e.filter((function(t){return"fiat"===t.type})).map((function(t){return t.code})));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w.refreshCryptoPrices=i(r.mark((function t(){var e,n,i=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=i.length>0&&void 0!==i[0]?i[0]:w.cryptos).length){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d.crypto.prices(e);case 5:n=t.sent,e.forEach((function(t){t.useGlobalPrice&&(t.globalPrice=n[t.code])}));case 7:case"end":return t.stop()}}),t)}))),w.refreshFiatPrices=i(r.mark((function t(){var e,n,i=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=i.length>0&&void 0!==i[0]?i[0]:w.fiats).length){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,d.fiat.prices(e);case 5:n=t.sent,e.forEach((function(t){t.useGlobalPrice&&(t.globalPrice=n[t.code])}));case 7:case"end":return t.stop()}}),t)}))),w.table={},w.cryptos=[],w.fiats=[],setInterval(w.refreshCryptoPrices,6e4),setInterval(w.refreshFiatPrices,36e5),console.log(w.table)},176:function(t,e,n){"use strict";n(132),n(129),n(198),n(65),n(130),n(131),n(148);var r=n(14),i=n(66),o=n(26),a=n(64),c=n(63),s=n(62),u=this;function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var f=n(146),h=n(69),p=n(199),d=n(143),v=n(219),m=n(67),y=n(141),g=y.fixed7,b=y.positive,k=y.negative,w=y.arrayRemove,x=function(t){a(n,t);var e=l(n);function n(t){var o;r(this,n);var a=t.code,c=t.issuer;return(o=e.call(this)).code=a,o.anchor=p.resolve(c||"stellar.org"),o.id=n.makeId(a,c),n.table[o.id]=i(o),o.code in o.anchor.assets?(o.asset=o.anchor.assets[o.code],o.known=!0):(o.asset=d.resolve(o.id),o.known=!1),o.update(t),o.offers=new f,o}return o(n,null,[{key:"resolve",value:function(t,e){var r=n.makeId(t,e);return n.table[r]||new n({code:t,issuer:e})}},{key:"ingest",value:function(t){var e=n.recordToParams(t),r=n.resolve(e.code,e.issuer);return r.update(e),r.hasTrustline=!0,r}}]),o(n,[{key:"update",value:function(t){var e=t.amount,n=t.buying,r=t.selling;this.amount=e||0,this.buying=n||0,this.selling=r||0}},{key:"streamPrice",value:function(){this.orderbook||("XLM"===this.id?this.asset.project("price",this):(this.orderbook=v.forBalance(this,d.resolve("XLM")),this.orderbook.project("price",this),this.asset.orderbook.addChild(this.orderbook)))}}]),n}(h);x.table={},x.trap("hasTrustline",(function(){u.hasTrustline&&w(u.asset.target.opening,u.anchor.pubkey)})),x.define("isActive",["action","hasTrustline"],(function(){return this.hasTrustline?"closing"!==this.action:"opening"===this.action})),x.define("value",["amount","price"],(function(){return 0===this.amount?0:this.amount*this.price})),x.define("targetMin",["targetAmount"],(function(){return g(this.targetAmount*(1-m.balanceTargetDeviation))})),x.define("targetMax",["targetAmount"],(function(){return g(this.targetAmount*(1+m.balanceTargetDeviation))})),x.define("targetMinDiff",["amount","targetMin"],(function(){return g(this.targetMin-this.amount)})),x.define("targetMaxDiff",["amount","targetMax"],(function(){return g(this.targetMax-this.amount)})),x.define("sizeMin",["targetMinDiff"],(function(){return k(this.targetMinDiff)})),x.define("sizeMax",["targetMaxDiff"],(function(){return b(this.targetMaxDiff)})),x.define("underMin",["targetMinDiff"],(function(){return k(-this.targetMinDiff)})),x.define("overMax",["targetMaxDiff"],(function(){return b(-this.targetMaxDiff)})),x.makeId=function(t,e){if(e)return"".concat(t,":").concat(e);if("XLM"===t)return"XLM";throw new Error("Missing issuer for ".concat(t,"."))},x.fromRecord=function(t){var e=x.recordToParams(t);return new x(e)},x.recordToParams=function(t){var e=Object.create(t);return e.code="native"===t.asset_type?"XLM":t.asset_code,e.issuer=t.asset_issuer,e.amount=+t.balance,e.buying=+t.buying_liabilities,e.selling=+t.selling_liabilities,e},t.exports=x},199:function(t,e,n){"use strict";n(134),n(288),n(129),n(68),n(139),n(65),n(130),n(131),n(136);var r=n(14),i=n(66),o=n(26),a=n(64),c=n(63),s=n(62);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var l=n(209),f=n(28),h=n(69),p=n(143),d=function(t){a(n,t);var e=u(n);function n(t,o){var a;return r(this,n),a=e.call(this),o&&Object.assign(i(a),o),n.table[t]=i(a),a.pubkey=t,a.alias=l.all[t],a.name=f.shorter(a.alias||a.pubkey),a.assets={},a.emit&&a.emit.forEach((function(t){"string"!=typeof t?a.addAsset(t[0],t[1]):a.addAsset(t)})),a}return o(n,null,[{key:"resolve",value:function(t,e){return n.table[t]||new n(t,e)}}]),o(n,[{key:"addAsset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.assets[e]=p.resolve(t),this.assets[e].anchors.push(this)}}]),n}(h);d.table={},d.register=function(t){for(var e in t)d.resolve(e,t[e])},d.prototype.tetherCode=function(t){for(var e in this.emit){var n=this.emit[e];if(n===t)return t;if(Array.isArray(n)&&n[0]===t)return n[1]}},t.exports=d},201:function(t,e,n){"use strict";var r=n(177);r.theme={rangeSelector:{selected:2,inputBoxBorderColor:"#a9a9a9",buttonTheme:{fill:"#eaeaea",states:{hover:{fill:"#daeeff"},select:{fill:"#003f90",style:{color:"#fff"}}}}},chart:{backgroundColor:"#fff",style:{fontFamily:"'Source Sans Pro', arial, sans-serif",color:"#292929"}},xAxis:{lineColor:"#a9a9a9",tickColor:"#a9a9a9"},yAxis:{lineColor:"#a9a9a9",tickColor:"#a9a9a9"},navigator:{maskFill:"rgba(119, 153, 213, 0.07)",outlineColor:"#a9a9a9",xAxis:{gridLineColor:"#a9a9a9"},series:{color:"#003f90"}},tooltip:{style:{fontSize:"16px"}},scrollbar:{enabled:!1},credits:{enabled:!1},plotOptions:{column:{color:"#545454",dataGrouping:{enabled:!1}},pie:{allowPointSelect:!0,animation:!1,cursor:"pointer",dataLabels:{style:{fontSize:"16px"}}},spline:{color:"#003f90",dataGrouping:{enabled:!1}}}},r.setOptions(r.theme),r.pieColors=["rgba(231,  76,  60, 0.8)","rgba(230, 126,  34, 0.8)","rgba(242, 202,  39, 0.8)","rgba(46,  204, 112, 0.8)","rgba(52,  152, 219, 0.8)","rgba(155,  89, 182, 0.8)","rgba(231,  76,  60, 0.6)","rgba(230, 126,  34, 0.6)","rgba(242, 202,  39, 0.6)","rgba(46,  204, 112, 0.6)","rgba(52,  152, 219, 0.6)","rgba(155,  89, 182, 0.6)","rgba(231,  76,  60, 0.4)","rgba(230, 126,  34, 0.4)","rgba(242, 202,  39, 0.4)","rgba(46,  204, 112, 0.4)","rgba(52,  152, 219, 0.4)","rgba(155,  89, 182, 0.4)"],r.pieResponsive={rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!0},plotOptions:{pie:{showInLegend:!0,dataLabels:{format:"{point.percentage:.0f}%",distance:-20}}}}}]}},218:function(t,e,n){"use strict";n(132),n(195),n(194),n(165),n(166),n(129),n(65),n(130),n(131);var r=n(167),i=n(14),o=n(64),a=n(63),c=n(62),s=n(182);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var l=n(67),f=function(t){o(n,t);var e=u(n);function n(){return i(this,n),e.apply(this,arguments)}return n}(s(Array));f.setCache=function(t,e){var n=JSON.stringify(r({},l.currency,e));localStorage["history:".concat(t)]=n},f.getCache=function(t){var e=localStorage["history:".concat(t)];if(e)return JSON.parse(e)[l.currency]},f.cut=function(t,e){var n=t.length-e;n>0&&t.splice(0,n)},f.latest=function(t){return t[t.length-1]},f.join=function(t,e){var n=e[0].time,r=t.findIndex((function(t){return t.time===n}));return t.slice(0,r).concat(e)},f.oneDay=864e5,f.today=function(){return f.roundTime(new Date)},f.roundTime=function(t){var e=new Date(t);return e.setUTCHours(0,0,0,0),+e},f.time=function(t){return+new Date(t)},f.missingDays=function(t){return f.numberToDays(f.today()-f.latest(t).time)},f.numberToDays=function(t){return t/f.oneDay},t.exports=f},219:function(t,e,n){"use strict";n(132),n(134),n(138),n(175),n(151),n(129),n(68),n(139),n(156),n(65),n(130),n(131),n(148),n(136);var r=n(15);n(17);var i=n(16),o=n(14),a=n(26),c=n(64),s=n(63),u=n(62);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var f=n(147),h=n(69),p=n(135),d=n(28).timeout,v=n(43).__,m=n(141).fixed7,y=t.exports=function(t){c(u,t);var e,n,s=l(u);function u(t){var e;return o(this,u),e=s.call(this),t.balance?(e.type="native",e.balance=t.balance,e.base=t.balance.asset,e.quote=t.quote,e.name="".concat(e.base.code,"/").concat(e.quote.code),e.offersCallBuilder=u.offersCallBuilder(e.balance),e.watch(e.quote,"price",(function(){return e.updateOffersPrices()}))):t.asset&&(e.type="agregated",e.base=t.asset,e.name="".concat(e.base.code," (").concat(v("Agregated"),")"),e.childs=[]),e.watch(e.base,"globalPrice",(function(){return e.compute("price")})),e}return a(u,null,[{key:"forBalance",value:function(t,e){if(t.asset!==e){var n=new u({balance:t,quote:e});return n.streamOffers(),n}}},{key:"forAsset",value:function(t){return new u({asset:t})}}]),a(u,[{key:"streamOffers",value:(n=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.getOffers();case 3:return t.next=5,d(15e3);case 5:t.next=0;break;case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getOffers",value:(e=i(r.mark((function t(){var e;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.offersCallBuilder.limit(200).call();case 3:e=t.sent,this.ingest(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})},{key:"ingest",value:function(t){g(this.bids,t.bids)||(this.bids=b(t.bids,this.quote,this.balance,"bids")),g(this.asks,t.asks)||(this.asks=b(t.asks,this.quote,this.balance,"asks"))}},{key:"updateOffersPrices",value:function(){this.bids&&this.set("bids",k(this.bids,this.quote)),this.asks&&this.set("asks",k(this.asks,this.quote))}},{key:"mergeOffers",value:function(t){if(this.childs.length<2)this.set(t,this.childs[0]&&this.childs[0][t]);else{var e=this.childs.reduce((function(e,n){return n[t]?e.concat(n[t]):e}),[]);if(e.length){var n="bids"===t?function(t,e){return e.price-t.price}:function(t,e){return t.price-e.price},r=0,i=0,o=0;this.set(t,e.sort(n).map((function(t){var e=Object.assign({},t);return e.volume=r+=m(t.amount*t.price),e.baseVolume=i+=+t.amount,e.quoteVolume=o+=+t.quoteAmount,e})))}else this[t]=null}}},{key:"addChild",value:function(t){var e=this;this.childs.push(t),this.watch(t,"bids",(function(){return e.mergeOffers("bids")})),this.watch(t,"asks",(function(){return e.mergeOffers("asks")}))}}],[{key:"offersCallBuilder",value:function(t){var e=new p.Asset(t.code,t.anchor.pubkey),n=p.Asset.native();return f.resolve.server().orderbook(e,n)}}]),u}(h);function g(t,e){if(!t)return!1;if(t.length!==e.length)return!1;for(var n in t.length){if(t[n].amount!==e[n].amount)return!1;if(t[n].price!==e[n].price)return!1}return!0}function b(t,e,n,r){return t.forEach((function(t){t.volume=void 0,t.baseVolume=void 0,t.basePrice=+t.price,t.quoteAmount=+t.amount,t.quoteVolume=void 0,t.balance=n,t.side=r})),k(t,e)}function k(t,e){var n=0,r=0,i=0;return t.forEach((function(t){"asks"===t.side?t.quoteAmount=m(t.amount*t.basePrice):t.amount=m(t.quoteAmount/t.basePrice),t.price=m(t.basePrice*e.price),t.volume=n+=m(t.amount*t.price),t.baseVolume=i+=+t.amount,t.quoteVolume=r+=+t.quoteAmount})),t}y.define("bestBid","bids",(function(){return this.bids&&this.bids[0]&&this.bids[0].price})),y.define("bestAsk","asks",(function(){return this.asks&&this.asks[0]&&this.asks[0].price})),y.define("midpoint",["bestBid","bestAsk"],(function(){return(this.bestBid+this.bestAsk)/2})),y.define("price",["midpoint"],(function(){return this.base.globalPrice?this.midpoint:this.marketPrice()})),y.define("spread",["bestBid","bestAsk"],(function(){return this.bestAsk-this.bestBid})),y.define("spread%",["spread","bestAsk"],(function(){return 100*this.spread/this.bestAsk})),y.prototype.isFetched=function(){return this.childs?this.childs.reduce((function(t,e){return t&&e.isFetched()}),!0):null!=this.asks&&null!=this.bids},y.prototype.findOffer=function(t,e){var n,r=this[t],i=this.childs?this.childs.length:1,o={};for(var a in r){var c=r[a];if(!e||e(c)){var s=c.balance.anchor.pubkey;if(o[s]||(o[s]=!0,n=c),Object.keys(o).length===i)break}}return n},y.prototype.findAsk=function(t){return this.findOffer("asks",t)},y.prototype.findBid=function(t){return this.findOffer("bids",t)},y.prototype.marketPrice=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bids",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=this.findOffer(t,(function(t){return t.quoteVolume>e}));return n?n.price:0}},221:function(t,e,n){"use strict";n(139);var r=n(15);n(17);var i=n(16),o=n(14),a=n(26),c=n(29),s=n(28).timeout,u=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.domNode=c.create("div",{className:"ClickWall",onclick:function(){return e.click()},hidden:!0}),Object.assign(this.domNode.style,t.style),document.body.insertBefore(this.domNode,document.body.firstChild),this.onclick=n.onclick,this.scrollbar=n.scrollbar,this.opacity=n.opacity,this.delay=n.delay||t.delay}var e,n,u,l;return a(t,[{key:"click",value:function(){this.isEnabled&&this.onclick&&this.onclick()}},{key:"enable",value:(l=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("hide"===this.scrollbar&&(this.htmlOverflow=document.documentElement.style.overflow,this.bodyOverflow=document.body.style.overflow,document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"),c.show(this.domNode),!this.opacity){t.next=5;break}return t.next=5,this.setOpacity(this.opacity);case 5:this.isEnabled=!0;case 6:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"disable",value:(u=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("hide"===this.scrollbar&&(document.documentElement.style.overflow=this.htmlOverflow,document.body.style.overflow=this.bodyOverflow),this.isEnabled=!1,!this.opacity){t.next=5;break}return t.next=5,this.setOpacity(0);case 5:c.hide(this.domNode);case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"destroy",value:(n=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.disable();case 2:c.destroy(this.domNode);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"setOpacity",value:(e=i(r.mark((function t(){var e,n=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:this.opacity,t.next=3,s(0);case 3:return Object.assign(this.domNode.style,{transition:"background ".concat(this.delay,"ms"),background:"rgba(0, 0, 0, ".concat(e,")")}),t.abrupt("return",s(this.delay));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}();u.delay=500,u.style={position:"fixed",zIndex:999,top:0,width:"100%",height:"100%"},t.exports=u},222:function(t,e,n){"use strict";n(132),n(134),n(70),n(138),n(129),n(68),n(139),n(156),n(65),n(130),n(131),n(200);var r=n(154),i=n(14),o=n(26),a=n(66),c=n(64),s=n(63),u=n(62);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var f=n(69),h=n(28).setHiddenProperty,p=n(296),d=n(297),v=n(223),m=function(t){c(n,t);var e=l(n);function n(){var t;i(this,n),t=e.call(this);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return o.length&&"FORM"===o[0].tagName?(h(a(t),"domNode",o[0]),o[1]&&Object.assign(t.domNode,o[1])):h(a(t),"domNode",v.element.apply(v,["form"].concat(o))),t.domNode.addEventListener("submit",(function(){t.domNode.getAttribute("method")||event.preventDefault(),t.trigger("submit")})),n.bindInputs(a(t),t.domNode),h(a(t),"dom",d(t.domNode)),t.dom.status||(t.dom.status=[n.status()],v.append(t.domNode,t.dom.status[0])),t}return o(n,[{key:"submit",value:function(){this.domNode.submit()}},{key:"reset",value:function(){this.domNode.reset()}},{key:"report",value:function(t){var e=this.dom.status[0];if(e){e.className=t;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];v.rewrite.apply(v,[e].concat(r))}}},{key:"info",value:function(t){this.report("info",t,n.spinner())}},{key:"error",value:function(t){throw this.report("error",t.message||t),t instanceof Error?t:new Error(t)}}]),n}(f);function y(t,e){t.name&&p(e,t.name,t)}m.listen("change",(function(t){return t.report(null)})),m.bindInputs=function(t,e){v.walk(e,y,t)},m.enable=function(t,e){t.disabled=!1,Object.assign(t,e)},m.disable=function(t,e){t.enabled=!0,Object.assign(t,e)},m.hide=v.hide,m.show=v.show,m.element=v.element,m.status=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return m.element("p",{alias:"status"},t)},m.spinner=function(){return m.element("span",{className:"spinner"})},m.label=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.element.apply(m,["label"].concat(e))},m.button=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.length||(n=[t.value]),m.element.apply(m,["button",t].concat(r(n)))},m.control=function(t,e){var n=Object.assign({required:!0},e);return m.element(t,n)},m.textarea=function(t){return m.control("textarea",t)},m.selector=function(t){var e,n=m.control("select",t);if(n.values&&v.append.apply(v,[n].concat(r((e=n.values)instanceof Array?e.map((function(t){return v.element("option",{value:t},t)})):Object.keys(e).map((function(t){return v.element("option",{value:t},e[t])}))))),n.placeholder){var i=v.element("option",{value:"",disabled:!0,selected:!0,hidden:!0},n.placeholder);v.unshift(n,i),null!=t.selectedIndex&&t.selectedIndex++}return t.selectedIndex?n.selectedIndex=t.selectedIndex:t.value&&(n.value=t.value),n},m.input=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m.control("input",e);return n.type=t,n};["checkbox","color","date","email","file","hidden","image","month","number","password","radio","range","tel","text","time","url","week"].forEach((function(t){return m[t]=function(e){return m.input(t,e)}})),m.datetime=function(t){return m.input("datetime-local",t)},t.exports=m},223:function(t,e,n){"use strict";n(132),n(134),n(198),n(136);var r=Object.create(n(29));t.exports=r,r.element=function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i[0]&&i[0].constructor===Object&&void 0===i[0].domNode&&(e=i.shift()),r.create.apply(r,[t,e].concat(i))},r.walk=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];e.apply(void 0,[t].concat(i)),t.childNodes.forEach((function(t){return r.walk.apply(r,[t,e].concat(i))}))},r.unshift=function(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++)t.insertBefore(e+1<1||arguments.length<=e+1?void 0:arguments[e+1],t.childNodes[e])}},224:function(t,e,n){"use strict";n(129),n(225),n(65),n(76),n(307),n(130),n(131);var r=n(181),i=n(14),o=n(26),a=n(64),c=n(63),s=n(62);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var l=n(133),f=n(29),h=n(43).__,p=n(308),d=function(t){a(n,t);var e=u(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,n);var o=r.title,a=r.content,c=r.actions;return(t=e.call(this,'\n<form class="Dialog" onsubmit="return false">\n\n  <h3>%title</h3>\n\n  <hr hidden=%hasNoTitle>\n\n  %content\n\n  <hr hidden=%hasNoContent>\n\n  <div class="Actions">\n    %toButton:actions...\n  </div>\n</form>\n    ')).title=o,t.content="string"==typeof r?r:a,t.actions=c,t.hasNoTitle=!t.title,t.hasNoContent=!t.content,t}return o(n,[{key:"toButton",value:function(t){var e=r(t,3),n=e[0],i=e[1],o=e[2],a=void 0===o?"button":o;return f.create("button",{type:a,onclick:i.bind(this)},n)}}]),n}(l);d.alert=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new d(t),n=new p({content:e});return e.actions=[[h("OK"),function(){return n.close()}]],n.open(),new Promise((function(t){return n.listen("close",t)}))},d.confirm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new d(t),n=new p({content:e}),r=new Promise((function(t){n.listen("close",(function(){return t(!1)})),e.actions=[[h("OK"),function(){return t(!0)},"submit"],[h("Cancel"),function(){return t(!1)}]]}));r.finally((function(){return n.close()})),n.open();var i=e.domNode.querySelector("[autofocus]");return i&&i.focus(),r},t.exports=d},267:function(t,e,n){"use strict";n(137),n(129),n(156),n(65),n(184),n(130),n(131);var r=n(15);n(17);var i=n(16),o=n(14),a=n(66),c=n(26),s=n(64),u=n(63),l=n(62);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var h=n(185),p=n(147),d=n(146),v=n(69),m=n(28).timeout,y=n(43).__,g=n(143),b=n(176),k=n(67),w=n(289),x=n(290),R=n(141),A=R.arrayContains,S=R.arrayRemove,D=R.arraySum,T=R.arrayOnlyInFirst,P=function(t){s(v,t);var e,n,u,l,h=f(v);function v(t){var e;return o(this,v),e=h.call(this),console.log(a(e)),e.accountId=t,e.assets=new d,e.balances=new d,e.accountCallBuilder=v.accountCallBuilder(t),e.define("total","assets",(function(){var t=e.assets.filter((function(t){return t.isSupported}));return D(t,"value")})),e.assets.mirror((function(t){return e.watch(t,["value","isSupported"],(function(){return e.compute("total")}))})),e.new=!0,e}return c(v,null,[{key:"resolve",value:(e=i(r.mark((function t(e){var n,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:return t.next=4,p.resolve.address(e);case 4:if(!(n=t.sent).memo){t.next=7;break}throw new Error(y("Invalid federated address: shared account."));case 7:return t.next=9,p.resolve.isAccountEmpty(n.account_id);case 9:if(!t.sent){t.next=11;break}throw new Error(y("Empty account"));case 11:return i=new v(n.account_id),p.config.source=i.address=e,i.streamAccount(),t.abrupt("return",i);case 15:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),c(v,[{key:"streamAccount",value:(l=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.getAccount();case 3:return t.next=5,m(5e3);case 5:t.next=0;break;case 7:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getAccount",value:(u=i(r.mark((function t(){var e;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.accountCallBuilder.call();case 3:e=t.sent,this.ingest(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return u.apply(this,arguments)})},{key:"ingest",value:(n=i(r.mark((function t(e){var n,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in this.account=e,e.balances)i=b.ingest(e.balances[n]),this.maybeAddBalance(i),"XLM"===i.id&&(i.asset.amountMin=v.accountMinimumBalance(e));if(!this.new){t.next=11;break}return delete this.new,t.next=6,g.refreshPrices();case 6:return this.offers=w.forPortfolio(this),t.next=9,this.offers.stream();case 9:this.trigger("open"),g.getAllInfo();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"maybeAddBalance",value:function(t){A(this.balances,t)||(this.balances.push(t),t.asset.maybeAddBalance(t)),this.maybeAddAsset(t.asset)}},{key:"maybeAddAsset",value:function(t){A(this.assets,t)||(this.assets.push(t),t.watch(this,"total",(function(){return t.compute("share")})),t.getInfo())}},{key:"maybeRemoveBalance",value:function(t){S(this.balances,t),t.asset.maybeRemoveBalance(t),this.maybeRemoveAsset(t.asset)}},{key:"maybeRemoveAsset",value:function(t){t.balances.length||S(this.assets,t)}}],[{key:"accountCallBuilder",value:function(t){return p.resolve.server().accounts().accountId(t)}}]),v}(v);function C(){return O.apply(this,arguments)}function O(){return(O=i(r.mark((function t(){var e;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.resolve.horizon(),t.prev=1,t.next=4,h.get(e);case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(1),new Error(y("Can't connect to the Stellar blockchain"));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}P.accountMinimumBalance=function(t){var e=2*(t.balances.length-1);return e+=Object.keys(t.data_attr).length,.5*(3+(e+=t.signers.length-1))},P.prototype.availableAssets=function(){var t=Object.values(g.table);return T(t,this.assets)},P.prototype.getHistory=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.history){t.next=4;break}return t.next=3,x(this);case 3:this.history=t.sent;case 4:return t.abrupt("return",this.history);case 5:case"end":return t.stop()}}),t,this)}))),g.define("share","value",(function(){return k.portfolio&&this.value/k.portfolio.total})),t.exports=P},279:function(t,e,n){"use strict";n(137),n(134),n(194),n(138),n(165),n(151),n(280),n(129),n(68),n(156),n(136);var r=n(15);n(17);var i=n(16),o=e,a=n(185),c=n(140),s=n(67),u=n(218);function l(t,e){return"crypto"===t.type?o.crypto.history(t,e):"fiat"===t.type?o.fiat.history(t,e):void 0}function f(t,e){return a.get("https://api.coingecko.com/api/v3/".concat(t),{params:e})}function h(t,e){return p.apply(this,arguments)}function p(){return(p=i(r.mark((function t(e,n){var i,o=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=o.length>2&&void 0!==o[2]?o[2]:{}).base=s.currency,"string"==typeof n?i.symbols=n:("EUR"===s.currency&&(n=n.filter((function(t){return"EUR"!==t}))),i.symbols=n.join(",")),i.source="equilibre.io",t.abrupt("return",a.get("https://api.exchangeratesapi.io/".concat(e),{params:i}).then((function(t){return"EUR"!==s.currency||t.data.start_at||(t.data.rates.EUR=1),t})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}o.assetHistory=function(){var t=i(r.mark((function t(e){var n,i,o,a,c,s=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:1e3,delete localStorage["prices.".concat(e.code)],!(i=u.getCache(e.id))){t.next=8;break}if(o=u.missingDays(i)){t.next=7;break}return t.abrupt("return",i);case 7:i.length&&(n=o+3);case 8:return t.next=10,l(e,n);case 10:if(a=t.sent){t.next=13;break}return t.abrupt("return");case 13:return c=i?u.join(i,a):a,u.cut(c,1e3),u.setCache(e.id,c),t.abrupt("return",c);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.crypto={},o.crypto.list=i(r.mark((function t(){var e,n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("coins/list");case 2:return e=t.sent,n={},e.data.forEach((function(t){var e=t.symbol.toUpperCase();n[e]={apiId:t.id,name:t.name}})),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),o.crypto.stellarNative=i(r.mark((function t(){var e;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("exchanges/stellar_term");case 2:return e=t.sent,t.abrupt("return",e.data.tickers.map((function(t){return t.coin_id})).filter((function(t){return t})));case 4:case"end":return t.stop()}}),t)}))),o.crypto.info=function(){var t=i(r.mark((function t(e){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("coins/".concat(e.apiId),{localization:!1,tickers:!1,market_data:!1,community_data:!1,developer_data:!1,sparkline:!1});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.crypto.prices=function(){var t=i(r.mark((function t(e){var n,i,o,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.map((function(t){return t.apiId})).join(","),i=s.currency.toLowerCase(),t.next=4,f("simple/price",{ids:n,vs_currencies:i});case 4:return o=t.sent,a={},e.forEach((function(t){var e=o.data[t.apiId];e&&(a[t.code]=e[i])})),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.crypto.history=function(){var t=i(r.mark((function t(e){var n,i,o,a,l,h=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:1e3,t.next=3,f("coins/".concat(e.apiId,"/market_chart"),{vs_currency:s.currency,days:Math.max(n,100)});case 3:return i=t.sent,o=i.data.prices.map((function(t,e){return{time:t[0],price:t[1],volume:+c(i.data.total_volumes[e][1]/t[1])}})),a=u.today(),(l=o[o.length-2])&&l.time===a?o.length=o.length-1:u.latest(o).time=a,n<100&&u.cut(o,n),t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.fiat={},o.fiat.prices=function(){var t=i(r.mark((function t(e){var n,i,o,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.map((function(t){return t.code})),t.next=3,h("latest",n);case 3:for(a in i=t.sent,o=i.data.rates)o[a]=c(1/o[a],8);return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.fiat.history=function(){var t=i(r.mark((function t(e){var n,i,o,a,l,f,p=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:1e3,i=(new Date).toISOString().slice(0,10),(o=new Date(i)).setDate(o.getDate()-n),a=o.toISOString().slice(0,10),"EUR"!==s.currency||"EUR"!==e.id){t.next=7;break}return t.abrupt("return",[{time:u.today(),price:1}]);case 7:return t.next=9,h("history",e.code,{start_at:a,end_at:i});case 9:return l=t.sent,f=Object.keys(l.data.rates).sort().map((function(t){return{time:u.time(t),price:+c(1/l.data.rates[t][e.code],8)}})),u.latest(f).time!==u.today()&&f.push({time:u.today(),price:u.latest(f).price}),t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},289:function(t,e,n){"use strict";n(132),n(137),n(134),n(196),n(138),n(166),n(129),n(139),n(65),n(130),n(131),n(136),n(170);var r=n(66),i=n(154),o=n(15);n(17);var a=n(16),c=n(14),s=n(26),u=n(64),l=n(63),f=n(62);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}var p=n(147),d=n(220),v=n(146),m=n(69),y=n(28).setHiddenProperty,g=n(28).day,b=n(143),k=n(176),w=n(141).fixed7,x=function(t){u(l,t);var e,n,r=h(l);function l(){return c(this,l),r.apply(this,arguments)}return s(l,[{key:"stream",value:(n=a(o.mark((function t(){var e,n=this,r=arguments;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:15e3,t.abrupt("return",this.get().then((function(){return setTimeout((function(){return n.stream()}),e)})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"get",value:(e=a(o.mark((function t(){var e;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d(this.callBuilder,{limit:200});case 3:e=t.sent,this.ingest(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})},{key:"ingest",value:function(t){this.forEach((function(t){return t.alive=!1}));var e=t.map((function(t){return R.ingest(t)})).filter((function(t){return t}));this.splice.apply(this,[0,0].concat(i(e))),this.clean()}},{key:"clean",value:function(){for(var t=this.length-1;t>-1;t--){var e=this[t];e.alive||(this.splice(t,1),e.destroy())}}}],[{key:"forPortfolio",value:function(t){var e=l.forAccount(t.accountId);return y(e,"portfolio",t),e}},{key:"forAccount",value:function(t){var e=new l;return y(e,"accountId",t),y(e,"callBuilder",l.callBuilder(t)),e}},{key:"callBuilder",value:function(t){return p.resolve.server().offers().forAccount(t)}}]),l}(v);x.prototype.listOutdated=function(){return this.filter((function(t){return t.outdated}))};var R=function(t){u(n,t);var e=h(n);function n(t){var i;c(this,n),(i=e.call(this)).intern=A(t),n.table[i.intern]=r(i);var o=b.resolve("XLM"),a=t.buying.asset_code?t.buying:t.selling;return i.balance=k.resolve(a.asset_code,a.asset_issuer),i.asset=i.balance.asset,i.side=t.buying.asset_code?"buy":"sell",i.define("price","rawPrice","sell"===i.side?function(){return o.price*i.rawPrice}:function(){return o.price/i.rawPrice}),i.watch(o,"price",(function(){return i.compute("price")})),i.update(t),i.balance.offers.push(r(i)),i.asset.offers.push(r(i)),i.listen("destroy",(function(){delete n.table[i.intern],i.balance.offers.splice(i.balance.offers.indexOf(r(i)),1),i.asset.offers.splice(i.asset.offers.indexOf(r(i)),1)})),i}return s(n,null,[{key:"resolve",value:function(t){return n.table[A(t)]}},{key:"ingest",value:function(t){var e=n.resolve(t);if(!e)return new n(t);e.update(t)}}]),s(n,[{key:"update",value:function(t){Object.assign(this,t),this.alive=!0,this.rawPrice=t.price,this.compute("price"),this.rawAmount=t.amount,"buy"===this.side&&(this.amount=w(this.rawAmount*this.rawPrice)),this.date=g(this.last_modified_time),this.outdated=this.date!==g()}}]),n}(m);function A(t){return"".concat(t.id,"-").concat(t.last_modified_ledger)}R.table={},t.exports=x},290:function(t,e,n){"use strict";n(195),n(134),n(70),n(138),n(165),n(156),n(65),n(76),n(291),n(136),n(200);var r=n(15);n(17);var i=n(16),o=n(143),a=n(292),c=n(141).arraySum;function s(t){var e={};t.forEach((function(t){Object.keys(t.asset).forEach((function(t){return e[t]=!0}))}));var n=Object.keys(e).map(o.resolve);return n.forEach((function(t){return t.hasBeenHeld=!0})),n}function u(t){return l.apply(this,arguments)}function l(){return(l=i(r.mark((function t(e){var n,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},i=e.map((function(t){return t.getHistoricPrice()})),t.next=4,Promise.all(i);case 4:return e.forEach((function(t){t.historicPrice&&(n[t.id]=t.historicPrice)})),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t,e){for(var n in e){var r=e[n],i=r.findIndex((function(e){return e.time>t}));i>1?e[n]=r.slice(i-1):-1===i&&(e[n]=r.slice(-1))}}function h(t,e){for(var n in t.price={},t.value={},t.total=0,t.asset)t.price[n]=e[n]?e[n][0].price:0,t.value[n]=t.asset[n]*t.price[n],t.total+=t.value[n];t.filtered={};var r=[];for(var i in t.value){var o=t.value[i]/t.total;o&&(t.filtered[i]=t.value[i],o<.03&&r.push(i))}r.length>1&&(t.filtered.others=c(r.map((function(e){return t.value[e]}))),r.forEach((function(e){return delete t.filtered[e]})))}t.exports=function(){var t=i(r.mark((function t(e){var n,i,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e);case 2:return n=t.sent,i=s(n),t.next=6,u(i);case 6:return o=t.sent,n.forEach((function(t){f(t.time,o),h(t,o)})),console.log(n),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},292:function(t,e,n){"use strict";n(137),n(134),n(194),n(293),n(129),n(139),n(45),n(294),n(148),n(136);var r=n(15);n(17);var i=n(16),o=n(147),a=n(220),c=n(143),s=n(176),u=n(218),l=n(141).fixed7;function f(t){return h.apply(this,arguments)}function h(){return(h=i(r.mark((function t(e){var n,i,o,a,c=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:100,i={time:u.today(),asset:{},balance:{}},e.balances.forEach((function(t){m(i,t,+t.amount)})),o=[i],a=Date.now()-u.oneDay*n,t.next=7,d(e.accountId,{filter:function(t){return p(o,t)},breaker:function(){return o[0].time<a}});case 7:return u.cut(o,n),t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e){for(var n=t[0],r=u.roundTime(e.created_at)-u.oneDay;r!==n.time;)(n={time:n.time-u.oneDay,asset:Object.assign({},n.asset),balance:Object.assign({},n.balance)}).time===w&&x(n),t.unshift(n);var i=v[e.type];i&&i(n,e)}function d(t,e){var n=e.filter,r=e.breaker,i=o.resolve.server().effects().forAccount(t).order("desc");return a(i,{filter:n,breaker:r})}t.exports=function(){var t=i(r.mark((function t(e){var n,i,o,a,c,s=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:1e3,!(i=u.getCache(e.account.id))){t.next=7;break}if(o=u.missingDays(i)){t.next=6;break}return t.abrupt("return",i);case 6:i.length&&(n=o+1);case 7:return t.next=9,f(e,n);case 9:if(a=t.sent){t.next=12;break}return t.abrupt("return");case 12:return c=i?u.join(i,a):a,u.cut(c,1e3),u.setCache(e.account.id,c),t.abrupt("return",c);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var v={};function m(t,e,n){y(t.balance,e.id,n);var r=R(e,t);y(t.asset,r.id,n)}function y(t,e,n){t[e]||(t[e]=0),t[e]=Math.max(0,l(t[e]+n))}function g(t,e){var n=e?"".concat(e,"_asset_code"):"asset_code",r=e?"".concat(e,"_asset_issuer"):"asset_issuer";return t[n]?s.resolve(t[n],t[r]):s.resolve("XLM")}v.trade=function(t,e){m(t,g(e,"bought"),-e.bought_amount),m(t,g(e,"sold"),+e.sold_amount)},v.account_credited=function(t,e){m(t,g(e),-e.amount)},v.account_debited=function(t,e){m(t,g(e),+e.amount)},v.trustline_removed=function(t,e){m(t,g(e),0)},v.trustline_created=function(t,e){var n=g(e);0!==t.balance[n.id]&&console.error("Balances mismatch: ",t.balance[n.id],e),delete t.balance[n.id];var r=R(n,t);0===t.asset[r.id]&&delete t.asset[r.id]},v.account_created=function(t){t.balance.XLM=0,t.asset.XLM=0};var b="GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG",k="GBSTRUSD7IRX73RQZBL3RQUH6KS3O4NYFY3QCALDLZD77XMZOPWAVTUK",w=15565824e5;function x(t){for(var e in t.asset){var n=e.substr(-56);if(n===b||n===k){var r=e.split(":")[0];y(t.asset,r,t.asset[e]),delete t.asset[e]}}}function R(t,e){if(t.asset.id.length<60)return t.asset;if(e.time>w)return t.asset;switch(t.anchor.pubkey){case b:case k:return c.table[t.code]||t.asset}return t.asset}},296:function(t,e,n){"use strict";n(196),n(168);var r=n(69);t.exports=function(t,e,n,r){var o=i[n.tagName];o?o(t,e,n,r):t[e]=n[r||"value"]};var i={};function o(t,e,n,i,o){i.addEventListener(t,(function(){e[n]=i[o],i.setCustomValidity("")})),e instanceof r&&e.link(n,i,o,null,{init:!1})}i.SELECT=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value";t[e]=n[r],-1!==i.SELECT.interactive.indexOf(r)&&o("change",t,e,n,r)},i.SELECT.interactive=["selectedIndex","selectedOptions","value"],i.TEXTAREA=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value";t[e]=n[r],"value"===r&&o("input",t,e,n,r)},i.INPUT=function(t,e,n,r){t[e]=n[r],"radio"===n.type?i.radio.apply(i,arguments):"checkbox"===n.type?i.checkbox.apply(i,arguments):r&&"value"!==r||o("input",t,e,n,r||"value")},i.radio=function(t,e,n){var r=function(){n.checked&&(t[e]=n.value)};n.addEventListener("change",r),r()},i.checkBox=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"checked";t[e]=n[r],"checked"===r&&o("change",t,e,n,r)}},297:function(t,e,n){"use strict";n(68),n(45),n(77);var r=n(28).timeout,i=n(223);function o(t,e){!function(t,e){t.className?(e[t.className]||(e[t.className]=[]),e[t.className].push(t)):t.alias?(e[t.alias]=t,delete e[t.alias]):t.name?e[t.name]=t:t.id&&(e[t.id]=t)}(t,e),function(t){if(!t.label||"OPTION"===t.tagName)return;var e=i.element("label",{for:t}),n=i.element("span",t.label);i.replace(t,e),i.append(e,n,t),delete t.label}(t),function(t){var e=t.validate;if(!e||!t.hasProperty("oninput"))return;t.addEventListener("input",(function(){t.setCustomValidity(""),r(0).then((function(){return function(t,e){try{e(t.value)}catch(e){t.setCustomValidity(e.message),t.reportValidity(),console.error(e)}}(t,e)}))})),delete t.validate}(t)}t.exports=function(t){var e={};return i.walk(t,o,e),e}},298:function(t,e,n){"use strict";n(132),n(129),n(65),n(130),n(131);var r=n(14),i=n(64),o=n(63),a=n(62);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}var s=n(133),u=n(43).__,l=n(299),f=n(67);t.exports=function(t){i(n,t);var e=c(n);function n(t){var i;return r(this,n),(i=e.call(this,'\n<section class="ActivityGui">\n  <h2>'.concat(u("Activity"),'</h2>\n\n  %table\n\n  <p class="note">\n    ').concat(u("All orders are passed against Stellar Lumens (XLM)."),"\n    ").concat(u("For your comfort, prices are displayed in their %%globalCurrency equivalent."),"\n    ").concat(u("However, those converted values will change according to XLM price movement."),"\n  </p>\n\n</section>\n    "))).portfolio=t,i.table=new l(t),i.globalCurrency=f.currency,i}return n}(s)},299:function(t,e,n){"use strict";n(132),n(134),n(129),n(68),n(65),n(130),n(131),n(148),n(168),n(136);var r=n(66),i=n(14),o=n(26),a=n(64),c=n(63),s=n(62);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var l=n(133),f=n(140),h=n(147).CosmicLink,p=n(43).__,d=n(67);t.exports=function(t){a(n,t);var e=u(n);function n(t){var r;return i(this,n),(r=e.call(this,'\n<section class="ActiveOffersTable">\n  <table>\n    <tr>\n      <th class="name">'.concat(p("Name"),'</th>\n      <th align="left">').concat(p("Anchor"),'</th>\n      <th align="left">').concat(p("Direction"),'</th>\n      <th align="right">').concat(p("Amount"),'</th>\n      <th align="right">').concat(p("Price"),' (%globalCurrency)</th>\n    </tr>\n    %toOfferRow:offers...\n    <tr><td colspan="5" align="center" onclick=%cancelOffers>\n      <h3>').concat(p("Cancel All"),"</h3>\n    </td></tr>\n  </table>\n</section>\n    "))).portfolio=t,r.offers=t.offers,r.globalCurrency=d.currency,r}return o(n,[{key:"toOfferRow",value:function(t){return new v(t)}},{key:"cancelOffers",value:function(){var t=this;if(this.offers.length){var e={memo:"Equilibre.io",network:"public",maxTime:"+5",source:this.portfolio.accountId},n=new h(e);this.offers.forEach((function(t){n.addOperation("manageOffer",{offerId:t.id,amount:0})})),n.open().listen("destroy",(function(){t.portfolio.getAccount(),t.portfolio.offers.get()}))}}}]),n}(l);var v=function(t){a(n,t);var e=u(n);function n(t){var o;return i(this,n),(o=e.call(this,'\n<tr>\n  <td>\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td>%anchor</td>\n  <td>%side</td>\n  <td align="right">%nice:amount</td>\n  <td align="right">%nice:price</td>\n</tr>\n    ')).offer=t,t.project(["amount","price"],r(o)),o.name=t.balance.code,o.side="buy"===t.side?p("Buy"):p("Sell"),o.anchor=t.balance.anchor.name,t.asset.link("image",r(o)),o}return o(n,[{key:"nice",value:function(t){return f(t)}}]),n}(l)},300:function(t,e,n){"use strict";n(132),n(129),n(65),n(130),n(131);var r=n(14),i=n(26),o=n(66),a=n(64),c=n(63),s=n(62);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var l=n(133),f=n(140),h=n(206),p=n(43).__,d=n(301),v=n(302),m=n(303),y=n(304),g=n(67);t.exports=function(t){a(n,t);var e=u(n);function n(t){var i;r(this,n),(i=e.call(this,"\n<section><h2>".concat(p("Portfolio"),': %total %currency</h2>\n\n  %nav\n  <section>%view</section>\n\n  %priceChart\n\n  <p class="note">\n    ').concat(p("Anchor prices are from Stellar DEX")," /\n    ").concat(p("Global prices are from %%coingecko when available."),"\n  </p>\n\n</section>"))).portfolio=t,t.project("total",o(i),(function(t){return f(t,2)})),i.currency=g.currency,i.coingecko=new l('<a target="_blank" rel="noopener" href="https://coingecko.com">coingecko</a>'),i.table=new y(t),i.project("selected",i.table),i.table.project("selected",o(i)),i.pieChart=new v(t),i.project("selected",i.pieChart),i.pieChart.project("selected",o(i)),i.trap("selected",(function(){return i.maybeDrawPriceChart()})),i.historyChart=new m(t);var a=i.overview=new h;return a.add("table",p("Balances"),i.table),a.add("chart",p("Repartition"),i.pieChart),a.add("history",p("History"),i.historyChart),a.project(["nav","view"],o(i)),a.listen("select",(function(){return i.reflow()})),a.listen("select",(function(t){return localStorage["PortfolioSummary.tab"]=t})),a.select(localStorage["PortfolioSummary.tab"]),a.selected||a.select("table"),i}return i(n,[{key:"reflow",value:function(){if(this.overview.selected){var t=this.overview.selected.content;t.reflow&&t.reflow()}}},{key:"maybeDrawPriceChart",value:function(){this.priceChart&&this.priceChart.destroy();var t=this.selected;t&&(t.isTether||t.apiId)&&t.code!==g.currency?this.priceChart=new d(t):this.priceChart=null}}]),n}(l)},301:function(t,e,n){"use strict";n(132),n(138),n(129),n(65),n(130),n(131);var r=n(14),i=n(26),o=n(64),a=n(63),c=n(62);function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=n(177);n(201);var l=n(133),f=n(140),h=n(43).__,p=n(67);t.exports=function(t){o(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,"\n      <section><h3>".concat(t.code," ").concat(h("to")," ").concat(p.currency,"</h3>\n        <div -ref=%container><p>").concat(h("Loading..."),"</p></div>\n      </section>\n    "))).asset=t,t.getHistoricPrice().then((function(t){return i.drawChart(t)})),i.listen("destroy",(function(){return i.chart&&i.chart.destroy()})),i}return i(n,[{key:"drawChart",value:function(t){this.chart=u.stockChart(this.container,{yAxis:[{labels:{align:"left"},height:"80%",resize:{enabled:!0}},{labels:{align:"left"},top:"80%",height:"20%",offset:0}],series:[{type:"spline",name:"Price",data:t.map((function(t){return[t.time,+f(t.price)]}))},{type:"column",name:"Volume",data:t.map((function(t){return[t.time,t.volume]})),yAxis:1}]})}}]),n}(l)},302:function(t,e,n){"use strict";n(132),n(137),n(138),n(151),n(129),n(198),n(65),n(130),n(131);var r=n(14),i=n(26),o=n(64),a=n(63),c=n(62);function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=n(177);n(201);var l=n(133),f=n(140),h=n(43).__,p=n(67);function d(t){var e=Object.create(t);return e.y=+f(t.value,2),e.niceAmount=+f(t.amount),e.nicePrice=+f(t.price),e}t.exports=function(t){o(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,'\n<div class="PortfolioPieChart">\n  <h3>'.concat(h("Repartition by Asset"),'</h3>\n\n  <div -ref=%container align="center"></div>\n</div>\n    '))).portfolio=t,i.watch(i.portfolio,"total",(function(){return i.draw()})),i.listen("destroy",(function(){return i.chart&&i.chart.destroy()})),i}return i(n,[{key:"reflow",value:function(){this.chart&&this.chart.reflow()}},{key:"draw",value:function(){var t=this;this.chart&&this.chart.destroy(),this.chart=u.chart(this.container,{colors:u.pieColors,responsive:u.pieResponsive,title:"",legend:{enabled:!1},chart:{type:"pie"},tooltip:{pointFormat:"\n".concat(h("Amount"),": {point.niceAmount} {point.code}<br>\n").concat(h("Price"),": {point.nicePrice} ").concat(p.currency,"<br>\n<b>").concat(h("Value"),": {point.y} ").concat(p.currency,"</b>\n")},plotOptions:{pie:{dataLabels:{format:"{point.niceAmount} {point.code}<br>({point.percentage:.0f}%)"},point:{events:{select:function(e){return t.selected=e.target.options.asset},legendItemClick:function(){return!1}}}}},series:[{name:h("Amount"),colorByPoint:!0,ignoreHiddenPoint:!0,data:this.portfolio.assets.filter((function(t){return t.value})).map(d).sort((function(t,e){return e.y-t.y}))}]})}}]),n}(l)},303:function(t,e,n){"use strict";n(132),n(137),n(134),n(138),n(151),n(129),n(65),n(184),n(130),n(131),n(136),n(170);var r=n(14),i=n(26),o=n(64),a=n(63),c=n(62);function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=n(177);n(201);var l=n(133),f=n(140),h=n(43).__,p=n(143),d=n(67);t.exports=function(t){o(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,'\n<div class="PortfolioHistoryChart">\n  <h3>'.concat(h("Portfolio Historical Value"),"</h3>\n\n  <div -ref=%container>\n    <p>\n      ").concat(h("Downloading historical data..."),'\n      <span class="spinner"></span>\n    </p>\n    <p>\n      ').concat(h("The very first time, it may take about a minute."),"\n  </div>\n\n</div>\n    "))).portfolio=t,i.portfolio.getHistory().then((function(t){return i.drawChart(t)})),i.listen("destroy",(function(){return i.chart&&i.chart.destroy()})),i}return i(n,[{key:"reflow",value:function(){var t=this;this.chart&&(this.hasBeenReflown||setTimeout((function(){return t.chart.update({rangeSelector:{enabled:!0}})})),this.chart.reflow()),this.hasBeenReflown=!0}},{key:"drawChart",value:function(t){var e=this.historyToSeries(t);this.chart=u.stockChart(this.container,{chart:{type:"area"},navigator:{series:{data:t.map((function(t){return[t.time,+f(t.total)||null]}))}},tooltip:{shared:!0,split:!1,pointFormat:'\n<span style="color:{point.color}">●</span>\n{series.name}: {point.percentage:.0f}%\n<br>',footerFormat:"<b>Total: {point.total} ".concat(d.currency,"</b>")},yAxis:[{labels:{align:"left",formatter:function(){return"".concat(this.value," ").concat(d.currency)}},resize:{enabled:!0}}],plotOptions:{series:{},area:{stacking:"normal",connectNulls:!0,lineWidth:0,states:{hover:{enabled:!1},inactive:{enabled:!1}}}},series:e,colors:u.pieColors}),this.hasBeenReflown||this.chart.update({rangeSelector:{enabled:!1}})}},{key:"historyToSeries",value:function(t){var e=[],n=Object.values(p.table).filter((function(t){return t.hasBeenHeld}));return n.sort((function(t,e){return e.value-t.value})),n.forEach((function(n){var r=!0,i=t.map((function(t){var e=+f(t.filtered[n.id],2)||null;return e&&(r=!1),[t.time,e]}));r||e.push({name:n.id,data:i})})),e.push({name:h("Others"),color:"#DDD",data:t.map((function(t){return[t.time,+f(t.filtered.others,2)]}))}),e}}]),n}(l)},304:function(t,e,n){"use strict";n(132),n(178),n(70),n(151),n(129),n(68),n(65),n(130),n(131),n(148),n(168),n(200);var r=n(66),i=n(14),o=n(26),a=n(64),c=n(63),s=n(62);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var l=n(133),f=n(29),h=n(140),p=n(43).__;t.exports=function(t){a(n,t);var e=u(n);function n(t){var r;return i(this,n),(r=e.call(this,'\n<table class="PortfolioTable">\n  <tr>\n    <th class="name">'.concat(p("Name"),'</th>\n    <th align="left">').concat(p("Anchor"),'</th>\n    <th align="right">').concat(p("Amount"),'</th>\n    <th align="right">').concat(p("Price"),'</th>\n    <th align="right">').concat(p("Value"),"</th>\n  </tr>\n  %rows...\n</table>\n"))).portfolio=t,r.rows=t.assets.mirror((function(t){return r.toAssetRow(t)})),r.watch(t,"total",(function(){return r.sort()})),r.trap("selected",(function(){return r.onselect(r.selected)})),r}return o(n,[{key:"toAssetRow",value:function(t){var e=this,n=new d(t);return n.domNode.onclick=function(){e.selected===n.asset?e.selected=null:e.selected=n.asset},n}},{key:"sort",value:function(){this.rows.sort((function(t,e){return e.asset.value-t.asset.value}))}},{key:"onselect",value:function(t){this.selectedRow&&this.selectedRow.simpleView(),this.selectedRow=this.rows.find((function(e){return e.asset===t})),this.selectedRow&&this.selectedRow.detailledView()}}]),n}(l);var d=function(t){a(n,t);var e=u(n);function n(t){var o;i(this,n),(o=e.call(this,'\n<tr %class>\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="left">\n    <div hidden=%simple>%anchors...</div>\n    <div class=%mode>%anchorTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%amounts...</div>\n    <div class=%mode>%amountTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%prices...</div>\n    <div class=%mode title=%priceDetails>%priceTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%values...</div>\n    <div class=%mode>%valueTotal</div>\n  </td>\n</tr>\n    ')).asset=t,o.name=t.code,o.anchors=t.balances.mirror((function(t){return m(t.anchor,"name")})),o.amounts=t.balances.mirror((function(t){return m(t,"amount",h)})),o.prices=t.balances.mirror((function(t){return n=m(e=t,"price",h),e.trap("orderbook",(function(){e.orderbook&&e.orderbook.trap(["bestAsk","bestBid","spread%"],(function(){n.title=y(e.orderbook)}))})),n;var e,n})),o.values=t.balances.mirror((function(t){return m(t,"value",(function(t){return h(t,2)}))})),t.link("image",r(o)),t.link("amount",r(o),"amountTotal",h),t.link("price",r(o),"priceTotal",h),t.link("value",r(o),"valueTotal",(function(t){return h(t,2)})),t.balances.feed(r(o),"anchorHeader",v);var a=o.asset.orderbook;return o.define("priceDetails","orderbook",(function(){return y(a)})),o.watch(a,["bestAsk","bestBid","spread%"],(function(){o.compute("priceDetails")})),o.simpleView(),o}return o(n,[{key:"simpleView",value:function(){this.simple=!0,this.class="",this.mode="",this.anchorTotal=this.anchorHeader}},{key:"detailledView",value:function(){this.simple=!1,this.class="selected",this.mode="footer",this.anchorTotal="Total"}}]),n}(l);function v(t){return 1===t.length?t[0].anchor.name:"".concat(p("multiple")," (").concat(t.length,")")}function m(t,e,n){var r=f.create("div",null,t[e]);return t.link(e,r,"textContent",n),r}function y(t){return"XLM"===t.base.code?"":"\nBuy: ".concat(h(t.bestBid)," - Sell: ").concat(h(t.bestAsk)," - Spread: ").concat(h(t["spread%"],2),"%\n  ")}},305:function(t,e,n){"use strict";n(132),n(129),n(65),n(130),n(131);var r=n(66),i=n(14),o=n(64),a=n(63),c=n(62);function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=n(133),l=n(43).__,f=n(222),h=n(67),p={us:"English",fr:"Français"},d=["AUD","BRL","CAD","CHF","CNY","CZK","DKK","EUR","GBP","HKD","HUF","IDR","ILS","INR","JPY","KRW","MXN","MYR","NOK","NZD","PHP","PLN","RUB","SEK","SGD","THB","TRY","USD","ZAR"],v=function(t){o(n,t);var e=s(n);function n(){var t;return i(this,n),(t=e.call(this,"\n      <section><h2>".concat(l("Settings"),"</h2>\n        <section><h3>").concat(l("General Settings"),"</h3>\n          %general\n        </section>\n      </section>\n    "))).general=new m(h),t}return n}(u),m=function(t){o(n,t);var e=s(n);function n(t){var o;return i(this,n),o=e.call(this,f.selector({label:l("Language"),name:"language",values:p}),f.selector({label:l("Currency"),name:"currency",values:d})),t.project(["currency","language"],r(o)),o.project(["currency","language"],t),o.listen("change",(function(){return location.reload()})),o}return n}(f);t.exports=v},306:function(t,e,n){"use strict";n(129),n(65),n(130),n(131),n(168);var r=n(15);n(17);var i=n(16),o=n(14),a=n(26),c=n(66),s=n(64),u=n(63),l=n(62);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var h=n(133),p=n(43).__,d=n(224),v=n(309),m=n(315),y=n(318),g=n(319);t.exports=function(t){s(u,t);var e,n=f(u);function u(t){var e;o(this,u),(e=n.call(this,'\n<section class="RebalanceGui">\n  <h2>'.concat(p("Rebalance"),"</h2>\n\n  %table\n\n  %controls\n\n</section>\n    "))).portfolio=t;var r="target:".concat(t.account.id),i=localStorage[r];return e.target=v.forPortfolio(t,i),e.target.link("json",localStorage,r,null,{init:!1}),e.target.json=e.target.toJson(),e.table=new g(e.target),e.table.project("selected",c(e)),e.project("selected",e.table),e.controls=new y(e.target),e.trap("selected",(function(){e.selected&&e.showTargetSetup(e.selected)})),e}return a(u,[{key:"showTargetSetup",value:(e=i(r.mark((function t(e){var n,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new m(e),i=d.confirm({content:n}),t.next=4,i;case 4:if(!t.sent){t.next=8;break}n.confirm(),t.next=9;break;case 8:n.cancel();case 9:this.selected=null,e.computeAll();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),u}(h)},308:function(t,e,n){"use strict";n(132),n(134),n(129),n(139),n(65),n(130),n(131),n(136);var r=n(15);n(17);var i=n(16),o=n(14),a=n(26),c=n(64),s=n(63),u=n(62);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var f=n(133),h=n(221),p=function(t){c(u,t);var e,n,s=l(u);function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,u),t=s.call(this,'\n<div class="Modal" %style %hidden>%content</div>\n    '),Object.assign(t.style,u.style),t.hidden=!0,t.content=e.content,t.trap(u.styleParams,(function(e){return t.style[e.key]=e.value})),u.styleParams.forEach((function(n){return t[n]=e[n]})),document.body.insertBefore(t.domNode,document.body.firstChild),t}return a(u,[{key:"setPosition",value:function(){var t={x:0,y:0};this.left||this.right||(this.style.left="50%",t.x="-50%"),this.top||this.bottom||(this.style.bottom="50%",t.y="50%"),this.style.transform="translate(".concat(t.x,", ").concat(t.y,")")}},{key:"open",value:(n=i(r.mark((function t(){var e=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.clickWall.enable(),this.hidden=!1,this.setPosition(),t.next=5,u.shadow.enable();case 5:u.shadow.onclick=function(){return e.close()},u.clickWall.disable(),this.trigger("open");case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:(e=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.clickWall.enable(),this.hidden=!0,t.next=4,u.shadow.disable();case 4:u.clickWall.disable(),this.trigger("close"),this.destroy();case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),u}(f);p.styleParams=["height","width","top","right","bottom","left","padding"],p.style={zIndex:1e3,position:"fixed"},p.shadow=new h({scrollbar:"hide",opacity:.3,delay:300}),p.clickWall=new h,p.clickWall.domNode.style.zIndex="2000",t.exports=p},309:function(t,e,n){"use strict";n(132),n(137),n(178),n(195),n(134),n(138),n(165),n(151),n(166),n(129),n(68),n(156),n(65),n(130),n(131),n(148),n(136);var r=n(154),i=n(14),o=n(26),a=n(66),c=n(64),s=n(63),u=n(62);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var f=n(146),h=n(69),p=n(143),d=n(176),v=n(310),m=n(314),y=n(141),g=y.arrayContains,b=y.arrayRemove,k=y.arraySum,w=y.fixed7,x=y.positive,R=function(t){c(n,t);var e=l(n);function n(t){var r;return i(this,n),r=e.call(this),t?(r.asset=t,r.mode="ignore",r.order=v.rebalance(a(r)),t.target=a(r),r.watch(t,"value",(function(){return r.compute("valueDiff")})),r.watch(t,"price",(function(){!r.asset.amount&&r.size&&r.computeAll()})),r.opening=[],r.closing=[],"XLM"===t.id&&(r.mode="weight",r.size=1)):(r.childs=new f,r.childs.listen("add",(function(t){return t.parent=a(r)})),r.childs.listen("change",(function(){return r.computeAll()}))),r.trap("size",(function(){r.size&&(r.size=x(r.size),"percentage"===r.mode&&(r.size=Math.min(100,r.size))),r.computeAll()})),r}return o(n,[{key:"root",get:function(){return this.parent?this.parent.root:this}}]),n}(h);R.define("name",["group","asset"],(function(){return this.group||this.asset.id})),R.define("modified",["json"],(function(){return this.hasChanged()})),R.define("valueDiff",["value","asset"],(function(){return this.asset&&this.value-this.asset.value})),R.define("valueDiffP","valueDiff",(function(){return this.value?this.valueDiff/this.value:null})),R.define("amountDiff",["amount"],(function(){return w(this.amount-this.asset.amount)})),R.define("amountDelta",["amountDiff"],(function(){return Math.abs(this.amountDiff)})),R.define("share",null,(function(){return this.value/this.root.portfolio.total})),R.define("shareDiff",["share"],(function(){return this.share-this.asset.share})),R.prototype.computeAll=function(){if(this.parent)this.root.computeAll();else if(this.portfolio&&this.portfolio.total){try{this.error=null,this.value=this.portfolio.total,this.compute("modified"),m.apply(this)}catch(t){this.error=t.message,console.error(t)}this.trigger("update")}},R.prototype.addAsset=function(t){if(!this.childs)throw new Error("Target is not a group: ",e);if(t.target)throw new Error("Asset already has a target: ",t);var e=new R(t);return e.parent=this,t.anchors.filter((function(t){return!t.unpeg})).forEach((function(t){return e.addAnchor(t)})),this.childs.push(e),e.mode="weight",e.size=1,e},R.prototype.addAnchor=function(t){var e=t.tetherCode(this.asset.code),n=t.pubkey,r=d.resolve(e,n);"closing"===r.action?(b(this.closing,n),r.action=null):(this.root.portfolio.maybeAddBalance(r),this.opening.push(n),r.action="opening"),this.root.compute("modified"),this.order.refresh()},R.prototype.removeAnchor=function(t){var e=t.tetherCode(this.asset.code),n=t.pubkey,r=d.resolve(e,n);"opening"===r.action?(this.root.portfolio.maybeRemoveBalance(r),b(this.opening,n),r.action=null):(this.closing.push(n),r.action="closing"),this.root.compute("modified"),this.order.refresh()},R.sortChilds=function(t){return t.childs.slice().sort((function(t,e){return t.name.localeCompare(e.name)}))},R.forPortfolio=function(t,e){var n=e?R.fromJson(e):new R;return n.portfolio=t,t.target=n,n.watch(t,"total",(function(){return n.computeAll()})),t.assets.forEach((function(t){!n.childs.find((function(e){return t===e.asset}))&&t.isSupported&&n.childs.push(new R(t))})),n.childs.forEach((function(e,r){t.assets.find((function(t){return t===e.asset}))&&e.asset.isSupported||n.childs.splice(r,1)})),t.assets.listen("add",(function(t){t.isValid&&n.childs.push(new R(t))})),t.assets.listen("remove",(function(t){var e=n.childs.findIndex((function(e){return e.asset===t}));n.childs.splice(e,1)})),n},R.fromJson=function(t){var e=JSON.parse(t),n=R.fromObject(e);return n.json=t,n},R.prototype.toJson=function(t){var e=this.toObject();return JSON.stringify(e,null,t&&2)},R.prototype.hasChanged=function(){return this.toJson()!==(this.json||'{"childs":[]}')},R.fromObject=function(t){"string"==typeof t&&(t={asset:t});var e=t.asset&&p.resolve(t.asset),n=new R(e);if(n.size=t.size,n.mode=t.mode,"equal"===n.mode&&(n.mode="weight"),"skip"===n.mode&&(n.mode="ignore"),n.asset&&"XLM"===n.asset.id&&"ignore"===n.mode&&(n.mode="weight",n.size=1),n.mode||(n.mode="weight"),null==n.size&&"weight"===n.mode&&(n.size=1),t.childs){var i;n.group=t.group;var o=t.childs.map((function(t){return R.fromObject(t)})),a=o.filter((function(t){return"percentage"===t.mode}));a.length&&!o.find((function(t){return"weight"===t.mode}))&&100!==k(a,"size")&&a.forEach((function(t){return t.mode="weight"})),(i=n.childs).push.apply(i,r(o))}else{var c=n.asset.balances;t.opening&&(n.opening=t.opening),t.closing&&(n.closing=t.closing),c.forEach((function(t){var e=t.anchor.pubkey;g(n.closing,e)?t.action="closing":b(n.opening,e)})),n.closing.forEach((function(t){c.find((function(e){return e.anchor.pubkey===t}))||b(n.closing,t)})),c.length||(e.target=null)}return n},R.prototype.toObject=function(){if("ignore"!==this.mode){var t={mode:this.mode,size:this.size};if("weight"===t.mode&&(delete t.mode,1===t.size&&delete t.size),this.asset)t.asset=this.name,this.opening.length&&(t.opening=this.opening),this.closing.length&&(t.closing=this.closing),1===Object.keys(t).length&&(t=t.asset);else if(this.childs){t.group=this.group;var e=R.sortChilds(this);t.childs=e.map((function(t){return t.toObject()})).filter((function(t){return t}))}return t}},R.prototype.toCosmicLink=function(){if(this!==this.root)throw new Error("Only root target can be converted to CosmicLink");var t=this.toOperations(),e=this.portfolio.offers.listOutdated(),n=[];t.forEach((function(t){return t.offer.id=null})),e.forEach((function(e){var r=t.find((function(t){return t.offer.balance===e.balance}));r?r.offer.id=e.id:n.push(e)})),t.forEach((function(t){!t.offer.id&&n.length&&(t.offer.id=n.pop().id)}));var r=v.operationsToCosmicLink(t);return this.portfolio.balances.filter((function(t){return t.asset.target})).forEach((function(t){(function(t){return"remove"!==t.asset.target.mode&&"opening"===t.action})(t)&&r.insertOperation(0,"changeTrust",{asset:t.id}),function(t){return!!t.hasTrustline&&(0===t.amount&&"closing"===t.action||"remove"===t.asset.target.mode&&0===t.asset.amount)}(t)&&r.insertOperation(0,"changeTrust",{asset:t.id,limit:0})})),n.forEach((function(t){r.insertOperation(0,"manageOffer",{offerId:t.id,amount:0})})),r.tdesc.operations.length?r:null},R.prototype.toOperations=function(){var t;return this.childs?(t=[]).concat.apply(t,r(this.childs.map((function(t){return t.toOperations()})))):this.order?this.order.operations:[]},t.exports=R},310:function(t,e,n){"use strict";n(311),n(202),n(132),n(137),n(178),n(134),n(138),n(166),n(129),n(68),n(197),n(139),n(65),n(130),n(131),n(148),n(136);var r=n(207),i=n(154),o=n(14),a=n(26),c=n(64),s=n(63),u=n(62);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var f=n(147).CosmicLink,h=n(146),p=n(140),d=n(69),v=n(43).__,m=n(67),y=n(141),g=y.positive,b=y.negative,k=y.fixed7,w=y.clamp,x=y.absoluteMin,R=y.arraySum,A=y.arrayScale,S=t.exports=function(t){c(n,t);var e=l(n);function n(t,r){var i;o(this,n),(i=e.call(this)).type=t,i.method=n.type[i.type],i.operations=new h,i.orderbook=r;for(var a=arguments.length,c=new Array(a>2?a-2:0),s=2;s<a;s++)c[s-2]=arguments[s];return i.parameters=c,i.operations.listen("update",(function(){i.compute(["cosmicLink","description"])})),i.refresh(),i}return a(n,null,[{key:"rebalance",value:function(t){if("XLM"!==t.asset.code){var e=new n("balance",t.asset.orderbook,t);return e.watch(t,"amount",(function(){return e.refresh()})),e.watch(t.asset.orderbook,["bids","asks"],(function(){return e.refresh()})),t.asset.offers.listen("change",(function(){return e.refresh()}),e),e}}}]),a(n,[{key:"refresh",value:function(){this.operations.splice(0,this.operations.length),this.operations.trigger("update"),this.method.apply(this,[this].concat(i(this.parameters))),this.trigger("refresh")}},{key:"getOperation",value:function(t,e){var n="".concat(t.balance.anchor.name,":").concat(e?t.price:"take"),r=this.operations.find((function(t){return t.id===n}));if(r)return r;var i={id:n};return this.operations.push(i),i}},{key:"addOperation",value:function(t,e){var n=this.getOperation(t,e>0);this.setOperation(n,t,Number(e)||n.amount)}},{key:"setOperation",value:function(t,e,n){t.amount=k(n),t.cost=n*e.price,t.offer=e,t.isDust=t.amount>0&&t.amount*e.basePrice<1e-7,this.operations.trigger("update")}}]),n}(d);function D(t){return t.amount>0&&"bids"===t.offer.side||t.amount<0&&"asks"===t.offer.side?"buy":"sell"}function T(t){var e,n=t.offer,r=n.balance.code+":"+n.balance.anchor.pubkey;return(e="buy"===D(t)?{buying:r,selling:"XLM",amount:k(t.amount*n.price_r.n/n.price_r.d),price:{n:n.price_r.d,d:n.price_r.n}}:{buying:"XLM",selling:r,amount:t.amount,price:n.price_r}).offerId=t.offer.id,e}function P(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.asset.orderbook,r="quantity"===t.mode||0===t.amount,i=n.asks[0].basePrice;if(r||!(Math.abs(e*i)<m.minOfferValue)){var o=E(t,e);S.type.limit(t.order,e,{orderbook:n,filter:o})}}function C(t,e){var n=t.asset.balances,r=0,i=n.map((function(){return 0}));if(b(e)){var o=n.map((function(t){return"closing"===t.action?-t.amount:0}));r=O(i,o,e)}var a=g(e)?"underMin":"overMax";if(r!==e){var c=n.map((function(t){return"closing"===t.action?0:-t[a]}));r=O(i,c,e-r)}if(r!==e){var s=g(e)?"sizeMax":"sizeMin",u=n.map((function(t){return"closing"===t.action?0:t[s]-t[a]}));O(i,u,e-r)}n.forEach((function(e,n){var r=k(i[n]);P(t,r,e.orderbook)}))}function O(t,e,n){var r=R(e),i=x(n,r);return A(e,i).forEach((function(e,n){return t[n]+=e})),+p(R(t),7)}function E(t,e){return function(t){return e>=t.balance.sizeMin&&e<=t.balance.sizeMax&&t.baseVolume>Math.abs(e)*m.skipMarginalOffers}}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.maxSpread/2,n=t.balance.asset.price,r=t.balance.orderbook.price;if("bids"===t.side){var i=Math.min(r,n*(1-e));t.price=w(t.price,i,n)}else{var o=Math.max(r,n*(1+e));t.price=w(t.price,n,o)}}function I(t){var e=t.balance.orderbook.quote;for(t.price_r={n:p(1e10*t.price,0),d:p(1e10*e.price,0)};t.price_r.n>999999999||t.price_r.d>999999999;)t.price_r.n=p(t.price_r.n/10,0),t.price_r.d=p(t.price_r.d/10,0)}S.define("description","operations",(function(){return S.operationsToDescription(this.operations)})),S.operationsToCosmicLink=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new f({network:"public",memo:"Equilibre.io",maxTime:"+5",source:m.portfolio.accountId});return t.forEach((function(t){if(t.isDust){var n=t.offer.balance,r=n.anchor.pubkey,i="".concat(n.code,":").concat(r);e.addOperation("payment",{amount:t.amount,asset:i,destination:r}),e.addOperation("changeTrust",{asset:i,limit:0})}else e.addOperation("manageOffer",T(t))})),e},S.operationsToDescription=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return t.forEach((function(t){"buy"===D(t)?e.push("\n".concat(v("Buy")," ").concat(p(t.amount)," ").concat(t.offer.balance.code," ").concat(v("at")," ").concat(p(t.offer.price)," ").concat(m.currency,"\n      ")):t.isDust?e.push("\n".concat(v("Burn dust")," (").concat(p(t.amount)," ").concat(t.offer.balance.code,")\n        ")):e.push("\n".concat(v("Sell")," ").concat(p(t.amount)," ").concat(t.offer.balance.code," ").concat(v("at")," ").concat(p(t.offer.price)," ").concat(m.currency,"\n      "))})),e},S.type={},S.type.market=function(t,e){if(e){var n=e>0?"asks":"bids",r=Math.abs(e),i=t.orderbook.findOffer(n,(function(t){return t.baseVolume>r}));t.addOperation(i,r)}},S.type.limit=function(t,e,n){var r=n.orderbook,i=n.filter;if(e){var o=e>0?"bids":"asks",a=(r||t.orderbook).findOffer(o,i);a&&t.addOperation(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.spreadTightening,n=Object.assign({},t),r=e*t.balance.asset.orderbook["spread%"]/100;"bids"===t.side?n.price=t.price*(1+r):n.price=t.price*(1-r);t.balance.asset.globalPrice&&M(n);return I(n),n}(a),Math.abs(e))}},S.type.balance=function(t,e){var n=e.asset,r=n.orderbook;if(null!=e.amount&&0!==e.amountDelta)if(r.isFetched()){if(n.liabilities)if(n.offers.filter((function(t){return!t.outdated})).length)return void(t.description=[v("Rebalancing...")]);!function(t){var e=[];if(t.asset.balances.forEach((function(t){null!=t.orderbook.price&&t.isActive?e.push(t):t.targetAmount=null})),!e.length)return;if(1===e.length)return e[0].targetAmount=t.amount;var n=k(t.amount/e.length);e.forEach((function(t){return t.targetAmount=n}))}(e),!function(t){var e=t.asset.balances;return!(R(e,"underMin")&&R(e,"overMax"))}(e)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.amountDiff,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.anchorsRebalanceRiskMax,r=t.asset.balances,i=-R(r,"underMin"),o=R(r,"overMax"),a=Math.max(i-g(e),o+b(e)),c=Math.abs(t.valueDiffP),s=t.amount*g(n-c),u=Math.min(a,s),l=k(u+g(e)),f=k(u-b(e));C(t,l),C(t,-f)}(e,e.amountDiff):!function(t,e){var n=t.asset.balances,r=n.filter((function(t){return"closing"===t.action&&e<t.sizeMin})),i=n.filter((function(t){return t.sizeMin<=e&&e<=t.sizeMax}));return!r.length&&!!i.length}(e,e.amountDiff)?C(e,e.amountDiff):P(e,e.amountDiff)}else t.description=[v("Fetching orderbook...")]};var L=function(t){S[t]||(S[t]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r(S,[t].concat(n))})};for(var B in S.type)L(B)},314:function(t,e,n){"use strict";n(132),n(137),n(134),n(136);var r=e,i=n(140),o=n(43).__,a=n(67),c=n(141),s=c.arraySum,u=c.fixed7,l=c.positive;r.apply=function(t){var e=[],c=0,f=0;t.childs.forEach((function(t){var n=t.mode;"weight"===n?(e.push(t),f+=t.size):(r[n](t),c+=t.value)}));var h=l(t.value-c);e.forEach((function(t){return r.weight(t,h,f)})),function(t,e,n){var r=a.misallocationTolerance;if(t>e*(1+r)){var c=+i(t-e,2),s=+i(100*c/e,2),u=o("Rebalance setup is over portfolio value by");throw u+=" ".concat(c," ").concat(a.currency," (").concat(s,"%) "),new Error(u)}if(!n&&t<e*(1-r)){var l=+i(e-t,2),f=+i(100*l/e,2),h=o("Rebalance setup is under portfolio value by");throw h+=" ".concat(l," ").concat(a.currency," (").concat(f,"%) "),new Error(h)}}(c,t.value,e.length),function(t){var e=n(143).resolve("XLM"),r=t.childs.filter((function(t){return t.asset!==e})),i=e.value-e.valueMin,a=r.filter((function(t){return t.valueDiff>0})),c=s(a,"valueDiff");if(i>c)return;var f=r.filter((function(t){return t.valueDiff<0})),h=-s(f,"valueDiff"),p=e.target.value-e.valueMin,d=1-l(p/h);if(r.forEach((function(t){t.amount=u(t.amount-t.amountDiff*d)})),d>.95)throw new Error(o("The XLM share is too low"))}(t)},r.amount=function(t){t.amount=t.size,t.value=t.amount*t.asset.price,t.compute("share")},r.ignore=function(t){t.value=t.asset.value,t.amount=t.asset.amount,t.compute("share")},r.remove=function(t){t.amount=0,t.value=0,t.compute("share")},r.percentage=function(t){r.weight(t,t.parent.value,100)},r.weight=function(t,e,n){n?(t.value=t.size*e/n,t.amount=u(t.value/t.asset.price)):t.value=t.amount=0,t.compute("share")}},315:function(t,e,n){"use strict";n(132),n(134),n(138),n(165),n(129),n(68),n(65),n(130),n(131),n(136);var r=n(14),i=n(26),o=n(64),a=n(63),c=n(62);function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=n(133),l=n(199),f=n(316),h=n(317),p=n(141).arrayOnlyInFirst;t.exports=function(t){o(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,'\n<div class="TargetSetup">\n  <h3>%name</h3>\n  <hr>\n\n  %sizeSetup\n  %anchorsSetup\n\n</div>\n    ')).target=t,i.backup={size:t.size,mode:t.mode,opening:t.opening.slice(),closing:t.closing.slice()},i.name=t.asset.name,i.sizeSetup=new h(t),i.target.asset.anchors.length>1&&(i.anchorsSetup=new f(t)),i}return i(n,[{key:"confirm",value:function(){this.sizeSetup.maybeSwitchMode();var t=this.target.asset;"XLM"===t.id&&this.target.value<t.amountMin*t.price&&(this.target.mode="amount",this.target.size=t.amountMin),this.close()}},{key:"cancel",value:function(){var t=this;this.target.mode=this.backup.mode,this.target.size=this.backup.size,p(this.target.opening,this.backup.opening).concat(p(this.backup.closing,this.target.closing)).map(l.resolve).forEach((function(e){return t.target.removeAnchor(e)})),p(this.target.closing,this.backup.closing).concat(p(this.backup.opening,this.target.opening)).map(l.resolve).forEach((function(e){return t.target.addAnchor(e)})),this.close()}},{key:"close",value:function(){document.activeElement.blur(),this.sizeSetup.destroy(),this.anchorsSetup&&this.anchorsSetup.destroy(),this.destroy()}}]),n}(u)},316:function(t,e,n){"use strict";n(137),n(178),n(175),n(129),n(225),n(68),n(65),n(130),n(131),n(148);var r=n(14),i=n(26),o=n(64),a=n(63),c=n(62);function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=n(133),l=n(43).__;t.exports=function(t){o(n,t);var e=s(n);function n(t){var i;return r(this,n),(i=e.call(this,'\n<fieldset class="TargetSetupAnchors">\n  <legend>'.concat(l("Anchor"),":</legend>\n  %toAnchorCheckbox:anchors...\n</fieldset>\n  "))).target=t,i.anchors=t.asset.anchors.filter((function(e){var n=t.root.portfolio;return!e.unpeg||function(t,e){return t.balances.find((function(t){return t.anchor===e}))}(n,e)})),i}return i(n,[{key:"toAnchorCheckbox",value:function(t){var e=this;return new f(t,{getState:function(){return function(t,e){var n=t.asset.balances.find((function(t){return t.anchor===e}));return n&&n.isActive}(e.target,t)},callback:this.switchAnchor.bind(this)})}},{key:"switchAnchor",value:function(t,e){e?this.target.addAnchor(t):this.target.asset.balances.reduce((function(t,e){return e.isActive?t+1:t}),0)>1&&this.target.removeAnchor(t)}}]),n}(u);var f=function(t){o(n,t);var e=s(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,n);var a=o.getState,c=o.callback;return(i=e.call(this,'\n<span class="AnchorCheckbox half">\n  <input -ref=%checkbox type="checkbox" %checked>\n  <label -ref=%label %onclick>%name</label>\n</span>\n')).name=t.name,i.checked=a(),i.onclick=function(){c(t,!i.checked),i.checked=a()},i}return n}(u)},317:function(t,e,n){"use strict";n(132),n(129),n(197),n(65),n(130),n(131);var r=n(14),i=n(26),o=n(66),a=n(64),c=n(63),s=n(62);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var l=n(133),f=n(140),h=n(43).__;t.exports=function(t){a(n,t);var e=u(n);function n(t){var i;return r(this,n),(i=e.call(this,'\n<fieldset class="TargetSetupSize">\n  <legend>'.concat(h("Size"),':</legend>\n\n  <input autofocus class="half" type="number" step="any" min="0" %max\n    value=%size placeholder=%share onchange=%maybeSwitchMode>\n\n  <select class="half" onchange=%setMode value=%mode>\n    <option value="weight">').concat(h("Weight"),'</option>\n    <option value="percentage">').concat(h("Percentage"),'</option>\n    <option value="amount">').concat(h("Amount"),'</option>\n    <option value="ignore" hidden=%targetIsXlm>').concat(h("Ignore"),'</option>\n    <option value="remove" hidden=%targetIsXlm>').concat(h("Remove"),"</option>\n  </select>\n\n</fieldset>\n    "))).target=t,i.targetIsXlm="XLM"===t.asset.id,t.project("share",o(i),(function(t){return f(100*t,2)})),t.project("size",o(i)),i.project("size",t,(function(t){return null!=t?Number(t):null})),t.project("mode",o(i)),i.project("mode",t),i}return i(n,[{key:"maybeSwitchMode",value:function(){0==this.size?this.mode="amount":this.size?"ignore"!==this.mode&&"remove"!==this.mode||(this.mode="percentage",this.target.computeAll()):"remove"!==this.mode&&(this.mode="ignore")}},{key:"setMode",value:function(){switch(this.mode){case"weight":this.size=1,this.max=null;break;case"percentage":this.size=+f(100*this.target.asset.share,2),this.max=100;break;case"amount":this.size=this.target.asset.amount,this.max=null;break;case"ignore":case"remove":this.target.set("size",null)}}}]),n}(l)},318:function(t,e,n){"use strict";n(132),n(129),n(65),n(130),n(131);var r=n(14),i=n(26),o=n(66),a=n(64),c=n(63),s=n(62);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var l=n(133),f=n(29),h=n(43).__;t.exports=function(t){a(n,t);var e=u(n);function n(t){var i;return r(this,n),(i=e.call(this,'\n<section class="TargetControls">\n  <form %onsubmit hidden=%hideRebalance>\n    <button onclick=%rebalance disabled=%invalid>'.concat(h("Rebalance"),"</button>\n  </form>\n\n  <form %onsubmit hidden=%hideSave>\n    <button onclick=%save disabled=%invalid>").concat(h("Save"),"</button>\n    <button onclick=%cancel>").concat(h("Cancel"),"</button>\n  </form>\n\n  %toParagraph:error\n</section>\n    "))).target=t,t.project(["error","modified"],o(i)),i.define("hideRebalance",["modified"],(function(){return i.modified})),i.define("hideSave",["modified"],(function(){return!i.modified})),i.define("invalid",["error"],(function(){return!!i.error})),i}return i(n,[{key:"toParagraph",value:function(t){if(t)return f.create("p",".error",t)}},{key:"onsubmit",value:function(){return!1}},{key:"cancel",value:function(){location.reload()}},{key:"save",value:function(){this.target.json=this.target.toJson()}},{key:"rebalance",value:function(){var t=this,e=this.target.toCosmicLink();e&&e.open().listen("destroy",(function(){t.target.portfolio.getAccount(),t.target.portfolio.offers.get()}))}}]),n}(l)},319:function(t,e,n){"use strict";n(132),n(137),n(151),n(129),n(68),n(65),n(130),n(131);var r=n(66),i=n(15);n(17);var o=n(16),a=n(14),c=n(26),s=n(64),u=n(63),l=n(62);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var h=n(133),p=n(29),d=n(140),v=n(43).__,m=n(320),y=n(224);t.exports=function(t){s(r,t);var e,n=f(r);function r(t){var e;return a(this,r),(e=n.call(this,'\n<section class="TargetsTable">\n  <table>\n    <tr>\n      <th class="name">'.concat(v("Name"),'</th>\n      <th align="right">').concat(v("Goal"),'</th>\n      <th align="right">').concat(v("Divergence"),'</th>\n      <th align="right">').concat(v("Operation"),'</th>\n    </tr>\n\n    %targets...\n\n    <tr><td colspan="4" align="center" onclick=%addAsset>\n      <h3>').concat(v("Add Asset"),"</h3>\n    </td></tr>\n\n  </table>\n</section>\n    "))).target=t,e.targets=t.childs.mirror((function(t){return e.toTargetRow(t)})),e.selected=void 0,t.listen("update",(function(){return e.sortTargets()})),e.sortTargets(),e}return c(r,[{key:"toTargetRow",value:function(t){var e=this,n=new g(t);return n.domNode.onclick=function(){return e.selected=t},n}},{key:"sortTargets",value:function(){this.targets.sort((function(t,e){return t=t.target,"ignore"===(e=e.target).mode&&"ignore"!==t.mode?-1:"ignore"===t.mode&&"ignore"!==e.mode?1:"remove"===e.mode&&"remove"!==t.mode?-1:"remove"===t.mode&&"remove"!==e.mode?1:e.value-t.value||t.asset.code.localeCompare(e.asset.code)}))}},{key:"addAsset",value:(e=o(i.mark((function t(){var e,n,r;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.target.portfolio.availableAssets().filter((function(t){return t.show})),n=new m(e),r=y.confirm({title:v("Pick an Asset"),content:n}),t.next=5,r;case 5:if(t.t0=t.sent,!t.t0){t.next=8;break}t.t0=n.selected;case 8:if(!t.t0){t.next=10;break}this.target.addAsset(n.selected);case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),r}(h);var g=function(t){s(n,t);var e=f(n);function n(t){var i;return a(this,n),(i=e.call(this,'\n<tr class="TargetRow">\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="right">%command</td>\n  <td align="right">%toPercent:shareDiff</td>\n  <td align="right">%toDiv:description...</td>\n</tr>\n    ')).target=t,i.name=t.asset.code,i.define("command",null,(function(){return i.toCommand(t)})),i.watch(t,["size","mode","share"],(function(){return i.compute("command")})),t.asset.project("image",r(i)),t.project("shareDiff",r(i),(function(t){return-t})),t.order&&t.order.project("description",r(i)),i}return c(n,[{key:"toCommand",value:function(t){switch(t.mode){case"ignore":return v("Ignore");case"remove":return v("Remove");case"amount":return"".concat(t.size," ").concat(t.asset.code);case"weight":return"".concat(t.size," − ").concat(this.toPercent(t.share));case"percentage":return this.toPercent(t.share)}}},{key:"toPercent",value:function(t){return t?d(100*t,2)+"%":"-"}},{key:"toDiv",value:function(t){return p.create("div",null,t)}}]),n}(h)},320:function(t,e,n){"use strict";n(137),n(129),n(68),n(65),n(130),n(131);var r=n(14),i=n(26),o=n(64),a=n(63),c=n(62);function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var u=n(133),l=n(146),f=n(43).__;t.exports=function(t){o(n,t);var e=s(n);function n(t){var i;r(this,n),(i=e.call(this,'\n<div class="AssetSelector">\n  %groups...\n</div>\n    ')).groups=new l;var o=t.filter((function(t){return"fiat"===t.type})),a=t.filter((function(t){return"crypto"===t.type&&t.isTether})),c=t.filter((function(t){return"crypto"===t.type&&!t.isTether}));return i.addGroup(f("Fiat Tethers"),o),i.addGroup(f("Crypto Tethers"),a),i.addGroup(f("Native Assets"),c),i}return i(n,[{key:"addGroup",value:function(t,e){var n=this;if(e.length){var r=new h(t,e,(function(t){return n.selected=t}));this.groups.push(r)}}}]),n}(u);var h=function(t){o(n,t);var e=s(n);function n(t,i,o){var a;return r(this,n),(a=e.call(this,'\n<fieldset class="AssetGroup">\n  <legend>%name</legend>\n  %toAssetRadio:assets...\n</fieldset>\n    ')).name=t,a.assets=i,a.onselect=o,a}return i(n,[{key:"toAssetRadio",value:function(t){var e=this;return new p(t,(function(){return e.onselect(t)}))}}]),n}(u),p=function(t){o(n,t);var e=s(n);function n(t,i){var o;return r(this,n),(o=e.call(this,'\n<span class="AssetRadio half">\n  <input -ref=%radio type="radio" name="asset-selector-group" %onchange>\n  <label -ref=%label for=%radio>\n    <img src=%image>\n    %name\n  </label>\n</span>\n    ')).name=t.name,o.image=t.image,o.onchange=function(){return o.radio.checked&&i()},o.label.for=o.radio,o.label.onclick=function(){return o.radio.click()},o}return n}(u)},322:function(t,e){t.exports='<section>\n  <h2>What is Equilibre.io?</h2>\n\n  <section class="landing">\n    <h3>A Portfolio Balancer for Stellar</h3>\n\n    <div><img src="./images/repartition.png" alt="">\n\n    <p>\n      Equilibre.io is a portfolio balancer for Stellar. In other words, it is\n      a software which helps you to spread your funds across various\n      currencies and crypto assets.\n    </p>\n\n    <p>\n      I initially created it to protect my funds against a possible bear market.\n      As it proved reliable, I decided to make it publicly available.\n    </p>\n\n    <p>\n      Equilibre.io is merely a sophisticated front-end for the Stellar\n      Decentralized exchange: your account, holdings & operations live on the\n      blockchain.\n    </p>\n\n    <p>\n      It works a bit like a multi-currency bank account. Except there\'s no bank.\n      And you are the only one in control.\n    </p>\n\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Risk Management Solution</h3>\n\n    <div><img src="./images/history.png" alt="">\n    <p>\n      Equilibre.io can help you to implement what is known as a "balanced\n      investment strategy". Basically, the idea is that balancing funds over\n      multiple assets will average a portfolio performance & mitigate the risks.\n    </p>\n\n    <p>\n      Here\'s how it works: we choose a number of assets we want to be exposed\n      to, and we attribute a share of the portfolio to each of them (e.g: 20%\n      each). Then, we "rebalance" the portfolio on a regular basis. This means\n      that we pass trades that bring back each asset to its allocated share.\n    </p>\n\n    <p>\n      It is important to understand that Equilibre.io is not an automated\n      trading bot, nor a magic-free-money scheme. It is a product made for\n      people who can decide on their own strategy & who understand the risks\n      they are taking.\n    </p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Fancy Account Viewer</h3>\n\n    <div><img src="./images/balances.png" alt="">\n    <p>\n      Equilibre.io offers a live view of the latest blockchain state. It is also\n      in sync with the latest market data & displays values and historical data\n      in your national currency.\n    <p>\n\n    <p>\n      It is one of the few applications (if not the only one) that can retrieves\n      the complete history of any Stellar account, and pack that data into a\n      fancy chart.\n    </p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Sophisticated Trading Engine</h3>\n\n\n    <div><img src="./images/activity.png" alt="">\n    <p>\n      Equilibre.io is, first of all, a collection of fine-tuned trading\n      algorithms.  Since a year, I\'ve crash-tested them in every way I could\n      imagine and packed what worked the best in an easy-to-use interface.\n    <p>\n\n    <p>\n      It can transform templates such as "I want 50% of my portfolio in BTC and\n      50% in XLM" into a transaction that passes the required orders. Forget\n      about trust lines, order books and price picking: all that stuff is dealt\n      with in the background.\n    <p>\n\n    <p>\n      The trading engine has a defensive behavior: it prioritizes not losing\n      money over taking risks to make a profit.\n    </p>\n    </div>\n  </section>\n\n\n  <section class="landing">\n    <h3>A New Security Standard for the Years to Come</h3>\n\n    <div><img src="./images/side-frame.png" alt="">\n    <p>\n      Equilibre.io strictly enforce cryptography good practices: I certainly\n      don\'t want to know about your private key, nor to obtain any kind of\n      control over your account. <em>“Who can protect a house full of gold and\n      jewels?”</em>\n    </p>\n\n    <p>\n      When you want to rebalance your portfolio, Equilibre.io generates a\n      transaction request that you can sign using your own wallet. This is\n      possible thanks to protocols known as CosmicLink & SEP-0007.\n    </p>\n\n    <p>\n      Those protocols turn any compatible Stellar wallet into something like\n      Metamask for Ethereum. At that time, only a few services are compatibles.\n      However, a number of wallets announced their intention to support\n      transactions requests in the future, including Keybase, Lobster, and\n      Stargazer.\n    <p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Free Software, as in Freedom</h3>\n\n    <div>\n    <p>\n      I think that the free software cooperative mindset can go a long way in\n      improving a project such as Stellar. That\'s why I released Equilibre.io in\n      the public domain. Here are some of the benefits of it:\n    </p>\n\n    <p>\n      Auditability: The software can be proven to contain no malware and no\n      tracker. It can be audited for flaws & proven safe.\n    </p>\n\n    <p>\n      Forkability: Any feature implemented by the software becomes <em>de\n      facto</em> available to every other developer. For example, the code I\n      wrote to support Ledger Wallets is <a\n      href="https://www.npmjs.com/package/@cosmic-plus/ledger-wallet"\n      target="_blank" rel="noopener">freely available to all</a>.\n    </p>\n    </div>\n  </section>\n\n</section>\n'},323:function(t,e){t.exports="<section>\n  <h2>Legal Disclaimer</h2>\n\n  <section>\n    <h3>Risks Related to the Use of Equilibre.io</h3>\n\n    <p>\n      The Application author will not be responsible for any losses, damages or\n      claims arising from any event related to its use, including but not\n      limited to:\n    </p>\n\n    <p>− Mistakes made by the users of the Application.</p>\n\n    <p>− Software problems of the Application and/or any\n    related software or service.</p>\n\n    <p>− Technical failures in the hardware of the users.</p>\n\n    <p>− Security problems experienced by the users.</p>\n\n    <p>− Actions or inactions of third parties and/or events experienced by\n    third parties.</p>\n  </section>\n\n  <section>\n    <h3>Not an Exchange</h3>\n\n    <p>\n      The Application is not an exchange. It is an independent front-end for the\n      Stellar Decentralized Exchange. The Application doesn't have any control\n      over the user's account, assets that can be bought or sell or the exchange\n      as a whole.\n    </p>\n\n    <p>\n      The assets made available through the Application have been selected on\n      the sole basis of the thickness and the daily volumes of their order book.\n      Their availability in the Application doesn't constitute a guarantee of\n      any sort. In particular, no research has been conducted about their\n      fundamentals or their compliance with national laws that may apply\n      to them or to the users.\n    </p>\n\n    <p>\n      The Application doesn't pass any transaction on behalf of the users. The\n      users are solely responsible for the transactions that they are signing\n      and sending to the blockchain.\n    </p>\n  </section>\n\n  <section>\n    <h3>No Guarantee of Profit</h3>\n\n    <p>\n      Past performance may not be indicative of future results. Different types\n      of investments involve varying degrees of risk, and there can be no\n      assurance that the future performance of any specific investment,\n      investment strategy, or product will be profitable, equal any\n      corresponding indicated historical performance level(s), or be suitable\n      for your portfolio.\n   </p>\n\n    <p>\n      The Application doesn't provide investment advice, financial advice,\n      trading advice, or any other sort of advice, and none of the Application\n      content should be treated as such. The users are responsible to conduct\n      their own diligence and consult their financial advisory before making\n      investment decisions.\n    </p>\n  </section>\n\n  <section>\n    <h3>Compliance With Tax Obligations</h3>\n\n    <p>\n      The users of the Application are solely responsible to determinate what,\n      if any, taxes apply to their transactions. The author of the Application\n      is NOT responsible for determining the taxes that apply to transactions.\n    </p>\n    \n    <p>\n      Some countries are taxing investments on a per-transaction basis, which\n      can heavily affect the performance of strategies involving high quantities\n      of micro-transactions.\n    </p>\n  </section>\n\n</section>\n\n"},324:function(t){t.exports=JSON.parse('{"fiat":{"USD":{"show":true,"name":"US Dollar"},"CNY":{"show":true,"name":"Renminbi"},"EUR":{"show":true,"name":"Euro"}},"foreign":{"BTC":{"show":true,"apiId":"bitcoin"},"ETH":{"show":true,"apiId":"ethereum"},"XRP":{"show":true,"apiId":"ripple"},"LTC":{"show":true,"apiId":"litecoin"},"KIN":{"show":true,"apiId":"kin"},"BAT":{"apiId":"basic-attention-token"},"BCH":{"apiId":"bitcoin-cash"},"LINK":{"apiId":"chainlink"},"MTL":{"apiId":"metal"},"OMG":{"apiId":"omisego"},"REP":{"apiId":"augur"},"SALT":{"apiId":"salt"},"ZRX":{"apiId":"0x"}},"native":{"XLM":{"show":true,"apiId":"stellar"},"MOBI":{"show":true,"apiId":"mobius"},"RMT":{"show":true,"apiId":"sureremit"},"SHX":{"show":true,"apiId":"stronghold-token"},"SLT":{"show":true,"apiId":"smartlands"},"TERN":{"show":true,"apiId":"ternio"},"WXT":{"show":true,"apiId":"wirex"},"FRAS":{"apiId":"frasindo-rent"},"GNT":{"apiId":"glitzkoin"},"PEDI":{"apiId":"pedity"},"REPO":{"apiId":"repo"},"WLO":{"apiId":"wollo"}}}')},325:function(t){t.exports=JSON.parse('{"GAP5LETOV6YIE62YAM56STDANPRDO7ZFDBGSNHJQIYGGKSMOZAHOOS2S":{"alias":"tempo.eu.com","emit":[["EUR","EURT"]]},"GAREELUB43IRHWEASCFBLKHURCGMHE5IF6XSE7EXDLACYHGRHM43RFOX":{"alias":"ripplefox.com","emit":["CNY"]},"GCNY5OXYSY4FKHOPT2SPOQZAOEIGXB5LBYW3HVU3OWSTQITS65M5RCNY":{"alias":"fchain.io","emit":[["CNY","XCN"]]},"GCQTGZQQ5G4PTM2GL7CDIFKUBIPEC52BROAQIAPW53XBRJVN6ZJVTG6V":{"alias":"apay.io","emit":[["USD","USDT"]],"unpeg":true},"GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP":{"alias":"x.token.io","emit":["USD"],"unpeg":true},"GDSVWEA7XV6M5XNLODVTPCGMAJTNBLZBXOFNQD3BNPNYALEYBNT6CE2V":{"alias":"thewwallet.com","emit":[["USD","WSD"]],"unpeg":true},"GDUKMGUGDZQK6YHYA5Z6AY2G4XDSZPSZ3SW5UN3ARVMO6QSRDWP5YLEX":{"alias":"anchorusd.com","emit":["USD"]},"GAEGOS7I6TYZSVHPSN76RSPIVL3SELATXZWLFO4DIAFYJF7MPAHFE7H4":{"alias":"apay.io","emit":["BCH"]},"GATEMHCCKCY67ZUCKTROYN24ZYT5GK4EQZ65JJLDHKHRUZI3EUEKMTCH":{"alias":"naobtc.com","emit":["BTC"]},"GAUTUYY2THLF7SGITDFMXJVYH3LHDSMGEAKSBU267M2K7A3W543CKUEF":{"alias":"apay.io","emit":["BTC"]},"GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":{"alias":"apay.io","emit":["BAT","ETH","KIN","LINK","MTL","OMG","REP","SALT","ZRX"]},"GBETHKBL5TCUTQ3JPDIYOZ5RDARTMHMEKIO2QZQ7IOZ4YC5XV3C2IKYU":{"alias":"fchain.io","emit":["ETH"]},"GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5":{"alias":"stellarport.io","emit":["BTC","ETH","XRP","LTC"]},"GC5LOR3BK6KIOK7GKAUD5EGHQCMFOGHJTC7I3ELB66PTDFXORC2VM5LP":{"alias":"apay.io","emit":["LTC"]},"GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P":{"alias":"interstellar.exchange","emit":["BTC","ETH","XRP","LTC"]},"GC75WHUIMU7LV6WURMCA5GGF2S5FWFOK7K5VLR2WGRKWKZQAJQEBM53M":{"emit":["FRAS"]},"GCKA6K5PCQ6PNF5RQBF7PQDJWRHO6UOGFMRLK3DYHDOI244V47XKQ4GP":{"emit":["SLT"]},"GA6HCMBLTZS5VYYBCATRBRZ3BZJMAFUDKYYF6AH6MVCMGWMRDNSWJPIH":{"emit":["MOBI"]},"GDSTRSHXHGJ7ZIVRBXEYE5Q74XUVCUSEKEBR7UCHEUUEK72N7I7KJ6JH":{"emit":["SHX"]},"GDEGOXPCHXWFYY234D2YZSPEJ24BX42ESJNVHY5H7TWWQSYRN5ZKZE3N":{"emit":["RMT"]},"GDGQDVO6XPFSY4NMX75A7AOVYCF5JYGW2SHCJJNWCQWIDGOZB53DGP6C":{"emit":["TERN"]},"GBVUDZLMHTLMZANLZB6P4S4RYF52MVWTYVYXTQ2EJBPBX4DZI2SDOLLY":{"emit":["PEDI"]},"GCZNF24HPMYTV6NOEHI7Q5RJFFUI23JKUKY3H3XTQAFBQIBOHD5OXG3B":{"emit":["REPO"]},"GASBLVHS5FOABSDNW5SPPH3QRJYXY5JHA2AOA2QHH2FJLZBRXSG4SWXT":{"emit":["WXT"]},"GARFMAHQM4JDI55SK2FGEPLOZU7BTEODS3Y5QNT3VMQQIU3WV2HTBA46":{"emit":["GNT"]},"GBIL5TOVTZFNV3XS3E2LWTKU5SYOJ3UBCVBSKAMP4EE4MV2VSZQK7NRZ":{"emit":["WLO"]}}')},326:function(t,e,n){"use strict";n(132),n(129),n(65),n(130),n(131);var r=n(14),i=n(64),o=n(63),a=n(62);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}var s=n(133),u=n(29),l=n(43).__,f=n(327),h=n(328),p=n(67),d=new(function(t){i(n,t);var e=c(n);function n(t,i){return r(this,n),e.call(this,'\n<footer id="footer" class="scrollable">\n  <div class="nobreak">%icons...</div>\n  %links\n</footer>\n    ',{icons:t,links:i})}return n}(s))([new h(n(330),l("by Cosmic.plus"),"https://cosmic.plus"),new h(n(331),l("Follow on Twitter"),"https://twitter.com/cosmic_plus"),new h(n(332),l("Follow on Reddit"),"https://reddit.com/r/cosmic_plus"),new h(n(333),l("Follow on Medium"),"https://medium.com/cosmic-plus"),new h(n(334),l("Chat on Telegram"),"https://t.me/cosmic_plus"),new h(n(335),l("Chat on Keybase"),"https://keybase.io/team/cosmic_plus"),new h(n(336),l("GitHub Repository"),"https://git.cosmic.plus"),new h(n(337),l("Contact by Email"),"mailto:mister.ticot@cosmic.plus"),new h(n(338),l("Donate Lumens"),f)],new s("\n<p>\n  <a onclick=%displayLicense>".concat(l("License"),"</a>\n  − <a onclick=%displayDisclaimer>").concat(l("Disclaimer"),"</a>\n  − <a onclick=%displayAbout>").concat(l("About"),"</a>\n</p>\n"),{displayLicense:function(){return p.tabs.select("#license")},displayDisclaimer:function(){return p.tabs.select("#disclaimer")},displayAbout:function(){return p.tabs.select("#about")}}));u.append(document.body,d)},327:function(t,e,n){"use strict";n(132);var r=n(147).CosmicLink,i=n(43).__;t.exports=function(){var t=prompt("".concat(i("Donations are put to good use.")," ").concat(i("Thank you!"),"\n\n").concat(i("Enter an amount (in Lumens)"),":"));"0"===t||isNaN(+t)?confirm("".concat(i("Not a valid amount"),": ").concat(t)):t&&function(t){var e=i("Donation to Cosmic.plus");new r({memo:e,network:"public"}).addOperation("payment",{amount:t,destination:"tips*cosmic.plus"}).open()}(t)}},328:function(t,e,n){"use strict";n(129),n(65),n(130),n(45),n(131),n(329),n(168);var r=n(14),i=n(64),o=n(63),a=n(62);function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}var s=n(133),u=function(t){i(n,t);var e=c(n);function n(t,i,o){var a;return r(this,n),(a=e.call(this,'<a -ref=%link class="Icon">%image</a>')).image="string"==typeof t?new s(t):t,a.link.title=i,"function"==typeof o?a.link.onclick=o:"string"==typeof o&&(a.link.href=o,o.match(/^http/)&&(a.link.target="_blank",a.link.rel="noopener")),a}return n}(s);t.exports=u}}]);
//# sourceMappingURL=app.js.map