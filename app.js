(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(t,e,n){"use strict";n(53),n(52);const s=n(54),i=n(102),o=n(15),a=n(194),r=n(272),{__:c}=n(33),l=n(50),h=n(273),u=n(219),d=n(220),p=n(323),f=n(325),m=n(330),g=n(331),b=new i(n(347)),y=new i(n(348)),w=new i(n(349));let v,k;function A(){v&&v.disconnect(),k&&k.disconnect()}async function T(){const t=M["stellar-public-key"];t||M.error(c("Please enter an address.")),A(),M.info(c("Connecting to your account...")),r.$set({address:t});const e=new u;e.enable();try{l.portfolio=await h.resolve(t),M.info("".concat(c("Fetching market data"),"...")),setTimeout(()=>M.info("".concat(c('Sorry, it takes a while (^.^)"'),"...")),1e4),setTimeout(()=>M.info("".concat(c("Almost there"),"...")),2e4),setTimeout(()=>M.info("".concat(c("I'm running, I'm running"),"...")),3e4),l.portfolio.listen("open",()=>{!function(){const t=l.portfolio,e=location.hash;E.remove("#welcome"),E.remove("#login"),E.remove("#demo"),E.add("#portfolio",c("Portfolio"),new f(t)),E.add("#rebalance",c("Rebalance"),new g(t)),E.add("#activity",c("Activity"),new p(t)),E.add("#settings",c("Settings"),new m),E.add("#logout",c("Logout"),()=>{location.replace(location.href.replace(/\?.*$/,"#login"))}),E.listen("select",()=>{if(!E.selected)return;const t=E.selected.content;t.reflow&&t.reflow()}),E.select(e),E.selected||E.select("#portfolio")}(),e.destroy()})}catch(t){e.destroy(),M.error(t)}}const C="GAWO2C52D57XBT7SQL6YB3XPHFLFD2J4Z5RN7HPFZSHXJMXH72HRXNV3";function S(){localStorage["target:".concat(C)]=O,location.href="?address=".concat(C)}const O='{"childs":[{"size":24,"asset":"BTC","closing":["GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P"]},{"size":32,"asset":"CNY"},{"size":24,"asset":"ETH"},{"size":32,"asset":"EUR"},{"size":6,"asset":"LTC"},{"size":3,"asset":"MOBI"},{"size":3,"asset":"RMT"},{"size":3,"asset":"SHX"},{"size":3,"asset":"TERN"},{"size":32,"asset":"USD","closing":["GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP"]},{"size":24,"asset":"XLM"},{"size":6,"asset":"XRP"}]}';const x=n(110),P=n(350);x.register(P.fiat,{type:"fiat",isTether:!0}),x.register(P.foreign,{type:"crypto",isTether:!0}),x.register(P.native,{type:"crypto",isTether:!1}),x.resolve(l.currency,{type:"fiat",isTether:!0});n(180).register(n(351)),n(352);const E=l.tabs=new a({nav:s.header,selector:s.header,view:s.main});E.add("#welcome",c("Welcome"),y),E.add("#demo",c("Demo"),S),E.add("#login",c("Login"),s.loginTab),E.add("#license",null,b),E.add("#disclaimer",null,w),E.add("#about",null,y),s.demoLink.onclick=S,o.show(s.loginTab),E.select(null),E.select(location.hash),E.selected||(localStorage["PortfolioSummary.tab"]?E.select("#login"):E.select("#welcome"));const M=new d(s.loginForm,{onsubmit:T});M.dom.loginWithLedger.onclick=async function(){A(),M["stellar-public-key"]=null,v=await Promise.all([n.e(4),n.e(2)]).then(n.t.bind(null,364,7)).then(t=>t.default),M.info(c("Please open the Stellar App in your Ledger Wallet"));try{await v.connect(),M["stellar-public-key"]=v.publicKey,T()}catch(t){M.error(t)}},M.dom.loginWithTrezor.onclick=async function(){A(),M["stellar-public-key"]=null,k=await async function(){const t=await n.e(5).then(n.t.bind(null,420,7)).then(t=>t.default);return t.register("equilibre.io","mister.ticot@cosmic.plus"),t}(),M.info(c("Please import your Trezor public key"));try{await k.connect(),M["stellar-public-key"]=k.publicKey,T()}catch(t){M.error(t)}},r.address&&(E.select("#login"),M["stellar-public-key"]=r.address,T()),E.listen("select",t=>{location.hash=t,window.scrollTo(0,0)})},108:function(t,e,n){"use strict";const s=e;s.positive=function(t){return Math.max(0,t)},s.negative=function(t){return Math.min(0,t)},s.fixed7=function(t){return+Number(t).toFixed(7)},s.clamp=function(t,e,n){return Math.min(Math.max(t,e),n)},s.absoluteMin=function(t,e){return Math.abs(t)<=Math.abs(e)?t:e},s.arrayContains=function(t,e){return-1!==t.indexOf(e)},s.arrayRemove=function(t,e){for(let n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},s.arrayOnlyInFirst=function(t,e){return t.filter(t=>!s.arrayContains(e,t))},s.arraySum=function(t,e){return e?t.reduce((t,n)=>t+n[e],0):t.reduce((t,e)=>t+e,0)},s.arrayScale=function(t,e,n){const i=s.arraySum(t,n);return i?n?t.map(t=>t[n]*e/i):t.map(t=>t*e/i):t.map(()=>0)}},110:function(t,e,n){"use strict";n(53);const s=n(114),i=n(51),o=n(317),a=n(217),{fixed7:r,arrayContains:c,arrayRemove:l,arraySum:h}=n(108),u=t.exports=class t extends i{static resolve(e,n){return t.table[e]||new t(e,n)}constructor(e,n){super(),n&&Object.assign(this,n),this.id=e,t.table[e]=this,this.image="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",this.type?(this.code=e,"fiat"===this.type?(t.fiats.push(this),this.image="".concat("https://www.xe.com/themes/xe/images/flags/svg/").concat(e.toLowerCase()).concat(".svg"),this.useGlobalPrice=!0):(t.cryptos.push(this),this.type="crypto",(this.isTether||"XLM"===this.id)&&(this.useGlobalPrice=!0))):(this.code=e.replace(/:.*/,""),this.name=this.code,this.type="unknown"),this.anchors=new s,this.balances=new s,this.offers=new s,this.balances.mirror(t=>{this.watch(t,"amount",()=>this.compute("amount")),this.watch(t,["buying","selling"],()=>{this.compute("liabilities")})}),this.orderbook=a.forAsset(this),this.define("price","globalPrice",()=>this.globalPrice||this.orderbook.price),this.watch(this.orderbook,"price",()=>this.compute("price"))}maybeAddBalance(t){c(this.balances,t)||(this.balances.push(t),t.orderbook||t.streamPrice())}maybeRemoveBalance(t){l(this.balances,t)}async getInfo(){this.name||"crypto"!==this.type||(this.info=await o.crypto.info(this),this.name=this.info.name,this.image=this.info.image.small)}async getHistoricPrice(){return this.historicPrice?this.historicPrice:(this.historicPrice=await o.assetHistory(this),this.historicPrice?(this.trap("price",()=>{this.historicPrice[this.historicPrice.length-1].price=this.price}),this.historicPrice):void 0)}};u.define("amount","balances",(function(){return this.balances&&r(h(this.balances,"amount"))})),u.define("value",["amount","price"],(function(){return 0===this.amount?0:this.amount*this.price})),u.define("valueMin",["amountMin","price"],(function(){return this.amountMin?this.amountMin*this.price:0})),u.define("liabilities",["balances","price"],(function(){if(this.balances){const t=this.balances.reduce((t,e)=>t+e.buying-e.selling,0);return this.price*t}})),u.define("isSupported",["type","price"],(function(){return!("unknown"===this.type&&!this.price)})),u.register=function(t,e){for(let n in t){const s=Object.assign({},e,t[n]);u.resolve(n,s)}},u.getAllInfo=function(){Object.values(u.table).forEach(t=>t.getInfo())},u.refreshPrices=async function(t){t?(await u.refreshCryptoPrices(t.filter(t=>"crypto"===t.type).map(t=>t.code)),await u.refreshFiatPrices(t.filter(t=>"fiat"===t.type).map(t=>t.code))):(await u.refreshCryptoPrices(),await u.refreshFiatPrices())},u.refreshCryptoPrices=async function(t=u.cryptos){if(!t.length)return;const e=await o.crypto.prices(t);t.forEach(t=>{t.useGlobalPrice&&(t.globalPrice=e[t.code])})},u.refreshFiatPrices=async function(t=u.fiats){if(!t.length)return;const e=await o.fiat.prices(t);t.forEach(t=>{t.useGlobalPrice&&(t.globalPrice=e[t.code])})},u.table={},u.cryptos=[],u.fiats=[],setInterval(u.refreshCryptoPrices,6e4),setInterval(u.refreshFiatPrices,36e5),console.log(u.table)},149:function(t,e,n){"use strict";const s=n(114),i=n(51),o=n(180),a=n(110),r=n(217),c=n(50),{fixed7:l,positive:h,negative:u,arrayRemove:d}=n(108);class p extends i{static resolve(t,e){const n=p.makeId(t,e);return p.table[n]||new p({code:t,issuer:e})}static ingest(t){const e=p.recordToParams(t),n=p.resolve(e.code,e.issuer);return n.update(e),n.hasTrustline=!0,n}constructor(t){const{code:e,issuer:n}=t;super(),this.code=e,this.anchor=o.resolve(n||"stellar.org"),this.id=p.makeId(e,n),p.table[this.id]=this,this.code in this.anchor.assets?(this.asset=this.anchor.assets[this.code],this.known=!0):(this.asset=a.resolve(this.id),this.known=!1),this.update(t),this.offers=new s}update(t){const{amount:e,buying:n,selling:s}=t;this.amount=e||0,this.buying=n||0,this.selling=s||0}streamPrice(){this.orderbook||("XLM"===this.id?this.asset.project("price",this):(this.orderbook=r.forBalance(this,a.resolve("XLM")),this.orderbook.project("price",this),this.asset.orderbook.addChild(this.orderbook)))}}p.table={},p.trap("hasTrustline",()=>{this.hasTrustline&&d(this.asset.target.opening,this.anchor.pubkey)}),p.define("isActive",["action","hasTrustline"],(function(){return this.hasTrustline?"closing"!==this.action:"opening"===this.action})),p.define("value",["amount","price"],(function(){return 0===this.amount?0:this.amount*this.price})),p.define("targetMin",["targetAmount"],(function(){return l(this.targetAmount*(1-c.balanceTargetDeviation))})),p.define("targetMax",["targetAmount"],(function(){return l(this.targetAmount*(1+c.balanceTargetDeviation))})),p.define("targetMinDiff",["amount","targetMin"],(function(){return l(this.targetMin-this.amount)})),p.define("targetMaxDiff",["amount","targetMax"],(function(){return l(this.targetMax-this.amount)})),p.define("sizeMin",["targetMinDiff"],(function(){return u(this.targetMinDiff)})),p.define("sizeMax",["targetMaxDiff"],(function(){return h(this.targetMaxDiff)})),p.define("underMin",["targetMinDiff"],(function(){return u(-this.targetMinDiff)})),p.define("overMax",["targetMaxDiff"],(function(){return h(-this.targetMaxDiff)})),p.makeId=function(t,e){if(e)return"".concat(t,":").concat(e);if("XLM"===t)return"XLM";throw new Error("Missing issuer for ".concat(t,"."))},p.fromRecord=function(t){const e=p.recordToParams(t);return new p(e)},p.recordToParams=function(t){const e=Object.create(t);return e.code="native"===t.asset_type?"XLM":t.asset_code,e.issuer=t.asset_issuer,e.amount=+t.balance,e.buying=+t.buying_liabilities,e.selling=+t.selling_liabilities,e},t.exports=p},180:function(t,e,n){"use strict";const s=n(210),i=n(14),o=n(51),a=n(110);class r extends o{static resolve(t,e){return r.table[t]||new r(t,e)}constructor(t,e){super(),e&&Object.assign(this,e),r.table[t]=this,this.pubkey=t,this.alias=s.all[t],this.name=i.shorter(this.alias||this.pubkey),this.assets={},this.emit&&this.emit.forEach(t=>{"string"!=typeof t?this.addAsset(t[0],t[1]):this.addAsset(t)})}addAsset(t,e=t){this.assets[e]=a.resolve(t),this.assets[e].anchors.push(this)}}r.table={},r.register=function(t){for(let e in t)r.resolve(e,t[e])},r.prototype.tetherCode=function(t){for(let e in this.emit){const n=this.emit[e];if(n===t)return t;if(Array.isArray(n)&&n[0]===t)return n[1]}},t.exports=r},181:function(t,e,n){"use strict";const s=n(150);s.theme={rangeSelector:{selected:2,inputBoxBorderColor:"#a9a9a9",buttonTheme:{fill:"#eaeaea",states:{hover:{fill:"#daeeff"},select:{fill:"#003f90",style:{color:"#fff"}}}}},chart:{backgroundColor:"#fff",style:{fontFamily:"'Source Sans Pro', arial, sans-serif",color:"#292929"}},xAxis:{lineColor:"#a9a9a9",tickColor:"#a9a9a9"},yAxis:{lineColor:"#a9a9a9",tickColor:"#a9a9a9"},navigator:{maskFill:"rgba(119, 153, 213, 0.07)",outlineColor:"#a9a9a9",xAxis:{gridLineColor:"#a9a9a9"},series:{color:"#003f90"}},tooltip:{style:{fontSize:"16px"}},scrollbar:{enabled:!1},credits:{enabled:!1},plotOptions:{column:{color:"#545454",dataGrouping:{enabled:!1}},pie:{allowPointSelect:!0,animation:!1,cursor:"pointer",dataLabels:{style:{fontSize:"16px"}}},spline:{color:"#003f90",dataGrouping:{enabled:!1}}}},s.setOptions(s.theme),s.pieColors=["rgba(231,  76,  60, 0.8)","rgba(230, 126,  34, 0.8)","rgba(242, 202,  39, 0.8)","rgba(46,  204, 112, 0.8)","rgba(52,  152, 219, 0.8)","rgba(155,  89, 182, 0.8)","rgba(231,  76,  60, 0.6)","rgba(230, 126,  34, 0.6)","rgba(242, 202,  39, 0.6)","rgba(46,  204, 112, 0.6)","rgba(52,  152, 219, 0.6)","rgba(155,  89, 182, 0.6)","rgba(231,  76,  60, 0.4)","rgba(230, 126,  34, 0.4)","rgba(242, 202,  39, 0.4)","rgba(46,  204, 112, 0.4)","rgba(52,  152, 219, 0.4)","rgba(155,  89, 182, 0.4)"],s.pieResponsive={rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!0},plotOptions:{pie:{showInLegend:!0,dataLabels:{format:"{point.percentage:.0f}%",distance:-20}}}}}]}},216:function(t,e,n){"use strict";const s=n(50);class i extends Array{}i.setCache=function(t,e){const n=JSON.stringify({[s.currency]:e});localStorage["history:".concat(t)]=n},i.getCache=function(t){const e=localStorage["history:".concat(t)];if(e)return JSON.parse(e)[s.currency]},i.cut=function(t,e){const n=t.length-e;n>0&&t.splice(0,n)},i.latest=function(t){return t[t.length-1]},i.join=function(t,e){const n=e[0].time,s=t.findIndex(t=>t.time===n);return t.slice(0,s).concat(e)},i.oneDay=864e5,i.today=function(){return i.roundTime(new Date)},i.roundTime=function(t){const e=new Date(t);return e.setUTCHours(0,0,0,0),+e},i.time=function(t){return+new Date(t)},i.missingDays=function(t){return i.numberToDays(i.today()-i.latest(t).time)},i.numberToDays=function(t){return t/i.oneDay},t.exports=i},217:function(t,e,n){"use strict";const s=n(115),i=n(51),o=n(103),{timeout:a}=n(14),{__:r}=n(33),{fixed7:c}=n(108),l=t.exports=class t extends i{static forBalance(e,n){if(e.asset===n)return;const s=new t({balance:e,quote:n});return s.streamOffers(),s}static forAsset(e){return new t({asset:e})}constructor(e){super(),e.balance?(this.type="native",this.balance=e.balance,this.base=e.balance.asset,this.quote=e.quote,this.name="".concat(this.base.code,"/").concat(this.quote.code),this.offersCallBuilder=t.offersCallBuilder(this.balance),this.watch(this.quote,"price",()=>this.updateOffersPrices())):e.asset&&(this.type="agregated",this.base=e.asset,this.name="".concat(this.base.code," (").concat(r("Agregated"),")"),this.childs=[]),this.watch(this.base,"globalPrice",()=>this.compute("price"))}static offersCallBuilder(t){const e=new o.Asset(t.code,t.anchor.pubkey),n=o.Asset.native();return s.resolve.server().orderbook(e,n)}async streamOffers(){for(;;)await this.getOffers(),await a(15e3)}async getOffers(){try{const t=await this.offersCallBuilder.limit(200).call();this.ingest(t)}catch(t){console.error(t)}}ingest(t){h(this.bids,t.bids)||(this.bids=u(t.bids,this.quote,this.balance,"bids")),h(this.asks,t.asks)||(this.asks=u(t.asks,this.quote,this.balance,"asks"))}updateOffersPrices(){this.bids&&this.set("bids",d(this.bids,this.quote)),this.asks&&this.set("asks",d(this.asks,this.quote))}mergeOffers(t){if(this.childs.length<2)return void this.set(t,this.childs[0]&&this.childs[0][t]);const e=this.childs.reduce((e,n)=>n[t]?e.concat(n[t]):e,[]);if(!e.length)return void(this[t]=null);const n="bids"===t?(t,e)=>e.price-t.price:(t,e)=>t.price-e.price;let s=0,i=0,o=0;this.set(t,e.sort(n).map(t=>{const e=Object.assign({},t);return e.volume=s+=c(t.amount*t.price),e.baseVolume=i+=+t.amount,e.quoteVolume=o+=+t.quoteAmount,e}))}addChild(t){this.childs.push(t),this.watch(t,"bids",()=>this.mergeOffers("bids")),this.watch(t,"asks",()=>this.mergeOffers("asks"))}};function h(t,e){if(!t)return!1;if(t.length!==e.length)return!1;for(let n in t.length){if(t[n].amount!==e[n].amount)return!1;if(t[n].price!==e[n].price)return!1}return!0}function u(t,e,n,s){return t.forEach(t=>{t.volume=void 0,t.baseVolume=void 0,t.basePrice=+t.price,t.quoteAmount=+t.amount,t.quoteVolume=void 0,t.balance=n,t.side=s}),d(t,e)}function d(t,e){let n=0,s=0,i=0;return t.forEach(t=>{"asks"===t.side?t.quoteAmount=c(t.amount*t.basePrice):t.amount=c(t.quoteAmount/t.basePrice),t.price=c(t.basePrice*e.price),t.volume=n+=c(t.amount*t.price),t.baseVolume=i+=+t.amount,t.quoteVolume=s+=+t.quoteAmount}),t}l.define("bestBid","bids",(function(){return this.bids&&this.bids[0]&&this.bids[0].price})),l.define("bestAsk","asks",(function(){return this.asks&&this.asks[0]&&this.asks[0].price})),l.define("midpoint",["bestBid","bestAsk"],(function(){return(this.bestBid+this.bestAsk)/2})),l.define("price",["midpoint"],(function(){return this.base.globalPrice?this.midpoint:this.marketPrice()})),l.define("spread",["bestBid","bestAsk"],(function(){return this.bestAsk-this.bestBid})),l.define("spread%",["spread","bestAsk"],(function(){return 100*this.spread/this.bestAsk})),l.prototype.isFetched=function(){return this.childs?this.childs.reduce((t,e)=>t&&e.isFetched(),!0):null!=this.asks&&null!=this.bids},l.prototype.findOffer=function(t,e){const n=this[t],s=this.childs?this.childs.length:1,i={};let o;for(let t in n){const a=n[t];if(e&&!e(a))continue;const r=a.balance.anchor.pubkey;if(i[r]||(i[r]=!0,o=a),Object.keys(i).length===s)break}return o},l.prototype.findAsk=function(t){return this.findOffer("asks",t)},l.prototype.findBid=function(t){return this.findOffer("bids",t)},l.prototype.marketPrice=function(t="bids",e=50){const n=this.findOffer(t,t=>t.quoteVolume>e);return n?n.price:0}},219:function(t,e,n){"use strict";const s=n(15),{timeout:i}=n(14);class o{constructor(t={}){this.domNode=s.create("div",{className:"ClickWall",onclick:()=>this.click(),hidden:!0}),Object.assign(this.domNode.style,o.style),document.body.insertBefore(this.domNode,document.body.firstChild),this.onclick=t.onclick,this.scrollbar=t.scrollbar,this.opacity=t.opacity,this.delay=t.delay||o.delay}click(){this.isEnabled&&this.onclick&&this.onclick()}async enable(){"hide"===this.scrollbar&&(this.htmlOverflow=document.documentElement.style.overflow,this.bodyOverflow=document.body.style.overflow,document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"),s.show(this.domNode),this.opacity&&await this.setOpacity(this.opacity),this.isEnabled=!0}async disable(){"hide"===this.scrollbar&&(document.documentElement.style.overflow=this.htmlOverflow,document.body.style.overflow=this.bodyOverflow),this.isEnabled=!1,this.opacity&&await this.setOpacity(0),s.hide(this.domNode)}async destroy(){await this.disable(),s.destroy(this.domNode)}async setOpacity(t=this.opacity){return await i(0),Object.assign(this.domNode.style,{transition:"background ".concat(this.delay,"ms"),background:"rgba(0, 0, 0, ".concat(t,")")}),i(this.delay)}}o.delay=500,o.style={position:"fixed",zIndex:999,top:0,width:"100%",height:"100%"},t.exports=o},220:function(t,e,n){"use strict";n(52);const s=n(51),i=n(14).setHiddenProperty,o=n(321),a=n(322),r=n(221);class c extends s{constructor(...t){super(),t.length&&"FORM"===t[0].tagName?(i(this,"domNode",t[0]),t[1]&&Object.assign(this.domNode,t[1])):i(this,"domNode",r.element("form",...t)),this.domNode.addEventListener("submit",()=>{this.domNode.getAttribute("method")||event.preventDefault(),this.trigger("submit")}),c.bindInputs(this,this.domNode),i(this,"dom",a(this.domNode)),this.dom.status||(this.dom.status=[c.status()],r.append(this.domNode,this.dom.status[0]))}submit(){this.domNode.submit()}reset(){this.domNode.reset()}report(t,...e){const n=this.dom.status[0];n&&(n.className=t,r.rewrite(n,...e))}info(t){this.report("info",t,c.spinner())}error(t){throw this.report("error",t.message||t),t instanceof Error?t:new Error(t)}}function l(t,e){t.name&&o(e,t.name,t)}c.listen("change",t=>t.report(null)),c.bindInputs=function(t,e){r.walk(e,l,t)},c.enable=function(t,e){t.disabled=!1,Object.assign(t,e)},c.disable=function(t,e){t.enabled=!0,Object.assign(t,e)},c.hide=r.hide,c.show=r.show,c.element=r.element,c.status=function(t=""){return c.element("p",{alias:"status"},t)},c.spinner=function(){return c.element("span",{className:"spinner"})},c.label=function(...t){return c.element("label",...t)},c.button=function(t,...e){return e.length||(e=[t.value]),c.element("button",t,...e)},c.control=function(t,e){const n=Object.assign({required:!0},e);return c.element(t,n)},c.textarea=function(t){return c.control("textarea",t)},c.selector=function(t){const e=c.control("select",t);var n;if(e.values&&r.append(e,...(n=e.values,n instanceof Array?n.map(t=>r.element("option",{value:t},t)):Object.keys(n).map(t=>r.element("option",{value:t},n[t])))),e.placeholder){const n=r.element("option",{value:"",disabled:!0,selected:!0,hidden:!0},e.placeholder);r.unshift(e,n),null!=t.selectedIndex&&t.selectedIndex++}return t.selectedIndex?e.selectedIndex=t.selectedIndex:t.value&&(e.value=t.value),e},c.input=function(t,e={}){const n=c.control("input",e);return n.type=t,n};["checkbox","color","date","email","file","hidden","image","month","number","password","radio","range","tel","text","time","url","week"].forEach(t=>c[t]=e=>c.input(t,e)),c.datetime=t=>c.input("datetime-local",t),t.exports=c},221:function(t,e,n){"use strict";n(52);const s=Object.create(n(15));t.exports=s,s.element=function(t,...e){let n;return e[0]&&e[0].constructor===Object&&void 0===e[0].domNode&&(n=e.shift()),s.create(t,n,...e)},s.walk=function(t,e,...n){e(t,...n),t.childNodes.forEach(t=>s.walk(t,e,...n))},s.unshift=function(t,...e){for(let n=0;n<e.length;n++)t.insertBefore(e[n],t.childNodes[n])}},222:function(t,e,n){"use strict";n(52),n(332);const s=n(102),i=n(15),{__:o}=n(33),a=n(337);class r extends s{constructor(t={}){const{title:e,content:n,actions:s}=t;super('\n<form class="Dialog" onsubmit="return false">\n\n  <h3>%title</h3>\n\n  <hr hidden=%hasNoTitle>\n\n  %content\n\n  <hr hidden=%hasNoContent>\n\n  <div class="Actions">\n    %toButton:actions...\n  </div>\n</form>\n    '),this.title=e,this.content="string"==typeof t?t:n,this.actions=s,this.hasNoTitle=!this.title,this.hasNoContent=!this.content}toButton([t,e,n="button"]){return i.create("button",{type:n,onclick:e.bind(this)},t)}}r.alert=function(t={}){const e=new r(t),n=new a({content:e});return e.actions=[[o("OK"),()=>n.close()]],n.open(),new Promise(t=>n.listen("close",t))},r.confirm=function(t={}){const e=new r(t),n=new a({content:e}),s=new Promise(t=>{n.listen("close",()=>t(!1)),e.actions=[[o("OK"),()=>t(!0),"submit"],[o("Cancel"),()=>t(!1)]]});s.finally(()=>n.close()),n.open();const i=e.domNode.querySelector("[autofocus]");return i&&i.focus(),s},t.exports=r},273:function(t,e,n){"use strict";const s=n(158),i=n(115),o=n(114),a=n(51),{timeout:r}=n(14),{__:c}=n(33),l=n(110),h=n(149),u=n(50),d=n(318),p=n(319),{arrayContains:f,arrayRemove:m,arraySum:g,arrayOnlyInFirst:b}=n(108);class y extends a{static async resolve(t){await async function(){const t=i.resolve.horizon();try{await s.get(t)}catch(t){throw new Error(c("Can't connect to the Stellar blockchain"))}}();const e=await i.resolve.address(t);if(e.memo)throw new Error(c("Invalid federated address: shared account."));if(await i.resolve.isAccountEmpty(e.account_id))throw new Error(c("Empty account"));const n=new y(e.account_id);return i.config.source=n.address=t,n.streamAccount(),n}constructor(t){super(),console.log(this),this.accountId=t,this.assets=new o,this.balances=new o,this.accountCallBuilder=y.accountCallBuilder(t),this.define("total","assets",()=>{const t=this.assets.filter(t=>t.isSupported);return g(t,"value")}),this.assets.mirror(t=>this.watch(t,["value","isSupported"],()=>this.compute("total"))),this.new=!0}static accountCallBuilder(t){return i.resolve.server().accounts().accountId(t)}async streamAccount(){for(;;)await this.getAccount(),await r(5e3)}async getAccount(){try{const t=await this.accountCallBuilder.call();this.ingest(t)}catch(t){console.error(t)}}async ingest(t){this.account=t;for(let e in t.balances){const n=h.ingest(t.balances[e]);this.maybeAddBalance(n),"XLM"===n.id&&(n.asset.amountMin=y.accountMinimumBalance(t))}this.new&&(delete this.new,await l.refreshPrices(),this.offers=d.forPortfolio(this),await this.offers.stream(),this.trigger("open"),l.getAllInfo())}maybeAddBalance(t){f(this.balances,t)||(this.balances.push(t),t.asset.maybeAddBalance(t)),this.maybeAddAsset(t.asset)}maybeAddAsset(t){f(this.assets,t)||(this.assets.push(t),t.watch(this,"total",()=>t.compute("share")),t.getInfo())}maybeRemoveBalance(t){m(this.balances,t),t.asset.maybeRemoveBalance(t),this.maybeRemoveAsset(t.asset)}maybeRemoveAsset(t){t.balances.length||m(this.assets,t)}}y.accountMinimumBalance=function(t){let e=2*(t.balances.length-1);return e+=Object.keys(t.data_attr).length,e+=t.signers.length-1,.5*(3+e)},y.prototype.availableAssets=function(){const t=Object.values(l.table);return b(t,this.assets)},y.prototype.getHistory=async function(){return this.history||(this.history=await p(this)),this.history},l.define("share","value",(function(){return u.portfolio&&this.value/u.portfolio.total})),t.exports=y},317:function(t,e,n){"use strict";const s=e,i=n(158),o=n(107),a=n(50),r=n(216);function c(t,e){return i.get("https://api.coingecko.com/api/v3/".concat(t),{params:e})}async function l(t,e,n={}){return n.base=a.currency,"string"==typeof e?n.symbols=e:("EUR"===a.currency&&(e=e.filter(t=>"EUR"!==t)),n.symbols=e.join(",")),i.get("https://api.exchangerate.host/".concat(t),{params:n}).then(t=>("EUR"!==a.currency||t.data.start_at||(t.data.rates.EUR=1),t))}s.assetHistory=async function(t,e=1e3){delete localStorage["prices.".concat(t.code)];const n=r.getCache(t.id);if(n){const t=r.missingDays(n);if(!t)return n;n.length&&(e=t+3)}const i=await function(t,e){if("crypto"===t.type)return s.crypto.history(t,e);if("fiat"===t.type)return s.fiat.history(t,e)}(t,e);if(!i)return;const o=n?r.join(n,i):i;return r.cut(o,1e3),r.setCache(t.id,o),o},s.crypto={},s.crypto.list=async function(){const t=await c("coins/list"),e={};return t.data.forEach(t=>{const n=t.symbol.toUpperCase();e[n]={apiId:t.id,name:t.name}}),e},s.crypto.stellarNative=async function(){return(await c("exchanges/stellar_term")).data.tickers.map(t=>t.coin_id).filter(t=>t)},s.crypto.info=async function(t){return(await c("coins/".concat(t.apiId),{localization:!1,tickers:!1,market_data:!1,community_data:!1,developer_data:!1,sparkline:!1})).data},s.crypto.prices=async function(t){const e=t.map(t=>t.apiId).join(","),n=a.currency.toLowerCase(),s=await c("simple/price",{ids:e,vs_currencies:n}),i={};return t.forEach(t=>{const e=s.data[t.apiId];e&&(i[t.code]=e[n])}),i},s.crypto.history=async function(t,e=1e3){const n=await c("coins/".concat(t.apiId,"/market_chart"),{vs_currency:a.currency,days:Math.max(e,100)}),s=n.data.prices.map((t,e)=>({time:t[0],price:t[1],volume:+o(n.data.total_volumes[e][1]/t[1])})),i=r.today(),l=s[s.length-2];return l&&l.time===i?s.length=s.length-1:r.latest(s).time=i,e<100&&r.cut(s,e),s},s.fiat={},s.fiat.prices=async function(t){const e=t.map(t=>t.code),n=(await l("latest",e)).data.rates;for(let t in n)n[t]=o(1/n[t],8);return n},s.fiat.history=async function(t,e=1e3){const n=(new Date).toISOString().slice(0,10),s=new Date(n);s.setDate(s.getDate()-e);const i=s.toISOString().slice(0,10);if("EUR"===a.currency&&"EUR"===t.id)return[{time:r.today(),price:1}];const c=await l("history",t.code,{start_at:i,end_at:n}),h=Object.keys(c.data.rates).sort().map(e=>({time:r.time(e),price:+o(1/c.data.rates[e][t.code],8)}));return r.latest(h).time!==r.today()&&h.push({time:r.today(),price:r.latest(h).price}),h}},318:function(t,e,n){"use strict";n(52);const s=n(115),i=n(218),o=n(114),a=n(51),r=n(14).setHiddenProperty,{day:c}=n(14),l=n(110),h=n(149),{fixed7:u}=n(108);class d extends o{static forPortfolio(t){const e=d.forAccount(t.accountId);return r(e,"portfolio",t),e}static forAccount(t){const e=new d;return r(e,"accountId",t),r(e,"callBuilder",d.callBuilder(t)),e}static callBuilder(t){return s.resolve.server().offers().forAccount(t)}async stream(t=15e3){return this.get().then(()=>setTimeout(()=>this.stream(),t))}async get(){try{const t=await i(this.callBuilder,{limit:200});this.ingest(t)}catch(t){console.error(t)}}ingest(t){this.forEach(t=>t.alive=!1);const e=t.map(t=>p.ingest(t)).filter(t=>t);this.splice(0,0,...e),this.clean()}clean(){for(let t=this.length-1;t>-1;t--){const e=this[t];e.alive||(this.splice(t,1),e.destroy())}}}d.prototype.listOutdated=function(){return this.filter(t=>t.outdated)};class p extends a{static resolve(t){return p.table[f(t)]}static ingest(t){const e=p.resolve(t);if(!e)return new p(t);e.update(t)}constructor(t){super(),this.intern=f(t),p.table[this.intern]=this;const e=l.resolve("XLM"),n=t.buying.asset_code?t.buying:t.selling;this.balance=h.resolve(n.asset_code,n.asset_issuer),this.asset=this.balance.asset,this.side=t.buying.asset_code?"buy":"sell",this.define("price","rawPrice","sell"===this.side?()=>e.price*this.rawPrice:()=>e.price/this.rawPrice),this.watch(e,"price",()=>this.compute("price")),this.update(t),this.balance.offers.push(this),this.asset.offers.push(this),this.listen("destroy",()=>{delete p.table[this.intern],this.balance.offers.splice(this.balance.offers.indexOf(this),1),this.asset.offers.splice(this.asset.offers.indexOf(this),1)})}update(t){Object.assign(this,t),this.alive=!0,this.rawPrice=t.price,this.compute("price"),this.rawAmount=t.amount,"buy"===this.side&&(this.amount=u(this.rawAmount*this.rawPrice)),this.date=c(this.last_modified_time),this.outdated=this.date!==c()}}function f(t){return"".concat(t.id,"-").concat(t.last_modified_ledger)}p.table={},t.exports=d},319:function(t,e,n){"use strict";n(52);const s=n(110),i=n(320),{arraySum:o}=n(108);t.exports=async function(t){const e=await i(t),n=function(t){const e={};t.forEach(t=>{Object.keys(t.asset).forEach(t=>e[t]=!0)});const n=Object.keys(e).map(s.resolve);return n.forEach(t=>t.hasBeenHeld=!0),n}(e),a=await async function(t){const e={},n=t.map(t=>t.getHistoricPrice());return await Promise.all(n),t.forEach(t=>{t.historicPrice&&(e[t.id]=t.historicPrice)}),e}(n);return e.forEach(t=>{!function(t,e){for(let n in e){const s=e[n],i=s.findIndex(e=>e.time>t);i>1?e[n]=s.slice(i-1):-1===i&&(e[n]=s.slice(-1))}}(t.time,a),function(t,e){t.price={},t.value={},t.total=0;for(let n in t.asset)t.price[n]=e[n]?e[n][0].price:0,t.value[n]=t.asset[n]*t.price[n],t.total+=t.value[n];t.filtered={};const n=[];for(let e in t.value){const s=t.value[e]/t.total;s&&(t.filtered[e]=t.value[e],s<.03&&n.push(e))}n.length>1&&(t.filtered.others=o(n.map(e=>t.value[e])),n.forEach(e=>delete t.filtered[e]))}(t,a)}),console.log(e),e}},320:function(t,e,n){"use strict";const s=n(115),i=n(218),o=n(110),a=n(149),r=n(216),{fixed7:c}=n(108);t.exports=async function(t,e=1e3){const n=r.getCache(t.account.id);if(n){const t=r.missingDays(n);if(!t)return n;n.length&&(e=t+1)}const o=await async function(t,e=100){const n={time:r.today(),asset:{},balance:{}};t.balances.forEach(t=>{h(n,t,+t.amount)});const o=[n],a=Date.now()-r.oneDay*e;return await function(t,{filter:e,breaker:n}){const o=s.resolve.server().effects().forAccount(t).order("desc");return i(o,{filter:e,breaker:n})}(t.accountId,{filter:t=>function(t,e){let n=t[0];const s=r.roundTime(e.created_at)-r.oneDay;for(;s!==n.time;)n={time:n.time-r.oneDay,asset:Object.assign({},n.asset),balance:Object.assign({},n.balance)},n.time===m&&g(n),t.unshift(n);const i=l[e.type];i&&i(n,e)}(o,t),breaker:()=>o[0].time<a}),r.cut(o,e),o}(t,e);if(!o)return;const a=n?r.join(n,o):o;return r.cut(a,1e3),r.setCache(t.account.id,a),a};const l={};function h(t,e,n){u(t.balance,e.id,n);const s=b(e,t);u(t.asset,s.id,n)}function u(t,e,n){t[e]||(t[e]=0),t[e]=Math.max(0,c(t[e]+n))}function d(t,e){const n=e?"".concat(e,"_asset_code"):"asset_code",s=e?"".concat(e,"_asset_issuer"):"asset_issuer";return t[n]?a.resolve(t[n],t[s]):a.resolve("XLM")}l.trade=function(t,e){h(t,d(e,"bought"),-e.bought_amount);h(t,d(e,"sold"),+e.sold_amount)},l.account_credited=function(t,e){h(t,d(e),-e.amount)},l.account_debited=function(t,e){h(t,d(e),+e.amount)},l.trustline_removed=function(t,e){h(t,d(e),0)},l.trustline_created=function(t,e){const n=d(e);0!==t.balance[n.id]&&console.error("Balances mismatch: ",t.balance[n.id],e),delete t.balance[n.id];const s=b(n,t);0===t.asset[s.id]&&delete t.asset[s.id]},l.account_created=function(t){t.balance.XLM=0,t.asset.XLM=0};const p="GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG",f="GBSTRUSD7IRX73RQZBL3RQUH6KS3O4NYFY3QCALDLZD77XMZOPWAVTUK",m=15565824e5;function g(t){for(let e in t.asset){const n=e.substr(-56);if(n===p||n===f){const n=e.split(":")[0];u(t.asset,n,t.asset[e]),delete t.asset[e]}}}function b(t,e){if(t.asset.id.length<60)return t.asset;if(e.time>m)return t.asset;switch(t.anchor.pubkey){case p:case f:return o.table[t.code]||t.asset}return t.asset}},321:function(t,e,n){"use strict";n(52);const s=n(51);t.exports=function(t,e,n,s){const o=i[n.tagName];o?o(t,e,n,s):t[e]=n[s||"value"]};const i={};function o(t,e,n,i,o){i.addEventListener(t,()=>{e[n]=i[o],i.setCustomValidity("")}),e instanceof s&&e.link(n,i,o,null,{init:!1})}i.SELECT=function(t,e,n,s="value"){t[e]=n[s],-1!==i.SELECT.interactive.indexOf(s)&&o("change",t,e,n,s)},i.SELECT.interactive=["selectedIndex","selectedOptions","value"],i.TEXTAREA=function(t,e,n,s="value"){t[e]=n[s],"value"===s&&o("input",t,e,n,s)},i.INPUT=function(t,e,n,s){t[e]=n[s],"radio"===n.type?i.radio(...arguments):"checkbox"===n.type?i.checkbox(...arguments):s&&"value"!==s||o("input",t,e,n,s||"value")},i.radio=function(t,e,n){const s=()=>{n.checked&&(t[e]=n.value)};n.addEventListener("change",s),s()},i.checkBox=function(t,e,n,s="checked"){t[e]=n[s],"checked"===s&&o("change",t,e,n,s)}},322:function(t,e,n){"use strict";n(53);const{timeout:s}=n(14),i=n(221);function o(t,e){!function(t,e){t.className?(e[t.className]||(e[t.className]=[]),e[t.className].push(t)):t.alias?(e[t.alias]=t,delete e[t.alias]):t.name?e[t.name]=t:t.id&&(e[t.id]=t)}(t,e),function(t){if(!t.label||"OPTION"===t.tagName)return;const e=i.element("label",{for:t}),n=i.element("span",t.label);i.replace(t,e),i.append(e,n,t),delete t.label}(t),function(t){const e=t.validate;if(!e||!t.hasProperty("oninput"))return;t.addEventListener("input",()=>{t.setCustomValidity(""),s(0).then(()=>function(t,e){try{e(t.value)}catch(e){t.setCustomValidity(e.message),t.reportValidity(),console.error(e)}}(t,e))}),delete t.validate}(t)}t.exports=function(t){const e={};return i.walk(t,o,e),e}},323:function(t,e,n){"use strict";const s=n(102),{__:i}=n(33),o=n(324),a=n(50);t.exports=class extends s{constructor(t){super('\n<section class="ActivityGui">\n  <h2>'.concat(i("Activity"),'</h2>\n\n  %table\n\n  <p class="note">\n    ').concat(i("All orders are passed against Stellar Lumens (XLM)."),"\n    ").concat(i("For your comfort, prices are displayed in their %%globalCurrency equivalent."),"\n    ").concat(i("However, those converted values will change according to XLM price movement."),"\n  </p>\n\n</section>\n    ")),this.portfolio=t,this.table=new o(t),this.globalCurrency=a.currency}}},324:function(t,e,n){"use strict";const s=n(102),i=n(107),{CosmicLink:o}=n(115),{__:a}=n(33),r=n(50);t.exports=class extends s{constructor(t){super('\n<section class="ActiveOffersTable">\n  <table>\n    <tr>\n      <th class="name">'.concat(a("Name"),'</th>\n      <th align="left">').concat(a("Anchor"),'</th>\n      <th align="left">').concat(a("Direction"),'</th>\n      <th align="right">').concat(a("Amount"),'</th>\n      <th align="right">').concat(a("Price"),' (%globalCurrency)</th>\n    </tr>\n    %toOfferRow:offers...\n    <tr><td colspan="5" align="center" onclick=%cancelOffers>\n      <h3>').concat(a("Cancel All"),"</h3>\n    </td></tr>\n  </table>\n</section>\n    ")),this.portfolio=t,this.offers=t.offers,this.globalCurrency=r.currency}toOfferRow(t){return new c(t)}cancelOffers(){if(!this.offers.length)return;const t={memo:"Equilibre.io",network:"public",maxTime:"+5",source:this.portfolio.accountId},e=new o(t);this.offers.forEach(t=>{e.addOperation("manageOffer",{offerId:t.id,amount:0})});e.open().listen("destroy",()=>{this.portfolio.getAccount(),this.portfolio.offers.get()})}};class c extends s{constructor(t){super('\n<tr>\n  <td>\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td>%anchor</td>\n  <td>%side</td>\n  <td align="right">%nice:amount</td>\n  <td align="right">%nice:price</td>\n</tr>\n    '),this.offer=t,t.project(["amount","price"],this),this.name=t.balance.code,this.side="buy"===t.side?a("Buy"):a("Sell"),this.anchor=t.balance.anchor.name,t.asset.link("image",this)}nice(t){return i(t)}}},325:function(t,e,n){"use strict";const s=n(102),i=n(107),o=n(194),{__:a}=n(33),r=n(326),c=n(327),l=n(328),h=n(329),u=n(50);t.exports=class extends s{constructor(t){super("\n<section><h2>".concat(a("Portfolio"),': %total %currency</h2>\n\n  %nav\n  <section>%view</section>\n\n  %priceChart\n\n  <p class="note">\n    ').concat(a("Anchor prices are from Stellar DEX")," /\n    ").concat(a("Global prices are from %%coingecko when available."),"\n  </p>\n\n</section>")),this.portfolio=t,t.project("total",this,t=>i(t,2)),this.currency=u.currency,this.coingecko=new s('<a target="_blank" rel="noopener" href="https://coingecko.com">coingecko</a>'),this.table=new h(t),this.project("selected",this.table),this.table.project("selected",this),this.pieChart=new c(t),this.project("selected",this.pieChart),this.pieChart.project("selected",this),this.trap("selected",()=>this.maybeDrawPriceChart()),this.historyChart=new l(t);const e=this.overview=new o;e.add("table",a("Balances"),this.table),e.add("chart",a("Repartition"),this.pieChart),e.add("history",a("History"),this.historyChart),e.project(["nav","view"],this),e.listen("select",()=>this.reflow()),e.listen("select",t=>localStorage["PortfolioSummary.tab"]=t),e.select(localStorage["PortfolioSummary.tab"]),e.selected||e.select("table")}reflow(){if(!this.overview.selected)return;const t=this.overview.selected.content;t.reflow&&t.reflow()}maybeDrawPriceChart(){this.priceChart&&this.priceChart.destroy();const t=this.selected;t&&(t.isTether||t.apiId)&&t.code!==u.currency?this.priceChart=new r(t):this.priceChart=null}}},326:function(t,e,n){"use strict";const s=n(150);n(181);const i=n(102),o=n(107),{__:a}=n(33),r=n(50);t.exports=class extends i{constructor(t){super("\n      <section><h3>".concat(t.code," ").concat(a("to")," ").concat(r.currency,"</h3>\n        <div -ref=%container><p>").concat(a("Loading..."),"</p></div>\n      </section>\n    ")),this.asset=t,t.getHistoricPrice().then(t=>this.drawChart(t)),this.listen("destroy",()=>this.chart&&this.chart.destroy())}drawChart(t){this.chart=s.stockChart(this.container,{yAxis:[{labels:{align:"left"},height:"80%",resize:{enabled:!0}},{labels:{align:"left"},top:"80%",height:"20%",offset:0}],series:[{type:"spline",name:"Price",data:t.map(t=>[t.time,+o(t.price)])},{type:"column",name:"Volume",data:t.map(t=>[t.time,t.volume]),yAxis:1}]})}}},327:function(t,e,n){"use strict";const s=n(150);n(181);const i=n(102),o=n(107),{__:a}=n(33),r=n(50);function c(t){const e=Object.create(t);return e.y=+o(t.value,2),e.niceAmount=+o(t.amount),e.nicePrice=+o(t.price),e}t.exports=class extends i{constructor(t){super('\n<div class="PortfolioPieChart">\n  <h3>'.concat(a("Repartition by Asset"),'</h3>\n\n  <div -ref=%container align="center"></div>\n</div>\n    ')),this.portfolio=t,this.watch(this.portfolio,"total",()=>this.draw()),this.listen("destroy",()=>this.chart&&this.chart.destroy())}reflow(){this.chart&&this.chart.reflow()}draw(){this.chart&&this.chart.destroy(),this.chart=s.chart(this.container,{colors:s.pieColors,responsive:s.pieResponsive,title:"",legend:{enabled:!1},chart:{type:"pie"},tooltip:{pointFormat:"\n".concat(a("Amount"),": {point.niceAmount} {point.code}<br>\n").concat(a("Price"),": {point.nicePrice} ").concat(r.currency,"<br>\n<b>").concat(a("Value"),": {point.y} ").concat(r.currency,"</b>\n")},plotOptions:{pie:{dataLabels:{format:"{point.niceAmount} {point.code}<br>({point.percentage:.0f}%)"},point:{events:{select:t=>this.selected=t.target.options.asset,legendItemClick:()=>!1}}}},series:[{name:a("Amount"),colorByPoint:!0,ignoreHiddenPoint:!0,data:this.portfolio.assets.filter(t=>t.value).map(c).sort((t,e)=>e.y-t.y)}]})}}},328:function(t,e,n){"use strict";const s=n(150);n(181);const i=n(102),o=n(107),{__:a}=n(33),r=n(110),c=n(50);t.exports=class extends i{constructor(t){super('\n<div class="PortfolioHistoryChart">\n  <h3>'.concat(a("Portfolio Historical Value"),"</h3>\n\n  <div -ref=%container>\n    <p>\n      ").concat(a("Downloading historical data..."),'\n      <span class="spinner"></span>\n    </p>\n    <p>\n      ').concat(a("The very first time, it may take about a minute."),"\n  </div>\n\n</div>\n    ")),this.portfolio=t,this.portfolio.getHistory().then(t=>this.drawChart(t)),this.listen("destroy",()=>this.chart&&this.chart.destroy())}reflow(){this.chart&&(this.hasBeenReflown||setTimeout(()=>this.chart.update({rangeSelector:{enabled:!0}})),this.chart.reflow()),this.hasBeenReflown=!0}drawChart(t){const e=this.historyToSeries(t);this.chart=s.stockChart(this.container,{chart:{type:"area"},navigator:{series:{data:t.map(t=>[t.time,+o(t.total)||null])}},tooltip:{shared:!0,split:!1,pointFormat:'\n<span style="color:{point.color}">●</span>\n{series.name}: {point.percentage:.0f}%\n<br>',footerFormat:"<b>Total: {point.total} ".concat(c.currency,"</b>")},yAxis:[{labels:{align:"left",formatter:function(){return"".concat(this.value," ").concat(c.currency)}},resize:{enabled:!0}}],plotOptions:{series:{},area:{stacking:"normal",connectNulls:!0,lineWidth:0,states:{hover:{enabled:!1},inactive:{enabled:!1}}}},series:e,colors:s.pieColors}),this.hasBeenReflown||this.chart.update({rangeSelector:{enabled:!1}})}historyToSeries(t){const e=[],n=Object.values(r.table).filter(t=>t.hasBeenHeld);return n.sort((t,e)=>e.value-t.value),n.forEach(n=>{let s=!0;const i=t.map(t=>{const e=+o(t.filtered[n.id],2)||null;return e&&(s=!1),[t.time,e]});s||e.push({name:n.id,data:i})}),e.push({name:a("Others"),color:"#DDD",data:t.map(t=>[t.time,+o(t.filtered.others,2)])}),e}}},329:function(t,e,n){"use strict";n(52);const s=n(102),i=n(15),o=n(107),{__:a}=n(33);t.exports=class extends s{constructor(t){super('\n<table class="PortfolioTable">\n  <tr>\n    <th class="name">'.concat(a("Name"),'</th>\n    <th align="left">').concat(a("Anchor"),'</th>\n    <th align="right">').concat(a("Amount"),'</th>\n    <th align="right">').concat(a("Price"),'</th>\n    <th align="right">').concat(a("Value"),"</th>\n  </tr>\n  %rows...\n</table>\n")),this.portfolio=t,this.rows=t.assets.mirror(t=>this.toAssetRow(t)),this.watch(t,"total",()=>this.sort()),this.trap("selected",()=>this.onselect(this.selected))}toAssetRow(t){const e=new r(t);return e.domNode.onclick=()=>{this.selected===e.asset?this.selected=null:this.selected=e.asset},e}sort(){this.rows.sort((t,e)=>e.asset.value-t.asset.value)}onselect(t){this.selectedRow&&this.selectedRow.simpleView(),this.selectedRow=this.rows.find(e=>e.asset===t),this.selectedRow&&this.selectedRow.detailledView()}};class r extends s{constructor(t){super('\n<tr %class>\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="left">\n    <div hidden=%simple>%anchors...</div>\n    <div class=%mode>%anchorTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%amounts...</div>\n    <div class=%mode>%amountTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%prices...</div>\n    <div class=%mode title=%priceDetails>%priceTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%values...</div>\n    <div class=%mode>%valueTotal</div>\n  </td>\n</tr>\n    '),this.asset=t,this.name=t.code,this.anchors=t.balances.mirror(t=>l(t.anchor,"name")),this.amounts=t.balances.mirror(t=>l(t,"amount",o)),this.prices=t.balances.mirror(t=>function(t,e,n){const s=l(t,"price",n);return t.trap("orderbook",()=>{t.orderbook&&t.orderbook.trap(["bestAsk","bestBid","spread%"],()=>{s.title=h(t.orderbook)})}),s}(t,0,o)),this.values=t.balances.mirror(t=>l(t,"value",t=>o(t,2))),t.link("image",this),t.link("amount",this,"amountTotal",o),t.link("price",this,"priceTotal",o),t.link("value",this,"valueTotal",t=>o(t,2)),t.balances.feed(this,"anchorHeader",c);const e=this.asset.orderbook;this.define("priceDetails","orderbook",()=>h(e)),this.watch(e,["bestAsk","bestBid","spread%"],()=>{this.compute("priceDetails")}),this.simpleView()}simpleView(){this.simple=!0,this.class="",this.mode="",this.anchorTotal=this.anchorHeader}detailledView(){this.simple=!1,this.class="selected",this.mode="footer",this.anchorTotal="Total"}}function c(t){return 1===t.length?t[0].anchor.name:"".concat(a("multiple")," (").concat(t.length,")")}function l(t,e,n){const s=i.create("div",null,t[e]);return t.link(e,s,"textContent",n),s}function h(t){return"XLM"===t.base.code?"":"\nBuy: ".concat(o(t.bestBid)," - Sell: ").concat(o(t.bestAsk)," - Spread: ").concat(o(t["spread%"],2),"%\n  ")}},330:function(t,e,n){"use strict";const s=n(102),{__:i}=n(33),o=n(220),a=n(50),r={us:"English",fr:"Français"},c=["AUD","BRL","CAD","CHF","CNY","CZK","DKK","EUR","GBP","HKD","HUF","IDR","ILS","INR","JPY","KRW","MXN","MYR","NOK","NZD","PHP","PLN","RUB","SEK","SGD","THB","TRY","USD","ZAR"];class l extends o{constructor(t){super(o.selector({label:i("Language"),name:"language",values:r}),o.selector({label:i("Currency"),name:"currency",values:c})),t.project(["currency","language"],this),this.project(["currency","language"],t),this.listen("change",()=>location.reload())}}t.exports=class extends s{constructor(){super("\n      <section><h2>".concat(i("Settings"),"</h2>\n        <section><h3>").concat(i("General Settings"),"</h3>\n          %general\n        </section>\n      </section>\n    ")),this.general=new l(a)}}},331:function(t,e,n){"use strict";const s=n(102),{__:i}=n(33),o=n(222),a=n(338),r=n(341),c=n(344),l=n(345);t.exports=class extends s{constructor(t){super('\n<section class="RebalanceGui">\n  <h2>'.concat(i("Rebalance"),"</h2>\n\n  %table\n\n  %controls\n\n</section>\n    ")),this.portfolio=t;const e="target:".concat(t.account.id),n=localStorage[e];this.target=a.forPortfolio(t,n),this.target.link("json",localStorage,e,null,{init:!1}),this.target.json=this.target.toJson(),this.table=new l(this.target),this.table.project("selected",this),this.project("selected",this.table),this.controls=new c(this.target),this.trap("selected",()=>{this.selected&&this.showTargetSetup(this.selected)})}async showTargetSetup(t){const e=new r(t),n=o.confirm({content:e});await n?e.confirm():e.cancel(),this.selected=null,t.computeAll()}}},337:function(t,e,n){"use strict";const s=n(102),i=n(219);class o extends s{constructor(t={}){super('\n<div class="Modal" %style %hidden>%content</div>\n    '),Object.assign(this.style,o.style),this.hidden=!0,this.content=t.content,this.trap(o.styleParams,t=>this.style[t.key]=t.value),o.styleParams.forEach(e=>this[e]=t[e]),document.body.insertBefore(this.domNode,document.body.firstChild)}setPosition(){const t={x:0,y:0};this.left||this.right||(this.style.left="50%",t.x="-50%"),this.top||this.bottom||(this.style.bottom="50%",t.y="50%"),this.style.transform="translate(".concat(t.x,", ").concat(t.y,")")}async open(){o.clickWall.enable(),this.hidden=!1,this.setPosition(),await o.shadow.enable(),o.shadow.onclick=()=>this.close(),o.clickWall.disable(),this.trigger("open")}async close(){o.clickWall.enable(),this.hidden=!0,await o.shadow.disable(),o.clickWall.disable(),this.trigger("close"),this.destroy()}}o.styleParams=["height","width","top","right","bottom","left","padding"],o.style={zIndex:1e3,position:"fixed"},o.shadow=new i({scrollbar:"hide",opacity:.3,delay:300}),o.clickWall=new i,o.clickWall.domNode.style.zIndex="2000",t.exports=o},338:function(t,e,n){"use strict";n(52);const s=n(114),i=n(51),o=n(110),a=n(149),r=n(339),c=n(340),{arrayContains:l,arrayRemove:h,arraySum:u,fixed7:d,positive:p}=n(108);class f extends i{constructor(t){super(),t?(this.asset=t,this.mode="ignore",this.order=r.rebalance(this),t.target=this,this.watch(t,"value",()=>this.compute("valueDiff")),this.watch(t,"price",()=>{!this.asset.amount&&this.size&&this.computeAll()}),this.opening=[],this.closing=[],"XLM"===t.id&&(this.mode="weight",this.size=1)):(this.childs=new s,this.childs.listen("add",t=>t.parent=this),this.childs.listen("change",()=>this.computeAll())),this.trap("size",()=>{this.size&&(this.size=p(this.size),"percentage"===this.mode&&(this.size=Math.min(100,this.size))),this.computeAll()})}get root(){return this.parent?this.parent.root:this}}f.define("name",["group","asset"],(function(){return this.group||this.asset.id})),f.define("modified",["json"],(function(){return this.hasChanged()})),f.define("valueDiff",["value","asset"],(function(){return this.asset&&this.value-this.asset.value})),f.define("valueDiffP","valueDiff",(function(){return this.value?this.valueDiff/this.value:null})),f.define("amountDiff",["amount"],(function(){return d(this.amount-this.asset.amount)})),f.define("amountDelta",["amountDiff"],(function(){return Math.abs(this.amountDiff)})),f.define("share",null,(function(){return this.value/this.root.portfolio.total})),f.define("shareDiff",["share"],(function(){return this.share-this.asset.share})),f.prototype.computeAll=function(){if(this.parent)this.root.computeAll();else if(this.portfolio&&this.portfolio.total){try{this.error=null,this.value=this.portfolio.total,this.compute("modified"),c.apply(this)}catch(t){this.error=t.message,console.error(t)}this.trigger("update")}},f.prototype.addAsset=function(t){if(!this.childs)throw new Error("Target is not a group: ",e);if(t.target)throw new Error("Asset already has a target: ",t);const e=new f(t);return e.parent=this,t.anchors.filter(t=>!t.unpeg).forEach(t=>e.addAnchor(t)),this.childs.push(e),e.mode="weight",e.size=1,e},f.prototype.addAnchor=function(t){const e=t.tetherCode(this.asset.code),n=t.pubkey,s=a.resolve(e,n);"closing"===s.action?(h(this.closing,n),s.action=null):(this.root.portfolio.maybeAddBalance(s),this.opening.push(n),s.action="opening"),this.root.compute("modified"),this.order.refresh()},f.prototype.removeAnchor=function(t){const e=t.tetherCode(this.asset.code),n=t.pubkey,s=a.resolve(e,n);"opening"===s.action?(this.root.portfolio.maybeRemoveBalance(s),h(this.opening,n),s.action=null):(this.closing.push(n),s.action="closing"),this.root.compute("modified"),this.order.refresh()},f.sortChilds=function(t){return t.childs.slice().sort((t,e)=>t.name.localeCompare(e.name))},f.forPortfolio=function(t,e){const n=e?f.fromJson(e):new f;return n.portfolio=t,t.target=n,n.watch(t,"total",()=>n.computeAll()),t.assets.forEach(t=>{!n.childs.find(e=>t===e.asset)&&t.isSupported&&n.childs.push(new f(t))}),n.childs.forEach((e,s)=>{t.assets.find(t=>t===e.asset)&&e.asset.isSupported||n.childs.splice(s,1)}),t.assets.listen("add",t=>{t.isValid&&n.childs.push(new f(t))}),t.assets.listen("remove",t=>{const e=n.childs.findIndex(e=>e.asset===t);n.childs.splice(e,1)}),n},f.fromJson=function(t){const e=JSON.parse(t),n=f.fromObject(e);return n.json=t,n},f.prototype.toJson=function(t){const e=this.toObject();return JSON.stringify(e,null,t&&2)},f.prototype.hasChanged=function(){return this.toJson()!==(this.json||'{"childs":[]}')},f.fromObject=function(t){"string"==typeof t&&(t={asset:t});const e=t.asset&&o.resolve(t.asset),n=new f(e);if(n.size=t.size,n.mode=t.mode,"equal"===n.mode&&(n.mode="weight"),"skip"===n.mode&&(n.mode="ignore"),n.asset&&"XLM"===n.asset.id&&"ignore"===n.mode&&(n.mode="weight",n.size=1),n.mode||(n.mode="weight"),null==n.size&&"weight"===n.mode&&(n.size=1),t.childs){n.group=t.group;const e=t.childs.map(t=>f.fromObject(t)),s=e.filter(t=>"percentage"===t.mode);s.length&&!e.find(t=>"weight"===t.mode)&&100!==u(s,"size")&&s.forEach(t=>t.mode="weight"),n.childs.push(...e)}else{const s=n.asset.balances;t.opening&&(n.opening=t.opening),t.closing&&(n.closing=t.closing),s.forEach(t=>{const e=t.anchor.pubkey;l(n.closing,e)?t.action="closing":h(n.opening,e)}),n.closing.forEach(t=>{s.find(e=>e.anchor.pubkey===t)||h(n.closing,t)}),s.length||(e.target=null)}return n},f.prototype.toObject=function(){if("ignore"===this.mode)return;let t={mode:this.mode,size:this.size};if("weight"===t.mode&&(delete t.mode,1===t.size&&delete t.size),this.asset)t.asset=this.name,this.opening.length&&(t.opening=this.opening),this.closing.length&&(t.closing=this.closing),1===Object.keys(t).length&&(t=t.asset);else if(this.childs){t.group=this.group;const e=f.sortChilds(this);t.childs=e.map(t=>t.toObject()).filter(t=>t)}return t},f.prototype.toCosmicLink=function(){if(this!==this.root)throw new Error("Only root target can be converted to CosmicLink");const t=this.toOperations(),e=this.portfolio.offers.listOutdated(),n=[];t.forEach(t=>t.offer.id=null),e.forEach(e=>{const s=t.find(t=>t.offer.balance===e.balance);s?s.offer.id=e.id:n.push(e)}),t.forEach(t=>{!t.offer.id&&n.length&&(t.offer.id=n.pop().id)});const s=r.operationsToCosmicLink(t);return this.portfolio.balances.filter(t=>t.asset.target).forEach(t=>{(function(t){return"remove"!==t.asset.target.mode&&"opening"===t.action})(t)&&s.insertOperation(0,"changeTrust",{asset:t.id}),function(t){return!!t.hasTrustline&&(0===t.amount&&"closing"===t.action||"remove"===t.asset.target.mode&&0===t.asset.amount)}(t)&&s.insertOperation(0,"changeTrust",{asset:t.id,limit:0})}),n.forEach(t=>{s.insertOperation(0,"manageOffer",{offerId:t.id,amount:0})}),s.tdesc.operations.length?s:null},f.prototype.toOperations=function(){return this.childs?[].concat(...this.childs.map(t=>t.toOperations())):this.order?this.order.operations:[]},t.exports=f},339:function(t,e,n){"use strict";n(52);const s=n(115).CosmicLink,i=n(114),o=n(107),a=n(51),{__:r}=n(33),c=n(50),{positive:l,negative:h,fixed7:u,clamp:d,absoluteMin:p,arraySum:f,arrayScale:m}=n(108),g=t.exports=class t extends a{static rebalance(e){if("XLM"===e.asset.code)return;const n=new t("balance",e.asset.orderbook,e);return n.watch(e,"amount",()=>n.refresh()),n.watch(e.asset.orderbook,["bids","asks"],()=>n.refresh()),e.asset.offers.listen("change",()=>n.refresh(),n),n}constructor(e,n,...s){super(),this.type=e,this.method=t.type[this.type],this.operations=new i,this.orderbook=n,this.parameters=s,this.operations.listen("update",()=>{this.compute(["cosmicLink","description"])}),this.refresh()}refresh(){this.operations.splice(0,this.operations.length),this.operations.trigger("update"),this.method(this,...this.parameters),this.trigger("refresh")}getOperation(t,e){const n="".concat(t.balance.anchor.name,":").concat(e?t.price:"take"),s=this.operations.find(t=>t.id===n);if(s)return s;{const t={id:n};return this.operations.push(t),t}}addOperation(t,e){const n=this.getOperation(t,e>0);this.setOperation(n,t,Number(e)||n.amount)}setOperation(t,e,n){t.amount=u(n),t.cost=n*e.price,t.offer=e,t.isDust=t.amount>0&&t.amount*e.basePrice<1e-7,this.operations.trigger("update")}};function b(t){return t.amount>0&&"bids"===t.offer.side||t.amount<0&&"asks"===t.offer.side?"buy":"sell"}function y(t,e,n=t.asset.orderbook){const s="quantity"===t.mode||0===t.amount,i=n.asks[0].basePrice;if(!s&&Math.abs(e*i)<c.minOfferValue)return;const o=function(t,e){return t=>e>=t.balance.sizeMin&&e<=t.balance.sizeMax&&t.baseVolume>Math.abs(e)*c.skipMarginalOffers}(0,e);g.type.limit(t.order,e,{orderbook:n,filter:o})}function w(t,e){const n=t.asset.balances;let s=0,i=n.map(()=>0);if(h(e)){const t=n.map(t=>"closing"===t.action?-t.amount:0);s=v(i,t,e)}const o=l(e)?"underMin":"overMax";if(s!==e){const t=n.map(t=>"closing"===t.action?0:-t[o]);s=v(i,t,e-s)}if(s!==e){const t=l(e)?"sizeMax":"sizeMin",a=n.map(e=>"closing"===e.action?0:e[t]-e[o]);v(i,a,e-s)}n.forEach((e,n)=>{const s=u(i[n]);y(t,s,e.orderbook)})}function v(t,e,n){const s=f(e),i=p(n,s);return m(e,i).forEach((e,n)=>t[n]+=e),+o(f(t),7)}g.define("description","operations",(function(){return g.operationsToDescription(this.operations)})),g.operationsToCosmicLink=function(t=[]){const e=new s({network:"public",memo:"Equilibre.io",maxTime:"+5",source:c.portfolio.accountId});return t.forEach(t=>{if(t.isDust){const n=t.offer.balance,s=n.anchor.pubkey,i="".concat(n.code,":").concat(s);e.addOperation("payment",{amount:t.amount,asset:i,destination:s}),e.addOperation("changeTrust",{asset:i,limit:0})}else e.addOperation("manageOffer",function(t){const e=t.offer,n=e.balance.code+":"+e.balance.anchor.pubkey;let s;s="buy"===b(t)?{buying:n,selling:"XLM",amount:u(t.amount*e.price_r.n/e.price_r.d),price:{n:e.price_r.d,d:e.price_r.n}}:{buying:"XLM",selling:n,amount:t.amount,price:e.price_r};return s.offerId=t.offer.id,s}(t))}),e},g.operationsToDescription=function(t=[]){const e=[];return t.forEach(t=>{"buy"===b(t)?e.push("\n".concat(r("Buy")," ").concat(o(t.amount)," ").concat(t.offer.balance.code," ").concat(r("at")," ").concat(o(t.offer.price)," ").concat(c.currency,"\n      ")):t.isDust?e.push("\n".concat(r("Burn dust")," (").concat(o(t.amount)," ").concat(t.offer.balance.code,")\n        ")):e.push("\n".concat(r("Sell")," ").concat(o(t.amount)," ").concat(t.offer.balance.code," ").concat(r("at")," ").concat(o(t.offer.price)," ").concat(c.currency,"\n      "))}),e},g.type={},g.type.market=function(t,e){if(!e)return;const n=e>0?"asks":"bids",s=Math.abs(e),i=t.orderbook.findOffer(n,t=>t.baseVolume>s);t.addOperation(i,s)},g.type.limit=function(t,e,{orderbook:n,filter:s}){if(!e)return;const i=e>0?"bids":"asks",a=(n||t.orderbook).findOffer(i,s);a&&t.addOperation(function(t,e=c.spreadTightening){const n=Object.assign({},t),s=e*t.balance.asset.orderbook["spread%"]/100;"bids"===t.side?n.price=t.price*(1+s):n.price=t.price*(1-s);t.balance.asset.globalPrice&&function(t,e=c.maxSpread/2){const n=t.balance.asset.price,s=t.balance.orderbook.price;if("bids"===t.side){const i=Math.min(s,n*(1-e));t.price=d(t.price,i,n)}else{const i=Math.max(s,n*(1+e));t.price=d(t.price,n,i)}}(n);return function(t){const e=t.balance.orderbook.quote;t.price_r={n:o(1e10*t.price,0),d:o(1e10*e.price,0)};for(;t.price_r.n>999999999||t.price_r.d>999999999;)t.price_r.n=o(t.price_r.n/10,0),t.price_r.d=o(t.price_r.d/10,0)}(n),n}(a),Math.abs(e))},g.type.balance=function(t,e){const n=e.asset,s=n.orderbook;if(null!=e.amount&&0!==e.amountDelta)if(s.isFetched()){if(n.liabilities){if(n.offers.filter(t=>!t.outdated).length)return void(t.description=[r("Rebalancing...")])}!function(t){const e=[];if(t.asset.balances.forEach(t=>{null!=t.orderbook.price&&t.isActive?e.push(t):t.targetAmount=null}),!e.length)return;if(1===e.length)return e[0].targetAmount=t.amount;const n=u(t.amount/e.length);e.forEach(t=>t.targetAmount=n)}(e),!function(t){const e=t.asset.balances;return!(f(e,"underMin")&&f(e,"overMax"))}(e)?function(t,e=t.amountDiff,n=c.anchorsRebalanceRiskMax){const s=t.asset.balances,i=-f(s,"underMin"),o=f(s,"overMax"),a=Math.max(i-l(e),o+h(e)),r=Math.abs(t.valueDiffP),d=t.amount*l(n-r),p=Math.min(a,d),m=u(p+l(e)),g=u(p-h(e));w(t,m),w(t,-g)}(e,e.amountDiff):!function(t,e){const n=t.asset.balances,s=n.filter(t=>"closing"===t.action&&e<t.sizeMin),i=n.filter(t=>t.sizeMin<=e&&e<=t.sizeMax);return!s.length&&!!i.length}(e,e.amountDiff)?w(e,e.amountDiff):y(e,e.amountDiff)}else t.description=[r("Fetching orderbook...")]};for(let t in g.type)g[t]||(g[t]=(...e)=>new g(t,...e))},340:function(t,e,n){"use strict";const s=e,i=n(107),{__:o}=n(33),a=n(50),{arraySum:r,fixed7:c,positive:l}=n(108);s.apply=function(t){const e=[];let h=0,u=0;t.childs.forEach(t=>{const n=t.mode;"weight"===n?(e.push(t),u+=t.size):(s[n](t),h+=t.value)});const d=l(t.value-h);e.forEach(t=>s.weight(t,d,u)),function(t,e,n){const s=a.misallocationTolerance;if(t>e*(1+s)){const n=+i(t-e,2),s=+i(100*n/e,2);let r=o("Rebalance setup is over portfolio value by");throw r+=" ".concat(n," ").concat(a.currency," (").concat(s,"%) "),new Error(r)}if(!n&&t<e*(1-s)){const n=+i(e-t,2),s=+i(100*n/e,2);let r=o("Rebalance setup is under portfolio value by");throw r+=" ".concat(n," ").concat(a.currency," (").concat(s,"%) "),new Error(r)}}(h,t.value,e.length),function(t){const e=n(110).resolve("XLM"),s=t.childs.filter(t=>t.asset!==e),i=e.value-e.valueMin,a=s.filter(t=>t.valueDiff>0),h=r(a,"valueDiff");if(i>h)return;const u=s.filter(t=>t.valueDiff<0),d=-r(u,"valueDiff"),p=e.target.value-e.valueMin,f=1-l(p/d);if(s.forEach(t=>{t.amount=c(t.amount-t.amountDiff*f)}),f>.95)throw new Error(o("The XLM share is too low"))}(t)},s.amount=function(t){t.amount=t.size,t.value=t.amount*t.asset.price,t.compute("share")},s.ignore=function(t){t.value=t.asset.value,t.amount=t.asset.amount,t.compute("share")},s.remove=function(t){t.amount=0,t.value=0,t.compute("share")},s.percentage=function(t){s.weight(t,t.parent.value,100)},s.weight=function(t,e,n){n?(t.value=t.size*e/n,t.amount=c(t.value/t.asset.price)):t.value=t.amount=0,t.compute("share")}},341:function(t,e,n){"use strict";const s=n(102),i=n(180),o=n(342),a=n(343),{arrayOnlyInFirst:r}=n(108);t.exports=class extends s{constructor(t){super('\n<div class="TargetSetup">\n  <h3>%name</h3>\n  <hr>\n\n  %sizeSetup\n  %anchorsSetup\n\n</div>\n    '),this.target=t,this.backup={size:t.size,mode:t.mode,opening:t.opening.slice(),closing:t.closing.slice()},this.name=t.asset.name,this.sizeSetup=new a(t),this.target.asset.anchors.length>1&&(this.anchorsSetup=new o(t))}confirm(){this.sizeSetup.maybeSwitchMode();const t=this.target.asset;"XLM"===t.id&&this.target.value<t.amountMin*t.price&&(this.target.mode="amount",this.target.size=t.amountMin),this.close()}cancel(){this.target.mode=this.backup.mode,this.target.size=this.backup.size;r(this.target.opening,this.backup.opening).concat(r(this.backup.closing,this.target.closing)).map(i.resolve).forEach(t=>this.target.removeAnchor(t));r(this.target.closing,this.backup.closing).concat(r(this.backup.opening,this.target.opening)).map(i.resolve).forEach(t=>this.target.addAnchor(t)),this.close()}close(){document.activeElement.blur(),this.sizeSetup.destroy(),this.anchorsSetup&&this.anchorsSetup.destroy(),this.destroy()}}},342:function(t,e,n){"use strict";const s=n(102),{__:i}=n(33);t.exports=class extends s{constructor(t){super('\n<fieldset class="TargetSetupAnchors">\n  <legend>'.concat(i("Anchor"),":</legend>\n  %toAnchorCheckbox:anchors...\n</fieldset>\n  ")),this.target=t,this.anchors=t.asset.anchors.filter(e=>{const n=t.root.portfolio;return!e.unpeg||function(t,e){return t.balances.find(t=>t.anchor===e)}(n,e)})}toAnchorCheckbox(t){return new o(t,{getState:()=>function(t,e){const n=t.asset.balances.find(t=>t.anchor===e);return n&&n.isActive}(this.target,t),callback:this.switchAnchor.bind(this)})}switchAnchor(t,e){e?this.target.addAnchor(t):this.target.asset.balances.reduce((t,e)=>e.isActive?t+1:t,0)>1&&this.target.removeAnchor(t)}};class o extends s{constructor(t,e={}){const{getState:n,callback:s}=e;super('\n<span class="AnchorCheckbox half">\n  <input -ref=%checkbox type="checkbox" %checked>\n  <label -ref=%label %onclick>%name</label>\n</span>\n'),this.name=t.name,this.checked=n(),this.onclick=()=>{s(t,!this.checked),this.checked=n()}}}},343:function(t,e,n){"use strict";const s=n(102),i=n(107),{__:o}=n(33);t.exports=class extends s{constructor(t){super('\n<fieldset class="TargetSetupSize">\n  <legend>'.concat(o("Size"),':</legend>\n\n  <input autofocus class="half" type="number" step="any" min="0" %max\n    value=%size placeholder=%share onchange=%maybeSwitchMode>\n\n  <select class="half" onchange=%setMode value=%mode>\n    <option value="weight">').concat(o("Weight"),'</option>\n    <option value="percentage">').concat(o("Percentage"),'</option>\n    <option value="amount">').concat(o("Amount"),'</option>\n    <option value="ignore" hidden=%targetIsXlm>').concat(o("Ignore"),'</option>\n    <option value="remove" hidden=%targetIsXlm>').concat(o("Remove"),"</option>\n  </select>\n\n</fieldset>\n    ")),this.target=t,this.targetIsXlm="XLM"===t.asset.id,t.project("share",this,t=>i(100*t,2)),t.project("size",this),this.project("size",t,t=>null!=t?Number(t):null),t.project("mode",this),this.project("mode",t)}maybeSwitchMode(){0==this.size?this.mode="amount":this.size?"ignore"!==this.mode&&"remove"!==this.mode||(this.mode="percentage",this.target.computeAll()):"remove"!==this.mode&&(this.mode="ignore")}setMode(){switch(this.mode){case"weight":this.size=1,this.max=null;break;case"percentage":this.size=+i(100*this.target.asset.share,2),this.max=100;break;case"amount":this.size=this.target.asset.amount,this.max=null;break;case"ignore":case"remove":this.target.set("size",null)}}}},344:function(t,e,n){"use strict";const s=n(102),i=n(15),{__:o}=n(33);t.exports=class extends s{constructor(t){super('\n<section class="TargetControls">\n  <form %onsubmit hidden=%hideRebalance>\n    <button onclick=%rebalance disabled=%invalid>'.concat(o("Rebalance"),"</button>\n  </form>\n\n  <form %onsubmit hidden=%hideSave>\n    <button onclick=%save disabled=%invalid>").concat(o("Save"),"</button>\n    <button onclick=%cancel>").concat(o("Cancel"),"</button>\n  </form>\n\n  %toParagraph:error\n</section>\n    ")),this.target=t,t.project(["error","modified"],this),this.define("hideRebalance",["modified"],()=>this.modified),this.define("hideSave",["modified"],()=>!this.modified),this.define("invalid",["error"],()=>!!this.error)}toParagraph(t){if(t)return i.create("p",".error",t)}onsubmit(){return!1}cancel(){location.reload()}save(){this.target.json=this.target.toJson()}rebalance(){const t=this.target.toCosmicLink();if(t){t.open().listen("destroy",()=>{this.target.portfolio.getAccount(),this.target.portfolio.offers.get()})}}}},345:function(t,e,n){"use strict";const s=n(102),i=n(15),o=n(107),{__:a}=n(33),r=n(346),c=n(222);t.exports=class extends s{constructor(t){super('\n<section class="TargetsTable">\n  <table>\n    <tr>\n      <th class="name">'.concat(a("Name"),'</th>\n      <th align="right">').concat(a("Goal"),'</th>\n      <th align="right">').concat(a("Divergence"),'</th>\n      <th align="right">').concat(a("Operation"),'</th>\n    </tr>\n\n    %targets...\n\n    <tr><td colspan="4" align="center" onclick=%addAsset>\n      <h3>').concat(a("Add Asset"),"</h3>\n    </td></tr>\n\n  </table>\n</section>\n    ")),this.target=t,this.targets=t.childs.mirror(t=>this.toTargetRow(t)),this.selected=void 0,t.listen("update",()=>this.sortTargets()),this.sortTargets()}toTargetRow(t){const e=new l(t);return e.domNode.onclick=()=>this.selected=t,e}sortTargets(){this.targets.sort((t,e)=>(t=t.target,"ignore"===(e=e.target).mode&&"ignore"!==t.mode?-1:"ignore"===t.mode&&"ignore"!==e.mode?1:"remove"===e.mode&&"remove"!==t.mode?-1:"remove"===t.mode&&"remove"!==e.mode?1:e.value-t.value||t.asset.code.localeCompare(e.asset.code)))}async addAsset(){const t=this.target.portfolio.availableAssets().filter(t=>t.show),e=new r(t),n=c.confirm({title:a("Pick an Asset"),content:e});await n&&e.selected&&this.target.addAsset(e.selected)}};class l extends s{constructor(t){super('\n<tr class="TargetRow">\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="right">%command</td>\n  <td align="right">%toPercent:shareDiff</td>\n  <td align="right">%toDiv:description...</td>\n</tr>\n    '),this.target=t,this.name=t.asset.code,this.define("command",null,()=>this.toCommand(t)),this.watch(t,["size","mode","share"],()=>this.compute("command")),t.asset.project("image",this),t.project("shareDiff",this,t=>-t),t.order&&t.order.project("description",this)}toCommand(t){switch(t.mode){case"ignore":return a("Ignore");case"remove":return a("Remove");case"amount":return"".concat(t.size," ").concat(t.asset.code);case"weight":return"".concat(t.size," − ").concat(this.toPercent(t.share));case"percentage":return this.toPercent(t.share)}}toPercent(t){return t?o(100*t,2)+"%":"-"}toDiv(t){return i.create("div",null,t)}}},346:function(t,e,n){"use strict";const s=n(102),i=n(114),{__:o}=n(33);t.exports=class extends s{constructor(t){super('\n<div class="AssetSelector">\n  %groups...\n</div>\n    '),this.groups=new i;const e=t.filter(t=>"fiat"===t.type),n=t.filter(t=>"crypto"===t.type&&t.isTether),s=t.filter(t=>"crypto"===t.type&&!t.isTether);this.addGroup(o("Fiat Tethers"),e),this.addGroup(o("Crypto Tethers"),n),this.addGroup(o("Native Assets"),s)}addGroup(t,e){if(!e.length)return;const n=new a(t,e,t=>this.selected=t);this.groups.push(n)}};class a extends s{constructor(t,e,n){super('\n<fieldset class="AssetGroup">\n  <legend>%name</legend>\n  %toAssetRadio:assets...\n</fieldset>\n    '),this.name=t,this.assets=e,this.onselect=n}toAssetRadio(t){return new r(t,()=>this.onselect(t))}}class r extends s{constructor(t,e){super('\n<span class="AssetRadio half">\n  <input -ref=%radio type="radio" name="asset-selector-group" %onchange>\n  <label -ref=%label for=%radio>\n    <img src=%image>\n    %name\n  </label>\n</span>\n    '),this.name=t.name,this.image=t.image,this.onchange=()=>this.radio.checked&&e(),this.label.for=this.radio,this.label.onclick=()=>this.radio.click()}}},348:function(t,e){t.exports='<section>\n  <h2>What is Equilibre.io?</h2>\n\n  <section class="landing">\n    <h3>A Portfolio Balancer for Stellar</h3>\n\n    <div><img src="./images/repartition.png" alt="">\n\n    <p>\n      Equilibre.io is a portfolio balancer for Stellar. In other words, it is\n      a software which helps you to spread your funds across various\n      currencies and crypto assets.\n    </p>\n\n    <p>\n      I initially created it to protect my funds against a possible bear market.\n      As it proved reliable, I decided to make it publicly available.\n    </p>\n\n    <p>\n      Equilibre.io is merely a sophisticated front-end for the Stellar\n      Decentralized exchange: your account, holdings & operations live on the\n      blockchain.\n    </p>\n\n    <p>\n      It works a bit like a multi-currency bank account. Except there\'s no bank.\n      And you are the only one in control.\n    </p>\n\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Risk Management Solution</h3>\n\n    <div><img src="./images/history.png" alt="">\n    <p>\n      Equilibre.io can help you to implement what is known as a "balanced\n      investment strategy". Basically, the idea is that balancing funds over\n      multiple assets will average a portfolio performance & mitigate the risks.\n    </p>\n\n    <p>\n      Here\'s how it works: we choose a number of assets we want to be exposed\n      to, and we attribute a share of the portfolio to each of them (e.g: 20%\n      each). Then, we "rebalance" the portfolio on a regular basis. This means\n      that we pass trades that bring back each asset to its allocated share.\n    </p>\n\n    <p>\n      It is important to understand that Equilibre.io is not an automated\n      trading bot, nor a magic-free-money scheme. It is a product made for\n      people who can decide on their own strategy & who understand the risks\n      they are taking.\n    </p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Fancy Account Viewer</h3>\n\n    <div><img src="./images/balances.png" alt="">\n    <p>\n      Equilibre.io offers a live view of the latest blockchain state. It is also\n      in sync with the latest market data & displays values and historical data\n      in your national currency.\n    <p>\n\n    <p>\n      It is one of the few applications (if not the only one) that can retrieves\n      the complete history of any Stellar account, and pack that data into a\n      fancy chart.\n    </p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Sophisticated Trading Engine</h3>\n\n\n    <div><img src="./images/activity.png" alt="">\n    <p>\n      Equilibre.io is, first of all, a collection of fine-tuned trading\n      algorithms.  Since a year, I\'ve crash-tested them in every way I could\n      imagine and packed what worked the best in an easy-to-use interface.\n    <p>\n\n    <p>\n      It can transform templates such as "I want 50% of my portfolio in BTC and\n      50% in XLM" into a transaction that passes the required orders. Forget\n      about trust lines, order books and price picking: all that stuff is dealt\n      with in the background.\n    <p>\n\n    <p>\n      The trading engine has a defensive behavior: it prioritizes not losing\n      money over taking risks to make a profit.\n    </p>\n    </div>\n  </section>\n\n\n  <section class="landing">\n    <h3>A New Security Standard for the Years to Come</h3>\n\n    <div><img src="./images/side-frame.png" alt="">\n    <p>\n      Equilibre.io strictly enforce cryptography good practices: I certainly\n      don\'t want to know about your private key, nor to obtain any kind of\n      control over your account. <em>“Who can protect a house full of gold and\n      jewels?”</em>\n    </p>\n\n    <p>\n      When you want to rebalance your portfolio, Equilibre.io generates a\n      transaction request that you can sign using your own wallet. This is\n      possible thanks to protocols known as CosmicLink & SEP-0007.\n    </p>\n\n    <p>\n      Those protocols turn any compatible Stellar wallet into something like\n      Metamask for Ethereum. At that time, only a few services are compatibles.\n      However, a number of wallets announced their intention to support\n      transactions requests in the future, including Keybase, Lobster, and\n      Stargazer.\n    <p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Free Software, as in Freedom</h3>\n\n    <div>\n    <p>\n      I think that the free software cooperative mindset can go a long way in\n      improving a project such as Stellar. That\'s why I released Equilibre.io in\n      the public domain. Here are some of the benefits of it:\n    </p>\n\n    <p>\n      Auditability: The software can be proven to contain no malware and no\n      tracker. It can be audited for flaws & proven safe.\n    </p>\n\n    <p>\n      Forkability: Any feature implemented by the software becomes <em>de\n      facto</em> available to every other developer. For example, the code I\n      wrote to support Ledger Wallets is <a\n      href="https://www.npmjs.com/package/@cosmic-plus/ledger-wallet"\n      target="_blank" rel="noopener">freely available to all</a>.\n    </p>\n    </div>\n  </section>\n\n</section>\n'},349:function(t,e){t.exports="<section>\n  <h2>Legal Disclaimer</h2>\n\n  <section>\n    <h3>Risks Related to the Use of Equilibre.io</h3>\n\n    <p>\n      The Application author will not be responsible for any losses, damages or\n      claims arising from any event related to its use, including but not\n      limited to:\n    </p>\n\n    <p>− Mistakes made by the users of the Application.</p>\n\n    <p>− Software problems of the Application and/or any\n    related software or service.</p>\n\n    <p>− Technical failures in the hardware of the users.</p>\n\n    <p>− Security problems experienced by the users.</p>\n\n    <p>− Actions or inactions of third parties and/or events experienced by\n    third parties.</p>\n  </section>\n\n  <section>\n    <h3>Not an Exchange</h3>\n\n    <p>\n      The Application is not an exchange. It is an independent front-end for the\n      Stellar Decentralized Exchange. The Application doesn't have any control\n      over the user's account, assets that can be bought or sell or the exchange\n      as a whole.\n    </p>\n\n    <p>\n      The assets made available through the Application have been selected on\n      the sole basis of the thickness and the daily volumes of their order book.\n      Their availability in the Application doesn't constitute a guarantee of\n      any sort. In particular, no research has been conducted about their\n      fundamentals or their compliance with national laws that may apply\n      to them or to the users.\n    </p>\n\n    <p>\n      The Application doesn't pass any transaction on behalf of the users. The\n      users are solely responsible for the transactions that they are signing\n      and sending to the blockchain.\n    </p>\n  </section>\n\n  <section>\n    <h3>No Guarantee of Profit</h3>\n\n    <p>\n      Past performance may not be indicative of future results. Different types\n      of investments involve varying degrees of risk, and there can be no\n      assurance that the future performance of any specific investment,\n      investment strategy, or product will be profitable, equal any\n      corresponding indicated historical performance level(s), or be suitable\n      for your portfolio.\n   </p>\n\n    <p>\n      The Application doesn't provide investment advice, financial advice,\n      trading advice, or any other sort of advice, and none of the Application\n      content should be treated as such. The users are responsible to conduct\n      their own diligence and consult their financial advisory before making\n      investment decisions.\n    </p>\n  </section>\n\n  <section>\n    <h3>Compliance With Tax Obligations</h3>\n\n    <p>\n      The users of the Application are solely responsible to determinate what,\n      if any, taxes apply to their transactions. The author of the Application\n      is NOT responsible for determining the taxes that apply to transactions.\n    </p>\n    \n    <p>\n      Some countries are taxing investments on a per-transaction basis, which\n      can heavily affect the performance of strategies involving high quantities\n      of micro-transactions.\n    </p>\n  </section>\n\n</section>\n\n"},350:function(t){t.exports=JSON.parse('{"fiat":{"USD":{"show":true,"name":"US Dollar"},"CNY":{"show":true,"name":"Renminbi"},"EUR":{"show":true,"name":"Euro"}},"foreign":{"BTC":{"show":true,"apiId":"bitcoin"},"ETH":{"show":true,"apiId":"ethereum"},"XRP":{"show":true,"apiId":"ripple"},"LTC":{"show":true,"apiId":"litecoin"},"KIN":{"show":true,"apiId":"kin"},"BAT":{"apiId":"basic-attention-token"},"BCH":{"apiId":"bitcoin-cash"},"LINK":{"apiId":"chainlink"},"MTL":{"apiId":"metal"},"OMG":{"apiId":"omisego"},"REP":{"apiId":"augur"},"SALT":{"apiId":"salt"},"ZRX":{"apiId":"0x"}},"native":{"XLM":{"show":true,"apiId":"stellar"},"CSM":{"show":true,"apiId":"citystates-medieval"},"MOBI":{"show":true,"apiId":"mobius"},"RMT":{"show":true,"apiId":"sureremit"},"SHX":{"show":true,"apiId":"stronghold-token"},"SLT":{"show":true,"apiId":"smartlands"},"TERN":{"show":true,"apiId":"ternio"},"WXT":{"show":true,"apiId":"wirex"},"GNT":{"apiId":"glitzkoin"},"REPO":{"apiId":"repo"}}}')},351:function(t){t.exports=JSON.parse('{"GAP5LETOV6YIE62YAM56STDANPRDO7ZFDBGSNHJQIYGGKSMOZAHOOS2S":{"alias":"tempo.eu.com","emit":[["EUR","EURT"]]},"GAREELUB43IRHWEASCFBLKHURCGMHE5IF6XSE7EXDLACYHGRHM43RFOX":{"alias":"ripplefox.com","emit":["CNY"]},"GCNY5OXYSY4FKHOPT2SPOQZAOEIGXB5LBYW3HVU3OWSTQITS65M5RCNY":{"alias":"fchain.io","emit":[["CNY","XCN"]]},"GCQTGZQQ5G4PTM2GL7CDIFKUBIPEC52BROAQIAPW53XBRJVN6ZJVTG6V":{"alias":"apay.io","emit":[["USD","USDT"]],"unpeg":true},"GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP":{"alias":"x.token.io","emit":["USD"],"unpeg":true},"GDSVWEA7XV6M5XNLODVTPCGMAJTNBLZBXOFNQD3BNPNYALEYBNT6CE2V":{"alias":"thewwallet.com","emit":[["USD","WSD"]],"unpeg":true},"GDUKMGUGDZQK6YHYA5Z6AY2G4XDSZPSZ3SW5UN3ARVMO6QSRDWP5YLEX":{"alias":"anchorusd.com","emit":["USD"]},"GA5ZSEJYB37JRC5AVCIA5MOP4RHTM335X2KGX3IHOJAPP5RE34K4KZVN":{"alias":"centre.io","emit":[["USD","USDC"]]},"GAEGOS7I6TYZSVHPSN76RSPIVL3SELATXZWLFO4DIAFYJF7MPAHFE7H4":{"alias":"apay.io","emit":["BCH"]},"GATEMHCCKCY67ZUCKTROYN24ZYT5GK4EQZ65JJLDHKHRUZI3EUEKMTCH":{"alias":"naobtc.com","emit":["BTC"],"unpeg":true},"GAUTUYY2THLF7SGITDFMXJVYH3LHDSMGEAKSBU267M2K7A3W543CKUEF":{"alias":"apay.io","emit":["BTC"]},"GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":{"alias":"apay.io","emit":["BAT","ETH","KIN","LINK","MTL","OMG","REP","SALT","ZRX"]},"GBETHKBL5TCUTQ3JPDIYOZ5RDARTMHMEKIO2QZQ7IOZ4YC5XV3C2IKYU":{"alias":"fchain.io","emit":["ETH"],"unpeg":true},"GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5":{"alias":"stellarport.io","emit":["BTC","ETH","XRP","LTC"],"unpeg":true},"GC5LOR3BK6KIOK7GKAUD5EGHQCMFOGHJTC7I3ELB66PTDFXORC2VM5LP":{"alias":"apay.io","emit":["LTC"]},"GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P":{"alias":"interstellar.exchange","emit":["BTC","ETH","XRP","LTC"]},"GCKA6K5PCQ6PNF5RQBF7PQDJWRHO6UOGFMRLK3DYHDOI244V47XKQ4GP":{"emit":["SLT"]},"GA6HCMBLTZS5VYYBCATRBRZ3BZJMAFUDKYYF6AH6MVCMGWMRDNSWJPIH":{"emit":["MOBI"]},"GDSTRSHXHGJ7ZIVRBXEYE5Q74XUVCUSEKEBR7UCHEUUEK72N7I7KJ6JH":{"emit":["SHX"]},"GDEGOXPCHXWFYY234D2YZSPEJ24BX42ESJNVHY5H7TWWQSYRN5ZKZE3N":{"emit":["RMT"]},"GDGQDVO6XPFSY4NMX75A7AOVYCF5JYGW2SHCJJNWCQWIDGOZB53DGP6C":{"emit":["TERN"]},"GCZNF24HPMYTV6NOEHI7Q5RJFFUI23JKUKY3H3XTQAFBQIBOHD5OXG3B":{"emit":["REPO"]},"GASBLVHS5FOABSDNW5SPPH3QRJYXY5JHA2AOA2QHH2FJLZBRXSG4SWXT":{"emit":["WXT"]},"GAFWA2DAM34MK3UVD34ECEHO5QIO2ILHLFOPJC33INPGUPLBC2EVNCSM":{"alias":"citystatesm.com","emit":["CSM"]},"GARFMAHQM4JDI55SK2FGEPLOZU7BTEODS3Y5QNT3VMQQIU3WV2HTBA46":{"emit":["GNT"]}}')},352:function(t,e,n){"use strict";const s=n(102),i=n(15),{__:o}=n(33),a=n(353),r=n(354),c=n(50);const l=[new r(n(355),o("by Cosmic.plus"),"https://cosmic.plus"),new r(n(356),o("Follow on Twitter"),"https://twitter.com/cosmic_plus"),new r(n(357),o("Follow on Reddit"),"https://reddit.com/r/cosmic_plus"),new r(n(358),o("Follow on Medium"),"https://medium.com/cosmic-plus"),new r(n(359),o("Chat on Telegram"),"https://t.me/cosmic_plus"),new r(n(360),o("Chat on Keybase"),"https://keybase.io/team/cosmic_plus"),new r(n(361),o("GitHub Repository"),"https://git.cosmic.plus"),new r(n(362),o("Contact by Email"),"mailto:mister.ticot@cosmic.plus"),new r(n(363),o("Donate Lumens"),a)],h=new s("\n<p>\n  <a onclick=%displayLicense>".concat(o("License"),"</a>\n  − <a onclick=%displayDisclaimer>").concat(o("Disclaimer"),"</a>\n  − <a onclick=%displayAbout>").concat(o("About"),"</a>\n</p>\n"),{displayLicense:()=>c.tabs.select("#license"),displayDisclaimer:()=>c.tabs.select("#disclaimer"),displayAbout:()=>c.tabs.select("#about")}),u=new class extends s{constructor(t,e){super('\n<footer id="footer" class="scrollable">\n  <div class="nobreak">%icons...</div>\n  %links\n</footer>\n    ',{icons:t,links:e})}}(l,h);i.append(document.body,u)},353:function(t,e,n){"use strict";const{CosmicLink:s}=n(115),{__:i}=n(33);t.exports=function(){const t=prompt("".concat(i("Donations are put to good use.")," ").concat(i("Thank you!"),"\n\n").concat(i("Enter an amount (in Lumens)"),":"));"0"===t||isNaN(+t)?confirm("".concat(i("Not a valid amount"),": ").concat(t)):t&&function(t){const e=i("Donation to Cosmic.plus");new s({memo:e,network:"public"}).addOperation("payment",{amount:t,destination:"tips*cosmic.plus"}).open()}(t)}},354:function(t,e,n){"use strict";const s=n(102);t.exports=class extends s{constructor(t,e,n){super('<a -ref=%link class="Icon">%image</a>'),this.image="string"==typeof t?new s(t):t,this.link.title=e,"function"==typeof n?this.link.onclick=n:"string"==typeof n&&(this.link.href=n,n.match(/^http/)&&(this.link.target="_blank",this.link.rel="noopener"))}}}}]);
//# sourceMappingURL=app.js.map