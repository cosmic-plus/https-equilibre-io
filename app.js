(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,n){"use strict";n(64),n(67),n(69),n(75),n(171);var r=n(15);n(16);var i,a,o=n(96),s=n(130),c=n(28),u=n(221),l=n(263),f=n(44).__,h=n(65),d=n(264),p=n(235),m=n(236),v=n(294),g=n(296),b=n(301),y=n(302),w=new s(n(319)),k=new s(n(320)),x=new s(n(321));function A(){i&&i.disconnect(),a&&a.disconnect()}function T(){var e,t;return r.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=R["stellar-public-key"])||R.error(f("Please enter an address.")),A(),R.info(f("Connecting to your account...")),l.$set({address:e}),(t=new p).enable(),n.prev=7,n.next=10,r.awrap(d.resolve(e));case 10:h.portfolio=n.sent,R.info("".concat(f("Fetching market data"),"...")),setTimeout((function(){return R.info("".concat(f('Sorry, it takes a while (^.^)"'),"..."))}),1e4),setTimeout((function(){return R.info("".concat(f("Almost there"),"..."))}),2e4),setTimeout((function(){return R.info("".concat(f("I'm running, I'm running"),"..."))}),3e4),h.portfolio.listen("open",(function(){C(),t.destroy()})),n.next=22;break;case 18:n.prev=18,n.t0=n.catch(7),t.destroy(),R.error(n.t0);case 22:case"end":return n.stop()}}),null,null,[[7,18]])}function C(){var e=h.portfolio,t=location.hash;D.remove("#welcome"),D.remove("#login"),D.remove("#demo"),D.add("#portfolio",f("Portfolio"),new g(e)),D.add("#rebalance",f("Rebalance"),new y(e)),D.add("#activity",f("Activity"),new v(e)),D.add("#settings",f("Settings"),new b),D.add("#logout",f("Logout"),(function(){location.replace(location.href.replace(/\?.*$/,"#login"))})),D.listen("select",(function(){if(D.selected){var e=D.selected.content;e.reflow&&e.reflow()}})),D.select(t),D.selected||D.select("#portfolio")}var S="GAWO2C52D57XBT7SQL6YB3XPHFLFD2J4Z5RN7HPFZSHXJMXH72HRXNV3";function E(){localStorage["target:".concat(S)]=O,location.href="?address=".concat(S)}var O='{"childs":[{"mode":"percentage","size":12.5,"asset":"BTC"},"CNY",{"mode":"percentage","size":12.5,"asset":"ETH"},"EUR",{"mode":"percentage","size":1.5625,"asset":"FRAS"},{"mode":"percentage","size":1.5625,"asset":"MOBI"},{"mode":"percentage","size":1.5625,"asset":"PEDI"},{"mode":"percentage","size":1.5625,"asset":"REPO"},{"mode":"percentage","size":1.5625,"asset":"RMT"},{"mode":"percentage","size":1.5625,"asset":"SHX"},{"mode":"percentage","size":1.5625,"asset":"SLT"},{"mode":"percentage","size":1.5625,"asset":"TERN"},"USD",{"mode":"percentage","size":12.5,"asset":"XLM"}]}';function P(){var e;return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(n.e(5).then(n.t.bind(null,358,7)).then((function(e){return e.default})));case 2:return(e=t.sent).register("equilibre.io","mister.ticot@cosmic.plus"),t.abrupt("return",e);case 5:case"end":return t.stop()}}))}var M=n(138),I=n(322);M.register(I.fiat,{type:"fiat",isTether:!0}),M.register(I.foreign,{type:"crypto",isTether:!0}),M.register(I.native,{type:"crypto",isTether:!1}),M.resolve(h.currency,{type:"fiat",isTether:!0}),n(206).register(n(323)),n(324);var D=h.tabs=new u({nav:o.header,selector:o.header,view:o.main});D.add("#welcome",f("Welcome"),k),D.add("#demo",f("Demo"),E),D.add("#login",f("Login"),o.loginTab),D.add("#license",null,w),D.add("#disclaimer",null,x),D.add("#about",null,k),o.demoLink.onclick=E,c.show(o.loginTab),D.select(null),D.select(location.hash),D.selected||(localStorage["PortfolioSummary.tab"]?D.select("#login"):D.select("#welcome"));var R=new m(o.loginForm,{onsubmit:T});R.dom.loginWithLedger.onclick=function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:return A(),R["stellar-public-key"]=null,e.next=4,r.awrap(Promise.all([n.e(4),n.e(2)]).then(n.t.bind(null,337,7)).then((function(e){return e.default})));case 4:return i=e.sent,R.info(f("Please open the Stellar App in your Ledger Wallet")),e.prev=6,e.next=9,r.awrap(i.connect());case 9:R["stellar-public-key"]=i.publicKey,T(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),R.error(e.t0);case 16:case"end":return e.stop()}}),null,null,[[6,13]])},R.dom.loginWithTrezor.onclick=function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:return A(),R["stellar-public-key"]=null,e.next=4,r.awrap(P());case 4:return a=e.sent,R.info(f("Please import your Trezor public key")),e.prev=6,e.next=9,r.awrap(a.connect());case 9:R["stellar-public-key"]=a.publicKey,T(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),R.error(e.t0);case 16:case"end":return e.stop()}}),null,null,[[6,13]])},l.address&&(D.select("#login"),R["stellar-public-key"]=l.address,T()),D.listen("select",(function(e){location.hash=e,window.scrollTo(0,0)}))},136:function(e,t,n){"use strict";n(133),n(203),n(135),n(176),n(166),n(204),n(282);var r=t;r.positive=function(e){return Math.max(0,e)},r.negative=function(e){return Math.min(0,e)},r.fixed7=function(e){return+Number(e).toFixed(7)},r.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},r.absoluteMin=function(e,t){return Math.abs(e)<=Math.abs(t)?e:t},r.arrayContains=function(e,t){return-1!==e.indexOf(t)},r.arrayRemove=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},r.arrayOnlyInFirst=function(e,t){return e.filter((function(e){return!r.arrayContains(t,e)}))},r.arraySum=function(e,t){return t?e.reduce((function(e,n){return e+n[t]}),0):e.reduce((function(e,t){return e+t}),0)},r.arrayScale=function(e,t,n){var i=r.arraySum(e,n);return i?n?e.map((function(e){return e[n]*t/i})):e.map((function(e){return e*t/i})):e.map((function(){return 0}))}},138:function(e,t,n){"use strict";n(129),n(133),n(131),n(135),n(176),n(66),n(142),n(64),n(190),n(67),n(69),n(75),n(274),n(132),n(171);var r=n(15);n(16);var i=n(14),a=n(61),o=n(60),s=n(63),c=n(26),u=n(62),l="https://www.xe.com/themes/xe/images/flags/svg/",f=".svg",h=n(144),d=n(68),p=n(275),m=n(233),v=n(136),g=v.fixed7,b=v.arrayContains,y=v.arrayRemove,w=v.arraySum,k=e.exports=function(e){function t(e,n){var r;return i(this,t),r=a(this,o(t).call(this)),n&&Object.assign(s(r),n),r.id=e,t.table[e]=s(r),r.image="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",r.type?(r.code=e,"fiat"===r.type?(t.fiats.push(s(r)),r.image="".concat(l).concat(e.toLowerCase()).concat(f),r.useGlobalPrice=!0):(t.cryptos.push(s(r)),r.type="crypto",(r.isTether||"XLM"===r.id)&&(r.useGlobalPrice=!0))):(r.code=e.replace(/:.*/,""),r.name=r.code,r.type="unknown"),r.anchors=new h,r.balances=new h,r.offers=new h,r.balances.mirror((function(e){r.watch(e,"amount",(function(){return r.compute("amount")})),r.watch(e,["buying","selling"],(function(){r.compute("liabilities")}))})),r.orderbook=m.forAsset(s(r)),r.define("price","globalPrice",(function(){return r.globalPrice||r.orderbook.price})),r.watch(r.orderbook,"price",(function(){return r.compute("price")})),r}return u(t,e),c(t,null,[{key:"resolve",value:function(e,n){return t.table[e]||new t(e,n)}}]),c(t,[{key:"maybeAddBalance",value:function(e){b(this.balances,e)||(this.balances.push(e),e.orderbook||e.streamPrice())}},{key:"maybeRemoveBalance",value:function(e){y(this.balances,e)}},{key:"getInfo",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.name&&"crypto"===this.type){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.awrap(p.crypto.info(this));case 4:this.info=e.sent,this.name=this.info.name,this.image=this.info.image.small;case 7:case"end":return e.stop()}}),null,this)}},{key:"getHistoricPrice",value:function(){var e=this;return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.historicPrice){t.next=2;break}return t.abrupt("return",this.historicPrice);case 2:return t.next=4,r.awrap(p.assetHistory(this));case 4:if(this.historicPrice=t.sent,this.historicPrice){t.next=7;break}return t.abrupt("return");case 7:return this.trap("price",(function(){e.historicPrice[e.historicPrice.length-1].price=e.price})),t.abrupt("return",this.historicPrice);case 9:case"end":return t.stop()}}),null,this)}}]),t}(d);k.define("amount","balances",(function(){return this.balances&&g(w(this.balances,"amount"))})),k.define("value",["amount","price"],(function(){return 0===this.amount?0:this.amount*this.price})),k.define("valueMin",["amountMin","price"],(function(){return this.amountMin?this.amountMin*this.price:0})),k.define("liabilities",["balances","price"],(function(){if(this.balances){var e=this.balances.reduce((function(e,t){return e+t.buying-t.selling}),0);return this.price*e}})),k.define("isSupported",["type","price"],(function(){return!("unknown"===this.type&&!this.price)})),k.register=function(e,t){for(var n in e){var r=Object.assign({},t,e[n]);k.resolve(n,r)}},k.getAllInfo=function(){Object.values(k.table).forEach((function(e){return e.getInfo()}))},k.refreshPrices=function(e){return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=7;break}return t.next=3,r.awrap(k.refreshCryptoPrices());case 3:return t.next=5,r.awrap(k.refreshFiatPrices());case 5:t.next=11;break;case 7:return t.next=9,r.awrap(k.refreshCryptoPrices(e.filter((function(e){return"crypto"===e.type})).map((function(e){return e.code}))));case 9:return t.next=11,r.awrap(k.refreshFiatPrices(e.filter((function(e){return"fiat"===e.type})).map((function(e){return e.code}))));case 11:case"end":return t.stop()}}))},k.refreshCryptoPrices=function(){var e,t,n=arguments;return r.async((function(i){for(;;)switch(i.prev=i.next){case 0:if((e=n.length>0&&void 0!==n[0]?n[0]:k.cryptos).length){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,r.awrap(p.crypto.prices(e));case 5:t=i.sent,e.forEach((function(e){e.useGlobalPrice&&(e.globalPrice=t[e.code])}));case 7:case"end":return i.stop()}}))},k.refreshFiatPrices=function(){var e,t,n=arguments;return r.async((function(i){for(;;)switch(i.prev=i.next){case 0:if((e=n.length>0&&void 0!==n[0]?n[0]:k.fiats).length){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,r.awrap(p.fiat.prices(e));case 5:t=i.sent,e.forEach((function(e){e.useGlobalPrice&&(e.globalPrice=t[e.code])}));case 7:case"end":return i.stop()}}))},k.table={},k.cryptos=[],k.fiats=[],setInterval(k.refreshCryptoPrices,6e4),setInterval(k.refreshFiatPrices,36e5),console.log(k.table)},177:function(e,t,n){"use strict";n(129),n(205),n(146);var r=n(14),i=n(61),a=n(60),o=n(63),s=n(26),c=n(62),u=this,l=n(144),f=n(68),h=n(206),d=n(138),p=n(233),m=n(65),v=n(136),g=v.fixed7,b=v.positive,y=v.negative,w=v.arrayRemove,k=function(e){function t(e){var n;r(this,t);var s=e.code,c=e.issuer;return(n=i(this,a(t).call(this))).code=s,n.anchor=h.resolve(c||"stellar.org"),n.id=t.makeId(s,c),t.table[n.id]=o(n),n.code in n.anchor.assets?(n.asset=n.anchor.assets[n.code],n.known=!0):(n.asset=d.resolve(n.id),n.known=!1),n.update(e),n.offers=new l,n}return c(t,e),s(t,null,[{key:"resolve",value:function(e,n){var r=t.makeId(e,n);return t.table[r]||new t({code:e,issuer:n})}},{key:"ingest",value:function(e){var n=t.recordToParams(e),r=t.resolve(n.code,n.issuer);return r.update(n),r.hasTrustline=!0,r}}]),s(t,[{key:"update",value:function(e){var t=e.amount,n=e.buying,r=e.selling;this.amount=t||0,this.buying=n||0,this.selling=r||0}},{key:"streamPrice",value:function(){this.orderbook||("XLM"===this.id?this.asset.project("price",this):(this.orderbook=p.forBalance(this,d.resolve("XLM")),this.orderbook.project("price",this),this.asset.orderbook.addChild(this.orderbook)))}}]),t}(f);k.table={},k.trap("hasTrustline",(function(){u.hasTrustline&&w(u.asset.target.opening,u.anchor.pubkey)})),k.define("isActive",["action","hasTrustline"],(function(){return this.hasTrustline?"closing"!==this.action:"opening"===this.action})),k.define("value",["amount","price"],(function(){return 0===this.amount?0:this.amount*this.price})),k.define("targetMin",["targetAmount"],(function(){return g(this.targetAmount*(1-m.balanceTargetDeviation))})),k.define("targetMax",["targetAmount"],(function(){return g(this.targetAmount*(1+m.balanceTargetDeviation))})),k.define("targetMinDiff",["amount","targetMin"],(function(){return g(this.targetMin-this.amount)})),k.define("targetMaxDiff",["amount","targetMax"],(function(){return g(this.targetMax-this.amount)})),k.define("sizeMin",["targetMinDiff"],(function(){return y(this.targetMinDiff)})),k.define("sizeMax",["targetMaxDiff"],(function(){return b(this.targetMaxDiff)})),k.define("underMin",["targetMinDiff"],(function(){return y(-this.targetMinDiff)})),k.define("overMax",["targetMaxDiff"],(function(){return b(-this.targetMaxDiff)})),k.makeId=function(e,t){if(t)return"".concat(e,":").concat(t);if("XLM"===e)return"XLM";throw new Error("Missing issuer for ".concat(e,"."))},k.fromRecord=function(e){var t=k.recordToParams(e);return new k(t)},k.recordToParams=function(e){var t=Object.create(e);return t.code="native"===e.asset_type?"XLM":e.asset_code,t.issuer=e.asset_issuer,t.amount=+e.balance,t.buying=+e.buying_liabilities,t.selling=+e.selling_liabilities,t},e.exports=k},206:function(e,t,n){"use strict";n(131),n(284),n(66),n(142),n(132);var r=n(14),i=n(61),a=n(60),o=n(63),s=n(26),c=n(62),u=n(191),l=n(25),f=n(68),h=n(138),d=function(e){function t(e,n){var s;return r(this,t),s=i(this,a(t).call(this)),n&&Object.assign(o(s),n),t.table[e]=o(s),s.pubkey=e,s.alias=u.all[e],s.name=l.shorter(s.alias||s.pubkey),s.assets={},s.emit&&s.emit.forEach((function(e){"string"!=typeof e?s.addAsset(e[0],e[1]):s.addAsset(e)})),s}return c(t,e),s(t,null,[{key:"resolve",value:function(e,n){return t.table[e]||new t(e,n)}}]),s(t,[{key:"addAsset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this.assets[t]=h.resolve(e),this.assets[t].anchors.push(this)}}]),t}(f);d.table={},d.register=function(e){for(var t in e)d.resolve(t,e[t])},d.prototype.tetherCode=function(e){for(var t in this.emit){var n=this.emit[t];if(n===e)return e;if(Array.isArray(n)&&n[0]===e)return n[1]}},e.exports=d},208:function(e,t,n){"use strict";var r=n(178);r.theme={rangeSelector:{selected:2,inputBoxBorderColor:"#e6e6e6",buttonTheme:{fill:"#f8f9fb",states:{hover:{fill:"#edf2f9"},select:{fill:"#7799d5",style:{color:"#fefefe"}}}}},chart:{backgroundColor:"#fefefe",style:{fontFamily:"'Source Sans Pro', arial, sans-serif",color:"#111"}},xAxis:{lineColor:"#e6e6e6",tickColor:"#e6e6e6"},yAxis:{lineColor:"#e6e6e6",tickColor:"#e6e6e6"},navigator:{maskFill:"rgba(119, 153, 213, 0.07)",outlineColor:"#cccccc",xAxis:{gridLineColor:"#e6e6e6"},series:{color:"#7799d5"}},tooltip:{style:{fontSize:"14px"}},scrollbar:{enabled:!1},credits:{enabled:!1},plotOptions:{column:{color:"#666",dataGrouping:{enabled:!1}},pie:{allowPointSelect:!0,animation:!1,cursor:"pointer",dataLabels:{style:{fontSize:"14px"}}},spline:{color:"#7799d5",dataGrouping:{enabled:!1}}}},r.setOptions(r.theme),r.pieColors=["rgba(231,  76,  60, 0.8)","rgba(230, 126,  34, 0.8)","rgba(242, 202,  39, 0.8)","rgba(46,  204, 112, 0.8)","rgba(52,  152, 219, 0.8)","rgba(155,  89, 182, 0.8)","rgba(231,  76,  60, 0.6)","rgba(230, 126,  34, 0.6)","rgba(242, 202,  39, 0.6)","rgba(46,  204, 112, 0.6)","rgba(52,  152, 219, 0.6)","rgba(155,  89, 182, 0.6)","rgba(231,  76,  60, 0.4)","rgba(230, 126,  34, 0.4)","rgba(242, 202,  39, 0.4)","rgba(46,  204, 112, 0.4)","rgba(52,  152, 219, 0.4)","rgba(155,  89, 182, 0.4)"],r.pieResponsive={rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!0},plotOptions:{pie:{showInLegend:!0,dataLabels:{format:"{point.percentage:.0f}%",distance:-20}}}}}]}},232:function(e,t,n){"use strict";n(129),n(202),n(200),n(165),n(166),n(201);var r=n(167),i=n(14),a=n(61),o=n(60),s=n(62),c=n(188),u=n(65),l=function(e){function t(){return i(this,t),a(this,o(t).apply(this,arguments))}return s(t,e),t}(c(Array));l.setCache=function(e,t){var n=JSON.stringify(r({},u.currency,t));localStorage["history:".concat(e)]=n},l.getCache=function(e){var t=localStorage["history:".concat(e)];if(t)return JSON.parse(t)[u.currency]},l.cut=function(e,t){var n=e.length-t;n>0&&e.splice(0,n)},l.latest=function(e){return e[e.length-1]},l.join=function(e,t){var n=t[0].time,r=e.findIndex((function(e){return e.time===n}));return e.slice(0,r).concat(t)},l.oneDay=864e5,l.today=function(){return l.roundTime(new Date)},l.roundTime=function(e){var t=new Date(e);return t.setUTCHours(0,0,0,0),+t},l.time=function(e){return+new Date(e)},l.missingDays=function(e){return l.numberToDays(l.today()-l.latest(e).time)},l.numberToDays=function(e){return e/l.oneDay},e.exports=l},233:function(e,t,n){"use strict";n(129),n(131),n(135),n(176),n(150),n(66),n(142),n(156),n(64),n(67),n(146),n(132);var r=n(15);n(16);var i=n(14),a=n(61),o=n(60),s=n(26),c=n(62),u=n(148),l=n(68),f=n(128),h=n(25).timeout,d=n(44).__,p=n(136).fixed7,m=e.exports=function(e){function t(e){var n;return i(this,t),n=a(this,o(t).call(this)),e.balance?(n.type="native",n.balance=e.balance,n.base=e.balance.asset,n.quote=e.quote,n.name="".concat(n.base.code,"/").concat(n.quote.code),n.offersCallBuilder=t.offersCallBuilder(n.balance),n.watch(n.quote,"price",(function(){return n.updateOffersPrices()}))):e.asset&&(n.type="agregated",n.base=e.asset,n.name="".concat(n.base.code," (").concat(d("Agregated"),")"),n.childs=[]),n.watch(n.base,"globalPrice",(function(){return n.compute("price")})),n}return c(t,e),s(t,null,[{key:"forBalance",value:function(e,n){if(e.asset!==n){var r=new t({balance:e,quote:n});return r.streamOffers(),r}}},{key:"forAsset",value:function(e){return new t({asset:e})}}]),s(t,[{key:"streamOffers",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,r.awrap(this.getOffers());case 3:return e.next=5,r.awrap(h(15e3));case 5:e.next=0;break;case 7:case"end":return e.stop()}}),null,this)}},{key:"getOffers",value:function(){var e;return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.awrap(this.offersCallBuilder.limit(200).call());case 3:e=t.sent,this.ingest(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"ingest",value:function(e){v(this.bids,e.bids)||(this.bids=g(e.bids,this.quote,this.balance,"bids")),v(this.asks,e.asks)||(this.asks=g(e.asks,this.quote,this.balance,"asks"))}},{key:"updateOffersPrices",value:function(){this.bids&&this.set("bids",b(this.bids,this.quote)),this.asks&&this.set("asks",b(this.asks,this.quote))}},{key:"mergeOffers",value:function(e){if(this.childs.length<2)this.set(e,this.childs[0]&&this.childs[0][e]);else{var t=this.childs.reduce((function(t,n){return n[e]?t.concat(n[e]):t}),[]);if(t.length){var n="bids"===e?function(e,t){return t.price-e.price}:function(e,t){return e.price-t.price},r=0,i=0,a=0;this.set(e,t.sort(n).map((function(e){var t=Object.assign({},e);return t.volume=r+=p(e.amount*e.price),t.baseVolume=i+=+e.amount,t.quoteVolume=a+=+e.quoteAmount,t})))}else this[e]=null}}},{key:"addChild",value:function(e){var t=this;this.childs.push(e),this.watch(e,"bids",(function(){return t.mergeOffers("bids")})),this.watch(e,"asks",(function(){return t.mergeOffers("asks")}))}}],[{key:"offersCallBuilder",value:function(e){var t=new f.Asset(e.code,e.anchor.pubkey),n=f.Asset.native();return u.resolve.server().orderbook(t,n)}}]),t}(l);function v(e,t){if(!e)return!1;if(e.length!==t.length)return!1;for(var n in e.length){if(e[n].amount!==t[n].amount)return!1;if(e[n].price!==t[n].price)return!1}return!0}function g(e,t,n,r){return e.forEach((function(e){e.volume=void 0,e.baseVolume=void 0,e.basePrice=+e.price,e.quoteAmount=+e.amount,e.quoteVolume=void 0,e.balance=n,e.side=r})),b(e,t)}function b(e,t){var n=0,r=0,i=0;return e.forEach((function(e){"asks"===e.side?e.quoteAmount=p(e.amount*e.basePrice):e.amount=p(e.quoteAmount/e.basePrice),e.price=p(e.basePrice*t.price),e.volume=n+=p(e.amount*e.price),e.baseVolume=i+=+e.amount,e.quoteVolume=r+=+e.quoteAmount})),e}m.define("bestBid","bids",(function(){return this.bids&&this.bids[0]&&this.bids[0].price})),m.define("bestAsk","asks",(function(){return this.asks&&this.asks[0]&&this.asks[0].price})),m.define("midpoint",["bestBid","bestAsk"],(function(){return(this.bestBid+this.bestAsk)/2})),m.define("price",["midpoint"],(function(){return this.base.globalPrice?this.midpoint:this.marketPrice()})),m.define("spread",["bestBid","bestAsk"],(function(){return this.bestAsk-this.bestBid})),m.define("spread%",["spread","bestAsk"],(function(){return 100*this.spread/this.bestAsk})),m.prototype.isFetched=function(){return this.childs?this.childs.reduce((function(e,t){return e&&t.isFetched()}),!0):null!=this.asks&&null!=this.bids},m.prototype.findOffer=function(e,t){var n,r=this[e],i=this.childs?this.childs.length:1,a={};for(var o in r){var s=r[o];if(!t||t(s)){var c=s.balance.anchor.pubkey;if(a[c]||(a[c]=!0,n=s),Object.keys(a).length===i)break}}return n},m.prototype.findAsk=function(e){return this.findOffer("asks",e)},m.prototype.findBid=function(e){return this.findOffer("bids",e)},m.prototype.marketPrice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bids",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=this.findOffer(e,(function(e){return e.quoteVolume>t}));return n?n.price:0}},235:function(e,t,n){"use strict";n(142),n(64),n(67);var r=n(15);n(16);var i=n(14),a=n(26),o=n(28),s=n(25).timeout,c=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.domNode=o.create("div",{className:"ClickWall",onclick:function(){return t.click()},hidden:!0}),Object.assign(this.domNode.style,e.style),document.body.insertBefore(this.domNode,document.body.firstChild),this.onclick=n.onclick,this.scrollbar=n.scrollbar,this.opacity=n.opacity,this.delay=n.delay||e.delay}return a(e,[{key:"click",value:function(){this.isEnabled&&this.onclick&&this.onclick()}},{key:"enable",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:if("hide"===this.scrollbar&&(this.htmlOverflow=document.documentElement.style.overflow,this.bodyOverflow=document.body.style.overflow,document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"),o.show(this.domNode),!this.opacity){e.next=5;break}return e.next=5,r.awrap(this.setOpacity(this.opacity));case 5:this.isEnabled=!0;case 6:case"end":return e.stop()}}),null,this)}},{key:"disable",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:if("hide"===this.scrollbar&&(document.documentElement.style.overflow=this.htmlOverflow,document.body.style.overflow=this.bodyOverflow),this.isEnabled=!1,!this.opacity){e.next=5;break}return e.next=5,r.awrap(this.setOpacity(0));case 5:o.hide(this.domNode);case 6:case"end":return e.stop()}}),null,this)}},{key:"destroy",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.awrap(this.disable());case 2:o.destroy(this.domNode);case 3:case"end":return e.stop()}}),null,this)}},{key:"setOpacity",value:function(){var e,t=arguments;return r.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:this.opacity,n.next=3,r.awrap(s(0));case 3:return Object.assign(this.domNode.style,{transition:"background ".concat(this.delay,"ms"),background:"rgba(0, 0, 0, ".concat(e,")")}),n.abrupt("return",s(this.delay));case 5:case"end":return n.stop()}}),null,this)}}]),e}();c.delay=500,c.style={position:"fixed",zIndex:999,top:0,width:"100%",height:"100%"},e.exports=c},236:function(e,t,n){"use strict";n(129),n(131),n(70),n(135),n(66),n(142),n(156),n(64),n(207);var r=n(154),i=n(14),a=n(26),o=n(61),s=n(60),c=n(63),u=n(62),l=n(68),f=n(25).setHiddenProperty,h=n(292),d=n(293),p=n(237),m=function(e){function t(){var e;i(this,t),e=o(this,s(t).call(this));for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return r.length&&"FORM"===r[0].tagName?(f(c(e),"domNode",r[0]),r[1]&&Object.assign(e.domNode,r[1])):f(c(e),"domNode",p.element.apply(p,["form"].concat(r))),e.domNode.addEventListener("submit",(function(){e.domNode.getAttribute("method")||event.preventDefault(),e.trigger("submit")})),t.bindInputs(c(e),e.domNode),f(c(e),"dom",d(e.domNode)),e.dom.status||(e.dom.status=[t.status()],p.append(e.domNode,e.dom.status[0])),e}return u(t,e),a(t,[{key:"submit",value:function(){this.domNode.submit()}},{key:"reset",value:function(){this.domNode.reset()}},{key:"report",value:function(e){var t=this.dom.status[0];if(t){t.className=e;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];p.rewrite.apply(p,[t].concat(r))}}},{key:"info",value:function(e){this.report("info",e,t.spinner())}},{key:"error",value:function(e){throw this.report("error",e.message||e),e instanceof Error?e:new Error(e)}}]),t}(l);function v(e,t){e.name&&h(t,e.name,e)}m.listen("change",(function(e){return e.report(null)})),m.bindInputs=function(e,t){p.walk(t,v,e)},m.enable=function(e,t){e.disabled=!1,Object.assign(e,t)},m.disable=function(e,t){e.enabled=!0,Object.assign(e,t)},m.hide=p.hide,m.show=p.show,m.element=p.element,m.status=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return m.element("p",{alias:"status"},e)},m.spinner=function(){return m.element("span",{className:"spinner"})},m.label=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.element.apply(m,["label"].concat(t))},m.button=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.length||(n=[e.value]),m.element.apply(m,["button",e].concat(r(n)))},m.control=function(e,t){var n=Object.assign({required:!0},t);return m.element(e,n)},m.textarea=function(e){return m.control("textarea",e)},m.selector=function(e){var t,n=m.control("select",e);if(n.values&&p.append.apply(p,[n].concat(r((t=n.values)instanceof Array?t.map((function(e){return p.element("option",{value:e},e)})):Object.keys(t).map((function(e){return p.element("option",{value:e},t[e])}))))),n.placeholder){var i=p.element("option",{value:"",disabled:!0,selected:!0,hidden:!0},n.placeholder);p.unshift(n,i),null!=e.selectedIndex&&e.selectedIndex++}return e.selectedIndex?n.selectedIndex=e.selectedIndex:e.value&&(n.value=e.value),n},m.input=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m.control("input",t);return n.type=e,n};["checkbox","color","date","email","file","hidden","image","month","number","password","radio","range","tel","text","time","url","week"].forEach((function(e){return m[e]=function(t){return m.input(e,t)}})),m.datetime=function(e){return m.input("datetime-local",e)},e.exports=m},237:function(e,t,n){"use strict";n(129),n(131),n(205),n(132);var r=Object.create(n(28));e.exports=r,r.element=function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i[0]&&i[0].constructor===Object&&void 0===i[0].domNode&&(t=i.shift()),r.create.apply(r,[e,t].concat(i))},r.walk=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];t.apply(void 0,[e].concat(i)),e.childNodes.forEach((function(e){return r.walk.apply(r,[e,t].concat(i))}))},r.unshift=function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)e.insertBefore(t+1<1||arguments.length<=t+1?void 0:arguments[t+1],e.childNodes[t])}},238:function(e,t,n){"use strict";n(239),n(64),n(67),n(304);var r=n(187),i=n(14),a=n(26),o=n(61),s=n(60),c=n(62),u=n(130),l=n(28),f=n(44).__,h=n(305),d=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n.title,a=n.content,c=n.actions;return(e=o(this,s(t).call(this,'\n<form class="Dialog" onsubmit="return false">\n\n  <h3>%title</h3>\n\n  <hr hidden=%hasNoTitle>\n\n  %content\n\n  <hr hidden=%hasNoContent>\n\n  <div class="Actions">\n    %toButton:actions...\n  </div>\n</form>\n    '))).title=r,e.content="string"==typeof n?n:a,e.actions=c,e.hasNoTitle=!e.title,e.hasNoContent=!e.content,e}return c(t,e),a(t,[{key:"toButton",value:function(e){var t=r(e,3),n=t[0],i=t[1],a=t[2],o=void 0===a?"button":a;return l.create("button",{type:o,onclick:i.bind(this)},n)}}]),t}(u);d.alert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new d(e),n=new h({content:t});return t.actions=[[f("OK"),function(){return n.close()}]],n.open(),new Promise((function(e){return n.listen("close",e)}))},d.confirm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new d(e),n=new h({content:t}),r=new Promise((function(e){n.listen("close",(function(){return e(!1)})),t.actions=[[f("OK"),function(){return e(!0)},"submit"],[f("Cancel"),function(){return e(!1)}]]}));r.finally((function(){return n.close()})),n.open();var i=t.domNode.querySelector("[autofocus]");return i&&i.focus(),r},e.exports=d},264:function(e,t,n){"use strict";n(133),n(156),n(64),n(190),n(67);var r=n(15);n(16);var i=n(14),a=n(61),o=n(60),s=n(63),c=n(26),u=n(62),l=n(172),f=n(148),h=n(144),d=n(68),p=n(25).timeout,m=n(44).__,v=n(138),g=n(177),b=n(65),y=n(285),w=n(286),k=n(136),x=k.arrayContains,A=k.arrayRemove,T=k.arraySum,C=k.arrayOnlyInFirst,S=function(e){function t(e){var n;return i(this,t),n=a(this,o(t).call(this)),console.log(s(n)),n.accountId=e,n.assets=new h,n.balances=new h,n.accountCallBuilder=t.accountCallBuilder(e),n.define("total","assets",(function(){var e=n.assets.filter((function(e){return e.isSupported}));return T(e,"value")})),n.assets.mirror((function(e){return n.watch(e,["value","isSupported"],(function(){return n.compute("total")}))})),n.new=!0,n}return u(t,e),c(t,null,[{key:"resolve",value:function(e){var n,i;return r.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.awrap(E());case 2:return a.next=4,r.awrap(f.resolve.address(e));case 4:if(!(n=a.sent).memo){a.next=7;break}throw new Error(m("Invalid federated address: shared account."));case 7:return a.next=9,r.awrap(f.resolve.isAccountEmpty(n.account_id));case 9:if(!a.sent){a.next=11;break}throw new Error(m("Empty account"));case 11:return i=new t(n.account_id),f.config.source=i.address=e,i.streamAccount(),a.abrupt("return",i);case 15:case"end":return a.stop()}}))}}]),c(t,[{key:"streamAccount",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,r.awrap(this.getAccount());case 3:return e.next=5,r.awrap(p(5e3));case 5:e.next=0;break;case 7:case"end":return e.stop()}}),null,this)}},{key:"getAccount",value:function(){var e;return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.awrap(this.accountCallBuilder.call());case 3:e=t.sent,this.ingest(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"ingest",value:function(e){var n,i;return r.async((function(a){for(;;)switch(a.prev=a.next){case 0:for(n in this.account=e,e.balances)i=g.ingest(e.balances[n]),this.maybeAddBalance(i),"XLM"===i.id&&(i.asset.amountMin=t.accountMinimumBalance(e));if(!this.new){a.next=11;break}return delete this.new,a.next=6,r.awrap(v.refreshPrices());case 6:return this.offers=y.forPortfolio(this),a.next=9,r.awrap(this.offers.stream());case 9:this.trigger("open"),v.getAllInfo();case 11:case"end":return a.stop()}}),null,this)}},{key:"maybeAddBalance",value:function(e){x(this.balances,e)||(this.balances.push(e),e.asset.maybeAddBalance(e)),this.maybeAddAsset(e.asset)}},{key:"maybeAddAsset",value:function(e){x(this.assets,e)||(this.assets.push(e),e.watch(this,"total",(function(){return e.compute("share")})),e.getInfo())}},{key:"maybeRemoveBalance",value:function(e){A(this.balances,e),e.asset.maybeRemoveBalance(e),this.maybeRemoveAsset(e.asset)}},{key:"maybeRemoveAsset",value:function(e){e.balances.length||A(this.assets,e)}}],[{key:"accountCallBuilder",value:function(e){return f.resolve.server().accounts().accountId(e)}}]),t}(d);function E(){var e;return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.resolve.horizon(),t.prev=1,t.next=4,r.awrap(l.get(e));case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(1),new Error(m("Can't connect to the Stellar blockchain"));case 9:case"end":return t.stop()}}),null,null,[[1,6]])}S.accountMinimumBalance=function(e){var t=2*(e.balances.length-1);return t+=Object.keys(e.data_attr).length,.5*(3+(t+=e.signers.length-1))},S.prototype.availableAssets=function(){var e=Object.values(v.table);return C(e,this.assets)},S.prototype.getHistory=function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.history){e.next=4;break}return e.next=3,r.awrap(w(this));case 3:this.history=e.sent;case 4:return e.abrupt("return",this.history);case 5:case"end":return e.stop()}}),null,this)},v.define("share","value",(function(){return b.portfolio&&this.value/b.portfolio.total})),e.exports=S},275:function(e,t,n){"use strict";n(133),n(131),n(200),n(135),n(165),n(150),n(276),n(201),n(66),n(156),n(64),n(67),n(132);var r=n(15);n(16);var i=t,a=n(172),o=n(134),s=n(65),c=n(232);function u(e,t){return"crypto"===e.type?i.crypto.history(e,t):"fiat"===e.type?i.fiat.history(e,t):void 0}function l(e,t){return a.get("https://api.coingecko.com/api/v3/".concat(e),{params:t})}function f(e,t){var n,i=arguments;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(n=i.length>2&&void 0!==i[2]?i[2]:{}).base=s.currency,"string"==typeof t?n.symbols=t:("EUR"===s.currency&&(t=t.filter((function(e){return"EUR"!==e}))),n.symbols=t.join(",")),n.source="equilibre.io",r.abrupt("return",a.get("https://api.exchangeratesapi.io/".concat(e),{params:n}).then((function(e){return"EUR"!==s.currency||e.data.start_at||(e.data.rates.EUR=1),e})));case 5:case"end":return r.stop()}}))}i.assetHistory=function(e){var t,n,i,a,o,s=arguments;return r.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:1e3,delete localStorage["prices.".concat(e.code)],!(n=c.getCache(e.id))){l.next=8;break}if(i=c.missingDays(n)){l.next=7;break}return l.abrupt("return",n);case 7:n.length&&(t=i+3);case 8:return l.next=10,r.awrap(u(e,t));case 10:if(a=l.sent){l.next=13;break}return l.abrupt("return");case 13:return o=n?c.join(n,a):a,c.cut(o,1e3),c.setCache(e.id,o),l.abrupt("return",o);case 17:case"end":return l.stop()}}))},i.crypto={},i.crypto.list=function(){var e,t;return r.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(l("coins/list"));case 2:return e=n.sent,t={},e.data.forEach((function(e){var n=e.symbol.toUpperCase();t[n]={apiId:e.id,name:e.name}})),n.abrupt("return",t);case 6:case"end":return n.stop()}}))},i.crypto.stellarNative=function(){var e;return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(l("exchanges/stellar_term"));case 2:return e=t.sent,t.abrupt("return",e.data.tickers.map((function(e){return e.coin_id})).filter((function(e){return e})));case 4:case"end":return t.stop()}}))},i.crypto.info=function(e){var t;return r.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(l("coins/".concat(e.apiId),{localization:!1,tickers:!1,market_data:!1,community_data:!1,developer_data:!1,sparkline:!1}));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},i.crypto.prices=function(e){var t,n,i,a;return r.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.map((function(e){return e.apiId})).join(","),n=s.currency.toLowerCase(),o.next=4,r.awrap(l("simple/price",{ids:t,vs_currencies:n}));case 4:return i=o.sent,a={},e.forEach((function(e){var t=i.data[e.apiId];t&&(a[e.code]=t[n])})),o.abrupt("return",a);case 8:case"end":return o.stop()}}))},i.crypto.history=function(e){var t,n,i,a,u=arguments;return r.async((function(f){for(;;)switch(f.prev=f.next){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:1e3,f.next=3,r.awrap(l("coins/".concat(e.apiId,"/market_chart"),{vs_currency:s.currency,days:Math.max(t,100)}));case 3:return n=f.sent,i=n.data.prices.map((function(e,t){return{time:e[0],price:e[1],volume:+o(n.data.total_volumes[t][1]/e[1])}})),a=c.today(),i[i.length-2].time===a?i.length=i.length-1:c.latest(i).time=a,t<100&&c.cut(i,t),f.abrupt("return",i);case 9:case"end":return f.stop()}}))},i.fiat={},i.fiat.prices=function(e){var t,n,i,a;return r.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.map((function(e){return e.code})),s.next=3,r.awrap(f("latest",t));case 3:for(a in n=s.sent,i=n.data.rates)i[a]=o(1/i[a],8);return s.abrupt("return",i);case 7:case"end":return s.stop()}}))},i.fiat.history=function(e){var t,n,i,a,u,l,h=arguments;return r.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=h.length>1&&void 0!==h[1]?h[1]:1e3,n=(new Date).toISOString().slice(0,10),(i=new Date(n)).setDate(i.getDate()-t),a=i.toISOString().slice(0,10),"EUR"!==s.currency||"EUR"!==e.id){d.next=7;break}return d.abrupt("return",[{time:c.today(),price:1}]);case 7:return d.next=9,r.awrap(f("history",e.code,{start_at:a,end_at:n}));case 9:return u=d.sent,l=Object.keys(u.data.rates).sort().map((function(t){return{time:c.time(t),price:+o(1/u.data.rates[t][e.code],8)}})),c.latest(l).time!==c.today()&&l.push({time:c.today(),price:c.latest(l).price}),d.abrupt("return",l);case 13:case"end":return d.stop()}}))}},285:function(e,t,n){"use strict";n(129),n(133),n(131),n(203),n(135),n(166),n(142),n(64),n(67),n(132),n(171);var r=n(63),i=n(154),a=n(15);n(16);var o=n(14),s=n(26),c=n(61),u=n(60),l=n(62),f=n(148),h=n(234),d=n(144),p=n(68),m=n(25).setHiddenProperty,v=n(25).day,g=n(138),b=n(177),y=n(136).fixed7,w=function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return l(t,e),s(t,[{key:"stream",value:function(){var e,t=this,n=arguments;return a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:15e3,r.abrupt("return",this.get().then((function(){return setTimeout((function(){return t.stream()}),e)})));case 2:case"end":return r.stop()}}),null,this)}},{key:"get",value:function(){var e;return a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.awrap(h(this.callBuilder,{limit:200}));case 3:e=t.sent,this.ingest(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"ingest",value:function(e){this.forEach((function(e){return e.alive=!1}));var t=e.map((function(e){return k.ingest(e)})).filter((function(e){return e}));this.splice.apply(this,[0,0].concat(i(t))),this.clean()}},{key:"clean",value:function(){for(var e=this.length-1;e>-1;e--){var t=this[e];t.alive||(this.splice(e,1),t.destroy())}}}],[{key:"forPortfolio",value:function(e){var n=t.forAccount(e.accountId);return m(n,"portfolio",e),n}},{key:"forAccount",value:function(e){var n=new t;return m(n,"accountId",e),m(n,"callBuilder",t.callBuilder(e)),n}},{key:"callBuilder",value:function(e){return f.resolve.server().offers("accounts",e)}}]),t}(d);w.prototype.listOutdated=function(){return this.filter((function(e){return e.outdated}))};var k=function(e){function t(e){var n;o(this,t),(n=c(this,u(t).call(this))).intern=x(e),t.table[n.intern]=r(n);var i=g.resolve("XLM"),a=e.buying.asset_code?e.buying:e.selling;return n.balance=b.resolve(a.asset_code,a.asset_issuer),n.asset=n.balance.asset,n.side=e.buying.asset_code?"buy":"sell",n.define("price","rawPrice","sell"===n.side?function(){return i.price*n.rawPrice}:function(){return i.price/n.rawPrice}),n.watch(i,"price",(function(){return n.compute("price")})),n.update(e),n.balance.offers.push(r(n)),n.asset.offers.push(r(n)),n.listen("destroy",(function(){delete t.table[n.intern],n.balance.offers.splice(n.balance.offers.indexOf(r(n)),1),n.asset.offers.splice(n.asset.offers.indexOf(r(n)),1)})),n}return l(t,e),s(t,null,[{key:"resolve",value:function(e){return t.table[x(e)]}},{key:"ingest",value:function(e){var n=t.resolve(e);if(!n)return new t(e);n.update(e)}}]),s(t,[{key:"update",value:function(e){Object.assign(this,e),this.alive=!0,this.rawPrice=e.price,this.compute("price"),this.rawAmount=e.amount,"buy"===this.side&&(this.amount=y(this.rawAmount*this.rawPrice)),this.date=v(this.last_modified_time),this.outdated=this.date!==v()}}]),t}(p);function x(e){return"".concat(e.id,"-").concat(e.last_modified_ledger)}k.table={},e.exports=w},286:function(e,t,n){"use strict";n(202),n(131),n(70),n(135),n(165),n(156),n(64),n(67),n(287),n(132),n(207);var r=n(15);n(16);var i=n(138),a=n(288),o=n(136).arraySum;function s(e){var t={};e.forEach((function(e){Object.keys(e.asset).forEach((function(e){return t[e]=!0}))}));var n=Object.keys(t).map(i.resolve);return n.forEach((function(e){return e.hasBeenHeld=!0})),n}function c(e){var t,n;return r.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t={},n=e.map((function(e){return e.getHistoricPrice()})),i.next=4,r.awrap(Promise.all(n));case 4:return e.forEach((function(e){e.historicPrice&&(t[e.id]=e.historicPrice)})),i.abrupt("return",t);case 6:case"end":return i.stop()}}))}function u(e,t){for(var n in t){var r=t[n],i=r.findIndex((function(t){return t.time>e}));i>1?t[n]=r.slice(i-1):-1===i&&(t[n]=r.slice(-1))}}function l(e,t){for(var n in e.price={},e.value={},e.total=0,e.asset)e.price[n]=t[n]?t[n][0].price:0,e.value[n]=e.asset[n]*e.price[n],e.total+=e.value[n];e.filtered={};var r=[];for(var i in e.value){var a=e.value[i]/e.total;a&&(e.filtered[i]=e.value[i],a<.03&&r.push(i))}r.length>1&&(e.filtered.others=o(r.map((function(t){return e.value[t]}))),r.forEach((function(t){return delete e.filtered[t]})))}e.exports=function(e){var t,n,i;return r.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.awrap(a(e));case 2:return t=o.sent,n=s(t),o.next=6,r.awrap(c(n));case 6:return i=o.sent,t.forEach((function(e){u(e.time,i),l(e,i)})),console.log(t),o.abrupt("return",t);case 10:case"end":return o.stop()}}))}},288:function(e,t,n){"use strict";n(133),n(131),n(200),n(289),n(201),n(142),n(64),n(67),n(69),n(290),n(146),n(132);var r=n(15);n(16);var i=n(148),a=n(234),o=n(138),s=n(177),c=n(232),u=n(136).fixed7;function l(e){var t,n,o,s,u=arguments;return r.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:100,n={time:c.today(),asset:{},balance:{}},e.balances.forEach((function(e){d(n,e,+e.amount)})),o=[n],s=Date.now()-c.oneDay*t,l.next=7,r.awrap((h=e.accountId,m=void 0,v=void 0,g=void 0,b=void 0,m=(p={filter:function(e){return f(o,e)},breaker:function(){return o[0].time<s}}).filter,v=p.breaker,g=i.resolve.server(),b=g.effects().forAccount(h).order("desc"),a(b,{filter:m,breaker:v})));case 7:return c.cut(o,t),l.abrupt("return",o);case 9:case"end":return l.stop()}var h,p,m,v,g,b}))}function f(e,t){for(var n=e[0],r=c.roundTime(t.created_at)-c.oneDay;r!==n.time;)(n={time:n.time-c.oneDay,asset:Object.assign({},n.asset),balance:Object.assign({},n.balance)}).time===b&&y(n),e.unshift(n);var i=h[t.type];i&&i(n,t)}e.exports=function(e){var t,n,i,a,o,s=arguments;return r.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:1e3,!(n=c.getCache(e.account.id))){u.next=7;break}if(i=c.missingDays(n)){u.next=6;break}return u.abrupt("return",n);case 6:n.length&&(t=i+1);case 7:return u.next=9,r.awrap(l(e,t));case 9:if(a=u.sent){u.next=12;break}return u.abrupt("return");case 12:return o=n?c.join(n,a):a,c.cut(o,1e3),c.setCache(e.account.id,o),u.abrupt("return",o);case 16:case"end":return u.stop()}}))};var h={};function d(e,t,n){p(e.balance,t.id,n);var r=w(t,e);p(e.asset,r.id,n)}function p(e,t,n){e[t]||(e[t]=0),e[t]=Math.max(0,u(e[t]+n))}function m(e,t){var n=t?"".concat(t,"_asset_code"):"asset_code",r=t?"".concat(t,"_asset_issuer"):"asset_issuer";return e[n]?s.resolve(e[n],e[r]):s.resolve("XLM")}h.trade=function(e,t){d(e,m(t,"bought"),-t.bought_amount),d(e,m(t,"sold"),+t.sold_amount)},h.account_credited=function(e,t){d(e,m(t),-t.amount)},h.account_debited=function(e,t){d(e,m(t),+t.amount)},h.trustline_removed=function(e,t){d(e,m(t),0)},h.trustline_created=function(e,t){var n=m(t);0!==e.balance[n.id]&&console.error("Balances mismatch: ",e.balance[n.id],t),delete e.balance[n.id];var r=w(n,e);0===e.asset[r.id]&&delete e.asset[r.id]},h.account_created=function(e){e.balance.XLM=0,e.asset.XLM=0};var v="GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG",g="GBSTRUSD7IRX73RQZBL3RQUH6KS3O4NYFY3QCALDLZD77XMZOPWAVTUK",b=15565824e5;function y(e){for(var t in e.asset){var n=t.substr(-56);if(n===v||n===g){var r=t.split(":")[0];p(e.asset,r,e.asset[t]),delete e.asset[t]}}}function w(e,t){if(e.asset.id.length<60)return e.asset;if(t.time>b)return e.asset;switch(e.anchor.pubkey){case v:case g:return o.table[e.code]||e.asset}return e.asset}},292:function(e,t,n){"use strict";n(203),n(168);var r=n(68);e.exports=function(e,t,n,r){var a=i[n.tagName];a?a(e,t,n,r):e[t]=n[r||"value"]};var i={};function a(e,t,n,i,a){i.addEventListener(e,(function(){t[n]=i[a],i.setCustomValidity("")})),t instanceof r&&t.link(n,i,a,null,{init:!1})}i.SELECT=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value";e[t]=n[r],-1!==i.SELECT.interactive.indexOf(r)&&a("change",e,t,n,r)},i.SELECT.interactive=["selectedIndex","selectedOptions","value"],i.TEXTAREA=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value";e[t]=n[r],"value"===r&&a("input",e,t,n,r)},i.INPUT=function(e,t,n,r){e[t]=n[r],"radio"===n.type?i.radio.apply(i,arguments):"checkbox"===n.type?i.checkbox.apply(i,arguments):r&&"value"!==r||a("input",e,t,n,r||"value")},i.radio=function(e,t,n){var r=function(){n.checked&&(e[t]=n.value)};n.addEventListener("change",r),r()},i.checkBox=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"checked";e[t]=n[r],"checked"===r&&a("change",e,t,n,r)}},293:function(e,t,n){"use strict";n(66),n(69),n(75);var r=n(25).timeout,i=n(237);function a(e,t){!function(e,t){e.className?(t[e.className]||(t[e.className]=[]),t[e.className].push(e)):e.alias?(t[e.alias]=e,delete t[e.alias]):e.name?t[e.name]=e:e.id&&(t[e.id]=e)}(e,t),function(e){if(!e.label||"OPTION"===e.tagName)return;var t=i.element("label",{for:e}),n=i.element("span",e.label);i.replace(e,t),i.append(t,n,e),delete e.label}(e),function(e){var t=e.validate;if(!t||!e.hasProperty("oninput"))return;e.addEventListener("input",(function(){e.setCustomValidity(""),r(0).then((function(){return function(e,t){try{t(e.value)}catch(t){e.setCustomValidity(t.message),e.reportValidity(),console.error(t)}}(e,t)}))})),delete e.validate}(e)}e.exports=function(e){var t={};return i.walk(e,a,t),t}},294:function(e,t,n){"use strict";n(129);var r=n(14),i=n(61),a=n(60),o=n(62),s=n(130),c=n(44).__,u=n(295),l=n(65);e.exports=function(e){function t(e){var n;return r(this,t),(n=i(this,a(t).call(this,'\n<section class="ActivityGui">\n  <h2>'.concat(c("Activity"),'</h2>\n\n  %table\n\n  <p class="note">\n    ').concat(c("All orders are passed against Stellar Lumens (XLM)."),"\n    ").concat(c("For your comfort, prices are displayed in their %%globalCurrency equivalent."),"\n    ").concat(c("However, those converted values will change according to XLM price movement."),"\n  </p>\n\n</section>\n    ")))).portfolio=e,n.table=new u(e),n.globalCurrency=l.currency,n}return o(t,e),t}(s)},295:function(e,t,n){"use strict";n(129),n(131),n(66),n(146),n(168),n(132);var r=n(63),i=n(14),a=n(26),o=n(61),s=n(60),c=n(62),u=n(130),l=n(134),f=n(148).CosmicLink,h=n(44).__,d=n(65);e.exports=function(e){function t(e){var n;return i(this,t),(n=o(this,s(t).call(this,'\n<section class="ActiveOffersTable">\n  <table>\n    <tr>\n      <th class="name">'.concat(h("Name"),'</th>\n      <th align="left">').concat(h("Anchor"),'</th>\n      <th align="left">').concat(h("Direction"),'</th>\n      <th align="right">').concat(h("Amount"),'</th>\n      <th align="right">').concat(h("Price"),' (%globalCurrency)</th>\n    </tr>\n    %toOfferRow:offers...\n    <tr><td colspan="5" align="center" onclick=%cancelOffers>\n      <h3>').concat(h("Cancel All"),"</h3>\n    </td></tr>\n  </table>\n</section>\n    ")))).portfolio=e,n.offers=e.offers,n.globalCurrency=d.currency,n}return c(t,e),a(t,[{key:"toOfferRow",value:function(e){return new p(e)}},{key:"cancelOffers",value:function(){var e=this;if(this.offers.length){var t={memo:"Equilibre.io",network:"public",maxTime:"+5",source:this.portfolio.accountId},n=new f(t);this.offers.forEach((function(e){n.addOperation("manageOffer",{offerId:e.id,amount:0})})),n.open().listen("destroy",(function(){e.portfolio.getAccount(),e.portfolio.offers.get()}))}}}]),t}(u);var p=function(e){function t(e){var n;return i(this,t),(n=o(this,s(t).call(this,'\n<tr>\n  <td>\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td>%anchor</td>\n  <td>%side</td>\n  <td align="right">%nice:amount</td>\n  <td align="right">%nice:price</td>\n</tr>\n    '))).offer=e,e.project(["amount","price"],r(n)),n.name=e.balance.code,n.side="buy"===e.side?h("Buy"):h("Sell"),n.anchor=e.balance.anchor.name,e.asset.link("image",r(n)),n}return c(t,e),a(t,[{key:"nice",value:function(e){return l(e)}}]),t}(u)},296:function(e,t,n){"use strict";n(129);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(63),c=n(62),u=n(130),l=n(134),f=n(221),h=n(44).__,d=n(297),p=n(298),m=n(299),v=n(300),g=n(65);e.exports=function(e){function t(e){var n;r(this,t),(n=a(this,o(t).call(this,"\n<section><h2>".concat(h("Portfolio"),': %total %currency</h2>\n\n  %nav\n  <section>%view</section>\n\n  %priceChart\n\n  <p class="note">\n    ').concat(h("Anchor prices are from Stellar DEX")," /\n    ").concat(h("Global prices are from %%coingecko when available."),"\n  </p>\n\n</section>")))).portfolio=e,e.project("total",s(n),(function(e){return l(e,2)})),n.currency=g.currency,n.coingecko=new u('<a target="_blank" rel="noopener" href="https://coingecko.com">coingecko</a>'),n.table=new v(e),n.project("selected",n.table),n.table.project("selected",s(n)),n.pieChart=new p(e),n.project("selected",n.pieChart),n.pieChart.project("selected",s(n)),n.trap("selected",(function(){return n.maybeDrawPriceChart()})),n.historyChart=new m(e);var i=n.overview=new f;return i.add("table",h("Balances"),n.table),i.add("chart",h("Repartition"),n.pieChart),i.add("history",h("History"),n.historyChart),i.project(["nav","view"],s(n)),i.listen("select",(function(){return n.reflow()})),i.listen("select",(function(e){return localStorage["PortfolioSummary.tab"]=e})),i.select(localStorage["PortfolioSummary.tab"]),i.selected||i.select("table"),n}return c(t,e),i(t,[{key:"reflow",value:function(){if(this.overview.selected){var e=this.overview.selected.content;e.reflow&&e.reflow()}}},{key:"maybeDrawPriceChart",value:function(){this.priceChart&&this.priceChart.destroy();var e=this.selected;e&&(e.isTether||e.apiId)&&e.code!==g.currency?this.priceChart=new d(e):this.priceChart=null}}]),t}(u)},297:function(e,t,n){"use strict";n(129),n(135);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(62),c=n(178);n(208);var u=n(130),l=n(134),f=n(44).__,h=n(65);e.exports=function(e){function t(e){var n;return r(this,t),(n=a(this,o(t).call(this,"\n      <section><h3>".concat(e.code," ").concat(f("to")," ").concat(h.currency,"</h3>\n        <div -ref=%container><p>").concat(f("Loading..."),"</p></div>\n      </section>\n    ")))).asset=e,e.getHistoricPrice().then((function(e){return n.drawChart(e)})),n.listen("destroy",(function(){return n.chart&&n.chart.destroy()})),n}return s(t,e),i(t,[{key:"drawChart",value:function(e){this.chart=c.stockChart(this.container,{yAxis:[{labels:{align:"left"},height:"80%",resize:{enabled:!0}},{labels:{align:"left"},top:"80%",height:"20%",offset:0}],series:[{type:"spline",name:"Price",data:e.map((function(e){return[e.time,+l(e.price)]}))},{type:"column",name:"Volume",data:e.map((function(e){return[e.time,e.volume]})),yAxis:1}]})}}]),t}(u)},298:function(e,t,n){"use strict";n(129),n(133),n(135),n(150),n(205);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(62),c=n(178);n(208);var u=n(130),l=n(134),f=n(44).__,h=n(65);function d(e){var t=Object.create(e);return t.y=+l(e.value,2),t.niceAmount=+l(e.amount),t.nicePrice=+l(e.price),t}e.exports=function(e){function t(e){var n;return r(this,t),(n=a(this,o(t).call(this,'\n<div class="PortfolioPieChart">\n  <h3>'.concat(f("Repartition by Asset"),'</h3>\n\n  <div -ref=%container align="center"></div>\n</div>\n    ')))).portfolio=e,n.watch(n.portfolio,"total",(function(){return n.draw()})),n.listen("destroy",(function(){return n.chart&&n.chart.destroy()})),n}return s(t,e),i(t,[{key:"reflow",value:function(){this.chart&&this.chart.reflow()}},{key:"draw",value:function(){var e=this;this.chart&&this.chart.destroy(),this.chart=c.chart(this.container,{colors:c.pieColors,responsive:c.pieResponsive,title:"",legend:{enabled:!1},chart:{type:"pie"},tooltip:{pointFormat:"\n".concat(f("Amount"),": {point.niceAmount} {point.code}<br>\n").concat(f("Price"),": {point.nicePrice} ").concat(h.currency,"<br>\n<b>").concat(f("Value"),": {point.y} ").concat(h.currency,"</b>\n")},plotOptions:{pie:{dataLabels:{format:"{point.niceAmount} {point.code}<br>({point.percentage:.0f}%)"},point:{events:{select:function(t){return e.selected=t.target.options.asset},legendItemClick:function(){return!1}}}}},series:[{name:f("Amount"),colorByPoint:!0,ignoreHiddenPoint:!0,data:this.portfolio.assets.filter((function(e){return e.value})).map(d).sort((function(e,t){return t.y-e.y}))}]})}}]),t}(u)},299:function(e,t,n){"use strict";n(129),n(133),n(131),n(135),n(150),n(190),n(132),n(171);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(62),c=n(178);n(208);var u=n(130),l=n(134),f=n(44).__,h=n(138),d=n(65);e.exports=function(e){function t(e){var n;return r(this,t),(n=a(this,o(t).call(this,'\n<div class="PortfolioHistoryChart">\n  <h3>'.concat(f("Portfolio Historical Value"),"</h3>\n\n  <div -ref=%container>\n    <p>\n      ").concat(f("Downloading historical data..."),'\n      <span class="spinner"></span>\n    </p>\n    <p>\n      ').concat(f("The very first time, it may take about a minute."),"\n  </div>\n\n</div>\n    ")))).portfolio=e,n.portfolio.getHistory().then((function(e){return n.drawChart(e)})),n.listen("destroy",(function(){return n.chart&&n.chart.destroy()})),n}return s(t,e),i(t,[{key:"reflow",value:function(){var e=this;this.chart&&(this.hasBeenReflown||setTimeout((function(){return e.chart.update({rangeSelector:{enabled:!0}})})),this.chart.reflow()),this.hasBeenReflown=!0}},{key:"drawChart",value:function(e){var t=this.historyToSeries(e);this.chart=c.stockChart(this.container,{chart:{type:"area"},navigator:{series:{data:e.map((function(e){return[e.time,+l(e.total)||null]}))}},tooltip:{shared:!0,split:!1,pointFormat:'\n<span style="color:{point.color}"></span>\n{series.name}: {point.percentage:.0f}%\n<br>',footerFormat:"<b>Total: {point.total} ".concat(d.currency,"</b>")},yAxis:[{labels:{align:"left",formatter:function(){return"".concat(this.value," ").concat(d.currency)}},resize:{enabled:!0}}],plotOptions:{series:{},area:{stacking:"normal",connectNulls:!0,lineWidth:0,states:{hover:{enabled:!1},inactive:{enabled:!1}}}},series:t,colors:c.pieColors}),this.hasBeenReflown||this.chart.update({rangeSelector:{enabled:!1}})}},{key:"historyToSeries",value:function(e){var t=[],n=Object.values(h.table).filter((function(e){return e.hasBeenHeld}));return n.sort((function(e,t){return t.value-e.value})),n.forEach((function(n){var r=!0,i=e.map((function(e){var t=+l(e.filtered[n.id],2)||null;return t&&(r=!1),[e.time,t]}));r||t.push({name:n.id,data:i})})),t.push({name:f("Others"),color:"#DDD",data:e.map((function(e){return[e.time,+l(e.filtered.others,2)]}))}),t}}]),t}(u)},300:function(e,t,n){"use strict";n(129),n(179),n(70),n(150),n(66),n(64),n(146),n(168),n(207);var r=n(63),i=n(14),a=n(26),o=n(61),s=n(60),c=n(62),u=n(130),l=n(28),f=n(134),h=n(44).__;e.exports=function(e){function t(e){var n;return i(this,t),(n=o(this,s(t).call(this,'\n<table class="PortfolioTable">\n  <tr>\n    <th class="name">'.concat(h("Name"),'</th>\n    <th align="left">').concat(h("Anchor"),'</th>\n    <th align="right">').concat(h("Amount"),'</th>\n    <th align="right">').concat(h("Price"),'</th>\n    <th align="right">').concat(h("Value"),"</th>\n  </tr>\n  %rows...\n</table>\n")))).portfolio=e,n.rows=e.assets.mirror((function(e){return n.toAssetRow(e)})),n.watch(e,"total",(function(){return n.sort()})),n.trap("selected",(function(){return n.onselect(n.selected)})),n}return c(t,e),a(t,[{key:"toAssetRow",value:function(e){var t=this,n=new d(e);return n.domNode.onclick=function(){t.selected===n.asset?t.selected=null:t.selected=n.asset},n}},{key:"sort",value:function(){this.rows.sort((function(e,t){return t.asset.value-e.asset.value}))}},{key:"onselect",value:function(e){this.selectedRow&&this.selectedRow.simpleView(),this.selectedRow=this.rows.find((function(t){return t.asset===e})),this.selectedRow&&this.selectedRow.detailledView()}}]),t}(u);var d=function(e){function t(e){var n;i(this,t),(n=o(this,s(t).call(this,'\n<tr %class>\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="left">\n    <div hidden=%simple>%anchors...</div>\n    <div class=%mode>%anchorTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%amounts...</div>\n    <div class=%mode>%amountTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%prices...</div>\n    <div class=%mode title=%priceDetails>%priceTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%values...</div>\n    <div class=%mode>%valueTotal</div>\n  </td>\n</tr>\n    '))).asset=e,n.name=e.code,n.anchors=e.balances.mirror((function(e){return m(e.anchor,"name")})),n.amounts=e.balances.mirror((function(e){return m(e,"amount",f)})),n.prices=e.balances.mirror((function(e){return n=m(t=e,"price",f),t.trap("orderbook",(function(){t.orderbook&&t.orderbook.trap(["bestAsk","bestBid","spread%"],(function(){n.title=v(t.orderbook)}))})),n;var t,n})),n.values=e.balances.mirror((function(e){return m(e,"value",(function(e){return f(e,2)}))})),e.link("image",r(n)),e.link("amount",r(n),"amountTotal",f),e.link("price",r(n),"priceTotal",f),e.link("value",r(n),"valueTotal",(function(e){return f(e,2)})),e.balances.feed(r(n),"anchorHeader",p);var a=n.asset.orderbook;return n.define("priceDetails","orderbook",(function(){return v(a)})),n.watch(a,["bestAsk","bestBid","spread%"],(function(){n.compute("priceDetails")})),n.simpleView(),n}return c(t,e),a(t,[{key:"simpleView",value:function(){this.simple=!0,this.class="",this.mode="",this.anchorTotal=this.anchorHeader}},{key:"detailledView",value:function(){this.simple=!1,this.class="selected",this.mode="footer",this.anchorTotal="Total"}}]),t}(u);function p(e){return 1===e.length?e[0].anchor.name:"".concat(h("multiple")," (").concat(e.length,")")}function m(e,t,n){var r=l.create("div",null,e[t]);return e.link(t,r,"textContent",n),r}function v(e){return"XLM"===e.base.code?"":"\nBuy: ".concat(f(e.bestBid)," - Sell: ").concat(f(e.bestAsk)," - Spread: ").concat(f(e["spread%"],2),"%\n  ")}},301:function(e,t,n){"use strict";n(129);var r=n(63),i=n(14),a=n(61),o=n(60),s=n(62),c=n(130),u=n(44).__,l=n(236),f=n(65),h={us:"English",fr:"Franais"},d=["AUD","BRL","CAD","CHF","CNY","CZK","DKK","EUR","GBP","HKD","HUF","IDR","ILS","INR","JPY","KRW","MXN","MYR","NOK","NZD","PHP","PLN","RUB","SEK","SGD","THB","TRY","USD","ZAR"],p=function(e){function t(){var e;return i(this,t),(e=a(this,o(t).call(this,"\n      <section><h2>".concat(u("Settings"),"</h2>\n        <section><h3>").concat(u("General Settings"),"</h3>\n          <hr>\n          %general\n        </section>\n      </section>\n    ")))).general=new m(f),e}return s(t,e),t}(c),m=function(e){function t(e){var n;return i(this,t),n=a(this,o(t).call(this,l.selector({label:u("Language"),name:"language",values:h}),l.selector({label:u("Currency"),name:"currency",values:d}))),e.project(["currency","language"],r(n)),n.project(["currency","language"],e),n.listen("change",(function(){return location.reload()})),n}return s(t,e),t}(l);e.exports=p},302:function(e,t,n){"use strict";n(64),n(67),n(168);var r=n(15);n(16);var i=n(14),a=n(26),o=n(61),s=n(60),c=n(63),u=n(62),l=n(130),f=n(44).__,h=n(238),d=n(306),p=n(313),m=n(316),v=n(317);e.exports=function(e){function t(e){var n;i(this,t),(n=o(this,s(t).call(this,'\n<section class="RebalanceGui">\n  <h2>'.concat(f("Rebalance"),"</h2>\n\n  %table\n\n  %controls\n\n</section>\n    ")))).portfolio=e;var r="target:".concat(e.account.id),a=localStorage[r];return n.target=d.forPortfolio(e,a),n.target.link("json",localStorage,r,null,{init:!1}),n.target.json=n.target.toJson(),n.table=new v(n.target),n.table.project("selected",c(n)),n.project("selected",n.table),n.controls=new m(n.target),n.trap("selected",(function(){n.selected&&n.showTargetSetup(n.selected)})),n}return u(t,e),a(t,[{key:"showTargetSetup",value:function(e){var t,n;return r.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=new p(e),n=h.confirm({content:t}),i.next=4,r.awrap(n);case 4:if(!i.sent){i.next=8;break}t.confirm(),i.next=9;break;case 8:t.cancel();case 9:this.selected=null,e.computeAll();case 11:case"end":return i.stop()}}),null,this)}}]),t}(l)},305:function(e,t,n){"use strict";n(129),n(131),n(142),n(64),n(67),n(132);var r=n(15);n(16);var i=n(14),a=n(26),o=n(61),s=n(60),c=n(62),u=n(130),l=n(235),f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),e=o(this,s(t).call(this,'\n<div class="Modal" %style %hidden>%content</div>\n    ')),Object.assign(e.style,t.style),e.hidden=!0,e.content=n.content,e.trap(t.styleParams,(function(t){return e.style[t.key]=t.value})),t.styleParams.forEach((function(t){return e[t]=n[t]})),document.body.insertBefore(e.domNode,document.body.firstChild),e}return c(t,e),a(t,[{key:"setPosition",value:function(){var e={x:0,y:0};this.left||this.right||(this.style.left="50%",e.x="-50%"),this.top||this.bottom||(this.style.bottom="50%",e.y="50%"),this.style.transform="translate(".concat(e.x,", ").concat(e.y,")")}},{key:"open",value:function(){var e=this;return r.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.clickWall.enable(),this.hidden=!1,this.setPosition(),n.next=5,r.awrap(t.shadow.enable());case 5:t.shadow.onclick=function(){return e.close()},t.clickWall.disable(),this.trigger("open");case 8:case"end":return n.stop()}}),null,this)}},{key:"close",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.clickWall.enable(),this.hidden=!0,e.next=4,r.awrap(t.shadow.disable());case 4:t.clickWall.disable(),this.trigger("close"),this.destroy();case 7:case"end":return e.stop()}}),null,this)}}]),t}(u);f.styleParams=["height","width","top","right","bottom","left","padding"],f.style={zIndex:1e3,position:"fixed"},f.shadow=new l({scrollbar:"hide",opacity:.3,delay:300}),f.clickWall=new l,f.clickWall.domNode.style.zIndex="2000",e.exports=f},306:function(e,t,n){"use strict";n(129),n(133),n(179),n(202),n(131),n(135),n(165),n(150),n(166),n(66),n(156),n(146),n(132);var r=n(154),i=n(14),a=n(26),o=n(61),s=n(60),c=n(63),u=n(62),l=n(144),f=n(68),h=n(138),d=n(177),p=n(307),m=n(312),v=n(136),g=v.arrayContains,b=v.arrayRemove,y=v.arraySum,w=v.fixed7,k=v.positive,x=function(e){function t(e){var n;return i(this,t),n=o(this,s(t).call(this)),e?(n.asset=e,n.mode="ignore",n.order=p.rebalance(c(n)),e.target=c(n),n.watch(e,"value",(function(){return n.compute("valueDiff")})),n.watch(e,"price",(function(){!n.asset.amount&&n.size&&n.computeAll()})),n.opening=[],n.closing=[],"XLM"===e.id&&(n.mode="weight",n.size=1)):(n.childs=new l,n.childs.listen("add",(function(e){return e.parent=c(n)})),n.childs.listen("change",(function(){return n.computeAll()}))),n.trap("size",(function(){n.size&&(n.size=k(n.size),"percentage"===n.mode&&(n.size=Math.min(100,n.size))),n.computeAll()})),n}return u(t,e),a(t,[{key:"root",get:function(){return this.parent?this.parent.root:this}}]),t}(f);x.define("name",["group","asset"],(function(){return this.group||this.asset.id})),x.define("modified",["json"],(function(){return this.hasChanged()})),x.define("valueDiff",["value","asset"],(function(){return this.asset&&this.value-this.asset.value})),x.define("valueDiffP","valueDiff",(function(){return this.value?this.valueDiff/this.value:null})),x.define("amountDiff",["amount"],(function(){return w(this.amount-this.asset.amount)})),x.define("amountDelta",["amountDiff"],(function(){return Math.abs(this.amountDiff)})),x.define("share",null,(function(){return this.value/this.root.portfolio.total})),x.define("shareDiff",["share"],(function(){return this.share-this.asset.share})),x.prototype.computeAll=function(){if(this.parent)this.root.computeAll();else if(this.portfolio&&this.portfolio.total){try{this.error=null,this.value=this.portfolio.total,this.compute("modified"),m.apply(this)}catch(e){this.error=e.message,console.error(e)}this.trigger("update")}},x.prototype.addAsset=function(e){if(!this.childs)throw new Error("Target is not a group: ",t);if(e.target)throw new Error("Asset already has a target: ",e);var t=new x(e);return t.parent=this,e.anchors.filter((function(e){return!e.unpeg})).forEach((function(e){return t.addAnchor(e)})),this.childs.push(t),t.mode="weight",t.size=1,t},x.prototype.addAnchor=function(e){var t=e.tetherCode(this.asset.code),n=e.pubkey,r=d.resolve(t,n);"closing"===r.action?(b(this.closing,n),r.action=null):(this.root.portfolio.maybeAddBalance(r),this.opening.push(n),r.action="opening"),this.root.compute("modified"),this.order.refresh()},x.prototype.removeAnchor=function(e){var t=e.tetherCode(this.asset.code),n=e.pubkey,r=d.resolve(t,n);"opening"===r.action?(this.root.portfolio.maybeRemoveBalance(r),b(this.opening,n),r.action=null):(this.closing.push(n),r.action="closing"),this.root.compute("modified"),this.order.refresh()},x.sortChilds=function(e){return e.childs.slice().sort((function(e,t){return e.name.localeCompare(t.name)}))},x.forPortfolio=function(e,t){var n=t?x.fromJson(t):new x;return n.portfolio=e,e.target=n,n.watch(e,"total",(function(){return n.computeAll()})),e.assets.forEach((function(e){!n.childs.find((function(t){return e===t.asset}))&&e.isSupported&&n.childs.push(new x(e))})),n.childs.forEach((function(t,r){e.assets.find((function(e){return e===t.asset}))&&t.asset.isSupported||n.childs.splice(r,1)})),e.assets.listen("add",(function(e){e.isValid&&n.childs.push(new x(e))})),e.assets.listen("remove",(function(e){var t=n.childs.findIndex((function(t){return t.asset===e}));n.childs.splice(t,1)})),n},x.fromJson=function(e){var t=JSON.parse(e),n=x.fromObject(t);return n.json=e,n},x.prototype.toJson=function(e){var t=this.toObject();return JSON.stringify(t,null,e&&2)},x.prototype.hasChanged=function(){return this.toJson()!==(this.json||'{"childs":[]}')},x.fromObject=function(e){"string"==typeof e&&(e={asset:e});var t=e.asset&&h.resolve(e.asset),n=new x(t);if(n.size=e.size,n.mode=e.mode,"equal"===n.mode&&(n.mode="weight"),"skip"===n.mode&&(n.mode="ignore"),n.asset&&"XLM"===n.asset.id&&"ignore"===n.mode&&(n.mode="weight",n.size=1),n.mode||(n.mode="weight"),null==n.size&&"weight"===n.mode&&(n.size=1),e.childs){var i;n.group=e.group;var a=e.childs.map((function(e){return x.fromObject(e)})),o=a.filter((function(e){return"percentage"===e.mode}));o.length&&!a.find((function(e){return"weight"===e.mode}))&&100!==y(o,"size")&&o.forEach((function(e){return e.mode="weight"})),(i=n.childs).push.apply(i,r(a))}else{var s=n.asset.balances;e.opening&&(n.opening=e.opening),e.closing&&(n.closing=e.closing),s.forEach((function(e){var t=e.anchor.pubkey;g(n.closing,t)?e.action="closing":b(n.opening,t)})),n.closing.forEach((function(e){s.find((function(t){return t.anchor.pubkey===e}))||b(n.closing,e)})),s.length||(t.target=null)}return n},x.prototype.toObject=function(){if("ignore"!==this.mode){var e={mode:this.mode,size:this.size};if("weight"===e.mode&&(delete e.mode,1===e.size&&delete e.size),this.asset)e.asset=this.name,this.opening.length&&(e.opening=this.opening),this.closing.length&&(e.closing=this.closing),1===Object.keys(e).length&&(e=e.asset);else if(this.childs){e.group=this.group;var t=x.sortChilds(this);e.childs=t.map((function(e){return e.toObject()})).filter((function(e){return e}))}return e}},x.prototype.toCosmicLink=function(){if(this!==this.root)throw new Error("Only root target can be converted to CosmicLink");var e=this.toOperations(),t=this.portfolio.offers.listOutdated(),n=[];e.forEach((function(e){return e.offer.id=null})),t.forEach((function(t){var r=e.find((function(e){return e.offer.balance===t.balance}));r?r.offer.id=t.id:n.push(t)})),e.forEach((function(e){!e.offer.id&&n.length&&(e.offer.id=n.pop().id)}));var r=p.operationsToCosmicLink(e);return n.forEach((function(e){r.tdesc.operations.unshift({}),r.setOperation(0,"manageOffer",{offerId:e.id,amount:0})})),this.portfolio.balances.filter((function(e){return e.asset.target})).forEach((function(e){(function(e){return"remove"!==e.asset.target.mode&&"opening"===e.action})(e)&&(r.tdesc.operations.unshift({}),r.setOperation(0,"changeTrust",{asset:e.id})),function(e){return!!e.hasTrustline&&(0===e.amount&&"closing"===e.action||"remove"===e.asset.target.mode&&0===e.asset.amount)}(e)&&(r.tdesc.operations.unshift({}),r.setOperation(0,"changeTrust",{asset:e.id,limit:0}))})),r.tdesc.operations.length?r:null},x.prototype.toOperations=function(){var e;return this.childs?(e=[]).concat.apply(e,r(this.childs.map((function(e){return e.toOperations()})))):this.order?this.order.operations:[]},e.exports=x},307:function(e,t,n){"use strict";n(308),n(311),n(129),n(133),n(179),n(131),n(135),n(166),n(66),n(204),n(142),n(146),n(132);var r=n(222),i=n(154),a=n(14),o=n(61),s=n(60),c=n(26),u=n(62),l=n(148).CosmicLink,f=n(144),h=n(134),d=n(68),p=n(44).__,m=n(65),v=n(136),g=v.positive,b=v.negative,y=v.fixed7,w=v.clamp,k=v.absoluteMin,x=v.arraySum,A=v.arrayScale,T=e.exports=function(e){function t(e,n){var r;a(this,t),(r=o(this,s(t).call(this))).type=e,r.method=t.type[r.type],r.operations=new f,r.orderbook=n;for(var i=arguments.length,c=new Array(i>2?i-2:0),u=2;u<i;u++)c[u-2]=arguments[u];return r.parameters=c,r.operations.listen("update",(function(){r.compute(["cosmicLink","description"])})),r.refresh(),r}return u(t,e),c(t,null,[{key:"rebalance",value:function(e){if("XLM"!==e.asset.code){var n=new t("balance",e.asset.orderbook,e);return n.watch(e,"amount",(function(){return n.refresh()})),n.watch(e.asset.orderbook,["bids","asks"],(function(){return n.refresh()})),e.asset.offers.listen("change",(function(){return n.refresh()}),n),n}}}]),c(t,[{key:"refresh",value:function(){this.operations.splice(0,this.operations.length),this.operations.trigger("update"),this.method.apply(this,[this].concat(i(this.parameters))),this.trigger("refresh")}},{key:"getOperation",value:function(e,t){var n="".concat(e.balance.anchor.name,":").concat(t?e.price:"take"),r=this.operations.find((function(e){return e.id===n}));if(r)return r;var i={id:n};return this.operations.push(i),i}},{key:"addOperation",value:function(e,t){var n=this.getOperation(e,t>0);this.setOperation(n,e,Number(t)||n.amount)}},{key:"setOperation",value:function(e,t,n){e.amount=y(n),e.cost=n*t.price,e.offer=t,this.operations.trigger("update")}}]),t}(d);function C(e){return e.amount>0&&"bids"===e.offer.side||e.amount<0&&"asks"===e.offer.side?"buy":"sell"}function S(e){var t,n=e.offer,r=n.balance.code+":"+n.balance.anchor.pubkey;return(t="buy"===C(e)?{buying:r,selling:"XLM",amount:y(e.amount*n.price_r.n/n.price_r.d),price:{n:n.price_r.d,d:n.price_r.n}}:{buying:"XLM",selling:r,amount:e.amount,price:n.price_r}).offerId=e.offer.id,t}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.asset.orderbook,r="quantity"===e.mode||0===e.amount,i=n.asks[0].basePrice;if(r||!(Math.abs(t*i)<m.minOfferValue)){var a=function(e,t){return function(e){return t>=e.balance.sizeMin&&t<=e.balance.sizeMax&&e.baseVolume>Math.abs(t)*m.skipMarginalOffers}}(0,t);T.type.limit(e.order,t,{orderbook:n,filter:a})}}function O(e,t){var n=e.asset.balances,r=0,i=n.map((function(){return 0}));if(b(t)){var a=n.map((function(e){return"closing"===e.action?-e.amount:0}));r=P(i,a,t)}var o=g(t)?"underMin":"overMax";if(r!==t){var s=n.map((function(e){return"closing"===e.action?0:-e[o]}));r=P(i,s,t-r)}if(r!==t){var c=g(t)?"sizeMax":"sizeMin",u=n.map((function(e){return"closing"===e.action?0:e[c]-e[o]}));P(i,u,t-r)}n.forEach((function(t,n){var r=y(i[n]);E(e,r,t.orderbook)}))}function P(e,t,n){var r=x(t),i=k(n,r);return A(t,i).forEach((function(t,n){return e[n]+=t})),+h(x(e),7)}T.define("description","operations",(function(){return T.operationsToDescription(this.operations)})),T.operationsToCosmicLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new l({network:"public",memo:"Equilibre.io",maxTime:"+5",source:m.portfolio.accountId});return e.forEach((function(e){t.addOperation("manageOffer",S(e))})),t},T.operationsToDescription=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){"buy"===C(e)?t.push("\n".concat(p("Buy")," ").concat(h(e.amount)," ").concat(e.offer.balance.code," ").concat(p("at")," ").concat(h(e.offer.price)," ").concat(m.currency,"\n      ")):t.push("\n".concat(p("Sell")," ").concat(h(e.amount)," ").concat(e.offer.balance.code," ").concat(p("at")," ").concat(h(e.offer.price)," ").concat(m.currency,"\n      "))})),t},T.type={},T.type.market=function(e,t){if(t){var n=t>0?"asks":"bids",r=Math.abs(t),i=e.orderbook.findOffer(n,(function(e){return e.baseVolume>r}));e.addOperation(i,r)}},T.type.limit=function(e,t,n){var r=n.orderbook,i=n.filter;if(t){var a=t>0?"bids":"asks",o=(r||e.orderbook).findOffer(a,i);o&&e.addOperation(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.spreadTightening,n=Object.assign({},e),r=t*e.balance.asset.orderbook["spread%"]/100;"bids"===e.side?n.price=e.price*(1+r):n.price=e.price*(1-r);e.balance.asset.globalPrice&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.maxSpread/2,n=e.balance.asset.price,r=e.balance.orderbook.price;if("bids"===e.side){var i=Math.min(r,n*(1-t));e.price=w(e.price,i,n)}else{var a=Math.max(r,n*(1+t));e.price=w(e.price,n,a)}}(n);return function(e){var t=e.balance.orderbook.quote;e.price_r={n:h(1e10*e.price,0),d:h(1e10*t.price,0)};for(;e.price_r.n>999999999||e.price_r.d>999999999;)e.price_r.n=h(e.price_r.n/10,0),e.price_r.d=h(e.price_r.d/10,0)}(n),n}(o),Math.abs(t))}},T.type.balance=function(e,t){var n=t.asset,r=n.orderbook;if(null!=t.amount&&0!==t.amountDelta)if(r.isFetched()){if(n.liabilities)if(n.offers.filter((function(e){return!e.outdated})).length)return void(e.description=[p("Rebalancing...")]);!function(e){var t=[];if(e.asset.balances.forEach((function(e){null!=e.orderbook.price&&e.isActive?t.push(e):e.targetAmount=null})),!t.length)return;if(1===t.length)return t[0].targetAmount=e.amount;var n=y(e.amount/t.length);t.forEach((function(e){return e.targetAmount=n}))}(t),!function(e){var t=e.asset.balances;return!(x(t,"underMin")&&x(t,"overMax"))}(t)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.amountDiff,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.anchorsRebalanceRiskMax,r=e.asset.balances,i=-x(r,"underMin"),a=x(r,"overMax"),o=Math.max(i-g(t),a+b(t)),s=Math.abs(e.valueDiffP),c=e.amount*g(n-s),u=Math.min(o,c),l=y(u+g(t)),f=y(u-b(t));O(e,l),O(e,-f)}(t,t.amountDiff):!function(e,t){var n=e.asset.balances,r=n.filter((function(e){return"closing"===e.action&&t<e.sizeMin})),i=n.filter((function(e){return e.sizeMin<=t&&t<=e.sizeMax}));return!r.length&&!!i.length}(t,t.amountDiff)?O(t,t.amountDiff):E(t,t.amountDiff)}else e.description=[p("Fetching orderbook...")]};var M=function(e){T[e]||(T[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r(T,[e].concat(n))})};for(var I in T.type)M(I)},312:function(e,t,n){"use strict";n(129),n(133),n(131),n(132);var r=t,i=n(134),a=n(44).__,o=n(65),s=n(136),c=s.arraySum,u=s.fixed7,l=s.positive;r.apply=function(e){var t=[],s=0,f=0;e.childs.forEach((function(e){var n=e.mode;"weight"===n?(t.push(e),f+=e.size):(r[n](e),s+=e.value)}));var h=l(e.value-s);t.forEach((function(e){return r.weight(e,h,f)})),function(e,t,n){var r=o.misallocationTolerance;if(e>t*(1+r)){var s=+i(e-t,2),c=+i(100*s/t,2),u=a("Rebalance setup is over portfolio value by");throw u+=" ".concat(s," ").concat(o.currency," (").concat(c,"%) "),new Error(u)}if(!n&&e<t*(1-r)){var l=+i(t-e,2),f=+i(100*l/t,2),h=a("Rebalance setup is under portfolio value by");throw h+=" ".concat(l," ").concat(o.currency," (").concat(f,"%) "),new Error(h)}}(s,e.value,t.length),function(e){var t=n(138).resolve("XLM"),r=e.childs.filter((function(e){return e.asset!==t})),i=t.value-t.valueMin,o=r.filter((function(e){return e.valueDiff>0})),s=c(o,"valueDiff");if(i>s)return;var f=r.filter((function(e){return e.valueDiff<0})),h=-c(f,"valueDiff"),d=t.target.value-t.valueMin,p=1-l(d/h);if(r.forEach((function(e){e.amount=u(e.amount-e.amountDiff*p)})),p>.95)throw new Error(a("The XLM share is too low"))}(e)},r.amount=function(e){e.amount=e.size,e.value=e.amount*e.asset.price,e.compute("share")},r.ignore=function(e){e.value=e.asset.value,e.amount=e.asset.amount,e.compute("share")},r.remove=function(e){e.amount=0,e.value=0,e.compute("share")},r.percentage=function(e){r.weight(e,e.parent.value,100)},r.weight=function(e,t,n){n?(e.value=e.size*t/n,e.amount=u(e.value/e.asset.price)):e.value=e.amount=0,e.compute("share")}},313:function(e,t,n){"use strict";n(129),n(131),n(135),n(165),n(66),n(132);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(62),c=n(130),u=n(206),l=n(314),f=n(315),h=n(136).arrayOnlyInFirst;e.exports=function(e){function t(e){var n;return r(this,t),(n=a(this,o(t).call(this,'\n<div class="TargetSetup">\n  <h3>%name</h3>\n  <hr>\n\n  %sizeSetup\n  %anchorsSetup\n\n</div>\n    '))).target=e,n.backup={size:e.size,mode:e.mode,opening:e.opening.slice(),closing:e.closing.slice()},n.name=e.asset.name,n.sizeSetup=new f(e),n.target.asset.anchors.length>1&&(n.anchorsSetup=new l(e)),n}return s(t,e),i(t,[{key:"confirm",value:function(){this.sizeSetup.maybeSwitchMode();var e=this.target.asset;"XLM"===e.id&&this.target.value<e.amountMin*e.price&&(this.target.mode="amount",this.target.size=e.amountMin),this.close()}},{key:"cancel",value:function(){var e=this;this.target.mode=this.backup.mode,this.target.size=this.backup.size,h(this.target.opening,this.backup.opening).concat(h(this.backup.closing,this.target.closing)).map(u.resolve).forEach((function(t){return e.target.removeAnchor(t)})),h(this.target.closing,this.backup.closing).concat(h(this.backup.opening,this.target.opening)).map(u.resolve).forEach((function(t){return e.target.addAnchor(t)})),this.close()}},{key:"close",value:function(){document.activeElement.blur(),this.sizeSetup.destroy(),this.anchorsSetup&&this.anchorsSetup.destroy(),this.destroy()}}]),t}(c)},314:function(e,t,n){"use strict";n(133),n(179),n(176),n(239),n(66),n(146);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(62),c=n(130),u=n(44).__;e.exports=function(e){function t(e){var n;return r(this,t),(n=a(this,o(t).call(this,'\n<fieldset class="TargetSetupAnchors">\n  <legend>'.concat(u("Anchor"),":</legend>\n  %toAnchorCheckbox:anchors...\n</fieldset>\n  ")))).target=e,n.anchors=e.asset.anchors.filter((function(t){var n=e.root.portfolio;return!t.unpeg||function(e,t){return e.balances.find((function(e){return e.anchor===t}))}(n,t)})),n}return s(t,e),i(t,[{key:"toAnchorCheckbox",value:function(e){var t=this;return new l(e,{getState:function(){return function(e,t){var n=e.asset.balances.find((function(e){return e.anchor===t}));return n&&n.isActive}(t.target,e)},callback:this.switchAnchor.bind(this)})}},{key:"switchAnchor",value:function(e,t){t?this.target.addAnchor(e):this.target.asset.balances.reduce((function(e,t){return t.isActive?e+1:e}),0)>1&&this.target.removeAnchor(e)}}]),t}(c);var l=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var s=i.getState,c=i.callback;return(n=a(this,o(t).call(this,'\n<span class="AnchorCheckbox half">\n  <input -ref=%checkbox type="checkbox" %checked>\n  <label -ref=%label %onclick>%name</label>\n</span>\n'))).name=e.name,n.checked=s(),n.onclick=function(){c(e,!n.checked),n.checked=s()},n}return s(t,e),t}(c)},315:function(e,t,n){"use strict";n(129),n(204);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(63),c=n(62),u=n(130),l=n(134),f=n(44).__;e.exports=function(e){function t(e){var n;return r(this,t),(n=a(this,o(t).call(this,'\n<fieldset class="TargetSetupSize">\n  <legend>'.concat(f("Size"),':</legend>\n\n  <input autofocus class="half" type="number" step="any" min="0" %max\n    value=%size placeholder=%share onchange=%maybeSwitchMode>\n\n  <select class="half" onchange=%setMode value=%mode>\n    <option value="weight">').concat(f("Weight"),'</option>\n    <option value="percentage">').concat(f("Percentage"),'</option>\n    <option value="amount">').concat(f("Amount"),'</option>\n    <option value="ignore" hidden=%targetIsXlm>').concat(f("Ignore"),'</option>\n    <option value="remove" hidden=%targetIsXlm>').concat(f("Remove"),"</option>\n  </select>\n\n</fieldset>\n    ")))).target=e,n.targetIsXlm="XLM"===e.asset.id,e.project("share",s(n),(function(e){return l(100*e,2)})),e.project("size",s(n)),n.project("size",e,(function(e){return null!=e?Number(e):null})),e.project("mode",s(n)),n.project("mode",e),n}return c(t,e),i(t,[{key:"maybeSwitchMode",value:function(){0==this.size?this.mode="amount":this.size?"ignore"!==this.mode&&"remove"!==this.mode||(this.mode="percentage",this.target.computeAll()):"remove"!==this.mode&&(this.mode="ignore")}},{key:"setMode",value:function(){switch(this.mode){case"weight":this.size=1,this.max=null;break;case"percentage":this.size=+l(100*this.target.asset.share,2),this.max=100;break;case"amount":this.size=this.target.asset.amount,this.max=null;break;case"ignore":case"remove":this.target.set("size",null)}}}]),t}(u)},316:function(e,t,n){"use strict";n(129);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(63),c=n(62),u=n(130),l=n(28),f=n(44).__;e.exports=function(e){function t(e){var n;return r(this,t),(n=a(this,o(t).call(this,'\n<section class="TargetControls">\n  <form onsubmit="return false" hidden=%hideRebalance>\n    <button onclick=%rebalance disabled=%invalid>'.concat(f("Rebalance"),'</button>\n  </form>\n\n  <form onsubmit="return false" hidden=%hideSave>\n    <button onclick=%save disabled=%invalid>').concat(f("Save"),"</button>\n    <button onclick=%cancel>").concat(f("Cancel"),"</button>\n  </form>\n\n  %toParagraph:error\n</section>\n    ")))).target=e,e.project(["error","modified"],s(n)),n.define("hideRebalance",["modified"],(function(){return n.modified})),n.define("hideSave",["modified"],(function(){return!n.modified})),n.define("invalid",["error"],(function(){return!!n.error})),n}return c(t,e),i(t,[{key:"toParagraph",value:function(e){if(e)return l.create("p",".error",e)}},{key:"cancel",value:function(){location.reload()}},{key:"save",value:function(){this.target.json=this.target.toJson()}},{key:"rebalance",value:function(){var e=this,t=this.target.toCosmicLink();t&&t.open().listen("destroy",(function(){e.target.portfolio.getAccount(),e.target.portfolio.offers.get()}))}}]),t}(u)},317:function(e,t,n){"use strict";n(129),n(133),n(150),n(66),n(64),n(67);var r=n(63),i=n(15);n(16);var a=n(14),o=n(26),s=n(61),c=n(60),u=n(62),l=n(130),f=n(28),h=n(134),d=n(44).__,p=n(318),m=n(238);e.exports=function(e){function t(e){var n;return a(this,t),(n=s(this,c(t).call(this,'\n<section class="TargetsTable">\n  <table>\n    <tr>\n      <th class="name">'.concat(d("Name"),'</th>\n      <th align="right">').concat(d("Goal"),'</th>\n      <th align="right">').concat(d("Divergence"),'</th>\n      <th align="right">').concat(d("Operation"),'</th>\n    </tr>\n\n    %targets...\n\n    <tr><td colspan="4" align="center" onclick=%addAsset>\n      <h3>').concat(d("Add Asset"),"</h3>\n    </td></tr>\n\n  </table>\n</section>\n    ")))).target=e,n.targets=e.childs.mirror((function(e){return n.toTargetRow(e)})),n.selected=void 0,e.listen("update",(function(){return n.sortTargets()})),n.sortTargets(),n}return u(t,e),o(t,[{key:"toTargetRow",value:function(e){var t=this,n=new v(e);return n.domNode.onclick=function(){return t.selected=e},n}},{key:"sortTargets",value:function(){this.targets.sort((function(e,t){return e=e.target,"ignore"===(t=t.target).mode&&"ignore"!==e.mode?-1:"ignore"===e.mode&&"ignore"!==t.mode?1:"remove"===t.mode&&"remove"!==e.mode?-1:"remove"===e.mode&&"remove"!==t.mode?1:t.value-e.value||e.asset.code.localeCompare(t.asset.code)}))}},{key:"addAsset",value:function(){var e,t,n;return i.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.target.portfolio.availableAssets().filter((function(e){return e.show})),t=new p(e),n=m.confirm({title:d("Pick an Asset"),content:t}),r.next=5,i.awrap(n);case 5:if(r.t0=r.sent,!r.t0){r.next=8;break}r.t0=t.selected;case 8:if(!r.t0){r.next=10;break}this.target.addAsset(t.selected);case 10:case"end":return r.stop()}}),null,this)}}]),t}(l);var v=function(e){function t(e){var n;return a(this,t),(n=s(this,c(t).call(this,'\n<tr class="TargetRow">\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="right">%command</td>\n  <td align="right">%toPercent:shareDiff</td>\n  <td align="right">%toDiv:description...</td>\n</tr>\n    '))).target=e,n.name=e.asset.code,n.define("command",null,(function(){return n.toCommand(e)})),n.watch(e,["size","mode","share"],(function(){return n.compute("command")})),e.asset.project("image",r(n)),e.project("shareDiff",r(n),(function(e){return-e})),e.order&&e.order.project("description",r(n)),n}return u(t,e),o(t,[{key:"toCommand",value:function(e){switch(e.mode){case"ignore":return d("Ignore");case"remove":return d("Remove");case"amount":return"".concat(e.size," ").concat(e.asset.code);case"weight":return"".concat(e.size,"  ").concat(this.toPercent(e.share));case"percentage":return this.toPercent(e.share)}}},{key:"toPercent",value:function(e){return e?h(100*e,2)+"%":"-"}},{key:"toDiv",value:function(e){return f.create("div",null,e)}}]),t}(l)},318:function(e,t,n){"use strict";n(133),n(66);var r=n(14),i=n(26),a=n(61),o=n(60),s=n(62),c=n(130),u=n(144),l=n(44).__;e.exports=function(e){function t(e){var n;r(this,t),(n=a(this,o(t).call(this,'\n<div class="AssetSelector">\n  %groups...\n</div>\n    '))).groups=new u;var i=e.filter((function(e){return"fiat"===e.type})),s=e.filter((function(e){return"crypto"===e.type&&e.isTether})),c=e.filter((function(e){return"crypto"===e.type&&!e.isTether}));return n.addGroup(l("Fiat Tethers"),i),n.addGroup(l("Crypto Tethers"),s),n.addGroup(l("Native Assets"),c),n}return s(t,e),i(t,[{key:"addGroup",value:function(e,t){var n=this;if(t.length){var r=new f(e,t,(function(e){return n.selected=e}));this.groups.push(r)}}}]),t}(c);var f=function(e){function t(e,n,i){var s;return r(this,t),(s=a(this,o(t).call(this,'\n<fieldset class="AssetGroup">\n  <legend>%name</legend>\n  %toAssetRadio:assets...\n</fieldset>\n    '))).name=e,s.assets=n,s.onselect=i,s}return s(t,e),i(t,[{key:"toAssetRadio",value:function(e){var t=this;return new h(e,(function(){return t.onselect(e)}))}}]),t}(c),h=function(e){function t(e,n){var i;return r(this,t),(i=a(this,o(t).call(this,'\n<span class="AssetRadio half">\n  <input -ref=%radio type="radio" name="asset-selector-group" %onchange>\n  <label -ref=%label for=%radio>\n    <img src=%image>\n    %name\n  </label>\n</span>\n    '))).name=e.name,i.image=e.image,i.onchange=function(){return i.radio.checked&&n()},i.label.for=i.radio,i.label.onclick=function(){return i.radio.click()},i}return s(t,e),t}(c)},320:function(e,t){e.exports='<section>\n  <h2>What is Equilibre.io?</h2>\n\n  <section class="landing">\n    <h3>A Portfolio Balancer for Stellar</h3>\n\n    <div>\n\n    <p>\n      Equilibre.io is a portfolio balancer for Stellar. In other words, it is\n      a software which helps you to spread your funds across various\n      currencies and crypto assets.\n    </p>\n\n    <p>\n      I initially created it to protect my funds against a possible bear market.\n      As it proved reliable, I decided to make it publicly available.\n    </p>\n\n    <p>\n      Equilibre.io is merely a sophisticated front-end for the Stellar\n      Decentralized exchange: your account, holdings & operations live on the\n      blockchain.\n    </p>\n\n    <p>\n      It works a bit like a multi-currency bank account. Except there\'s no bank.\n      And you are the only one in control.\n    </p>\n\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Risk Management Solution</h3>\n\n    <div>\n    <p>\n      Equilibre.io can help you to implement what is known as a "balanced\n      investment strategy". Basically, the idea is that balancing funds over\n      multiple assets will average a portfolio performance & mitigate the risks.\n    </p>\n\n    <p>\n      Here\'s how it works: we choose a number of assets we want to be exposed\n      to, and we attribute a share of the portfolio to each of them (e.g: 20%\n      each). Then, we "rebalance" the portfolio on a regular basis. This means\n      that we pass trades that bring back each asset to its allocated share.\n    </p>\n\n    <p>\n      It is important to understand that Equilibre.io is not an automated\n      trading bot, nor a magic-free-money scheme. It is a product made for\n      people who can decide on their own strategy & who understand the risks\n      they are taking.\n    </p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Fancy Account Viewer</h3>\n\n    <div>\n    <p>\n      Equilibre.io offers a live view of the latest blockchain state. It is also\n      in sync with the latest market data & displays values and historical data\n      in your national currency.\n    <p>\n\n    <p>\n      It is one of the few applications (if not the only one) that can retrieves\n      the complete history of any Stellar account, and pack that data into a\n      fancy chart.\n    </p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Sophisticated Trading Engine</h3>\n\n    <div>\n    <p>\n      Equilibre.io is, first of all, a collection of fine-tuned trading\n      algorithms.  Since a year, I\'ve crash-tested them in every way I could\n      imagine and packed what worked the best in an easy-to-use interface.\n    <p>\n\n    <p>\n      It can transform templates such as "I want 50% of my portfolio in BTC and\n      50% in XLM" into a transaction that passes the required orders. Forget\n      about trust lines, order books and price picking: all that stuff is dealt\n      with in the background.\n    <p>\n\n    <p>\n      The trading engine has a defensive behavior: it prioritizes not losing\n      money over taking risks to make a profit.\n    </p>\n    </div>\n  </section>\n\n\n  <section class="landing">\n    <h3>A New Security Standard for the Years to Come</h3>\n\n    <div>\n    <p>\n      Equilibre.io strictly enforce cryptography good practices: I certainly\n      don\'t want to know about your private key, nor to obtain any kind of\n      control over your account. <em>Who can protect a house full of gold and\n      jewels?</em>\n    </p>\n\n    <p>\n      When you want to rebalance your portfolio, Equilibre.io generates a\n      transaction request that you can sign using your own wallet. This is\n      possible thanks to protocols known as CosmicLink &SEP-0007.\n    </p>\n\n    <p>\n      Those protocols turn any compatible Stellar wallet into something like\n      Metamask for Ethereum. At that time, only a few services are compatibles.\n      However, a number of wallets announced their intention to support\n      transactions requests in the future, including Keybase, Lobster, and\n      Stargazer.\n    <p>\n    </div>\n  </section>\n\n  <section class="landing">\n    <h3>A Free Software, as in Freedom</h3>\n\n    <div>\n    <p>\n      I think that the free software cooperative mindset can go a long way in\n      improving a project such as Stellar. That\'s why I released Equilibre.io in\n      the public domain. Here are some of the benefits of it:\n    </p>\n\n    <p>\n      Auditability: The software can be proven to contain no malware and no\n      tracker. It can be audited for flaws & proven safe.\n    </p>\n\n    <p>\n      Forkability: Any feature implemented by the software becomes <em>de\n      facto</em> available to every other developer. For example, the code I\n      wrote to support Ledger Wallets is <a\n      href="https://www.npmjs.com/package/@cosmic-plus/ledger-wallet"\n      target="_blank" rel="noopener">freely available to all</a>.\n    </p>\n    </div>\n  </section>\n\n</section>\n'},321:function(e,t){e.exports="<section>\n  <h2>Legal Disclaimer</h2>\n\n  <section>\n    <h3>Risks Related to the Use of Equilibre.io</h3>\n\n    <p>\n      The Application author will not be responsible for any losses, damages or\n      claims arising from any event related to its use, including but not\n      limited to:\n    </p>\n\n    <p> Mistakes made by the users of the Application.</p>\n\n    <p> Software problems of the Application and/or any\n    related software or service.</p>\n\n    <p> Technical failures in the hardware of the users.</p>\n\n    <p> Security problems experienced by the users.</p>\n\n    <p> Actions or inactions of third parties and/or events experienced by\n    third parties.</p>\n  </section>\n\n  <section>\n    <h3>Not an Exchange</h3>\n\n    <p>\n      The Application is not an exchange. It is an independent front-end for the\n      Stellar Decentralized Exchange. The Application doesn't have any control\n      over the user's account, assets that can be bought or sell or the exchange\n      as a whole.\n    </p>\n\n    <p>\n      The assets made available through the Application have been selected on\n      the sole basis of the thickness and the daily volumes of their order book.\n      Their availability in the Application doesn't constitute a guarantee of\n      any sort. In particular, no research has been conducted about their\n      fundamentals or their compliance with national laws that may apply\n      to them or to the users.\n    </p>\n\n    <p>\n      The Application doesn't pass any transaction on behalf of the users. The\n      users are solely responsible for the transactions that they are signing\n      and sending to the blockchain.\n    </p>\n  </section>\n\n  <section>\n    <h3>No Guarantee of Profit</h3>\n\n    <p>\n      Past performance may not be indicative of future results. Different types\n      of investments involve varying degrees of risk, and there can be no\n      assurance that the future performance of any specific investment,\n      investment strategy, or product will be profitable, equal any\n      corresponding indicated historical performance level(s), or be suitable\n      for your portfolio.\n   </p>\n\n    <p>\n      The Application doesn't provide investment advice, financial advice,\n      trading advice, or any other sort of advice, and none of the Application\n      content should be treated as such. The users are responsible to conduct\n      their own diligence and consult their financial advisory before making\n      investment decisions.\n    </p>\n  </section>\n\n  <section>\n    <h3>Compliance With Tax Obligations</h3>\n\n    <p>\n      The users of the Application are solely responsible to determinate what,\n      if any, taxes apply to their transactions. The author of the Application\n      is NOT responsible for determining the taxes that apply to transactions.\n    </p>\n    \n    <p>\n      Some countries are taxing investments on a per-transaction basis, which\n      can heavily affect the performance of strategies involving high quantities\n      of micro-transactions.\n    </p>\n  </section>\n\n</section>\n\n"},322:function(e){e.exports=JSON.parse('{"fiat":{"USD":{"show":true,"name":"US Dollar"},"CNY":{"show":true,"name":"Renminbi"},"EUR":{"name":"Euro"}},"foreign":{"BTC":{"show":true,"apiId":"bitcoin"},"ETH":{"show":true,"apiId":"ethereum"},"XRP":{"show":true,"apiId":"ripple"},"LTC":{"show":true,"apiId":"litecoin"},"KIN":{"show":true,"apiId":"kin"},"BAT":{"apiId":"basic-attention-token"},"BCH":{"apiId":"bitcoin-cash"},"LINK":{"apiId":"chainlink"},"MTL":{"apiId":"metal"},"OMG":{"apiId":"omisego"},"REP":{"apiId":"augur"},"SALT":{"apiId":"salt"},"ZRX":{"apiId":"0x"}},"native":{"XLM":{"show":true,"apiId":"stellar"},"FRAS":{"show":true,"apiId":"frasindo-rent"},"MOBI":{"show":true,"apiId":"mobius"},"RMT":{"show":true,"apiId":"sureremit"},"SHX":{"show":true,"apiId":"stronghold-token"},"SLT":{"show":true,"apiId":"smartlands"},"TERN":{"show":true,"apiId":"ternio"},"PEDI":{"apiId":"pedity"},"REPO":{"apiId":"repo"}}}')},323:function(e){e.exports=JSON.parse('{"GAP5LETOV6YIE62YAM56STDANPRDO7ZFDBGSNHJQIYGGKSMOZAHOOS2S":{"alias":"tempo.eu.com","emit":[["EUR","EURT"]],"unpeg":true},"GAREELUB43IRHWEASCFBLKHURCGMHE5IF6XSE7EXDLACYHGRHM43RFOX":{"alias":"ripplefox.com","emit":["CNY"]},"GCNY5OXYSY4FKHOPT2SPOQZAOEIGXB5LBYW3HVU3OWSTQITS65M5RCNY":{"alias":"fchain.io","emit":[["CNY","XCN"]]},"GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP":{"alias":"x.token.io","emit":["USD"],"unpeg":true},"GDSVWEA7XV6M5XNLODVTPCGMAJTNBLZBXOFNQD3BNPNYALEYBNT6CE2V":{"alias":"thewwallet.com","emit":[["USD","WSD"]],"unpeg":true},"GDUKMGUGDZQK6YHYA5Z6AY2G4XDSZPSZ3SW5UN3ARVMO6QSRDWP5YLEX":{"alias":"anchorusd.com","emit":["USD"]},"GAEGOS7I6TYZSVHPSN76RSPIVL3SELATXZWLFO4DIAFYJF7MPAHFE7H4":{"alias":"apay.io","emit":["BCH"]},"GATEMHCCKCY67ZUCKTROYN24ZYT5GK4EQZ65JJLDHKHRUZI3EUEKMTCH":{"alias":"naobtc.com","emit":["BTC"]},"GAUTUYY2THLF7SGITDFMXJVYH3LHDSMGEAKSBU267M2K7A3W543CKUEF":{"alias":"apay.io","emit":["BTC"]},"GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":{"alias":"apay.io","emit":["BAT","ETH","KIN","LINK","MTL","OMG","REP","SALT","ZRX"]},"GBETHKBL5TCUTQ3JPDIYOZ5RDARTMHMEKIO2QZQ7IOZ4YC5XV3C2IKYU":{"alias":"fchain.io","emit":["ETH"]},"GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5":{"alias":"stellarport.io","emit":["BTC","ETH","XRP","LTC"]},"GC5LOR3BK6KIOK7GKAUD5EGHQCMFOGHJTC7I3ELB66PTDFXORC2VM5LP":{"alias":"apay.io","emit":["LTC"]},"GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P":{"alias":"interstellar.exchange","emit":["BTC","ETH","XRP","LTC"]},"GC75WHUIMU7LV6WURMCA5GGF2S5FWFOK7K5VLR2WGRKWKZQAJQEBM53M":{"emit":["FRAS"]},"GCKA6K5PCQ6PNF5RQBF7PQDJWRHO6UOGFMRLK3DYHDOI244V47XKQ4GP":{"emit":["SLT"]},"GA6HCMBLTZS5VYYBCATRBRZ3BZJMAFUDKYYF6AH6MVCMGWMRDNSWJPIH":{"emit":["MOBI"]},"GDSTRSHXHGJ7ZIVRBXEYE5Q74XUVCUSEKEBR7UCHEUUEK72N7I7KJ6JH":{"emit":["SHX"]},"GDEGOXPCHXWFYY234D2YZSPEJ24BX42ESJNVHY5H7TWWQSYRN5ZKZE3N":{"emit":["RMT"]},"GDGQDVO6XPFSY4NMX75A7AOVYCF5JYGW2SHCJJNWCQWIDGOZB53DGP6C":{"emit":["TERN"]},"GBVUDZLMHTLMZANLZB6P4S4RYF52MVWTYVYXTQ2EJBPBX4DZI2SDOLLY":{"emit":["PEDI"]},"GCZNF24HPMYTV6NOEHI7Q5RJFFUI23JKUKY3H3XTQAFBQIBOHD5OXG3B":{"emit":["REPO"]}}')},324:function(e,t,n){"use strict";n(129);var r=n(14),i=n(61),a=n(60),o=n(62),s=n(130),c=n(28),u=n(44).__,l=n(325),f=n(326),h=n(65),d=new(function(e){function t(e,n){return r(this,t),i(this,a(t).call(this,'\n<footer id="footer" class="scrollable">\n  <div class="nobreak">%icons...</div>\n  %links\n</footer>\n    ',{icons:e,links:n}))}return o(t,e),t}(s))([new f(n(328),u("by Cosmic.plus"),"https://cosmic.plus"),new f(n(329),u("Follow on Twitter"),"https://twitter.com/cosmic_plus"),new f(n(330),u("Follow on Reddit"),"https://reddit.com/r/cosmic_plus"),new f(n(331),u("Follow on Medium"),"https://medium.com/cosmic-plus"),new f(n(332),u("Chat on Telegram"),"https://t.me/cosmic_plus"),new f(n(333),u("Chat on Keybase"),"https://keybase.io/team/cosmic_plus"),new f(n(334),u("GitHub Repository"),"https://git.cosmic.plus"),new f(n(335),u("Contact by Email"),"mailto:mister.ticot@cosmic.plus"),new f(n(336),u("Donate Lumens"),l)],new s("\n<p>\n  <a onclick=%displayLicense>".concat(u("License"),"</a>\n   <a onclick=%displayDisclaimer>").concat(u("Disclaimer"),"</a>\n   <a onclick=%displayAbout>").concat(u("About"),"</a>\n</p>\n"),{displayLicense:function(){return h.tabs.select("#license")},displayDisclaimer:function(){return h.tabs.select("#disclaimer")},displayAbout:function(){return h.tabs.select("#about")}}));c.append(document.body,d)},325:function(e,t,n){"use strict";n(129);var r=n(148).CosmicLink,i=n(44).__,a="GC6Z477WPMLJDLMBJPSCTIJA33V7F5EB7ZH5OIKZEUQUBAWKJZH42JVW";e.exports=function(){var e=prompt("".concat(i("Equilibre.io runs on donation.")," ").concat(i("Each contribution matters to me.")," ").concat(i("Thank you!"),"\n\n").concat(i("Enter an amount (in Lumens)"),":"));"0"===e||isNaN(+e)?confirm("".concat(i("Not a valid amount"),": ").concat(e)):e&&function(e){var t=i("Donation to Cosmic.plus");new r({memo:t,network:"public"}).addOperation("payment",{amount:e,destination:a}).open()}(e)}},326:function(e,t,n){"use strict";n(69),n(327),n(168);var r=n(14),i=n(61),a=n(60),o=n(62),s=n(130),c=function(e){function t(e,n,o){var c;return r(this,t),(c=i(this,a(t).call(this,'<a -ref=%link class="Icon">%image</a>'))).image="string"==typeof e?new s(e):e,c.link.title=n,"function"==typeof o?c.link.onclick=o:"string"==typeof o&&(c.link.href=o,o.match(/^http/)&&(c.link.target="_blank",c.link.rel="noopener")),c}return o(t,e),t}(s);e.exports=c}}]);
//# sourceMappingURL=app.js.map