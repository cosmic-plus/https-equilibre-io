{"version":3,"sources":["webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/specs.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/resolve.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/status.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/decode.js","webpack:///./node_modules/trezor-connect/lib/constants/iframe.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/trezor-connect/lib/constants/ui.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/config.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/convert.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/check.js","webpack:///./node_modules/trezor-connect/lib/constants/index.js","webpack:///./node_modules/trezor-connect/lib/constants/transport.js","webpack:///./node_modules/trezor-connect/lib/constants/popup.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/format.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/signers-utils.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/normalize.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/destruct.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/sep7-utils.js","webpack:///./node_modules/trezor-connect/lib/constants/device.js","webpack:///./node_modules/trezor-connect/lib/constants/blockchain.js","webpack:///./node_modules/trezor-connect/lib/types/index.js","webpack:///./node_modules/@babel/runtime/helpers/inheritsLoose.js","webpack:///./node_modules/trezor-connect/lib/env/browser/networkUtils.js","webpack:///./node_modules/trezor-connect/lib/utils/deferred.js","webpack:///./node_modules/trezor-connect/lib/constants/errors.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/event.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/construct.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/encode.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/parse.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/expand.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/es5/index.js","webpack:///./node_modules/trezor-connect/lib/index.js","webpack:///./node_modules/trezor-connect/lib/env/browser/index.js","webpack:///./node_modules/trezor-connect/lib/popup/PopupManager.js","webpack:///./node_modules/trezor-connect/lib/popup/showPopupRequest.js","webpack:///./node_modules/whatwg-fetch/fetch.js","webpack:///./node_modules/trezor-connect/lib/iframe/builder.js","webpack:///./node_modules/trezor-connect/lib/iframe/inline-styles.js","webpack:///./node_modules/trezor-connect/lib/webusb/button.js","webpack:///./node_modules/trezor-connect/lib/message/index.js","webpack:///./node_modules/trezor-connect/lib/data/ConnectSettings.js","webpack:///./node_modules/trezor-connect/lib/utils/debug.js","webpack:///./node_modules/trezor-connect/lib/types/blockchainEvent.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/es5/trezor-tx.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/es5/tx-transformer.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/index.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/cosmiclink.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/helpers/side-frame.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/helpers/click-wall.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/bundled/cosmic-link.svg.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/action.js","webpack:///./node_modules/@cosmic-plus/trezor-wallet/node_modules/cosmic-lib/es5/load.js"],"names":["module","exports","specs","field","transactionOptionalFields","fieldDesc","network","horizon","callback","memo","source","sequence","minTime","maxTime","fee","isTransactionField","find","name","operationMandatoryFields","accountMerge","allowTrust","bumpSequence","changeTrust","createAccount","createPassiveOffer","createPassiveSellOffer","inflation","manageData","manageOffer","manageBuyOffer","manageSellOffer","pathPaymentStrictReceive","pathPaymentStrictSend","payment","setOptions","operationOptionalFields","operationFields","concat","isOperationField","operation","fieldType","amount","asset","assetCode","assetIssuer","authorize","bumpTo","buyAmount","buying","clearFlags","destAsset","destAmount","destMin","destination","highThreshold","homeDomain","inflationDest","limit","lowThreshold","masterWeight","medThreshold","memoBinary","memoHash","memoId","memoReturn","memoText","memoType","offerId","price","path","selling","sendAmount","sendAsset","sendMax","setFlags","signer","signerHash","signerKey","signerType","signerTx","signerWeight","startingBalance","trustor","value","types","_loop","_field","type","entry","push","neutralAccountId","_regeneratorRuntime","resolve","misc","StellarSdk","status","accountResolver","conf","accountId","quietFlag","server","accountResponse","async","_context3","prev","next","awrap","loadAccount","sent","abrupt","t0","response","error","shorter","stop","makeAccountResponse","publicKey","account","Account","cache","id","signers","public_key","weight","key","resolveTxSource","address","_context6","signersTableToSignersList","signersTable","array","forEach","arguments","length","undefined","Error","current","Server","useNetwork","console","warn","passphrase","networkPassphrase","currentPassphrase","log","Network","use","currentNetwork","networkName","index","Object","values","indexOf","keys","promise","_context","FederationServer","account_id","memo_type","aliases","alias","fail","addressResolver","_context2","isAccountEmpty","then","txSourceAccount","baseAccount","_context4","sub","_baseAccount","txSources","transaction","extra","operations","a","txSigners","_context5","t1","done","filter","txSignersList","_context7","object","_cosmicplus","setHiddenProperty","obj","__esModule","instance","Constructor","TypeError","html","isBrowser","errorContinuation","continuation","init","errors","update","_statusNode","grab","textContent","errorStatus","errorsNode","lineNode","create","append","makeHtmlNode","statusNode","statusLine","errorLine","_typeof","_getRequireWildcardCache","WeakMap","has","get","newObj","hasPropertyDescriptor","defineProperty","getOwnPropertyDescriptor","prototype","hasOwnProperty","call","desc","set","decode","check","normalize","query","substr","parser","tdesc","match","params","split","substring","decoded","odesc","decodeURIComponent","process","assetLower","toLowerCase","code","temp","issuer","assetsList","map","string","matched","Date","toISOString","numerator","replace","denominator","n","d","CALL","ERROR","INIT","LOADED","BOOTSTRAP","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","isNaN","EventEmitter","this","_events","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","listener","prepend","m","events","existing","warning","newListener","emit","unshift","warned","w","String","emitter","count","onceWrapper","i","fired","removeListener","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","enumerable","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","ADDRESS_VALIDATION","BUNDLE_PROGRESS","LOGIN_CHALLENGE_RESPONSE","LOGIN_CHALLENGE_REQUEST","CUSTOM_MESSAGE_RESPONSE","CUSTOM_MESSAGE_REQUEST","CHANGE_SETTINGS","RECEIVE_WORD","RECEIVE_FEE","RECEIVE_ACCOUNT","CHANGE_ACCOUNT","RECEIVE_DEVICE","RECEIVE_PASSPHRASE","RECEIVE_PIN","RECEIVE_CONFIRMATION","RECEIVE_PERMISSION","FIRMWARE_PROGRESS","REQUEST_WORD","REQUEST_BUTTON","INSUFFICIENT_FUNDS","UPDATE_CUSTOM_FEE","SELECT_FEE","SELECT_ACCOUNT","SELECT_DEVICE","SET_OPERATION","LOADING","CONNECT","INVALID_PASSPHRASE_ACTION","INVALID_PASSPHRASE","REQUEST_PASSPHRASE_ON_DEVICE","REQUEST_PASSPHRASE","INVALID_PIN","REQUEST_PIN","REQUEST_CONFIRMATION","REQUEST_PERMISSION","CLOSE_UI_WINDOW","REQUEST_UI_WINDOW","DEVICE_NEEDS_BACKUP","FIRMWARE_NOT_INSTALLED","FIRMWARE_NOT_COMPATIBLE","FIRMWARE_NOT_SUPPORTED","FIRMWARE_OUTDATED","FIRMWARE_OLD","SEEDLESS","INITIALIZE","REQUIRE_MODE","NOT_IN_BOOTLOADER","BOOTLOADER","TRANSPORT","_typeof2","Symbol","iterator","constructor","config","env","event","page","setupNetwork","Networks","PUBLIC","TESTNET","all","addAliases","definitions","removeAliases","remove","clickHandlers","defaultClickHandlers","setClickHandler","clearClickHandler","_defineProperties","props","descriptor","configurable","writable","protoProps","staticProps","convert","construct","destruct","encode","uriToQuery","uri","queryToTdesc","tdescToJson","JSON","stringify","tdescToTransaction","transactionToXdr","toEnvelope","toXDR","xdrToSep7","xdr","options","locker","sep7","encodeURIComponent","pubkey","msg","url","originDomain","signature","xdrToTransaction","Transaction","strip","signatures","xdrToQuery","transactionToTdesc","jsonToTdesc","json","parse","tdescToQuery","queryToUri","errDesc","isValid","txField","e","operationType","operationField","number","min","max","num","integer","parseInt","utf8","isUtf8","base64","isBase64","assetsArray","_boolean","buffer","date","flags","hash","threshold","BLOCKCHAIN_EVENT","RESPONSE_EVENT","TRANSPORT_EVENT","DEVICE_EVENT","UI_EVENT","CORE_EVENT","START_PENDING","DISABLE_WEBUSB","RECONNECT","REQUEST","STREAM","UPDATE","START","CLOSE_WINDOW","CANCEL_POPUP_REQUEST","CLOSED","HANDSHAKE","EXTENSION_USB_PERMISSIONS","assertThisInitialized","self","ReferenceError","_getPrototypeOf","o","setPrototypeOf","__proto__","subClass","superClass","format","nice","signersUtils","parentProperty","element","property","parentNode","infoNode","trNode","domainNode","verifySep7","className","_index","opNode","retNode","sourceNode","addressNode","meaning","operationMeaning","fieldNode","txt","signersNode","utils","signersList","sources","div","accountSignersNode","title","titleNode","listNode","signerNode","hasSigned","addClass","insertBefore","firstChild","makeAccountSignersNode","parentOdesc","parentIndex","parentTdesc","domNode","eventObject","cosmicLink","onclick","callClickHandler","errorNode","animation","destroy","resolveAddressAndUpdate","significant","nicified","assetNode","assetsArrayNode","toLocaleString","valueNode","typeNode","value1","value2","value3","StrKey","decodeSha256Hash","toString","weightNode","_classCallCheck","_createClass","_resolve","SignersUtils","extendFlag","txHash","assign","utilities","hasSigner","keypair","Keypair","fromPublicKey","verify","removeEmptyFields","dateFields","shifted","setMinutes","getMinutes","Asset","XLM","tx","neutralAccount","stripNeutralAccount","stripNeutralSequence","_memo","_switch","timeBounds","op","line","assetPath","timestamp","sdkMemo","_arm","_value","sdkSequence","sdkSigner","ed25519PublicKey","sha256Hash","preAuthTx","sep7Utils","Buffer","timeout","registerWebHandler","description","navigator","registerProtocolHandler","isWebHandlerSupported","parseRequest","sep7Request","parseLink","_sep7","parsePayLink","parseTxLink","parseLinkCommons","from","mode","verifySignature","signLink","domain","link","payload","makePayload","sign","getDomainKeypair","toml","signingKey","StellarTomlResolver","URI_REQUEST_SIGNING_KEY","alloc","UNREADABLE","WAIT_FOR_SELECTION","WORD","PASSPHRASE_ON_DEVICE","PASSPHRASE","PIN","BUTTON","USED_ELSEWHERE","RELEASED","ACQUIRED","RELEASE","ACQUIRE","CHANGED","DISCONNECT","CONNECT_UNACQUIRED","NOTIFICATION","BLOCK","_interopRequireWildcard","_coinInfo","_interopRequireDefault","getOrigin","httpRequest","_regenerator","fetch","credentials","ok","text","arrayBuffer","statusText","parts","isArray","device","localResolve","t","localReject","Promise","reject","createAsync","innerFn","run","resolveTimeoutPromise","delay","result","setTimeout","rejectTimeoutPromise","NO_COIN_INFO","BACKEND_NO_URL","backendNotSupported","WEBUSB_ERROR_MESSAGE","INVALID_PIN_ERROR_MESSAGE","WRONG_PREVIOUS_SESSION_ERROR_MESSAGE","INVALID_STATE","CALL_OVERRIDE","INITIALIZATION_FAILED","DEVICE_USED_ELSEWHERE","PERMISSIONS_NOT_GRANTED","POPUP_CLOSED","INVALID_PARAMETERS","DEVICE_CALL_IN_PROGRESS","DEVICE_NOT_FOUND","WRONG_TRANSPORT_CONFIG","NO_TRANSPORT","MANAGEMENT_NOT_ALLOWED","MANIFEST_NOT_SET","BROWSER_NOT_SUPPORTED","POPUP_TIMEOUT","IFRAME_TIMEOUT","IFRAME_INITIALIZED","IFRAME_BLOCKED","NO_IFRAME","invalidParameter","TrezorError","_inheritsLoose2","_Error","_this","coinName","window","alert","classList","contains","preimage","prompt","copyString","makeTransactionBuilder","baseFee","txOpts","sourceAccount","builder","memoValue","_short","fetchBaseFee","timebounds","TransactionBuilder","TimeoutInfinite","addMemo","Memo","txBuilder","addOperation","build","t2","Operation","constructedAsset","_context8","_context9","command","encodedValue","expand","guessType","setTdesc","_query","_tdesc","_json","_xdr","sep7ToXdr","_transaction","encodeURI","dispatch","rule","_networkPassphrase","xdrUri","slice","connection","trezor","TrezorConnect","TrezorTx","connect","stellarGetAddress","showOnTrezor","success","onConnect","reset","onDisconnect","register","appUrl","email","manifest","_args","hint","decorated","stellarSignTransaction","signatureHint","DecoratedSignature","disconnect","cancel","newAccount","accounts","last","_args4","scan","attempts","includeMerged","_ref","_ref$horizon","_ref$attempts","_ref$includeMerged","_require","miss","callBuilder","latest","getPublicKeys","effects","forAccount","order","records","start","bundle","_args6","serializedPath","_exportNames","IFRAME","UI","DEVICE","BLOCKCHAIN","_defineProperty2","_constants","_node","_blockchainEvent","_account","enumerableOnly","symbols","sym","_objectSpread","getOwnPropertyDescriptors","defineProperties","data","getSettings","settings","fn","eventEmitter","uiResponse","method","customMessage","requestLogin","_context10","useEventListener","_context11","_context12","_context13","_context14","_context15","_context16","_context17","_context18","_context19","_context20","_context21","_context22","_context23","_context24","_context25","_context26","_context27","_context28","_context29","_context30","_context31","_context32","_context33","_context34","_context35","_context36","_context37","_context38","_context39","_context40","_context41","_context42","_context43","_context44","_context45","_context46","_context47","_context48","_context49","_context50","_context51","_context52","_context53","_context54","_context55","_context56","_context57","dispose","renderWebUSBButton","_context58","disableWebUSB","_default","_PopupManager","iframe","_button","_message","_ConnectSettings","_debug","POPUP","_settings","_popupManager","_log","initPopupManager","pm","postMessage","close","handleMessage","messageEvent","origin","parseMessage","messagePromises","clearTimeout","initPromise","lazyLoad","enabled","debug","addEventListener","request","popup","unlock","customMessageResponse","webusbSrc","customMessageListener","removeEventListener","_callback","loginChallengeListener","asyncChallenge","_assertThisInitialized2","_showPopupRequest","_networkUtils","_deferred","PopupManager","_EventEmitter","popupSrc","iframeHandshake","handleExtensionConnect","handleExtensionMessage","chrome","runtime","_proto","_this2","locked","_window","tabs","active","focus","openFn","open","supportedBrowser","requestTimeout","_this3","src","openWrapper","closeInterval","setInterval","tab","closed","openTimeout","showPopupRequest","_this4","windows","getCurrent","currentWindow","newWindow","windowId","extensionTabId","location","href","port","sender","extensionPort","onMessage","_this5","errorMessage","_this6","clearInterval","lastError","_this7","onBeforeUnload","layerID","document","getElementById","createElement","innerHTML","body","appendChild","getElementsByClassName","removeChild","support","searchParams","iterable","blob","Blob","formData","viewClasses","isArrayBufferView","ArrayBuffer","isView","normalizeName","test","normalizeValue","iteratorFor","items","Headers","headers","header","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","rejected","readAsText","chars","fromCharCode","join","readArrayBufferAsText","oldValue","thisArg","entries","methods","Request","input","upcased","signal","toUpperCase","referrer","form","trim","bytes","Response","bodyInit","clone","redirectStatuses","redirect","DOMException","stack","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","withCredentials","responseType","setRequestHeader","onreadystatechange","readyState","send","polyfill","_errors","_inlineStyles","_messageID","existedFrame","manifestString","onLoad","frameBorder","width","height","style","display","border","version","btoa","iframeSrc","now","setAttribute","webusb","iframeOrigin","contentWindow","handleIframeBlocked","extension","attachEvent","injectStyleSheet","finish","doc","ownerDocument","head","getElementsByTagName","styleSheet","cssText","createTextNode","usePromise","buttons","querySelectorAll","b","bounds","getBoundingClientRect","btnIframe","Math","round","top","left","zIndex","messageData","getEnv","DEFAULT_PRIORITY","versionN","s","DEFAULT_DOMAIN","currentSettings","configSrc","priority","trustedHost","connectSrc","transportReconnect","pendingTransportEvent","userAgent","getTime","product","__TREZOR_CONNECT_SRC","protocol","pathname","popupConsole","enableByPrefix","getLog","enable","colors","Log","prefix","messages","css","addMessage","level","_len","_key","_len2","_key2","_console","_len3","_key3","_console2","_len4","_key4","_console3","_len5","_key5","_console4","_logs","_i","_Object$keys","l","logs","_i2","_Object$keys2","sort","tag","c","global","orig","info","inject","time","toUTCString","_len6","_key6","_possibleConstructorReturn","_assertThisInitialized","_inherits","TrezorTransaction","_TxTransformer","rules","assetType","notSupported","rawPublicKey","feature","toFixed","_setPrototypeOf","p","CosmicLink","transform","TxTransformer","exportModule","layer","_config","exposeModule","withConfig","library","_this$module","_class","load","SideFrame","action","initCosmicLink","checkLock","splice","lock","keypairs_or_preimage","isNode","_htmlDescription","makeHtmlDescription","_htmlLink","makeHtmlLink","formatsFields","htmlDescription","deprecated","clear","_transactionNode","_signersNode","htmlLink","Observable","ClickWall","cosmicLinkIcon","_Observable","shadow","scrollbar","opacity","closeButton","CloseButton","sandbox","hidden","getRealZIndex","show","setTransition","trigger","hide","disable","ease","transition","defaultView","getComputedStyle","getPropertyValue","frameWindow","boxSizing","right","minWidth","maxWidth","borderTop","boxShadow","background","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","willChange","lineHeight","color","fontWeight","cursor","textAlign","click","isEnabled","htmlOverflow","documentElement","overflow","bodyOverflow","setOpacity","axios","applyLock","updateSignersNode","replaceChild","sendToHorizon","submitTransaction","sendToStellarGuard","post","allFine","keypairsOrPreimage","_short2","_short3","_args3","signHashX","STELLARGUARD_PUBKEY","styles"],"mappings":"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","file":"vendors~trezor.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","\"use strict\";\n/**\n * Contains Stellar transactions specification.\n *\n * @exports specs\n */\n\nvar specs = exports;\n/**\n * Transaction optional fields.\n */\n\nspecs.transactionOptionalFields = [\"network\", \"horizon\", \"callback\", \"memo\", \"source\", \"sequence\", \"minTime\", \"maxTime\", \"fee\"];\n/**\n * Transaction field meaning.\n */\n\nspecs.fieldDesc = {\n  network: \"Network\",\n  horizon: \"Horizon\",\n  callback: \"Callback\",\n  memo: \"Memo\",\n  source: \"Source\",\n  sequence: \"Sequence\",\n  minTime: \"Valid after\",\n  maxTime: \"Valid until\",\n  fee: \"Fees\"\n};\n/**\n * @param {string} field\n * @return {boolean}\n */\n\nspecs.isTransactionField = function (field) {\n  return specs.transactionOptionalFields.find(function (name) {\n    return name === field;\n  });\n};\n/**\n * Operation mandatory fields.\n */\n\n\nspecs.operationMandatoryFields = {\n  accountMerge: [\"destination\"],\n  allowTrust: [\"authorize\", \"assetCode\", \"trustor\"],\n  bumpSequence: [\"bumpTo\"],\n  changeTrust: [\"asset\"],\n  createAccount: [\"destination\", \"startingBalance\"],\n  createPassiveOffer: [\"selling\", \"buying\", \"amount\", \"price\"],\n  createPassiveSellOffer: [\"selling\", \"buying\", \"amount\", \"price\"],\n  inflation: [],\n  manageData: [\"name\", \"value\"],\n  manageOffer: [\"selling\", \"buying\", \"amount\", \"price\"],\n  manageBuyOffer: [\"selling\", \"buying\", \"buyAmount\", \"price\"],\n  manageSellOffer: [\"selling\", \"buying\", \"amount\", \"price\"],\n  pathPaymentStrictReceive: [\"sendAsset\", \"sendMax\", \"destination\", \"destAsset\", \"destAmount\"],\n  pathPaymentStrictSend: [\"sendAsset\", \"sendAmount\", \"destination\", \"destAsset\", \"destMin\"],\n  payment: [\"asset\", \"destination\", \"amount\"],\n  setOptions: []\n};\n/**\n * Operation optionnal fields.\n */\n\nspecs.operationOptionalFields = {\n  accountMerge: [\"source\"],\n  allowTrust: [\"source\"],\n  bumpSequence: [\"source\"],\n  changeTrust: [\"limit\", \"source\"],\n  createAccount: [\"source\"],\n  createPassiveOffer: [\"source\"],\n  createPassiveSellOffer: [\"source\"],\n  inflation: [\"source\"],\n  manageData: [\"source\"],\n  manageOffer: [\"offerId\", \"source\"],\n  manageBuyOffer: [\"offerId\", \"source\"],\n  manageSellOffer: [\"offerId\", \"source\"],\n  pathPaymentStrictReceive: [\"path\", \"source\"],\n  pathPaymentStrictSend: [\"path\", \"source\"],\n  payment: [\"source\"],\n  setOptions: [\"inflationDest\", \"clearFlags\", \"setFlags\", \"masterWeight\", \"lowThreshold\", \"medThreshold\", \"highThreshold\", \"signer\", \"homeDomain\", \"source\"]\n};\n/**\n * Operations fields\n */\n\nspecs.operationFields = {};\n\nfor (var field in specs.operationMandatoryFields) {\n  specs.operationFields[field] = specs.operationMandatoryFields[field].concat(specs.operationOptionalFields[field]);\n}\n/**\n * @param {string} type Operation type\n * @param {string} field\n * @return {boolean}\n */\n\n\nspecs.isOperationField = function (operation, field) {\n  return specs.operationFields[operation].find(function (name) {\n    return name === field;\n  });\n};\n/**\n * Field types.\n */\n\n\nspecs.fieldType = {\n  amount: \"amount\",\n  asset: \"asset\",\n  assetCode: \"string\",\n  assetIssuer: \"address\",\n  authorize: \"boolean\",\n  bumpTo: \"sequence\",\n  buyAmount: \"amount\",\n  buying: \"asset\",\n  callback: \"url\",\n  clearFlags: \"flags\",\n  destAsset: \"asset\",\n  destAmount: \"amount\",\n  destMin: \"amount\",\n  destination: \"address\",\n  fee: \"amount\",\n  highThreshold: \"threshold\",\n  homeDomain: \"string\",\n  horizon: \"url\",\n  inflationDest: \"address\",\n  limit: \"amount\",\n  lowThreshold: \"threshold\",\n  masterWeight: \"weight\",\n  maxTime: \"date\",\n  medThreshold: \"threshold\",\n  memo: \"memo\",\n  memoBinary: \"hash\",\n  memoHash: \"hash\",\n  memoId: \"id\",\n  memoReturn: \"hash\",\n  memoText: \"string\",\n  memoType: \"string\",\n  minTime: \"date\",\n  network: \"network\",\n  offerId: \"string\",\n  price: \"price\",\n  name: \"string\",\n  path: \"assetsArray\",\n  selling: \"asset\",\n  sendAmount: \"amount\",\n  sendAsset: \"asset\",\n  sendMax: \"amount\",\n  sequence: \"sequence\",\n  setFlags: \"flags\",\n  signer: \"signer\",\n  signerHash: \"hash\",\n  signerKey: \"address\",\n  signerType: \"string\",\n  signerTx: \"id\",\n  signerWeight: \"weight\",\n  source: \"address\",\n  startingBalance: \"amount\",\n  trustor: \"address\",\n  value: \"buffer\"\n};\n/**\n * An array of each valid type for fields.\n */\n\nspecs.types = [];\n\nvar _loop = function _loop(_field) {\n  var type = specs.fieldType[_field];\n  specs.types.find(function (entry) {\n    return entry === type;\n  }) || specs.types.push(type);\n};\n\nfor (var _field in specs.fieldType) {\n  _loop(_field);\n}\n/**\n * A neutral account ID meant to be replaced before signing & sending the\n * transaction.\n * @static\n */\n\n\nspecs.neutralAccountId = \"GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWHF\";","\"use strict\";\n/**\n * Contains functions that probe the blockchain or federation servers to collect\n * datas.\n *\n * @exports resolve\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar resolve = exports;\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar specs = require(\"./specs\");\n\nvar status = require(\"./status\");\n/**\n * Returns the\n * [Server]{@link https://stellar.github.io/js-stellar-sdk/Server.html} object\n * for **horizon**, or for **network**, or for the current network.\n *\n * @param {string} [network] 'public', 'test' or a network passphrase\n * @param {string} [horizon] A horizon URL\n * @returns {Server} A StellarSdk Server object\n */\n\n\nresolve.server = function (conf) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : conf.network;\n  var horizon = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : conf.horizon;\n  if (!horizon) horizon = resolve.horizon(conf, network);\n  if (!horizon) throw new Error(\"No horizon node defined for selected network.\");\n\n  if (!conf.current.server[horizon]) {\n    conf.current.server[horizon] = new StellarSdk.Server(horizon);\n  }\n\n  return conf.current.server[horizon];\n};\n/**\n * Switch to the current network, or to **network** if provided.\n *\n * @deprecated StellarSdk global `Network` setting is deprecated.\n * @param {string} [network] 'public', 'test' or a network passphrase\n * @returns {Server} A StellarSdk Server object\n */\n\n\nresolve.useNetwork = function (conf) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : conf.network;\n  // DEPRECATED - to be removed when in sync with stellar-sdk 3.x.\n  console.warn(\"`.selectNetwork()`, `.useNetwork()`, as well as StellarSdk global `Network` setting are deprecated. Please use `cosmicLib.config.network` or pass parameter explicitely.\");\n  var passphrase = resolve.networkPassphrase(conf, network);\n  var currentPassphrase = resolve.networkPassphrase();\n\n  if (passphrase !== currentPassphrase) {\n    // eslint-disable-next-line no-console\n    console.log(\"Switch to network: \" + network);\n    StellarSdk.Network.use(new StellarSdk.Network(passphrase));\n  }\n};\n/**\n * Returns the curent Horizon node URL, or the Horizon node URL for **network**\n * if provided.\n *\n * @param {string} [network] A network name or passphrase.\n */\n\n\nresolve.horizon = function (conf) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : conf.network;\n\n  if (conf.horizon) {\n    return conf.horizon;\n  } else {\n    var passphrase = resolve.networkPassphrase(conf, network);\n\n    if (conf.current && conf.current.horizon[passphrase]) {\n      return conf.current.horizon[passphrase];\n    }\n  }\n};\n/**\n * Returns the current network passphrase, or the passphrase for **network** is\n * provided.\n */\n\n\nresolve.networkPassphrase = function () {\n  var conf = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : conf.network;\n\n  if (network === undefined) {\n    // DEPRECATED: To be removed in sync with stellar-sdk 3.x.\n    var currentNetwork = StellarSdk.Network.current();\n    if (currentNetwork) return currentNetwork.networkPassphrase();\n  } else {\n    return conf.current.passphrase[network] || network;\n  }\n};\n/**\n * Returns the network name for **network passphrase**, or `undefined`.\n *\n * @param {string} networkPassphrase\n * @return {string}\n */\n\n\nresolve.networkName = function () {\n  var conf = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var networkPassphrase = arguments.length > 1 ? arguments[1] : undefined;\n  var index = Object.values(conf.current.passphrase).indexOf(networkPassphrase);\n  if (index === -1) return networkPassphrase;else return Object.keys(conf.current.passphrase)[index];\n};\n/**\n * Returns the federation server\n * [Account]{@link https://stellar.github.io/js-stellar-sdk/Account.html}\n * for **address**.\n *\n * @async\n * @param {string} address A Stellar public key or a federated address\n * @return {} Resolve to federation server response\n */\n\n\nresolve.address = function (conf, address) {\n  var cache = conf.cache;\n  if (cache && cache.destination[address]) return cache.destination[address];\n  var promise = addressResolver(conf, address);\n  if (cache) cache.destination[address] = promise;\n  return promise;\n};\n\nfunction addressResolver(conf, address) {\n  var account, accountId;\n  return _regeneratorRuntime.async(function addressResolver$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(StellarSdk.FederationServer.resolve(address));\n\n        case 3:\n          account = _context.sent;\n          accountId = account.account_id;\n\n          if (accountId) {\n            _context.next = 7;\n            break;\n          }\n\n          throw new Error(\"Unknow address\");\n\n        case 7:\n          if (!account.memo_type) delete account.memo;\n          if (address !== accountId) account.address = address;\n\n          if (conf.aliases && conf.aliases[accountId]) {\n            account.alias = conf.aliases[accountId];\n          }\n\n          return _context.abrupt(\"return\", account);\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n          status.error(conf, \"Can't resolve: \" + misc.shorter(address));\n          status.fail(conf, \"Unresolved address\", \"throw\");\n\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 13]]);\n}\n/**\n * Returns the\n * [AccountResponse]{@link https://stellar.github.io/js-stellar-sdk/AccountResponse.html}\n * object for **address**.\n *\n * @param {string} address A public key or a federated address\n * @return {Object} The AccountResponse\n */\n\n\nresolve.account = function _callee(conf, address, quietFlag) {\n  var account, accountId, cache, promise;\n  return _regeneratorRuntime.async(function _callee$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(resolve.address(conf, address));\n\n        case 2:\n          account = _context2.sent;\n          accountId = account.account_id;\n          cache = conf.cache;\n\n          if (!(cache && cache.account[accountId])) {\n            _context2.next = 7;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", cache.account[accountId]);\n\n        case 7:\n          promise = accountResolver(conf, accountId, quietFlag);\n          if (cache) cache.account[accountId] = promise;\n          return _context2.abrupt(\"return\", promise);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n\nfunction accountResolver(conf, accountId, quietFlag) {\n  var server, accountResponse;\n  return _regeneratorRuntime.async(function accountResolver$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          server = resolve.server(conf);\n          _context3.prev = 1;\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(server.loadAccount(accountId));\n\n        case 4:\n          accountResponse = _context3.sent;\n          return _context3.abrupt(\"return\", accountResponse);\n\n        case 8:\n          _context3.prev = 8;\n          _context3.t0 = _context3[\"catch\"](1);\n\n          if (!quietFlag) {\n            _context3.next = 14;\n            break;\n          }\n\n          throw _context3.t0;\n\n        case 14:\n          if (_context3.t0.response) {\n            status.error(conf, \"Empty account: \" + misc.shorter(accountId), \"throw\");\n          } else {\n            status.error(conf, \"Invalid horizon node: \" + resolve.horizon(conf), \"throw\");\n          }\n\n        case 15:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[1, 8]]);\n}\n/**\n * Returns `true` if **address** account is empty, `false` otherwise.\n *\n * @async\n * @param {string} address Public key or federated address\n * @return {boolean}\n */\n\n\nresolve.isAccountEmpty = function (conf, address) {\n  return resolve.account(conf, address, true).then(function () {\n    return false;\n  })[\"catch\"](function () {\n    return true;\n  });\n};\n/**\n * Returns the account object for transaction source **address`** with sequence\n * set at **sequence** if provided. If **address** is not provided, returns the\n * neutral account object instead (as in SEP-0007 specifications).\n *\n * @param {string} [address]\n * @param {string|numbre} [sequence]\n * @return {AccountResponse}\n */\n\n\nresolve.txSourceAccount = function _callee2(conf, address, sequence) {\n  var destination, account, baseAccount;\n  return _regeneratorRuntime.async(function _callee2$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          if (address) {\n            _context4.next = 4;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", makeAccountResponse(conf, specs.neutralAccountId, \"-1\"));\n\n        case 4:\n          _context4.next = 6;\n          return _regeneratorRuntime.awrap(resolve.address(conf, address));\n\n        case 6:\n          destination = _context4.sent;\n          if (destination.memo) status.error(conf, \"Invalid transaction source address (requires a memo)\", \"throw\");\n          _context4.next = 10;\n          return _regeneratorRuntime.awrap(resolve.account(conf, destination.account_id));\n\n        case 10:\n          account = _context4.sent;\n\n          if (sequence) {\n            baseAccount = new StellarSdk.Account(account.id, sequence);\n            baseAccount.sequence = baseAccount.sequence.sub(1);\n            account._baseAccount = baseAccount;\n          }\n\n          return _context4.abrupt(\"return\", account);\n\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n};\n/**\n * Creates an AccountResponse object with signers set for an empty account.\n *\n * @param  {string} publicKey\n * @param  {string} sequence [description]\n * @return {AccountResponse}\n */\n\n\nfunction makeAccountResponse(conf, publicKey, sequence) {\n  var account = new StellarSdk.Account(publicKey, sequence);\n  if (conf.cache) conf.cache.account[publicKey] = account;\n  account.id = publicKey;\n  account.signers = [{\n    public_key: publicKey,\n    weight: 1,\n    key: publicKey,\n    type: \"ed25519_public_key\"\n  }];\n  return account;\n}\n/**\n * Returns the array of all source accounts ID involved in **transaction**.\n *\n * @param {Transaction} transaction\n * @return {Array}\n */\n\n\nresolve.txSources = function (conf, transaction) {\n  if (!transaction.source) throw new Error(\"No source for transaction\");\n  var extra = resolve.extra(conf, transaction);\n  if (extra.cache.txSources) return extra.cache.txSources;\n  var array = extra.cache.txSources = [transaction.source];\n\n  var _loop = function _loop(index) {\n    var source = transaction.operations[index].source;\n    if (source && !array.find(function (a) {\n      return a === source;\n    })) array.push(source);\n  };\n\n  for (var index in transaction.operations) {\n    _loop(index);\n  }\n\n  return array;\n};\n/**\n * Returns an object such as:\n *\n * ```js\n * {\n *    $accountId: $accountSigners\n *    ...\n * }\n * ```\n *\n * @param {Transaction} transaction\n * @return {Object}\n */\n\n\nresolve.txSigners = function _callee3(conf, transaction) {\n  var extra, txSources, signers, index, source, account;\n  return _regeneratorRuntime.async(function _callee3$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          extra = resolve.extra(conf, transaction);\n\n          if (!extra.cache.txSigners) {\n            _context5.next = 3;\n            break;\n          }\n\n          return _context5.abrupt(\"return\", extra.cache.txSigners);\n\n        case 3:\n          txSources = resolve.txSources(extra, transaction);\n          signers = extra.cache.txSigners = {};\n          _context5.t0 = _regeneratorRuntime.keys(txSources);\n\n        case 6:\n          if ((_context5.t1 = _context5.t0()).done) {\n            _context5.next = 15;\n            break;\n          }\n\n          index = _context5.t1.value;\n          source = txSources[index];\n          _context5.next = 11;\n          return _regeneratorRuntime.awrap(resolveTxSource(extra, source));\n\n        case 11:\n          account = _context5.sent;\n\n          if (!signers[account.id]) {\n            signers[account.id] = account.signers.filter(function (signer) {\n              return signer.type !== \"preauthTx\";\n            });\n          }\n\n          _context5.next = 6;\n          break;\n\n        case 15:\n          return _context5.abrupt(\"return\", signers);\n\n        case 16:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n};\n\nfunction resolveTxSource(conf, address) {\n  return _regeneratorRuntime.async(function resolveTxSource$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return _regeneratorRuntime.awrap(resolve.account(conf, address, \"quiet\"));\n\n        case 3:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 6:\n          _context6.prev = 6;\n          _context6.t0 = _context6[\"catch\"](0);\n          return _context6.abrupt(\"return\", makeAccountResponse(conf, address, \"0\"));\n\n        case 9:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, [[0, 6]]);\n}\n/**\n * Returns an Array containing the keys for all legit signers of **transaction**.\n *\n * @param {Transaction} transaction\n * @return {Array}\n */\n\n\nresolve.txSignersList = function _callee4(conf, transaction) {\n  var extra, txSigners;\n  return _regeneratorRuntime.async(function _callee4$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          extra = resolve.extra(conf, transaction);\n\n          if (extra.cache.txSignersList) {\n            _context7.next = 6;\n            break;\n          }\n\n          _context7.next = 4;\n          return _regeneratorRuntime.awrap(resolve.txSigners(extra, transaction));\n\n        case 4:\n          txSigners = _context7.sent;\n          extra.cache.txSignersList = signersTableToSignersList(txSigners);\n\n        case 6:\n          return _context7.abrupt(\"return\", extra.cache.txSignersList);\n\n        case 7:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  });\n};\n\nfunction signersTableToSignersList(signersTable) {\n  var array = [];\n\n  for (var accountId in signersTable) {\n    signersTable[accountId].forEach(function (signer) {\n      if (!array.find(function (key) {\n        return key === signer.key;\n      })) array.push(signer.key);\n    });\n  }\n\n  return array;\n}\n/**\n * Add an extra field to **object** that embed cache and local configuration.\n *\n * @private\n */\n\n\nresolve.extra = function (conf, object) {\n  if (!object._cosmicplus) {\n    misc.setHiddenProperty(object, \"_cosmicplus\", {});\n    if (conf.cache) object._cosmicplus.cache = conf.cache;else object._cosmicplus.cache = {\n      destination: {},\n      account: {}\n    };\n    object._cosmicplus.network = conf.network;\n    object._cosmicplus.current = conf.current;\n  }\n\n  return object._cosmicplus;\n};","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","\"use strict\";\n/**\n * Contains the methods to update cosmic link status and HTML status node.\n * Thoses methods won't have effect unless status reporting is enabled on `conf`\n * object by using `status.init` (wich is done automatically on CosmicLink\n * objects).\n *\n * @private\n * @exports status\n */\n\nvar status = exports;\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nvar html = env.isBrowser && require(\"@cosmic-plus/domutils/es5/html\");\n/**\n * Initialize `conf.status` & `conf.errors`.\n */\n\n\nstatus.init = function (conf) {\n  conf.status = null;\n  conf.errors = false;\n};\n/**\n * Set `conf` status as `status` and update statusNode. Error status should be\n * recorded using the `status.fail` function bellow. Once a status is set it\n * won't be mutated.\n *\n * @param {string} status\n */\n\n\nstatus.update = function (conf, status) {\n  if (conf.status || conf.status === undefined) return; // eslint-disable-next-line no-console\n\n  console.log(\"Set status: \" + status);\n  conf.status = status;\n\n  if (conf._statusNode) {\n    var title = html.grab(\".cosmiclib_status\", conf._statusNode);\n    title.textContent = status;\n  }\n};\n/**\n * Set `conf` status as error status `status` and update statusNode. This\n * implies that the cosmic link or the underlying transaction is invalid. Then,\n * call `continuation` if any. `continuation` should be a either a function or\n * 'throw'.\n *\n * @param {string} status\n * @param {function|'throw'} [continuation]\n */\n\n\nstatus.fail = function (conf, errorStatus, continuation) {\n  status.update(conf, errorStatus);\n  errorContinuation(errorStatus, continuation);\n};\n/**\n * Append `error` to `conf.errors` and to the HTML display. Then, call\n * `continuation` if any. `continuation` should be a either a function or\n * 'throw'.\n *\n * @param {string} error\n * @param {procedure|'throw'} [continuation]\n */\n\n\nstatus.error = function (conf, error, continuation) {\n  // eslint-disable-next-line no-console\n  console.log(error);\n\n  if (conf.errors !== undefined) {\n    if (!conf.errors) conf.errors = [];\n    conf.errors.push(error);\n\n    if (conf._statusNode) {\n      var errorsNode = html.grab(\".cosmiclib_errors\", conf._statusNode);\n      var lineNode = html.create(\"li\", null, error);\n      html.append(errorsNode, lineNode);\n    }\n  }\n\n  errorContinuation(error, continuation);\n};\n/**\n * Create & return an HTML element that displays `conf` status and eventual\n * errors.\n *\n * @return {htmlElement}\n */\n\n\nstatus.makeHtmlNode = function (conf) {\n  var statusNode = html.create(\"div\", \".cosmiclib_statusNode\");\n  var statusLine = html.create(\"span\", \".cosmiclib_status\");\n  html.append(statusNode, statusLine);\n  if (conf.status) statusLine.textContent = conf.status;\n  var errorsNode = html.create(\"ul\", \".cosmiclib_errors\");\n  html.append(statusNode, errorsNode);\n\n  if (conf.errors) {\n    conf.errors.forEach(function (error) {\n      var errorLine = html.create(\"li\", null, error);\n      html.append(errorsNode, errorLine);\n    });\n  }\n\n  return statusNode;\n};\n/**\n * If `continuation` is a function, call it with `error` as argument.\n * If `continuation` equal 'throw', throw a new error with `error` as message.\n * If `continuation` is undefined, do nothing.\n */\n\n\nfunction errorContinuation(error, continuation) {\n  if (continuation) {\n    if (continuation === \"throw\") throw new Error(error);else continuation(error);\n  }\n}","var _typeof = require(\"../helpers/typeof\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;","\"use strict\";\n/**\n * Decode fields values from URI to cosmic link JSON format. This format differs\n * from Stellar transaction format: it is simpler, allow for federated address\n * and can be stringified/parsed without loss of information.\n *\n * For each of those functions, any error is recorded in the `conf` object\n * and HTML nodes are updated accordingly.\n *\n * @private\n * @exports decode\n */\n\nvar decode = exports;\n\nvar check = require(\"./check\");\n\nvar normalize = require(\"./normalize\");\n\nvar specs = require(\"./specs\");\n\nvar status = require(\"./status\");\n\ndecode.query = function (conf) {\n  var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"?\";\n  if (query.substr(0, 1) !== \"?\") status.fail(conf, \"Invalid query\", \"throw\");\n  query = query.substr(1);\n  var operations = [];\n  var tdesc = {}; // Backward compatibility with the old non-standard syntax, deprecated since\n  // 2019-08-26. This adds `type=` at the beginning of the query when the first\n  // parameter doesn't contains an `=` sign.\n\n  if (query.match(/^\\w+(&|$)/)) query = \"type=\".concat(query);\n  var parser;\n  var params = query.split(\"&\");\n\n  for (var index in params) {\n    var entry = params[index];\n    var field = entry.split(\"=\", 1)[0];\n    var value = entry.substring(field.length + 1);\n    if (!field) continue;\n\n    if (field === \"type\") {\n      if (parser) {\n        status.error(conf, \"Query declares 'type' several times\", \"throw\");\n      } else if (value !== \"transaction\") {\n        operations[0] = {\n          type: value\n        };\n      }\n\n      parser = value;\n      continue;\n    } else if (!parser) {\n      status.error(conf, \"Query doesn't declare 'type' in first position\", \"throw\");\n    }\n\n    if (field === \"operation\") {\n      operations.push({\n        type: value\n      });\n      parser = \"operation\";\n      continue;\n    }\n\n    var decoded = decode.field(conf, field, value); /// Multi-operation link.\n\n    if (parser === \"transaction\") {\n      tdesc[field] = decoded;\n    } else if (parser === \"operation\") {\n      operations[operations.length - 1][field] = decoded; /// One-operation link.\n    } else {\n      if (specs.isTransactionField(field)) {\n        tdesc[field] = decoded;\n      } else {\n        operations[0][field] = decoded;\n      }\n    }\n  }\n\n  tdesc.operations = operations;\n  normalize.tdesc(conf, tdesc);\n  tdesc.operations.forEach(function (odesc) {\n    return normalize.odesc(conf, odesc);\n  });\n  check.tdesc(conf, tdesc);\n  return tdesc;\n};\n/******************************************************************************/\n\n/**\n * Decode `value` accordingly to `field` type.\n *\n * @param {string} field\n * @param {string} value\n */\n\n\ndecode.field = function (conf, field, value) {\n  var type = specs.fieldType[field];\n  return type ? decode.type(conf, type, value) : value;\n};\n/**\n * Decode `value` using the decoding function for `type`.\n *\n * @param {string} type\n * @param {string} value\n */\n\n\ndecode.type = function (conf, type, value) {\n  if (value) {\n    value = decodeURIComponent(value);\n    return process[type] ? process[type](conf, value) : value;\n  } else {\n    return \"\";\n  }\n};\n/******************************************************************************/\n\n\nvar process = {};\n\nprocess.asset = function (conf, asset) {\n  var assetLower = asset.toLowerCase();\n\n  if (assetLower === \"xlm\" || assetLower === \"native\") {\n    return {\n      code: \"XLM\"\n    };\n  } else {\n    var temp = asset.split(\":\");\n    var object = {\n      code: temp[0],\n      issuer: temp[1]\n    };\n    return object;\n  }\n};\n\nprocess.assetsArray = function (conf, assetsList) {\n  var strArray = assetsList.split(\",\");\n  return strArray.map(function (entry) {\n    return decode.asset(conf, entry);\n  });\n};\n\nprocess[\"boolean\"] = function (conf, string) {\n  switch (string) {\n    case \"true\":\n      return true;\n\n    case \"false\":\n      return false;\n  }\n};\n\nprocess.buffer = function (conf, string) {\n  var matched = string.match(/(^[^:]*):/);\n  var type = matched && matched[1];\n\n  switch (type) {\n    case \"base64\":\n      return {\n        type: type,\n        value: string.substr(type.length + 1)\n      };\n\n    case \"text\":\n      string = string.substr(type.length + 1);\n    // Fallthrough\n\n    default:\n      return {\n        type: \"text\",\n        value: process.string(conf, string)\n      };\n  }\n};\n\nprocess.date = function (conf, string) {\n  /// now + {minutes} syntactic sugar\n  if (string.match(/^\\+[0-9]+$/)) return string; /// Use UTC timezone by default.\n\n  if (string.match(/T[^+]*[0-9]$/)) string += \"Z\";\n  return new Date(string).toISOString();\n};\n\nprocess.memo = function (conf, string) {\n  var matched = string.match(/(^[^:]*):/);\n  var type = matched && matched[1];\n\n  switch (type) {\n    case \"base64\":\n    case \"id\":\n    case \"hash\":\n    case \"return\":\n      return {\n        type: type,\n        value: string.substr(type.length + 1)\n      };\n\n    case \"text\":\n      string = string.substr(type.length + 1);\n    // Fallthrough\n\n    default:\n      return {\n        type: \"text\",\n        value: process.string(conf, string)\n      };\n  }\n};\n\nprocess.price = function (conf, price) {\n  var numerator = price.replace(/:.*/, \"\");\n  var denominator = price.replace(/^[^:]*:/, \"\");\n  if (numerator === denominator) return price;else return {\n    n: +numerator,\n    d: +denominator\n  };\n};\n\nprocess.signer = function (conf, signer) {\n  var temp = signer.split(\":\");\n  var object = {\n    weight: temp[0],\n    type: temp[1],\n    value: temp[2]\n  };\n  return object;\n};\n\nprocess.string = function (conf, string) {\n  return string.replace(/\\+/g, \" \");\n};\n\nprocess.network = process.string;\n/******************************************************************************/\n\n/**\n * Provide dummy aliases for every other type for convenience & backward\n * compatibility.\n */\n\nspecs.types.forEach(function (type) {\n  exports[type] = function (conf, value) {\n    return decode.type(conf, type, value);\n  };\n});","\"use strict\";\n\nexports.__esModule = true;\nexports.CALL = exports.ERROR = exports.INIT = exports.LOADED = exports.BOOTSTRAP = void 0;\n// Message called from iframe.html inline script before \"window.onload\" event. This is first message from iframe to window.opener.\nvar BOOTSTRAP = 'iframe-bootstrap'; // Message from iframe.js to window.opener, called after \"window.onload\" event. This is second message from iframe to window.opener.\n\nexports.BOOTSTRAP = BOOTSTRAP;\nvar LOADED = 'iframe-loaded'; // Message from window.opener to iframe.js\n\nexports.LOADED = LOADED;\nvar INIT = 'iframe-init'; // Error message from iframe.js to window.opener. Could be thrown during iframe initialization process\n\nexports.INIT = INIT;\nvar ERROR = 'iframe-error'; // Message from window.opener to iframe. Call method\n\nexports.ERROR = ERROR;\nvar CALL = 'iframe-call';\nexports.CALL = CALL;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","\"use strict\";\n\nexports.__esModule = true;\nexports.ADDRESS_VALIDATION = exports.BUNDLE_PROGRESS = exports.LOGIN_CHALLENGE_RESPONSE = exports.LOGIN_CHALLENGE_REQUEST = exports.CUSTOM_MESSAGE_RESPONSE = exports.CUSTOM_MESSAGE_REQUEST = exports.CHANGE_SETTINGS = exports.RECEIVE_WORD = exports.RECEIVE_FEE = exports.RECEIVE_ACCOUNT = exports.CHANGE_ACCOUNT = exports.RECEIVE_DEVICE = exports.RECEIVE_PASSPHRASE = exports.RECEIVE_PIN = exports.RECEIVE_CONFIRMATION = exports.RECEIVE_PERMISSION = exports.FIRMWARE_PROGRESS = exports.REQUEST_WORD = exports.REQUEST_BUTTON = exports.INSUFFICIENT_FUNDS = exports.UPDATE_CUSTOM_FEE = exports.SELECT_FEE = exports.SELECT_ACCOUNT = exports.SELECT_DEVICE = exports.SET_OPERATION = exports.LOADING = exports.CONNECT = exports.INVALID_PASSPHRASE_ACTION = exports.INVALID_PASSPHRASE = exports.REQUEST_PASSPHRASE_ON_DEVICE = exports.REQUEST_PASSPHRASE = exports.INVALID_PIN = exports.REQUEST_PIN = exports.REQUEST_CONFIRMATION = exports.REQUEST_PERMISSION = exports.CLOSE_UI_WINDOW = exports.REQUEST_UI_WINDOW = exports.DEVICE_NEEDS_BACKUP = exports.FIRMWARE_NOT_INSTALLED = exports.FIRMWARE_NOT_COMPATIBLE = exports.FIRMWARE_NOT_SUPPORTED = exports.FIRMWARE_OUTDATED = exports.FIRMWARE_OLD = exports.SEEDLESS = exports.INITIALIZE = exports.REQUIRE_MODE = exports.NOT_IN_BOOTLOADER = exports.BOOTLOADER = exports.TRANSPORT = void 0;\nvar TRANSPORT = 'ui-no_transport';\nexports.TRANSPORT = TRANSPORT;\nvar BOOTLOADER = 'ui-device_bootloader_mode';\nexports.BOOTLOADER = BOOTLOADER;\nvar NOT_IN_BOOTLOADER = 'ui-device_not_in_bootloader_mode';\nexports.NOT_IN_BOOTLOADER = NOT_IN_BOOTLOADER;\nvar REQUIRE_MODE = 'ui-device_require_mode';\nexports.REQUIRE_MODE = REQUIRE_MODE;\nvar INITIALIZE = 'ui-device_not_initialized';\nexports.INITIALIZE = INITIALIZE;\nvar SEEDLESS = 'ui-device_seedless';\nexports.SEEDLESS = SEEDLESS;\nvar FIRMWARE_OLD = 'ui-device_firmware_old';\nexports.FIRMWARE_OLD = FIRMWARE_OLD;\nvar FIRMWARE_OUTDATED = 'ui-device_firmware_outdated';\nexports.FIRMWARE_OUTDATED = FIRMWARE_OUTDATED;\nvar FIRMWARE_NOT_SUPPORTED = 'ui-device_firmware_unsupported';\nexports.FIRMWARE_NOT_SUPPORTED = FIRMWARE_NOT_SUPPORTED;\nvar FIRMWARE_NOT_COMPATIBLE = 'ui-device_firmware_not_compatible';\nexports.FIRMWARE_NOT_COMPATIBLE = FIRMWARE_NOT_COMPATIBLE;\nvar FIRMWARE_NOT_INSTALLED = 'ui-device_firmware_not_installed';\nexports.FIRMWARE_NOT_INSTALLED = FIRMWARE_NOT_INSTALLED;\nvar DEVICE_NEEDS_BACKUP = 'ui-device_needs_backup';\nexports.DEVICE_NEEDS_BACKUP = DEVICE_NEEDS_BACKUP;\nvar REQUEST_UI_WINDOW = 'ui-request_window';\nexports.REQUEST_UI_WINDOW = REQUEST_UI_WINDOW;\nvar CLOSE_UI_WINDOW = 'ui-close_window';\nexports.CLOSE_UI_WINDOW = CLOSE_UI_WINDOW;\nvar REQUEST_PERMISSION = 'ui-request_permission';\nexports.REQUEST_PERMISSION = REQUEST_PERMISSION;\nvar REQUEST_CONFIRMATION = 'ui-request_confirmation';\nexports.REQUEST_CONFIRMATION = REQUEST_CONFIRMATION;\nvar REQUEST_PIN = 'ui-request_pin';\nexports.REQUEST_PIN = REQUEST_PIN;\nvar INVALID_PIN = 'ui-invalid_pin';\nexports.INVALID_PIN = INVALID_PIN;\nvar REQUEST_PASSPHRASE = 'ui-request_passphrase';\nexports.REQUEST_PASSPHRASE = REQUEST_PASSPHRASE;\nvar REQUEST_PASSPHRASE_ON_DEVICE = 'ui-request_passphrase_on_device';\nexports.REQUEST_PASSPHRASE_ON_DEVICE = REQUEST_PASSPHRASE_ON_DEVICE;\nvar INVALID_PASSPHRASE = 'ui-invalid_passphrase';\nexports.INVALID_PASSPHRASE = INVALID_PASSPHRASE;\nvar INVALID_PASSPHRASE_ACTION = 'ui-invalid_passphrase_action';\nexports.INVALID_PASSPHRASE_ACTION = INVALID_PASSPHRASE_ACTION;\nvar CONNECT = 'ui-connect';\nexports.CONNECT = CONNECT;\nvar LOADING = 'ui-loading';\nexports.LOADING = LOADING;\nvar SET_OPERATION = 'ui-set_operation';\nexports.SET_OPERATION = SET_OPERATION;\nvar SELECT_DEVICE = 'ui-select_device';\nexports.SELECT_DEVICE = SELECT_DEVICE;\nvar SELECT_ACCOUNT = 'ui-select_account';\nexports.SELECT_ACCOUNT = SELECT_ACCOUNT;\nvar SELECT_FEE = 'ui-select_fee';\nexports.SELECT_FEE = SELECT_FEE;\nvar UPDATE_CUSTOM_FEE = 'ui-update_custom_fee';\nexports.UPDATE_CUSTOM_FEE = UPDATE_CUSTOM_FEE;\nvar INSUFFICIENT_FUNDS = 'ui-insufficient_funds';\nexports.INSUFFICIENT_FUNDS = INSUFFICIENT_FUNDS;\nvar REQUEST_BUTTON = 'ui-button';\nexports.REQUEST_BUTTON = REQUEST_BUTTON;\nvar REQUEST_WORD = 'ui-request_word';\nexports.REQUEST_WORD = REQUEST_WORD;\nvar FIRMWARE_PROGRESS = 'ui-firmware-progress';\nexports.FIRMWARE_PROGRESS = FIRMWARE_PROGRESS;\nvar RECEIVE_PERMISSION = 'ui-receive_permission';\nexports.RECEIVE_PERMISSION = RECEIVE_PERMISSION;\nvar RECEIVE_CONFIRMATION = 'ui-receive_confirmation';\nexports.RECEIVE_CONFIRMATION = RECEIVE_CONFIRMATION;\nvar RECEIVE_PIN = 'ui-receive_pin';\nexports.RECEIVE_PIN = RECEIVE_PIN;\nvar RECEIVE_PASSPHRASE = 'ui-receive_passphrase';\nexports.RECEIVE_PASSPHRASE = RECEIVE_PASSPHRASE;\nvar RECEIVE_DEVICE = 'ui-receive_device';\nexports.RECEIVE_DEVICE = RECEIVE_DEVICE;\nvar CHANGE_ACCOUNT = 'ui-change_account';\nexports.CHANGE_ACCOUNT = CHANGE_ACCOUNT;\nvar RECEIVE_ACCOUNT = 'ui-receive_account';\nexports.RECEIVE_ACCOUNT = RECEIVE_ACCOUNT;\nvar RECEIVE_FEE = 'ui-receive_fee';\nexports.RECEIVE_FEE = RECEIVE_FEE;\nvar RECEIVE_WORD = 'ui-receive_word';\nexports.RECEIVE_WORD = RECEIVE_WORD;\nvar CHANGE_SETTINGS = 'ui-change_settings';\nexports.CHANGE_SETTINGS = CHANGE_SETTINGS;\nvar CUSTOM_MESSAGE_REQUEST = 'ui-custom_request';\nexports.CUSTOM_MESSAGE_REQUEST = CUSTOM_MESSAGE_REQUEST;\nvar CUSTOM_MESSAGE_RESPONSE = 'ui-custom_response';\nexports.CUSTOM_MESSAGE_RESPONSE = CUSTOM_MESSAGE_RESPONSE;\nvar LOGIN_CHALLENGE_REQUEST = 'ui-login_challenge_request';\nexports.LOGIN_CHALLENGE_REQUEST = LOGIN_CHALLENGE_REQUEST;\nvar LOGIN_CHALLENGE_RESPONSE = 'ui-login_challenge_response';\nexports.LOGIN_CHALLENGE_RESPONSE = LOGIN_CHALLENGE_RESPONSE;\nvar BUNDLE_PROGRESS = 'ui-bundle_progress';\nexports.BUNDLE_PROGRESS = BUNDLE_PROGRESS;\nvar ADDRESS_VALIDATION = 'ui-address_validation';\nexports.ADDRESS_VALIDATION = ADDRESS_VALIDATION;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","\"use strict\";\n/**\n * Library-wide configuration.\n *\n * @borrows module:aliases.all as aliases\n * @borrows module:aliases.set as addAliases\n * @borrows module:aliases.remove as removeAliases\n *\n * @borrows module:event.defaultClickHandlers as clickHandlers\n * @borrows module:event.setClickHandler as setClickHandler\n * @borrows module:event.clearClickHandler as clearClickHandler\n *\n * @exports config\n */\n\nvar config = exports;\n\nvar aliases = require(\"@cosmic-plus/base/es5/aliases\");\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar event = env.isBrowser && require(\"./event\");\n/**\n * The base URI to build cosmic links.\n * @default 'https://cosmic.link/'\n */\n\n\nconfig.page = \"https://cosmic.link/\";\n/**\n * The default fallback network.\n * @default 'public'\n */\n\nconfig.network = \"public\";\n/**\n * The default fallback source address.\n * @default undefined\n */\n\nconfig.source = undefined;\n/**\n * Networks setup.\n *\n * @private\n */\n\nconfig.current = {\n  passphrase: {},\n  horizon: {},\n  server: {}\n};\n/**\n * Set default **passphrase** and **horizon** URL for network **name**.\n *\n * Adding custom network this way will enable the use of their name in cosmic\n * queries (as in `&network=name`). However, please remind that this feature\n * will works only on your side and could break compatibility with other\n * services.\n *\n * @example\n * cosmicLib.config.setupNetwork('public', 'https://my-own-horizon-instance.example.org')\n * cosmicLib.config.setupNetwork('custom', 'https://custom-horizon.example.org', 'My Custom Passphrase')\n *\n * @param {string} name Network name (like 'public', 'test')\n * @param {string} horizon Horizon URL\n * @param {string} [passphrase] Network passphrase\n */\n\nconfig.setupNetwork = function (name, horizon, passphrase) {\n  if (passphrase) config.current.passphrase[name] = passphrase;else passphrase = config.current.passphrase[name];\n  config.current.horizon[passphrase] = horizon;\n};\n\nconfig.setupNetwork(\"public\", \"https://horizon.stellar.org\", StellarSdk.Networks.PUBLIC);\nconfig.setupNetwork(\"test\", \"https://horizon-testnet.stellar.org\", StellarSdk.Networks.TESTNET);\nconfig.aliases = aliases.all;\n\nconfig.addAliases = function (definitions) {\n  return aliases.set(config, definitions);\n};\n\nconfig.removeAliases = function (array) {\n  return aliases.remove(config, array);\n};\n\nconfig.clickHandlers = event.defaultClickHandlers;\n\nconfig.setClickHandler = function (fieldType, callback) {\n  return event.setClickHandler(config, fieldType, callback);\n};\n\nconfig.clearClickHandler = function (fieldType) {\n  return event.clearClickHandler(config, fieldType);\n};","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","\"use strict\";\n/**\n * Contains the methods to convert transactions between various formats.\n *\n * @private\n * @exports convert\n */\n\nvar convert = exports;\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar construct = require(\"./construct\");\n\nvar decode = require(\"./decode\");\n\nvar destruct = require(\"./destruct\");\n\nvar encode = require(\"./encode\");\n\nvar resolve = require(\"./resolve\");\n/** ****************************    URI -> XDR    ******************************/\n\n\nconvert.uriToQuery = function (conf, uri) {\n  if (!uri.match(/\\?/)) return null;\n  var query = uri.replace(/^[^?]*/, \"\");\n  return query;\n};\n\nconvert.queryToTdesc = decode.query;\n\nconvert.tdescToJson = function (conf, tdesc) {\n  return JSON.stringify(tdesc, null, 2);\n};\n\nconvert.tdescToTransaction = construct.transaction;\n\nconvert.transactionToXdr = function (conf, transaction) {\n  return transaction.toEnvelope().toXDR(\"base64\");\n};\n\nconvert.xdrToSep7 = function (conf, xdr, options) {\n  if (conf.locker && !conf.locker.source) {\n    throw new Error(\"SEP-0007 requires a source account.\");\n  }\n\n  var sep7 = \"web+stellar:tx?xdr=\";\n  sep7 += encodeURIComponent(xdr);\n\n  if (conf.extra.pubkey) {\n    sep7 += \"&pubkey=\" + encodeURIComponent(conf.extra.pubkey);\n  }\n\n  if (conf.extra.msg) {\n    sep7 += \"&msg=\" + encodeURIComponent(conf.extra.msg);\n  }\n\n  if (options.network && options.network !== \"public\") {\n    var passphrase = resolve.networkPassphrase(conf, options.network);\n    sep7 += \"&network_passphrase=\" + encodeURIComponent(passphrase);\n  }\n\n  if (options.callback) {\n    sep7 += \"&callback=\" + encode.url(conf, \"url:\".concat(options.callback));\n  }\n\n  if (typeof conf.extra.originDomain === \"string\") {\n    sep7 += \"&origin_domain=\" + conf.extra.originDomain;\n    sep7 += \"&signature=\" + conf.extra.signature;\n  } // Not part of the standard.\n  // if (options.horizon) sep7 +=\"&horizon=\" + encode.url(conf, options.horizon)\n\n\n  return sep7;\n};\n/** ****************************    XDR -> URI    ******************************/\n\n\nconvert.xdrToTransaction = function (conf, xdr) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var networkPassphrase = resolve.networkPassphrase(conf, options.network);\n  var transaction = new StellarSdk.Transaction(xdr, networkPassphrase);\n  if (options.strip === \"signatures\") transaction.signatures = [];\n  return transaction;\n};\n\nconvert.xdrToQuery = function (conf, xdr) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var query = \"?xdr=\" + xdr;\n  if (options.network) query += \"&network=\" + encodeURIComponent(options.network);\n  if (options.horizon) query += \"&horizon=\" + encode.url(conf, options.horizon);\n  if (options.callback) query += \"&callback=\" + encode.url(conf, options.callback); // Handle with source-independent transactions.\n\n  if (conf.locker && !conf.locker.source) query += \"&strip=source\";\n  return query;\n};\n\nconvert.transactionToTdesc = destruct.transaction;\n\nconvert.jsonToTdesc = function (conf, json) {\n  return JSON.parse(json);\n};\n\nconvert.tdescToQuery = encode.query;\n\nconvert.queryToUri = function (conf, query) {\n  var page = conf.page || \"https://cosmic.link\";\n  return page + query;\n};","\"use strict\";\n/**\n * Exposes some of the check routines used by cosmic-lib. Individual type-checks\n * are also available for:\n *\n * > address, amount, asset, assetsArray, boolean, buffer, date, flags, hash,\n * id, memo, network, price, sequence, signer, string, threshold, url, weight\n *\n * All checks are meant to be used on tdesc formatted values. Form example, in\n * tdesc buffer values are not encoded as actual Buffer object but as something\n * like: `{ type: \"text\", value: \"Hello World!\"}`.\n *\n * @example\n * check.field(\"minTime\", \"2018-11\")\n * check.date(\"2018-11\")\n *\n * @private\n * @exports check\n */\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar check = exports;\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar specs = require(\"./specs\");\n\nvar status = require(\"./status\");\n/**\n * Check that **tdesc** is valid.\n *\n * @example\n * check.tdesc({\n *   memo: { type: \"text\", value: \"Hello, World!\" },\n *   network: \"public\",\n *   source: \"tips*cosmic.link\",\n *   operations: [{ type: \"setOptions\", homeDomain: \"cosmic.link\" }]\n * })\n *\n * @param  {Object} tdesc\n */\n\n\ncheck.tdesc = function (conf, tdesc) {\n  var isValid = true;\n\n  for (var field in tdesc) {\n    try {\n      check.txField(conf, field, tdesc[field]);\n    } catch (error) {\n      isValid = false;\n      tdesc[field] = errDesc(error, tdesc[field]);\n    }\n  }\n\n  if (tdesc.operations.length > 100) {\n    isValid = false;\n    status.error(conf, \"Too much operations (max 100)\");\n  }\n\n  tdesc.operations.forEach(function (odesc) {\n    try {\n      check.odesc(conf, odesc);\n    } catch (e) {\n      isValid = false;\n    }\n  });\n\n  if (!isValid) {\n    var error = new Error(\"Invalid tdesc\"); // TODO: check if this is really useful\n\n    error.tdesc = tdesc;\n    throw error;\n  }\n};\n/**\n * Check that tdesc operation is valid (referred as **odesc**).\n *\n * @example\n * check.odesc({ type: \"payment\", destination: \"tips*cosmic.link\", amount: \"20\" })\n *\n * @param  {Object} odesc [description]\n */\n\n\ncheck.odesc = function (conf, odesc) {\n  var isValid = true;\n\n  try {\n    check.operationType(conf, odesc.type);\n  } catch (error) {\n    isValid = false;\n    odesc.type = errDesc(error, odesc.type);\n  }\n\n  for (var field in odesc) {\n    try {\n      check.operationField(conf, odesc.type, field, odesc[field]);\n    } catch (error) {\n      isValid = false;\n      odesc[field] = errDesc(error, odesc[field]);\n    }\n  }\n\n  specs.operationMandatoryFields[odesc.type].forEach(function (field) {\n    if (odesc[field] === undefined) {\n      isValid = false;\n      var error = new Error(\"Missing mandatory field: \" + field);\n      odesc[field] = errDesc(error);\n      status.error(conf, error.message);\n    }\n  });\n  if (!isValid) throw new Error(\"Invalid odesc\");\n};\n/**\n * Check that **field** is a valid transaction field and that its **value** is\n * valid.\n *\n * @param  {string} field\n * @param  {*} value\n */\n\n\ncheck.txField = function (conf, field, value) {\n  if (field === \"operations\") return;\n\n  if (!specs.transactionOptionalFields.find(function (name) {\n    return name === field;\n  })) {\n    status.error(conf, \"Invalid transaction field: \" + field, \"throw\");\n  }\n\n  check.field(conf, field, value);\n};\n/**\n * Check that **type** is a valid Stellar Operation type.\n *\n * @param  {String}\n */\n\n\ncheck.operationType = function (conf, type) {\n  if (!specs.operationMandatoryFields[type]) {\n    status.error(conf, \"Invalid operation: \" + type, \"throw\");\n  }\n};\n/**\n * Check that **field** is a valid **operation** field and that its **value** is\n * valid.\n *\n * @param {String} operation\n * @param {String} field\n * @param {*} value\n */\n\n\ncheck.operationField = function (conf, operation, field, value) {\n  if (field === \"type\") return;\n\n  if (!specs.isOperationField(operation, field)) {\n    status.error(conf, \"Invalid field for \".concat(operation, \": \").concat(field), \"throw\");\n  }\n\n  check.field(conf, field, value);\n};\n\nfunction errDesc(error) {\n  var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  return {\n    error: error,\n    value: value\n  };\n}\n/******************************************************************************/\n\n/**\n * Check that **field** **value** is a valid.\n *\n * @example\n * check.field(\"memo\", { type: \"text\", value: \"Hello, World!\" })\n *\n * @param {string} field The name of a Stellar Transaction parameter\n * @param {*} value\n */\n\n\ncheck.field = function (conf, field, value) {\n  if (value === \"\" && field !== \"homeDomain\" && field !== \"value\") {\n    status.error(conf, \"Missing value for field: \".concat(field), \"throw\");\n  }\n\n  var type = specs.fieldType[field];\n  if (!type) status.error(conf, \"Unknow field: \" + field, \"throw\");\n  if (value) check.type(conf, type, value);\n};\n/**\n * Check that **value** is of type **type**.\n *\n * @example\n * check.type(\"date\", \"2018-11-28\")\n *\n * @param {string} type\n * @param {string} value\n */\n\n\ncheck.type = function (conf, type, value) {\n  if (!specs.types.find(function (entry) {\n    return entry === type;\n  })) {\n    throw new Error(\"Invalid type: \" + type);\n  }\n\n  return check[type](conf, value);\n};\n/**\n * Generic check for numbers. Check that **value** is a number or a string\n * representing a number. **type** is for the customization of the message in\n * case of error. **min** and **max** may be provided as additional restriction\n * for `value`.\n *\n * @param {number|string} value\n * @param {string} [type = 'number']\n * @param {number|string} [min]\n * @param {number|string} [max]\n */\n\n\ncheck.number = function (conf, value) {\n  var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"number\";\n  var min = arguments.length > 3 ? arguments[3] : undefined;\n  var max = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"unlimited\";\n  var num = +value;\n\n  if (isNaN(num)) {\n    status.error(conf, \"Invalid \".concat(type, \" (should be a number): \").concat(value), \"throw\");\n  } else if (min && num < min || max && num > max) {\n    status.error(conf, \"Invalid \".concat(type, \" (should be between \").concat(min, \" and \").concat(max, \" ): \").concat(value), \"throw\");\n  }\n};\n/**\n * Generic check for integers. Check that **value** is an integer or a string\n * representing an integer. **type** is for the customization of the message in\n * case of error. **min** and **max** may be provided as additional restriction for\n * **value**.\n *\n * @param {number|string} value\n * @param {string} [type = 'integer']\n * @param {number|string} [min]\n * @param {number|string} [max]\n */\n\n\ncheck.integer = function (conf, value) {\n  var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"integer\";\n  var min = arguments.length > 3 ? arguments[3] : undefined;\n  var max = arguments.length > 4 ? arguments[4] : undefined;\n  check.number(conf, value, type, min, max);\n\n  if (parseInt(value) + \"\" !== value + \"\") {\n    status.error(conf, \"Not an integer: \".concat(value), \"throw\");\n  }\n};\n/**\n * Check that **value** is an UTF-8 string.\n *\n * *Note:* This use a weak (simplified) test that may not be accurate for small\n * strings.\n *\n * @param  {String} value\n */\n\n\ncheck.utf8 = function (conf, value) {\n  if (typeof value !== \"string\" || !misc.isUtf8(value)) {\n    status.error(conf, \"Invalid UTF8 string: \".concat(value), \"throw\");\n  }\n};\n/**\n * Check that **value** is a base64 string.\n *\n * @param  {String} value\n */\n\n\ncheck.base64 = function (conf, value) {\n  if (typeof value !== \"string\" || !misc.isBase64(value)) {\n    status.error(conf, \"Invalid base64 string: \".concat(value), \"throw\");\n  }\n};\n/******************************************************************************/\n\n\ncheck.amount = function (conf, amount) {\n  check.number(conf, amount, \"amount\");\n};\n\ncheck.address = function (conf, address) {\n  if (address.length !== 56 && !address.match(/.*\\*.*\\..*/)) {\n    status.error(conf, \"Invalid address: \" + misc.shorter(address), \"throw\");\n  }\n};\n\ncheck.asset = function (conf, asset) {\n  var code = asset.code.toLowerCase();\n\n  if (!asset.issuer && code !== \"xlm\" && code !== \"native\") {\n    status.error(conf, \"Missing issuer for asset: \" + code, \"throw\");\n  }\n};\n\ncheck.assetsArray = function (conf, assetsArray) {\n  var isValid = true;\n\n  for (var index in assetsArray) {\n    try {\n      check.asset(conf, assetsArray[index]);\n    } catch (error) {\n      console.error(error);\n      isValid = false;\n    }\n  }\n\n  if (!isValid) throw new Error(\"Invalid assets array\");\n};\n\ncheck[\"boolean\"] = function (conf, _boolean) {\n  if (typeof _boolean !== \"boolean\") {\n    status.error(conf, \"Invalid boolean: \" + _boolean, \"throw\");\n  }\n};\n\ncheck.buffer = function (conf, buffer) {\n  switch (buffer.type) {\n    case \"text\":\n      check.utf8(conf, buffer.value);\n      break;\n\n    case \"base64\":\n      check.base64(conf, buffer.value);\n      break;\n\n    default:\n      status.error(conf, \"Invalid buffer type: \" + buffer.type, \"throw\");\n  }\n};\n\ncheck.date = function (conf, date) {\n  if (isNaN(Date.parse(date))) {\n    status.error(conf, \"Invalid date: \" + date, \"throw\");\n  }\n};\n\ncheck.flags = function (conf, flags) {\n  check.integer(conf, flags, \"flags\", 0, 7);\n};\n\ncheck.hash = function (conf, hash) {\n  if (hash.length !== 64 || !hash.match(/^[0-9a-f]*$/)) {\n    status.error(conf, \"Invalid hash: \" + hash, \"throw\");\n  }\n};\n\ncheck.id = function (conf, id) {\n  if (!id.match(/^[0-9]*$/)) status.error(conf, \"Invalid id: \" + id, \"throw\");\n};\n\ncheck.memo = function (conf, memo) {\n  switch (memo.type) {\n    case \"text\":\n      check.utf8(conf, memo.value);\n      break;\n\n    case \"base64\":\n      check.base64(conf, memo.value);\n      break;\n\n    case \"hash\":\n    case \"return\":\n      check.hash(conf, memo.value);\n      break;\n\n    case \"id\":\n      check.id(conf, memo.value);\n      break;\n\n    default:\n      status.error(conf, \"Invalid memo type: \" + memo.type, \"throw\");\n  }\n};\n\ncheck.price = function (conf, price) {\n  if (_typeof(price) === \"object\") {\n    try {\n      check.price(null, price.n);\n      check.price(null, price.d);\n    } catch (error) {\n      status.error(conf, \"Invalid price: \" + price, \"throw\");\n    }\n  } else {\n    check.number(conf, price, \"price\", 0);\n  }\n};\n\ncheck.signer = function (conf, signer) {\n  check.weight(conf, signer.weight);\n\n  switch (signer.type) {\n    case \"key\":\n      check.address(conf, signer.value);\n      break;\n\n    case \"hash\":\n    case \"tx\":\n      check.hash(conf, signer.value);\n      break;\n\n    default:\n      status.error(conf, \"Invalid signer type: \" + signer.type, \"throw\");\n  }\n};\n\ncheck.sequence = function (conf, sequence) {\n  check.number(conf, sequence, \"sequence\", 0);\n};\n\ncheck.threshold = function (conf, threshold) {\n  check.integer(conf, threshold, \"threshold\", 0, 255);\n};\n\ncheck.weight = function (conf, weight) {\n  check.integer(conf, weight, \"weight\", 0, 255);\n};\n/******************************************************************************/\n\n/**\n * Provide dummy aliases for every other type for convenience & backward\n * compatibility.\n */\n\n\nspecs.types.forEach(function (type) {\n  if (!exports[type]) exports[type] = function (conf, value) {\n    return value;\n  };\n});","\"use strict\";\n\nexports.__esModule = true;\nexports.BLOCKCHAIN_EVENT = exports.RESPONSE_EVENT = exports.TRANSPORT_EVENT = exports.DEVICE_EVENT = exports.UI_EVENT = exports.CORE_EVENT = void 0;\nvar CORE_EVENT = 'CORE_EVENT';\nexports.CORE_EVENT = CORE_EVENT;\nvar UI_EVENT = 'UI_EVENT';\nexports.UI_EVENT = UI_EVENT;\nvar DEVICE_EVENT = 'DEVICE_EVENT';\nexports.DEVICE_EVENT = DEVICE_EVENT;\nvar TRANSPORT_EVENT = 'TRANSPORT_EVENT';\nexports.TRANSPORT_EVENT = TRANSPORT_EVENT;\nvar RESPONSE_EVENT = 'RESPONSE_EVENT';\nexports.RESPONSE_EVENT = RESPONSE_EVENT;\nvar BLOCKCHAIN_EVENT = 'BLOCKCHAIN_EVENT';\nexports.BLOCKCHAIN_EVENT = BLOCKCHAIN_EVENT;","\"use strict\";\n\nexports.__esModule = true;\nexports.START_PENDING = exports.DISABLE_WEBUSB = exports.RECONNECT = exports.REQUEST = exports.STREAM = exports.UPDATE = exports.ERROR = exports.START = void 0;\nvar START = 'transport-start';\nexports.START = START;\nvar ERROR = 'transport-error';\nexports.ERROR = ERROR;\nvar UPDATE = 'transport-update';\nexports.UPDATE = UPDATE;\nvar STREAM = 'transport-stream';\nexports.STREAM = STREAM;\nvar REQUEST = 'transport-request_device';\nexports.REQUEST = REQUEST;\nvar RECONNECT = 'transport-reconnect';\nexports.RECONNECT = RECONNECT;\nvar DISABLE_WEBUSB = 'transport-disable_webusb';\nexports.DISABLE_WEBUSB = DISABLE_WEBUSB;\nvar START_PENDING = 'transport-start_pending';\nexports.START_PENDING = START_PENDING;","\"use strict\";\n\nexports.__esModule = true;\nexports.CLOSE_WINDOW = exports.CANCEL_POPUP_REQUEST = exports.CLOSED = exports.HANDSHAKE = exports.EXTENSION_USB_PERMISSIONS = exports.ERROR = exports.INIT = exports.LOADED = exports.BOOTSTRAP = void 0;\n// Message called from popup.html inline script before \"window.onload\" event. This is first message from popup to window.opener.\nvar BOOTSTRAP = 'popup-bootstrap'; // Message from popup.js to window.opener, called after \"window.onload\" event. This is second message from popup to window.opener.\n\nexports.BOOTSTRAP = BOOTSTRAP;\nvar LOADED = 'popup-loaded'; // Message from window.opener to popup.js. Send settings to popup. This is first message from window.opener to popup.\n\nexports.LOADED = LOADED;\nvar INIT = 'popup-init'; // Error message from popup to window.opener. Could be thrown during popup initialization process (POPUP.INIT)\n\nexports.INIT = INIT;\nvar ERROR = 'popup-error'; // Message to webextensions, opens \"trezor-usb-permission.html\" within webextension\n\nexports.ERROR = ERROR;\nvar EXTENSION_USB_PERMISSIONS = 'open-usb-permissions'; // Message called from both [popup > iframe] then [iframe > popup] in this exact order.\n// Firstly popup call iframe to resolve popup promise in Core\n// Then iframe reacts to POPUP.HANDSHAKE message and sends ConnectSettings, transport information and requested method details back to popup\n\nexports.EXTENSION_USB_PERMISSIONS = EXTENSION_USB_PERMISSIONS;\nvar HANDSHAKE = 'popup-handshake'; // Event emitted from PopupManager at the end of popup closing process.\n// Sent from popup thru window.opener to an iframe because message channel between popup and iframe is no longer available\n\nexports.HANDSHAKE = HANDSHAKE;\nvar CLOSED = 'popup-closed'; // Message called from iframe to popup, it means that popup will not be needed (example: Blockchain methods are not using popup at all)\n// This will close active popup window and/or clear opening process in PopupManager (maybe popup wasn't opened yet)\n\nexports.CLOSED = CLOSED;\nvar CANCEL_POPUP_REQUEST = 'ui-cancel-popup-request'; // Message called from inline element in popup.html (window.closeWindow), this is used only with webextensions to properly handle popup close event\n\nexports.CANCEL_POPUP_REQUEST = CANCEL_POPUP_REQUEST;\nvar CLOSE_WINDOW = 'window.close';\nexports.CLOSE_WINDOW = CLOSE_WINDOW;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","\"use strict\";\n/**\n * Contains methods to format a `transaction descriptor` into CSS/HTML for\n * display in browser.\n *\n * @private\n * @exports format\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar format = exports;\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar nice = require(\"@cosmic-plus/jsutils/es5/nice\");\n\nvar html = require(\"@cosmic-plus/domutils/es5/html\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar config = require(\"./config\");\n\nvar event = require(\"./event\");\n\nvar resolve = require(\"./resolve\");\n\nvar signersUtils = require(\"./signers-utils\");\n\nvar specs = require(\"./specs\");\n/**\n * Returns an HTML div describing `tdesc`.\n *\n * @param {Object} tdesc Transaction descriptor.\n * @return {HTMLElement} Transaction HTML description.\n */\n\n\nformat.tdesc = function (conf, tdesc) {\n  var trNode = html.create(\"div\", \".cosmiclib_transactionNode\");\n  if (!tdesc) return trNode; // SEP-0007 verified domain.\n\n  if (conf.extra.originDomain) {\n    var domainNode = html.create(\"div\");\n    html.append(trNode, domainNode);\n    conf.verifySep7().then(function () {\n      html.append(domainNode, \"Request from: \".concat(conf.extra.originDomain));\n      domainNode.className = \"cosmicLib_signed\";\n    });\n  }\n\n  var infoNode;\n\n  for (var index in specs.transactionOptionalFields) {\n    var entry = specs.transactionOptionalFields[index];\n    if (entry === \"horizon\" && resolve.horizon(config, conf.network)) continue;\n\n    if (tdesc[entry]) {\n      if (!infoNode) infoNode = html.create(\"ul\", \".cosmiclib_sideInfo\");\n      var lineNode = html.create(\"li\", {}, specs.fieldDesc[entry] + \": \", format.field(conf, entry, tdesc[entry]));\n      html.append(infoNode, lineNode);\n    }\n  }\n\n  if (infoNode) html.append(trNode, infoNode);\n\n  try {\n    for (var _index in tdesc.operations) {\n      var operation = tdesc.operations[_index];\n      var opNode = format.odesc(conf, operation);\n      opNode.index = _index;\n      html.append(trNode, opNode);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n\n  if (!tdesc.operations.length) {\n    if (Object.keys(tdesc).length === 1) {\n      html.append(trNode, html.create(\"div\", null, \"No transaction\"));\n    } else {\n      html.append(trNode, html.create(\"div\", \".cosmiclib_operation\", \"No operation\"));\n    }\n  }\n\n  trNode.tdesc = tdesc;\n  return trNode;\n};\n/**\n * Returns an HTML div describing `odesc`.\n *\n * @param {Object} odesc Operation in cosmic link JSON format.\n * @return {HTMLElement} Operation HTML description.\n */\n\n\nformat.odesc = function (conf, odesc) {\n  var opNode = html.create(\"div\", \".cosmiclib_operation\");\n  opNode.odesc = odesc;\n  var retNode = opNode;\n\n  if (odesc.source) {\n    retNode = html.create(\"div\", \".cosmiclib_sourcedOperation\");\n    var sourceNode = html.create(\"div\", \".cosmiclib_sideInfo\", \"Source: \");\n    var addressNode = format.address(conf, odesc.source);\n    html.append(sourceNode, addressNode);\n    html.append(retNode, sourceNode, opNode);\n  }\n\n  var meaning = operationMeaning(odesc);\n\n  while (meaning) {\n    if (meaning.substr(0, 1) === \"{\") {\n      var query = meaning.substr(1).replace(/}.*/, \"\");\n      meaning = meaning.replace(/^[^}]*}/, \"\");\n\n      if (query === \"newline\") {\n        if (meaning === \"\") break;\n        html.append(opNode, html.create(\"br\"));\n      } else {\n        var fieldNode = format.field(conf, query, odesc[query]);\n        html.append(opNode, fieldNode);\n      }\n    } else {\n      var txt = meaning.replace(/{.*/, \"\");\n      meaning = meaning.replace(/^[^{]*/, \"\");\n      html.append(opNode, txt);\n    }\n  }\n\n  return retNode;\n};\n/**\n * Returns a string describing `odesc`.\n *\n * @private\n */\n\n\nfunction operationMeaning(odesc) {\n  var msg = \"\";\n\n  switch (odesc.type) {\n    case \"accountMerge\":\n      return \"Merge account inside {destination}\";\n\n    case \"allowTrust\":\n      if (odesc.authorize) {\n        return \"Allow usage of your asset {assetCode} to {trustor}\";\n      } else {\n        return \"Deny usage of your asset {assetCode} to {trustor}\";\n      }\n\n    case \"bumpSequence\":\n      return \"Set account sequence number to {bumpTo}\";\n\n    case \"changeTrust\":\n      if (odesc.limit === \"0\") {\n        return \"Refuse asset {asset}\";\n      } else if (odesc.limit) {\n        return \"Set holding limit as {limit} for asset {asset}\";\n      } else {\n        return \"Accept asset {asset}\";\n      }\n\n    case \"createAccount\":\n      return \"Create account {destination} and send {startingBalance} XLM to it\";\n\n    case \"createPassiveOffer\":\n    case \"createPassiveSellOffer\":\n      return \"Offer to passively sell {amount}{selling} at {price}{buying} / unit\";\n\n    case \"inflation\":\n      return \"Run inflation\";\n\n    case \"manageData\":\n      if (odesc.value) {\n        if (odesc.value.type === \"text\") {\n          return \"Set data entry '{name}' to: '{value}'\";\n        } else {\n          return \"Set data entry '{name}' to base64: '{value}'\";\n        }\n      } else {\n        return \"Delete data entry '{name}'\";\n      }\n\n    case \"manageOffer\":\n    case \"manageBuyOffer\":\n    case \"manageSellOffer\":\n      if (odesc.amount === \"0\" || odesc.buyAmount === \"0\") {\n        return \"Delete offer '{offerId}'\";\n      } else {\n        if (odesc.offerId) {\n          msg += \"Change offer '{offerId}' into:{newline}\";\n        }\n\n        if (odesc.type === \"manageBuyOffer\") {\n          msg += \"Offer to buy {buyAmount}{buying} at {price}{selling} / unit\";\n        } else {\n          msg += \"Offer to sell {amount}{selling} at {price}{buying} / unit\";\n        }\n\n        return msg;\n      }\n\n    case \"pathPaymentStrictReceive\":\n      msg = \"Send {destAmount}{destAsset} to {destination} for a maximum \" + \"of {sendMax}{sendAsset}\";\n      if (odesc.path) msg += \" using conversion path: {path}\";\n      return msg;\n\n    case \"pathPaymentStrictSend\":\n      msg = \"Send at least {destMin}{destAsset} to {destination} for \" + \"{sendAmount}{sendAsset}\";\n      if (odesc.path) msg += \" using conversion path: {path}\";\n      return msg;\n\n    case \"payment\":\n      return \"Send {amount}{asset} to {destination}\";\n\n    case \"setOptions\":\n      if (odesc.inflationDest) {\n        msg += \"Set inflation destination to: {inflationDest}{newline}\";\n      }\n\n      if (odesc.clearFlags) msg += \"Clear flag(s): {clearFlags}{newline}\";\n      if (odesc.setFlags) msg += \"Set flag(s): {setFlags}{newline}\";\n\n      if (odesc.masterWeight) {\n        if (odesc.masterWeight === \"0\") {\n          msg += \"Delete master key{newline}\";\n        } else {\n          msg += \"Set master key weight at: {masterWeight}{newline}\";\n        }\n      }\n\n      [\"lowThreshold\", \"medThreshold\", \"highThreshold\"].forEach(function (field) {\n        if (odesc[field]) msg += \"Set \" + field + \" at: {\" + field + \"}{newline}\";\n      });\n\n      if (odesc.signer) {\n        if (odesc.signer.type === \"tx\") {\n          if (odesc.signer.weight === \"0\") msg += \"Remove pre-signed {signer}{newline}\";else msg += \"Pre-sign {signer}{newline}\";\n        } else {\n          if (odesc.signer.weight === \"0\") msg += \"Remove signer: {signer}{newline}\";else msg += \"Set signer: {signer}{newline}\";\n        }\n      }\n\n      if (odesc.homeDomain) msg += \"Set home domain: {homeDomain}{newline}\";\n      if (odesc.homeDomain === \"\") msg += \"Unset home domain\";\n      if (!msg) msg = \"Do nothing\";\n      return msg;\n\n    default:\n      throw new Error(\"Unknow operation: \" + odesc.type);\n  }\n}\n/**\n * Returns an HTML div describing `signers`.\n *\n * @param {Object} signers Signers object as returned by @see{resolve.signers}.\n * @return {HTMLElement} Signers HTML description\n */\n\n\nformat.signatures = function (conf, transaction) {\n  var signersNode = html.create(\"div\", \".cosmiclib_signersNode\");\n  signersUtils[\"for\"](conf, transaction).then(function (utils) {\n    if (utils.signersList.length < 2 && !utils.signatures.length) return;\n    utils.sources.forEach(function (accountId) {\n      if (accountId !== specs.neutralAccountId) {\n        var div = makeAccountSignersNode(conf, utils, accountId);\n        html.append(signersNode, div);\n      }\n    });\n  });\n  return signersNode;\n};\n\nfunction makeAccountSignersNode(conf, utils, accountId) {\n  var accountSignersNode = html.create(\"div\");\n  var title = \"Signers for \" + misc.shorter(accountId);\n  var titleNode = html.create(\"span\", \".cosmiclib_threshold\", title);\n  var listNode = html.create(\"ul\", \".cosmiclib_signers\");\n  html.append(accountSignersNode, titleNode, listNode);\n  utils.signers[accountId].forEach(function (signer) {\n    var signerNode = format.signer(conf, signer);\n    var lineNode = html.create(\"li\", null, signerNode);\n\n    if (utils.hasSigned(signer.key)) {\n      html.addClass(lineNode, \"cosmiclib_signed\");\n      listNode.insertBefore(lineNode, listNode.firstChild);\n    } else {\n      html.append(listNode, lineNode);\n    }\n  });\n  return accountSignersNode;\n}\n/**\n * Retrieves the parent odesc (*Operation Descriptor*) of an HTML element, or\n * returns `undefined` if **element** is not the child of an HTML formatted\n * operation.\n *\n * @param {HTMLElement} element\n * @return {Object} odesc\n */\n\n\nformat.parentOdesc = function (conf, element) {\n  return parentProperty(element, \"odesc\");\n};\n/**\n * Retrieves the parent operation index of an HTML element, or returns\n * `undefined` if **element** is not the child of an HTML formatted operation.\n *\n * @param {HTMLElement} element\n * @return {Number} operation index\n */\n\n\nformat.parentIndex = function (conf, element) {\n  return parentProperty(element, \"index\");\n};\n/**\n * Retrieves the parent tdesc of an HTML element, or returns `undefined`\n * if **element** is not the child of an HTML formatted transaction.\n *\n * @param {HTMLElement} element\n * @return {Object} tdesc\n */\n\n\nformat.parentTdesc = function (conf, element) {\n  return parentProperty(element, \"tdesc\");\n};\n\nfunction parentProperty(element, property) {\n  while (element.parentNode) {\n    if (element.parentNode[property]) return element.parentNode[property];else element = element.parentNode;\n  }\n}\n/******************************************************************************/\n\n/**\n * Returns an HTML div describing `field` `value`.\n *\n * @param {string} field The field name of `value` as defined in `spec.js`.\n * @param {*} value The value of `field`.\n * @return {HTLMElement} `field` `value` HTML description\n */\n\n\nformat.field = function (conf, field, value) {\n  var type = specs.fieldType[field];\n  if (!type) throw new Error(\"Unknow field: \" + field);\n  var domNode = format.type(conf, type, value);\n  domNode.field = field;\n  if (field !== type) html.addClass(domNode, \"cosmiclib_\" + field);\n  return domNode;\n};\n\nformat.type = function (conf, type, value) {\n  if (_typeof(value) === \"object\" && value.error) type = \"error\";\n  var formatter = process[type] || process.string;\n  var domNode = formatter(conf, value);\n  html.addClass(domNode, \"cosmiclib_\" + type);\n  var eventObject = {\n    conf: conf,\n    type: type,\n    value: value,\n    domNode: domNode\n  };\n  if (conf.constructor.name === \"CosmicLink\") eventObject.cosmicLink = conf;\n\n  if (event.defaultClickHandlers[type]) {\n    domNode.onclick = function () {\n      return event.callClickHandler(conf, type, eventObject);\n    };\n\n    html.addClass(domNode, \"cosmiclib_clickable\");\n  }\n\n  return domNode;\n}; /// Provide a format method for each data type.\n\n\nspecs.types.forEach(function (type) {\n  format[type] = function (conf, value) {\n    return format.type(conf, type, value);\n  };\n});\n/******************************************************************************/\n\nvar process = {};\n\nprocess.string = function (conf, string) {\n  if (typeof string !== \"string\") string = string + \"\";\n  return html.create(\"span\", null, string);\n};\n\nprocess.error = function (conf, errDesc) {\n  var errorNode = html.create(\"span\", \".cosmiclib_error\");\n  errorNode.textContent = errDesc.value === \"\" ? \"(undefined)\" : errDesc.value.value || errDesc.value;\n  errorNode.title = errDesc.error.message;\n  return errorNode;\n};\n\nprocess.address = function (conf, address) {\n  var addressNode = html.create(\"span\", {\n    title: \"Resolving...\"\n  }, misc.shorter(address), html.create(\"span\", \".cosmiclib_loadingAnim\"));\n  resolveAddressAndUpdate(conf, address, addressNode);\n  return addressNode;\n};\n\nfunction resolveAddressAndUpdate(conf, address, addressNode) {\n  var account, animation;\n  return _regeneratorRuntime.async(function resolveAddressAndUpdate$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(resolve.address(conf, address));\n\n        case 3:\n          account = _context.sent;\n          addressNode.title = account.account_id;\n\n          if (account.memo) {\n            addressNode.title += \"\\nMemo (\".concat(account.memo_type, \"): \").concat(account.memo);\n          }\n\n          if (account.address) addressNode.textContent = account.address;else if (account.alias) addressNode.textContent = account.alias;\n          addressNode.extra = account;\n          _context.next = 14;\n          break;\n\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](0);\n          addressNode.title = \"Can't resolve address\";\n          html.addClass(addressNode, \"cosmiclib_error\");\n\n        case 14:\n          animation = html.grab(\".cosmiclib_loadingAnim\", addressNode);\n          if (animation) html.destroy(animation);\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 10]]);\n}\n\nprocess.amount = function (conf, amount) {\n  var significant = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3;\n  var max = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 7;\n  // Hide non-significant numbers\n  if (typeof amount !== \"number\") amount = Number(amount);\n  var nicified = nice(amount, {\n    significant: significant,\n    max: max\n  });\n\n  if (String(amount).length <= nicified.length) {\n    return html.create(\"span\", null, nicified);\n  } else {\n    return html.create(\"span\", {\n      className: \"cosmiclib_clickable\",\n      title: amount\n    }, html.create(\"span\", \".cosmiclib_tilde\", \"~\"), nicified);\n  }\n};\n\nprocess.asset = function (conf, asset) {\n  var assetNode = html.create(\"span\", null, format.field(conf, \"assetCode\", asset.code));\n\n  if (asset.issuer) {\n    html.append(assetNode, \" (\", format.field(conf, \"assetIssuer\", asset.issuer), \")\");\n  }\n\n  return assetNode;\n};\n\nprocess.assetsArray = function (conf, assetsArray) {\n  var assetsArrayNode = html.create(\"span\");\n\n  for (var i = 0; i < assetsArray.length; i++) {\n    if (i !== 0) html.append(assetsArrayNode, \", \");\n    html.append(assetsArrayNode, format.asset(conf, assetsArray[i]));\n  }\n\n  return assetsArrayNode;\n};\n\nprocess.buffer = function (conf, object) {\n  if (object.type === \"base64\") return format.hash(conf, object.value);else return format.string(conf, object.value);\n};\n\nprocess.date = function (conf, date) {\n  return html.create(\"span\", {}, new Date(date).toLocaleString());\n};\n\nprocess.hash = function (conf, hash) {\n  return html.create(\"span\", {\n    title: hash\n  }, misc.shorter(hash));\n};\n\nprocess.id = process.hash;\n\nprocess.flags = function (conf, flags) {\n  var string = \"\";\n\n  if (flags >= 4) {\n    string = \"immutable\";\n    flags = flags - 4;\n  }\n\n  if (flags >= 2) {\n    if (string) string = \", \" + string;\n    string = \"revocable\" + string;\n    flags = flags - 2;\n  }\n\n  if (+flags === 1) {\n    if (string) string = \", \" + string;\n    string = \"required\" + string;\n  }\n\n  return html.create(\"span\", {}, string);\n};\n\nprocess.memo = function (conf, memo) {\n  var typeNode = format.field(conf, \"memoType\", memo.type);\n  var valueNode;\n\n  switch (memo.type) {\n    case \"text\":\n      valueNode = format.field(conf, \"memoText\", memo.value);\n      break;\n\n    case \"base64\":\n      valueNode = format.field(conf, \"memoBinary\", memo.value);\n      break;\n\n    case \"id\":\n      valueNode = format.field(conf, \"memoId\", memo.value);\n      break;\n\n    case \"hash\":\n      valueNode = format.field(conf, \"memoHash\", memo.value);\n      break;\n\n    case \"return\":\n      valueNode = format.field(conf, \"memoReturn\", memo.value);\n  }\n\n  return html.create(\"span\", {}, valueNode, \" (\", typeNode, \")\");\n};\n\nprocess.price = function (conf, price) {\n  if (typeof price === \"string\") return process.amount(conf, price, 3, null);else return process.amount(conf, price.n / price.d, 3, null);\n};\n\nprocess.signer = function (conf, signer) {\n  var signerNode = html.create(\"span\");\n\n  switch (signer.type) {\n    case \"key\":\n    case \"ed25519_public_key\":\n      {\n        var value1 = signer.value || signer.key;\n        html.append(signerNode, \"Account \", format.field(conf, \"signerKey\", value1));\n        break;\n      }\n\n    case \"tx\":\n      {\n        var value2 = signer.value || signer.key;\n        html.append(signerNode, \"transaction \", format.field(conf, \"signerTx\", value2));\n        break;\n      }\n\n    case \"hash\":\n    case \"sha256hash\":\n      {\n        var value3 = signer.value || StellarSdk.StrKey.decodeSha256Hash(signer.key).toString(\"hex\");\n        html.append(signerNode, \"key whose hash is \", format.field(conf, \"signerHash\", value3));\n        break;\n      }\n  }\n\n  if (signer.weight > 1) {\n    var weightNode = format.weight(conf, signer.weight);\n    html.append(signerNode, \" (weight: \", weightNode, \")\");\n  }\n\n  return signerNode;\n};","\"use strict\";\n/**\n * This module provides two ways to generate {@link SignersUtils} for a\n * Transaction object. The first one extends the object and is the intended way\n * to use those utilities. However, as extending objects can sometimes prove\n * inconvenient or intrusive, a second method allows to create a stand-alone\n * {@link SignersUtils} tied to a given transaction.\n *\n * @exports signersUtils\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar signersUtils = exports;\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar _resolve = require(\"./resolve\");\n/**\n * **SignersUtils** is a toolbox that aims to ease the handling of\n * multisignature transactions. The idea behind it is to fetch all required\n * data once and to cache the responses into the transaction. Then, all\n * the utilities can function in a synchronous (immediate) manner.\n *\n * Those are automatically available in `cosmicLink.transaction` after\n * `await cosmicLink.lock()` is ran. Alternatively, you can extend a transaction\n * or generate its SignersUtils by using {@link module:signersUtils}. There's no\n * `cosmicLib.SignersUtils` constructor.\n *\n * An instance of SignersUtils is always tied to a given transaction. This is\n * why none of the provided methods take a transaction as parameter.\n *\n * >\n * | Members                                                                     | Methods\n * |-----------------------------------------------------------------------------|-------------\n * | [sources]{@link SignersUtils#sources}: Array of transaction sources         | [hasSigner]{@link SignersUtils#hasSigner}: Test if a key is a legit signer for transaction\n * | [signers]{@link SignersUtils#signers}: Table of transaction signers         | [hasSigned]{@link SignersUtils#hasSigned}: Test if a key has signed transaction\n * | [signersList]{@link SignersUtils#signersList}: Array of transaction signers |\n *\n * @example\n * const cosmicLink = new CosmicLink({ memo: 'Donation', maxDate: 2019 })\n *  .addOperation('payment', { destination: 'tips*cosmic.link', amount: 10 })\n *\n * await cosmicLink.lock({ network: 'test', source: 'myaddress*example.org' })\n *\n * console.log(cosmicLink.transaction.signers)\n * console.log(cosmicLink.transaction.hasSigner(GB...DXEZ))\n *\n * @alias SignersUtils\n * @namespace\n */\n\n\nvar SignersUtils =\n/*#__PURE__*/\nfunction () {\n  _createClass(SignersUtils, null, [{\n    key: \"resolve\",\n    value: function resolve(conf, transaction, extendFlag) {\n      var extra, utils;\n      return _regeneratorRuntime.async(function resolve$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              extra = _resolve.extra(conf, transaction);\n\n              if (extra.cache.signersUtils) {\n                _context.next = 15;\n                break;\n              }\n\n              extra.cache.txHash = transaction.hash();\n              utils = new SignersUtils(extra, transaction);\n              /**\n               * A list of the sources involved in the transaction.\n               * @alias SignersUtils#sources\n               * @type {Array}\n               */\n\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(_resolve.txSources(extra, transaction));\n\n            case 6:\n              utils.sources = _context.sent;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(_resolve.txSigners(extra, transaction));\n\n            case 9:\n              utils.signers = _context.sent;\n              _context.next = 12;\n              return _regeneratorRuntime.awrap(_resolve.txSignersList(extra, transaction));\n\n            case 12:\n              utils.signersList = _context.sent;\n              Object.assign(utils, utilities);\n              extra.cache.signersUtils = utils;\n\n            case 15:\n              if (!extendFlag) {\n                _context.next = 20;\n                break;\n              }\n\n              if (!transaction.hasSigner) Object.assign(transaction, extra.cache.signersUtils);\n              return _context.abrupt(\"return\", transaction);\n\n            case 20:\n              return _context.abrupt(\"return\", extra.cache.signersUtils);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  function SignersUtils(conf, transaction) {\n    _classCallCheck(this, SignersUtils);\n\n    this.signatures = transaction.signatures;\n    misc.setHiddenProperty(this, \"_cosmicplus\", transaction._cosmicplus);\n  }\n\n  return SignersUtils;\n}();\n/******************************************************************************/\n\n\nvar utilities = {};\n/**\n * Tests if **accountId** is a legit signer for the transaction.\n *\n * @example\n * if (transaction.hasSigner(GB...DEZX)) console.log('Legit signer')\n *\n * @alias SignersUtils#hasSigner\n * @param {string} accountId\n * @return {boolean}\n */\n\nutilities.hasSigner = function (accountId) {\n  return this.signersList.find(function (key) {\n    return key === accountId;\n  });\n};\n/**\n * Tests if **accountId** has signed the transaction.\n *\n * @example\n * if (transaction.hasSigned(GB...DEZX)) console.log('Has signed')\n *\n * @alias SignersUtils#hasSigned\n * @param {string} accountId\n * @return {boolean}\n */\n\n\nutilities.hasSigned = function (accountId) {\n  if (accountId.substr(0, 1) === \"G\") {\n    var keypair = StellarSdk.Keypair.fromPublicKey(accountId);\n    var txHash = this._cosmicplus.cache.txHash;\n    return !!this.signatures.find(function (entry) {\n      return keypair.verify(txHash, entry.signature());\n    });\n  }\n};\n/******************************************************************************/\n\n/**\n * Returns SignersUtils for **transaction**.\n *\n * @async\n * @param {Transaction} transaction\n * @return {SignersUtils}\n */\n\n\nsignersUtils[\"for\"] = function (conf, transaction) {\n  return SignersUtils.resolve(conf, transaction);\n};\n/**\n * Extends **transaction** with SignersUtils.\n *\n * @async\n * @param {Transaction} transaction\n * @return {Transaction}\n */\n\n\nsignersUtils[\"extends\"] = function (conf, transaction) {\n  return SignersUtils.resolve(conf, transaction, true);\n};","\"use strict\";\n/**\n * Methods to set tdesc/odesc defaults values and strip out useless data.\n *\n * @exports normalize\n * @private\n */\n\nvar normalize = exports;\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar config = require(\"./config\");\n\nvar resolve = require(\"./resolve\");\n\nvar specs = require(\"./specs\");\n/**\n * Setup the default values for `tdesc`.\n */\n\n\nnormalize.tdesc = function (conf, tdesc) {\n  removeEmptyFields(tdesc);\n  if (!tdesc.operations) tdesc.operations = [];\n  if (tdesc.fee === 100 * tdesc.operations.length) delete tdesc.fee;\n  dateFields.forEach(function (field) {\n    if (tdesc[field]) {\n      tdesc[field] = normalize.date(conf, tdesc[field]);\n      if (tdesc[field] === \"1970\") delete tdesc[field];\n    }\n  });\n  if (tdesc.network) tdesc.network = normalize.network(conf, tdesc.network); // When network is neither test nor public, we want to provide a fallback\n  // Horizon URL; else we don't need it.\n\n  if (tdesc.network && tdesc.network !== \"public\" && tdesc.network !== \"test\") {\n    var url = resolve.horizon(config, tdesc.network) || tdesc.horizon;\n    tdesc.horizon = normalize.url(conf, url);\n  } else {\n    delete tdesc.horizon;\n  }\n\n  if (tdesc.callback) tdesc.callback = normalize.url(conf, tdesc.callback);\n};\n\nvar dateFields = [\"minTime\", \"maxTime\"];\n\nnormalize.date = function (conf, date) {\n  if (date.match(/^\\+[0-9]+$/)) {\n    var shifted = new Date();\n    shifted.setMinutes(shifted.getMinutes() + +date.substr(1));\n    date = shifted.toISOString().replace(/\\.[0-9]{3}/, \"\");\n  }\n\n  return date.replace(/:00\\.000/, \"\").replace(/\\.000/, \"\").replace(/T00:00Z/, \"\").replace(/-01$/, \"\").replace(/-01$/, \"\");\n};\n\nnormalize.network = function (conf, network) {\n  var networkName = resolve.networkName(conf, network);\n\n  if (networkName === \"public\" || networkName === \"test\") {\n    return networkName; // In network is neither test nor public, we want to use the network\n    // passphrase as parameter to ensure cross-wallet compatibility.\n  } else {\n    return resolve.networkPassphrase(conf, network);\n  }\n};\n\nnormalize.url = function (conf, url) {\n  if (url) return url.substr(0, 4) === \"http\" ? url : \"https://\" + url;\n};\n/**\n * Add the implicit values for fields made optional in the CosmicLink protocol\n * but required by StellarSdk.\n */\n\n\nnormalize.odesc = function (conf, odesc) {\n  removeEmptyFields(odesc); /// No limit = maximum limit.\n\n  if (odesc.limit === \"922337203685.4775807\") delete odesc.limit; /// New offer.\n\n  if (odesc.offerId === \"0\") delete odesc.offerId; /// Empty asset conversion path.\n\n  if (odesc.path && !odesc.path.length) delete odesc.path; /// Useless denominator.\n\n  if (odesc.price && odesc.price.d === 1) odesc.price = odesc.price.n + \"\";\n\n  switch (odesc.type) {\n    case \"allowTrust\":\n      /// Allow trust by default.\n      if (odesc.authorize === undefined) odesc.authorize = true;\n      break;\n\n    case \"createPassiveOffer\":\n    case \"manageOffer\":\n      /// Protocol 11 update renamed those operations.\n      if (odesc.type === \"manageOffer\") odesc.type = \"manageSellOffer\";else odesc.type = \"createPassiveSellOffer\";\n    // Fall Through\n\n    case \"createPassiveSellOffer\":\n    case \"manageBuyOffer\":\n    case \"manageSellOffer\":\n      /// Syntactic sugar for offer deletion\n      if (odesc.offerId && (odesc.amount === \"0\" || odesc.buyAmount === \"0\")) {\n        if (!odesc.buying && !odesc.selling) {\n          odesc.buying = new StellarSdk.Asset(\"XLM\", specs.neutralAccountId);\n        }\n\n        if (!odesc.price) odesc.price = \"1\";\n      } /// XLM as default asset.\n\n\n      if (odesc.buying && !odesc.selling) odesc.selling = XLM;\n      if (odesc.selling && !odesc.buying) odesc.buying = XLM;\n      break;\n\n    case \"manageData\":\n      /// Delete data entry.\n      if (!odesc.value) odesc.value = \"\";\n      break;\n\n    case \"pathPayment\":\n      /// Protocol 12 update renamed this operation.\n      odesc.type = \"pathPaymentStrictReceive\";\n    // Fall Through\n\n    case \"pathPaymentStrictReceive\":\n    case \"pathPaymentStrictSend\":\n      /// XLM as default asset.\n      if (odesc.destAsset && !odesc.sendAsset) odesc.sendAsset = XLM;\n      if (odesc.sendAsset && !odesc.destAsset) odesc.destAsset = XLM;\n      break;\n\n    case \"payment\":\n      /// XLM as default asset.\n      if (!odesc.asset) odesc.asset = XLM;\n      break;\n  }\n};\n\nvar XLM = StellarSdk.Asset[\"native\"]();\n\nfunction removeEmptyFields(object) {\n  for (var field in object) {\n    if (object[field] === null || object[field] === undefined) delete object[field];\n  }\n}","\"use strict\";\n/**\n * Contains the methods to convert data from *{@see Transaction}* format to\n * *Tdesc* format.\n *\n * @private\n * @exports destruct\n */\n\nvar destruct = exports;\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar normalize = require(\"./normalize\");\n\nvar specs = require(\"./specs\");\n/**\n * Convert `tx` into *Tdesc*.\n *\n * @param {Transaction} tx\n * @param {Object} options\n * @return {Object} A tdesc\n */\n\n\ndestruct.transaction = function (conf, tx) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var tdesc = {};\n\n  if (tx.source === specs.neutralAccount && options.stripNeutralAccount) {\n    options.strip = \"source\";\n  } else if (tx.sequence === \"0\" && options.stripNeutralSequence) {\n    options.strip = \"sequence\";\n  }\n\n  tdesc.network = options.network;\n  tdesc.horizon = options.horizon;\n  tdesc.callback = options.callback;\n\n  if (options.strip !== \"source\") {\n    tdesc.source = tx.source;\n\n    if (options.strip !== \"sequence\") {\n      tdesc.sequence = destruct.sequence(conf, tx.sequence);\n    }\n  }\n\n  if (tx._memo._switch.name !== \"memoNone\") tdesc.memo = destruct.memo(conf, tx._memo);\n\n  if (tx.timeBounds) {\n    if (tx.timeBounds.minTime) tdesc.minTime = destruct.date(conf, tx.timeBounds.minTime);\n    if (tx.timeBounds.maxTime) tdesc.maxTime = destruct.date(conf, tx.timeBounds.maxTime);\n  }\n\n  tdesc.fee = tx.fee;\n  tdesc.operations = tx.operations.map(function (op) {\n    return destruct.operation(conf, op);\n  });\n  normalize.tdesc(conf, tdesc);\n  return tdesc;\n};\n/**\n * Convert `op` into odesc format.\n *\n * @param {Object} op A StellarSdk Operation\n * @return {Object} An odesc\n */\n\n\ndestruct.operation = function (conf, op) {\n  var odesc = {};\n\n  for (var field in op) {\n    if (field === \"type\") odesc.type = op.type;else if (field === \"line\") odesc.asset = op.line;else odesc[field] = destruct.field(conf, field, op[field]);\n  }\n\n  normalize.odesc(conf, odesc);\n  return odesc;\n};\n/******************************************************************************/\n\n/**\n * Destruct `value` according to `field` type.\n *\n * @param {string} field\n * @param {any} value\n */\n\n\ndestruct.field = function (conf, field, value) {\n  var type = specs.fieldType[field];\n  if (type) return destruct.type(conf, type, value);else throw new Error(\"Invalid field: \".concat(field));\n};\n/**\n * Destruct `value` using the destructuring function for `type`.\n *\n * @param {string} type\n * @param {any} value\n */\n\n\ndestruct.type = function (conf, type, value) {\n  if (value === null || value === undefined) return value;else return destruct[type](conf, value);\n};\n/******************************************************************************/\n\n\ndestruct.asset = function (conf, asset) {\n  return Object.assign({}, asset);\n};\n\ndestruct.assetPath = function (conf, assetPath) {\n  return assetPath.map(function (asset) {\n    return destruct.asset(asset);\n  });\n};\n\ndestruct.amount = function (conf, amount) {\n  return amount.replace(/\\.?0+$/, \"\");\n};\n\ndestruct.buffer = function (conf, buffer) {\n  if (!buffer) return null;\n  var string = buffer.toString();\n\n  if (misc.isUtf8(string)) {\n    return {\n      type: \"text\",\n      value: string\n    };\n  } else {\n    var value = buffer.toString(\"base64\").replace(/=*$/, \"\");\n    return {\n      type: \"base64\",\n      value: value\n    };\n  }\n};\n\ndestruct.date = function (conf, timestamp) {\n  return new Date(timestamp * 1000).toISOString();\n};\n\ndestruct.memo = function (conf, sdkMemo) {\n  var memo = {};\n\n  if (sdkMemo._switch.name !== \"memoNone\") {\n    memo.type = sdkMemo._arm;\n\n    if (memo.type === \"hash\" || memo.type === \"retHash\") {\n      memo.value = sdkMemo._value.toString(\"hex\");\n      if (memo.type === \"retHash\") memo.type = \"return\";\n    } else if (memo.type === \"text\") {\n      return destruct.buffer(conf, sdkMemo._value);\n    } else {\n      memo.value = sdkMemo._value.toString();\n    }\n  }\n\n  return memo;\n};\n\ndestruct.sequence = function (conf, sdkSequence) {\n  return sdkSequence.toString();\n};\n\ndestruct.signer = function (conf, sdkSigner) {\n  var signer = {\n    weight: sdkSigner.weight\n  };\n\n  if (sdkSigner.ed25519PublicKey) {\n    signer.type = \"key\";\n    signer.value = sdkSigner.ed25519PublicKey;\n  } else if (sdkSigner.sha256Hash) {\n    signer.type = \"hash\";\n    signer.value = sdkSigner.sha256Hash.toString(\"hex\");\n  } else if (sdkSigner.preAuthTx) {\n    signer.type = \"tx\";\n    signer.value = sdkSigner.preAuthTx.toString(\"hex\");\n  }\n\n  return signer;\n};\n/******************************************************************************/\n\n/**\n * Provide dummy aliases for every other type for convenience & backward\n * compatibility.\n */\n\n\nspecs.types.forEach(function (type) {\n  if (!exports[type]) exports[type] = function (conf, value) {\n    return value;\n  };\n});","\"use strict\";\n/**\n * Sep-0007 protocol utilities.\n *\n * The methods listed in the documentation are browser-only.\n *\n * @see https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0007.md\n *\n * @exports sep7Utils\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar sep7Utils = exports;\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar _require = require(\"@cosmic-plus/jsutils/es5/misc\"),\n    timeout = _require.timeout;\n\nvar check = require(\"./check\");\n\nvar convert = require(\"./convert\");\n\nvar decode = require(\"./decode\");\n\nvar parse = require(\"./parse\");\n/* Utils */\n\n/**\n * Proposes the user to register **handler** as her default SEP-0007 link\n * handler. SEP-0007 requests will hit `{handler}?sep7={sep7Request}`.\n *\n * Note that this makes use of a non-standard feature. Compatibility can be\n * checked using `sep7Utils.isWebHandlerSupported()`.\n *\n * [List of compatible browsers](https://caniuse.com/#feat=registerprotocolhandler).\n *\n * @example\n * cosmicLib.sep7Utils.registerWebHandler(\n *  \"https://cosmic.link/\",\n *  \"Cosmic.link\"\n * )\n *\n * @param handler {String} URL of the SEP-0007 web handler.\n * @param description {String} A brief description of the service.\n */\n\n\nsep7Utils.registerWebHandler = function (handler, description) {\n  if (!env.isBrowser) throw new Error(\"This is a browser-only function.\");\n\n  if (navigator.registerProtocolHandler) {\n    navigator.registerProtocolHandler(\"web+stellar\", \"\".concat(handler, \"?sep7=%s\"), description);\n  } else {\n    throw new Error(\"This browser can't register a SEP-0007 web handler.\");\n  }\n};\n/**\n * Returns whether or not the browser can register a SEP-0007 web handler.\n *\n * @example\n * if (cosmicLib.sep7Utils.isWebHandlerSupported()) {\n *    registerSep7HandlerButton.show()\n * }\n *\n * @returns {Boolean}\n */\n\n\nsep7Utils.isWebHandlerSupported = function () {\n  return env.isBrowser && !!navigator.registerProtocolHandler;\n};\n/* Parsing */\n\n/**\n * Initialize cosmicLink using `sep7Request`.\n * @private\n */\n\n\nsep7Utils.parseRequest = function (cosmicLink, sep7Request, options) {\n  parse.page(cosmicLink, sep7Request);\n  var query = convert.uriToQuery(cosmicLink, sep7Request);\n  var sep7 = decodeURIComponent(query.replace(/^\\?(req|sep7)=/, \"\"));\n  return sep7Utils.parseLink(cosmicLink, sep7, options);\n};\n/**\n * Initialize cosmicLink using `sep7`.\n * @private\n */\n\n\nsep7Utils.parseLink = function (cosmicLink, sep7) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  cosmicLink._sep7 = sep7;\n  if (!options.network) options.network = \"public\";\n\n  if (sep7.substr(12, 4) === \"pay?\") {\n    cosmicLink.extra.type = \"pay\";\n    return sep7Utils.parsePayLink(cosmicLink, sep7, options);\n  } else if (sep7.substr(12, 3) === \"tx?\") {\n    cosmicLink.extra.type = \"tx\";\n    return sep7Utils.parseTxLink(cosmicLink, sep7, options);\n  } else {\n    throw new Error(\"Invalid SEP-0007 link.\");\n  }\n};\n/**\n * Initialize cosmicLink using `sep7.xdr`.\n * @private\n */\n\n\nsep7Utils.parseTxLink = function (cosmicLink, sep7) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var query = convert.uriToQuery(cosmicLink, sep7);\n  var params = query.substr(1).split(\"&\");\n  var xdr;\n  params.forEach(function (entry) {\n    var field = entry.replace(/=.*$/, \"\");\n    var value = entry.substr(field.length + 1);\n\n    switch (field) {\n      case \"xdr\":\n        xdr = decodeURIComponent(value);\n        break;\n\n      case \"pubkey\":\n        check.address(cosmicLink, value);\n        cosmicLink.extra.pubkey = value;\n        break;\n\n      default:\n        sep7Utils.parseLinkCommons(cosmicLink, \"xdr\", field, value, options);\n    }\n  });\n  if (!xdr) throw new Error(\"Missing XDR parameter\");\n  options.stripNeutralSequence = true;\n  return {\n    type: \"xdr\",\n    value: xdr,\n    options: options\n  };\n};\n/**\n * Initialize cosmicLink using `sep7.pay`.\n * @private\n */\n\n\nsep7Utils.parsePayLink = function (cosmicLink, sep7) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var query = convert.uriToQuery(cosmicLink, sep7);\n  var params = query.substr(1).split(\"&\");\n  var odesc = {\n    type: \"payment\"\n  },\n      asset = {},\n      memo = {};\n  var tdesc = {\n    network: options.network,\n    operations: [odesc]\n  }; // Parse\n\n  params.forEach(function (entry) {\n    var field = entry.replace(/=.*$/, \"\");\n    var value = entry.substr(field.length + 1);\n\n    switch (field) {\n      case \"destination\":\n      case \"amount\":\n        odesc[field] = decode.field(cosmicLink, field, value);\n        break;\n\n      case \"asset_code\":\n        asset.code = decodeURIComponent(value);\n        break;\n\n      case \"asset_issuer\":\n        asset.issuer = decodeURIComponent(value);\n        break;\n\n      case \"memo_type\":\n        memo.type = value.split(\"_\")[1].toLowerCase();\n        break;\n\n      case \"memo\":\n        memo.value = decode.string(cosmicLink, value);\n        break;\n\n      default:\n        sep7Utils.parseLinkCommons(cosmicLink, \"pay\", field, value, options);\n    }\n  }); // Convert\n\n  if (memo.type || memo.value) {\n    if (memo.type === \"hash\" || memo.type === \"return\") {\n      memo.value = Buffer.from(memo.value, \"base64\").toString(\"hex\");\n    }\n\n    tdesc.memo = memo;\n  }\n\n  if (asset.code || asset.issuer) odesc.asset = asset;\n  if (!odesc.destination) throw new Error(\"Missing parameter: destination\");\n  return {\n    type: \"tdesc\",\n    value: tdesc,\n    options: options\n  };\n};\n\nsep7Utils.parseLinkCommons = function (cosmicLink, mode, field, value, options) {\n  switch (field) {\n    case \"network_passphrase\":\n      options.network = decode.network(cosmicLink, value);\n      break;\n\n    case \"callback\":\n      value = decode.url(cosmicLink, value);\n\n      if (value.substr(0, 4) !== \"url:\") {\n        throw new Error(\"Invalid callback: \" + value);\n      }\n\n      options.callback = value.substr(4);\n      break;\n\n    case \"origin_domain\":\n      cosmicLink.extra.originDomain = sep7Utils.verifySignature(cosmicLink, value);\n      break;\n\n    case \"signature\":\n      cosmicLink.extra.signature = decodeURIComponent(value);\n      break;\n\n    case \"msg\":\n      cosmicLink.extra.msg = decode.string(cosmicLink, value);\n      break;\n\n    default:\n      throw new Error(\"Invalid SEP-0007 \".concat(mode, \" field: \") + field);\n  }\n};\n/* Signing */\n\n\nsep7Utils.signLink = function (cosmicLink, domain, keypair) {\n  if (!cosmicLink.locker) throw new Error(\"cosmicLink is not locked.\");\n  cosmicLink.extra.originDomain = domain;\n  delete cosmicLink.extra.signature;\n  delete cosmicLink._sep7;\n  var link = cosmicLink.sep7;\n  var payload = sep7Utils.makePayload(link);\n  cosmicLink.extra.signature = keypair.sign(payload).toString(\"base64\");\n  delete cosmicLink._sep7;\n};\n\nsep7Utils.verifySignature = function _callee(cosmicLink, domain) {\n  var link, signature, payload, keypair;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          link = cosmicLink.sep7.replace(/&signature=.*/, \"\"); // Let parser parse signature.\n\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(timeout(1));\n\n        case 3:\n          signature = cosmicLink.extra.signature;\n\n          if (signature) {\n            _context.next = 6;\n            break;\n          }\n\n          throw new Error(\"No signature attached for domain: \".concat(domain));\n\n        case 6:\n          payload = sep7Utils.makePayload(link);\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(sep7Utils.getDomainKeypair(domain));\n\n        case 9:\n          keypair = _context.sent;\n\n          if (!keypair.verify(payload, Buffer.from(signature, \"base64\"))) {\n            _context.next = 14;\n            break;\n          }\n\n          return _context.abrupt(\"return\", domain);\n\n        case 14:\n          throw new Error(\"Invalid signature for domain: \".concat(domain));\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nsep7Utils.getDomainKeypair = function _callee2(domain) {\n  var toml, signingKey;\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(StellarSdk.StellarTomlResolver.resolve(domain));\n\n        case 2:\n          toml = _context2.sent;\n          signingKey = toml.URI_REQUEST_SIGNING_KEY;\n\n          if (signingKey) {\n            _context2.next = 6;\n            break;\n          }\n\n          throw new Error(\"Can't find signing key for domain: \".concat(domain));\n\n        case 6:\n          return _context2.abrupt(\"return\", StellarSdk.Keypair.fromPublicKey(signingKey));\n\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n\nsep7Utils.makePayload = function (link) {\n  return Buffer.concat([Buffer.alloc(35), Buffer.alloc(1, 4), Buffer.from(\"stellar.sep.7 - URI Scheme\".concat(link))]);\n};","\"use strict\";\n\nexports.__esModule = true;\nexports.UNREADABLE = exports.WAIT_FOR_SELECTION = exports.WORD = exports.PASSPHRASE_ON_DEVICE = exports.PASSPHRASE = exports.PIN = exports.BUTTON = exports.LOADING = exports.USED_ELSEWHERE = exports.RELEASED = exports.ACQUIRED = exports.RELEASE = exports.ACQUIRE = exports.CHANGED = exports.DISCONNECT = exports.CONNECT_UNACQUIRED = exports.CONNECT = void 0;\n// device list events\nvar CONNECT = 'device-connect';\nexports.CONNECT = CONNECT;\nvar CONNECT_UNACQUIRED = 'device-connect_unacquired';\nexports.CONNECT_UNACQUIRED = CONNECT_UNACQUIRED;\nvar DISCONNECT = 'device-disconnect';\nexports.DISCONNECT = DISCONNECT;\nvar CHANGED = 'device-changed';\nexports.CHANGED = CHANGED;\nvar ACQUIRE = 'device-acquire';\nexports.ACQUIRE = ACQUIRE;\nvar RELEASE = 'device-release';\nexports.RELEASE = RELEASE;\nvar ACQUIRED = 'device-acquired';\nexports.ACQUIRED = ACQUIRED;\nvar RELEASED = 'device-released';\nexports.RELEASED = RELEASED;\nvar USED_ELSEWHERE = 'device-used_elsewhere';\nexports.USED_ELSEWHERE = USED_ELSEWHERE;\nvar LOADING = 'device-loading'; // trezor-link events in protobuf format\n\nexports.LOADING = LOADING;\nvar BUTTON = 'button';\nexports.BUTTON = BUTTON;\nvar PIN = 'pin';\nexports.PIN = PIN;\nvar PASSPHRASE = 'passphrase';\nexports.PASSPHRASE = PASSPHRASE;\nvar PASSPHRASE_ON_DEVICE = 'passphrase_on_device';\nexports.PASSPHRASE_ON_DEVICE = PASSPHRASE_ON_DEVICE;\nvar WORD = 'word'; // custom\n\nexports.WORD = WORD;\nvar WAIT_FOR_SELECTION = 'device-wait_for_selection'; // this string has different prefix than other constants and it's used as device path\n\nexports.WAIT_FOR_SELECTION = WAIT_FOR_SELECTION;\nvar UNREADABLE = 'unreadable-device';\nexports.UNREADABLE = UNREADABLE;","\"use strict\";\n\nexports.__esModule = true;\nexports.NOTIFICATION = exports.BLOCK = exports.CONNECT = exports.ERROR = void 0;\n// blockchain events\nvar ERROR = 'blockchain-error';\nexports.ERROR = ERROR;\nvar CONNECT = 'blockchain-connect';\nexports.CONNECT = CONNECT;\nvar BLOCK = 'blockchain-block';\nexports.BLOCK = BLOCK;\nvar NOTIFICATION = 'blockchain-notification';\nexports.NOTIFICATION = NOTIFICATION;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nexports.__esModule = true;\n\nvar _constants = require(\"../constants\");\n\nvar TRANSPORT = _interopRequireWildcard(require(\"../constants/transport\"));\n\nvar POPUP = _interopRequireWildcard(require(\"../constants/popup\"));\n\nvar IFRAME = _interopRequireWildcard(require(\"../constants/iframe\"));\n\nvar UI = _interopRequireWildcard(require(\"../constants/ui\"));\n\nvar DEVICE = _interopRequireWildcard(require(\"../constants/device\"));\n\nvar P = _interopRequireWildcard(require(\"./params\"));\n\nvar R = _interopRequireWildcard(require(\"./response\"));\n\nObject.keys(R).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  exports[key] = R[key];\n});\n\nvar CARDANO = _interopRequireWildcard(require(\"./cardano\"));\n\nvar RIPPLE = _interopRequireWildcard(require(\"./ripple\"));\n\nvar ETHEREUM = _interopRequireWildcard(require(\"./ethereum\"));\n\nvar NEM = _interopRequireWildcard(require(\"./nem\"));\n\nvar STELLAR = _interopRequireWildcard(require(\"./stellar\"));\n\nvar LISK = _interopRequireWildcard(require(\"./lisk\"));\n\nvar TEZOS = _interopRequireWildcard(require(\"./tezos\"));\n\nvar EOS = _interopRequireWildcard(require(\"./eos\"));\n\nvar BINANCE = _interopRequireWildcard(require(\"./binance\"));\n\nvar _coinInfo = require(\"./coinInfo\");\n\nObject.keys(_coinInfo).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  exports[key] = _coinInfo[key];\n});","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.getOrigin = exports.httpRequest = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nrequire(\"whatwg-fetch\");\n\nvar httpRequest = function httpRequest(url, type) {\n  var response, txt;\n  return _regenerator[\"default\"].async(function httpRequest$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (type === void 0) {\n            type = 'text';\n          }\n\n          _context.next = 3;\n          return _regenerator[\"default\"].awrap(fetch(url, {\n            credentials: 'same-origin'\n          }));\n\n        case 3:\n          response = _context.sent;\n\n          if (!response.ok) {\n            _context.next = 23;\n            break;\n          }\n\n          if (!(type === 'json')) {\n            _context.next = 12;\n            break;\n          }\n\n          _context.next = 8;\n          return _regenerator[\"default\"].awrap(response.text());\n\n        case 8:\n          txt = _context.sent;\n          return _context.abrupt(\"return\", JSON.parse(txt));\n\n        case 12:\n          if (!(type === 'binary')) {\n            _context.next = 18;\n            break;\n          }\n\n          _context.next = 15;\n          return _regenerator[\"default\"].awrap(response.arrayBuffer());\n\n        case 15:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 18:\n          _context.next = 20;\n          return _regenerator[\"default\"].awrap(response.text());\n\n        case 20:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 21:\n          _context.next = 24;\n          break;\n\n        case 23:\n          throw new Error(\"httpRequest error: \" + url + \" \" + response.statusText);\n\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexports.httpRequest = httpRequest;\n\nvar getOrigin = function getOrigin(url) {\n  if (url.indexOf('file://') === 0) return 'file://'; // eslint-disable-next-line no-irregular-whitespace, no-useless-escape\n\n  var parts = url.match(/^.+\\:\\/\\/[^\\/]+/);\n  return Array.isArray(parts) && parts.length > 0 ? parts[0] : 'unknown';\n};\n\nexports.getOrigin = getOrigin;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.create = create;\nexports.createAsync = createAsync;\nexports.resolveTimeoutPromise = resolveTimeoutPromise;\nexports.rejectTimeoutPromise = rejectTimeoutPromise;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nfunction create(arg, device) {\n  var localResolve = function localResolve(t) {};\n\n  var localReject = function localReject(e) {};\n\n  var id; // eslint-disable-next-line no-async-promise-executor\n\n  var promise = new Promise(function _callee(resolve, reject) {\n    return _regenerator[\"default\"].async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            localResolve = resolve;\n            localReject = reject;\n\n            if (!(typeof arg === 'function')) {\n              _context.next = 11;\n              break;\n            }\n\n            _context.prev = 3;\n            _context.next = 6;\n            return _regenerator[\"default\"].awrap(arg());\n\n          case 6:\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](3);\n            reject(_context.t0);\n\n          case 11:\n            if (typeof arg === 'string') id = arg;\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 8]]);\n  });\n  return {\n    id: id,\n    device: device,\n    resolve: localResolve,\n    reject: localReject,\n    promise: promise\n  };\n}\n\nfunction createAsync(innerFn) {\n  var localResolve = function localResolve(t) {};\n\n  var localReject = function localReject(e) {};\n\n  var promise = new Promise(function (resolve, reject) {\n    localResolve = resolve;\n    localReject = reject;\n  });\n\n  var inner = function inner() {\n    return _regenerator[\"default\"].async(function inner$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regenerator[\"default\"].awrap(innerFn());\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  return {\n    resolve: localResolve,\n    reject: localReject,\n    promise: promise,\n    run: function run() {\n      inner();\n      return promise;\n    }\n  };\n}\n\nfunction resolveTimeoutPromise(delay, result) {\n  return new Promise(function (resolve) {\n    setTimeout(function () {\n      resolve(result);\n    }, delay);\n  });\n}\n\nfunction rejectTimeoutPromise(delay, error) {\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      reject(error);\n    }, delay);\n  });\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.NO_COIN_INFO = exports.BACKEND_NO_URL = exports.backendNotSupported = exports.WEBUSB_ERROR_MESSAGE = exports.INVALID_PIN_ERROR_MESSAGE = exports.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE = exports.INVALID_STATE = exports.CALL_OVERRIDE = exports.INITIALIZATION_FAILED = exports.DEVICE_USED_ELSEWHERE = exports.PERMISSIONS_NOT_GRANTED = exports.POPUP_CLOSED = exports.INVALID_PARAMETERS = exports.DEVICE_CALL_IN_PROGRESS = exports.DEVICE_NOT_FOUND = exports.WRONG_TRANSPORT_CONFIG = exports.NO_TRANSPORT = exports.MANAGEMENT_NOT_ALLOWED = exports.MANIFEST_NOT_SET = exports.BROWSER_NOT_SUPPORTED = exports.POPUP_TIMEOUT = exports.IFRAME_TIMEOUT = exports.IFRAME_INITIALIZED = exports.IFRAME_BLOCKED = exports.NO_IFRAME = exports.invalidParameter = exports.TrezorError = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _wrapNativeSuper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/wrapNativeSuper\"));\n\nvar TrezorError =\n/*#__PURE__*/\nfunction (_Error) {\n  (0, _inheritsLoose2[\"default\"])(TrezorError, _Error);\n\n  function TrezorError(code, message) {\n    var _this;\n\n    _this = _Error.call(this, message) || this;\n    _this.code = code;\n    _this.message = message;\n    return _this;\n  }\n\n  return TrezorError;\n}((0, _wrapNativeSuper2[\"default\"])(Error));\n\nexports.TrezorError = TrezorError;\n\nvar invalidParameter = function invalidParameter(message) {\n  return new TrezorError('Connect_InvalidParameter', message);\n}; // level 100 error during initialization\n\n\nexports.invalidParameter = invalidParameter;\nvar NO_IFRAME = new TrezorError(100, 'TrezorConnect not yet initialized');\nexports.NO_IFRAME = NO_IFRAME;\nvar IFRAME_BLOCKED = new TrezorError('iframe_blocked', 'TrezorConnect iframe was blocked');\nexports.IFRAME_BLOCKED = IFRAME_BLOCKED;\nvar IFRAME_INITIALIZED = new TrezorError(101, 'TrezorConnect has been already initialized');\nexports.IFRAME_INITIALIZED = IFRAME_INITIALIZED;\nvar IFRAME_TIMEOUT = new TrezorError(102, 'Iframe timeout');\nexports.IFRAME_TIMEOUT = IFRAME_TIMEOUT;\nvar POPUP_TIMEOUT = new TrezorError(103, 'Popup timeout');\nexports.POPUP_TIMEOUT = POPUP_TIMEOUT;\nvar BROWSER_NOT_SUPPORTED = new TrezorError(104, 'Browser not supported');\nexports.BROWSER_NOT_SUPPORTED = BROWSER_NOT_SUPPORTED;\nvar MANIFEST_NOT_SET = new TrezorError(105, 'Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md');\nexports.MANIFEST_NOT_SET = MANIFEST_NOT_SET;\nvar MANAGEMENT_NOT_ALLOWED = new TrezorError(105, 'Management method not allowed for this configuration');\nexports.MANAGEMENT_NOT_ALLOWED = MANAGEMENT_NOT_ALLOWED;\nvar NO_TRANSPORT = new TrezorError(500, 'Transport is missing');\nexports.NO_TRANSPORT = NO_TRANSPORT;\nvar WRONG_TRANSPORT_CONFIG = new TrezorError(5002, 'Wrong config response'); // config_signed\n\nexports.WRONG_TRANSPORT_CONFIG = WRONG_TRANSPORT_CONFIG;\nvar DEVICE_NOT_FOUND = new TrezorError(501, 'Device not found'); // export const DEVICE_CALL_IN_PROGRESS: TrezorError = new TrezorError(502, \"Device call in progress.\");\n\nexports.DEVICE_NOT_FOUND = DEVICE_NOT_FOUND;\nvar DEVICE_CALL_IN_PROGRESS = new TrezorError(503, 'Device call in progress');\nexports.DEVICE_CALL_IN_PROGRESS = DEVICE_CALL_IN_PROGRESS;\nvar INVALID_PARAMETERS = new TrezorError(504, 'Invalid parameters');\nexports.INVALID_PARAMETERS = INVALID_PARAMETERS;\nvar POPUP_CLOSED = new Error('Popup closed');\nexports.POPUP_CLOSED = POPUP_CLOSED;\nvar PERMISSIONS_NOT_GRANTED = new TrezorError(403, 'Permissions not granted');\nexports.PERMISSIONS_NOT_GRANTED = PERMISSIONS_NOT_GRANTED;\nvar DEVICE_USED_ELSEWHERE = new TrezorError(700, 'Device is used in another window');\nexports.DEVICE_USED_ELSEWHERE = DEVICE_USED_ELSEWHERE;\nvar INITIALIZATION_FAILED = new TrezorError('Failure_Initialize', 'Initialization failed');\nexports.INITIALIZATION_FAILED = INITIALIZATION_FAILED;\nvar CALL_OVERRIDE = new TrezorError('Failure_ActionOverride', 'override');\nexports.CALL_OVERRIDE = CALL_OVERRIDE;\nvar INVALID_STATE = new TrezorError('Failure_PassphraseState', 'Passphrase is incorrect'); // a slight hack\n// this error string is hard-coded\n// in both bridge and extension\n\nexports.INVALID_STATE = INVALID_STATE;\nvar WRONG_PREVIOUS_SESSION_ERROR_MESSAGE = 'wrong previous session';\nexports.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE = WRONG_PREVIOUS_SESSION_ERROR_MESSAGE;\nvar INVALID_PIN_ERROR_MESSAGE = 'PIN invalid';\nexports.INVALID_PIN_ERROR_MESSAGE = INVALID_PIN_ERROR_MESSAGE;\nvar WEBUSB_ERROR_MESSAGE = 'NetworkError: Unable to claim interface.'; // BlockBook\n\nexports.WEBUSB_ERROR_MESSAGE = WEBUSB_ERROR_MESSAGE;\n\nvar backendNotSupported = function backendNotSupported(coinName) {\n  return new TrezorError('backend_error', \"BlockchainLink support not found for \" + coinName);\n};\n\nexports.backendNotSupported = backendNotSupported;\nvar BACKEND_NO_URL = new TrezorError('Backend_init', 'Url not found');\nexports.BACKEND_NO_URL = BACKEND_NO_URL;\nvar NO_COIN_INFO = invalidParameter('Coin not found.');\nexports.NO_COIN_INFO = NO_COIN_INFO;","\"use strict\";\n/**\n * Contains the methods to trigger and handle events.\n *\n * @private\n * @exports event\n */\n\nvar event = exports;\n\nvar html = require(\"@cosmic-plus/domutils/es5/html\");\n\nvar format = require(\"./format\");\n/** *** Click events *****/\n\n/**\n * Set the click handler for **type** HTML elements as **callback**.\n *\n * @example\n * cosmicLib.config.setClickHandler('address', showAddressPopup)\n *\n * @param {string} type Type of a transaction/operation field such as\n *     `address`, `asset`, `hash`, ...\n * @param {function} callback A function that accept one `event` argument\n */\n\n\nevent.setClickHandler = function (conf, type, callback) {\n  conf.clickHandlers[type] = callback;\n};\n/**\n * Remove the current click handler for **type**.\n *\n * @example\n * cosmicLib.config.clearClickHandler('address')\n *\n * @param {string} type Type of a transaction/operation field such as\n *     `address`, `asset`, `hash`, ...\n */\n\n\nevent.clearClickHandler = function (conf, type) {\n  conf.clickHandlers[type] = undefined;\n};\n\nevent.callClickHandler = function (conf, type, event) {\n  var handler = conf.clickHandlers[type];\n  event.extra = event.domNode.extra;\n  event.field = event.domNode.field;\n  event.tdesc = format.parentTdesc(conf, event.domNode);\n  event.odesc = format.parentOdesc(conf, event.domNode);\n  event.index = format.parentIndex(conf, event.domNode);\n  if (handler) handler(event);\n};\n/**\n * The active click handlers. Takes the form:\n *\n * ```\n * cosmicLib.config.clickHandlers = {\n *   type1: callback1,\n *   ...\n *   typeN: callbackN\n * }\n * ```\n *\n * Thoses click handlers are set by default:\n *\n * * **address**: A prompt that shows the address details\n * * **id**: A function that copy the id into the clipboard\n * * **hash**: A function that copy the hash into the clipboard or show a prompt\n *   for preimage signature when relevant\n * ```\n */\n\n\nevent.defaultClickHandlers = {\n  address: function address(event) {\n    if (!event.extra) return;\n    var message = \"\";\n\n    for (var field in event.extra) {\n      message += \"\".concat(field, \":\\n\") + \"\".concat(event.extra[field], \"\\n\\n\");\n    }\n\n    window.alert(message);\n  },\n  hash: function hash(event) {\n    var grandma = event.domNode.parentNode.parentNode.parentNode;\n\n    if (grandma.classList.contains(\"cosmiclib_signers\")) {\n      var preimage = prompt(\"Please enter preimage:\");\n      if (preimage) event.cosmicLink.sign(preimage);\n    } else {\n      html.copyString(event.value);\n    }\n  },\n  id: function id(event) {\n    return html.copyString(event.value);\n  }\n};","\"use strict\";\n/**\n * Contains the methods to convert field values from CosmicLink's\n * `transaction descriptor` format to Stellar transaction object format.\n *\n * @private\n * @exports construct\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar construct = exports;\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar resolve = require(\"./resolve\");\n\nvar specs = require(\"./specs\");\n\nvar status = require(\"./status\");\n/**\n * Returns the StellarSdk Transaction built from tdesc.\n *\n * @param {Object} tdesc\n * @return {Transaction}\n */\n\n\nconstruct.transaction = function _callee(conf, tdesc) {\n  var txBuilder, index, odesc, operation;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!conf.status) {\n            _context.next = 2;\n            break;\n          }\n\n          throw new Error(conf.status);\n\n        case 2:\n          _context.prev = 2;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(makeTransactionBuilder(conf, tdesc));\n\n        case 5:\n          txBuilder = _context.sent;\n          _context.t0 = _regeneratorRuntime.keys(tdesc.operations);\n\n        case 7:\n          if ((_context.t1 = _context.t0()).done) {\n            _context.next = 16;\n            break;\n          }\n\n          index = _context.t1.value;\n          odesc = tdesc.operations[index];\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(construct.operation(conf, odesc));\n\n        case 12:\n          operation = _context.sent;\n          txBuilder.addOperation(operation);\n          _context.next = 7;\n          break;\n\n        case 16:\n          return _context.abrupt(\"return\", txBuilder.build());\n\n        case 19:\n          _context.prev = 19;\n          _context.t2 = _context[\"catch\"](2);\n\n          if (!conf.errors) {\n            console.error(_context.t2);\n            status.error(conf, _context.t2.message);\n          }\n\n          if (conf.status) {\n            _context.next = 26;\n            break;\n          }\n\n          status.fail(conf, \"Transaction build failed\", \"throw\");\n          _context.next = 27;\n          break;\n\n        case 26:\n          throw _context.t2;\n\n        case 27:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[2, 19]]);\n};\n/**\n * Returns the StellarSdk Operation built from `odesc`.\n *\n * @param {Object} odesc\n * @return {Operation}\n */\n\n\nconstruct.operation = function _callee2(conf, odesc) {\n  var operation, field;\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          operation = odesc.type;\n          delete odesc.type;\n          _context2.t0 = _regeneratorRuntime.keys(odesc);\n\n        case 3:\n          if ((_context2.t1 = _context2.t0()).done) {\n            _context2.next = 10;\n            break;\n          }\n\n          field = _context2.t1.value;\n          _context2.next = 7;\n          return _regeneratorRuntime.awrap(construct.field(conf, field, odesc[field]));\n\n        case 7:\n          odesc[field] = _context2.sent;\n          _context2.next = 3;\n          break;\n\n        case 10:\n          return _context2.abrupt(\"return\", StellarSdk.Operation[operation](odesc));\n\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n/**\n * Returns the TransactionBuilder for `tdesc`.\n */\n\n\nfunction makeTransactionBuilder(conf, tdesc) {\n  var server, baseFee, txOpts, sourceAccount, builder, index, operation, destination, memoType, memoValue, _short;\n\n  return _regeneratorRuntime.async(function makeTransactionBuilder$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          server = resolve.server(conf);\n          _context3.next = 3;\n          return _regeneratorRuntime.awrap(server.fetchBaseFee());\n\n        case 3:\n          baseFee = _context3.sent;\n          txOpts = {};\n          txOpts.networkPassphrase = resolve.networkPassphrase(conf);\n          if (tdesc.fee) txOpts.fee = tdesc.fee;else txOpts.fee = tdesc.operations.length * baseFee;\n          if (tdesc.memo) txOpts.memo = construct.memo(conf, tdesc.memo);\n\n          if (tdesc.minTime || tdesc.maxTime) {\n            txOpts.timebounds = {\n              minTime: 0,\n              maxTime: 0\n            };\n            if (tdesc.minTime) txOpts.timebounds.minTime = construct.date(conf, tdesc.minTime);\n            if (tdesc.maxTime) txOpts.timebounds.maxTime = construct.date(conf, tdesc.maxTime);\n          }\n\n          _context3.next = 11;\n          return _regeneratorRuntime.awrap(resolve.txSourceAccount(conf, tdesc.source, tdesc.sequence));\n\n        case 11:\n          sourceAccount = _context3.sent;\n          builder = new StellarSdk.TransactionBuilder(sourceAccount, txOpts);\n          if (!tdesc.maxTime) builder.setTimeout(StellarSdk.TimeoutInfinite); /// Check if memo is needed for destination account.\n\n          _context3.t0 = _regeneratorRuntime.keys(tdesc.operations);\n\n        case 15:\n          if ((_context3.t1 = _context3.t0()).done) {\n            _context3.next = 25;\n            break;\n          }\n\n          index = _context3.t1.value;\n          operation = tdesc.operations[index];\n\n          if (!operation.destination) {\n            _context3.next = 23;\n            break;\n          }\n\n          _context3.next = 21;\n          return _regeneratorRuntime.awrap(resolve.address(conf, operation.destination));\n\n        case 21:\n          destination = _context3.sent;\n\n          if (destination.memo) {\n            memoType = destination.memo_type;\n            memoValue = destination.memo;\n\n            if (tdesc.memo && (tdesc.memo.type !== memoType || tdesc.memo.value !== memoValue)) {\n              _short = misc.shorter(operation.destination);\n              status.error(conf, \"Memo conflict: \".concat(_short, \" requires to set a memo\"), \"throw\");\n            } else {\n              // eslint-disable-next-line require-atomic-updates\n              tdesc.memo = {\n                type: memoType,\n                value: memoValue\n              };\n              builder.addMemo(new StellarSdk.Memo(memoType, memoValue));\n            }\n          }\n\n        case 23:\n          _context3.next = 15;\n          break;\n\n        case 25:\n          return _context3.abrupt(\"return\", builder);\n\n        case 26:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n/******************************************************************************/\n\n/**\n * Prepare `value` accordingly to `field` type.\n *\n * @param {string} field\n * @param {any} value\n */\n\n\nconstruct.field = function _callee3(conf, field, value) {\n  var type;\n  return _regeneratorRuntime.async(function _callee3$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          type = specs.fieldType[field];\n\n          if (!type) {\n            _context4.next = 5;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", construct.type(conf, type, value));\n\n        case 5:\n          throw new Error(\"Invalid field: \".concat(field));\n\n        case 6:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n};\n/**\n * Prepare `value` using the preparing function for `type`.\n *\n * @param {string} type\n * @param {any} value\n */\n\n\nconstruct.type = function _callee4(conf, type, value) {\n  return _regeneratorRuntime.async(function _callee4$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          return _context5.abrupt(\"return\", construct[type](conf, value));\n\n        case 1:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n};\n/******************************************************************************/\n\n\nconstruct.address = function _callee5(conf, address) {\n  var account;\n  return _regeneratorRuntime.async(function _callee5$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return _regeneratorRuntime.awrap(resolve.address(conf, address));\n\n        case 2:\n          account = _context6.sent;\n          return _context6.abrupt(\"return\", account.account_id);\n\n        case 4:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  });\n};\n\nconstruct.asset = function _callee6(conf, asset) {\n  var publicKey;\n  return _regeneratorRuntime.async(function _callee6$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          if (!asset.issuer) {\n            _context7.next = 7;\n            break;\n          }\n\n          _context7.next = 3;\n          return _regeneratorRuntime.awrap(construct.address(conf, asset.issuer));\n\n        case 3:\n          publicKey = _context7.sent;\n          return _context7.abrupt(\"return\", new StellarSdk.Asset(asset.code, publicKey));\n\n        case 7:\n          return _context7.abrupt(\"return\", StellarSdk.Asset[\"native\"]());\n\n        case 8:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  });\n};\n\nconstruct.assetsArray = function _callee7(conf, assetsArray) {\n  var path, index, string, constructedAsset;\n  return _regeneratorRuntime.async(function _callee7$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          path = [];\n          _context8.t0 = _regeneratorRuntime.keys(assetsArray);\n\n        case 2:\n          if ((_context8.t1 = _context8.t0()).done) {\n            _context8.next = 11;\n            break;\n          }\n\n          index = _context8.t1.value;\n          string = assetsArray[index];\n          _context8.next = 7;\n          return _regeneratorRuntime.awrap(construct.asset(conf, string));\n\n        case 7:\n          constructedAsset = _context8.sent;\n          path.push(constructedAsset);\n          _context8.next = 2;\n          break;\n\n        case 11:\n          return _context8.abrupt(\"return\", path);\n\n        case 12:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  });\n};\n\nconstruct.buffer = function (conf, object) {\n  if (object.type === \"base64\") {\n    return Buffer.from(object.value, \"base64\");\n  } else {\n    return object.value || null;\n  }\n};\n\nconstruct.date = function (conf, string) {\n  return Date.parse(string) / 1000;\n};\n\nconstruct.memo = function (conf, memo) {\n  if (memo.type === \"base64\") {\n    return new StellarSdk.Memo(\"text\", Buffer.from(memo.value, \"base64\"));\n  } else {\n    return new StellarSdk.Memo(memo.type, memo.value);\n  }\n};\n\nconstruct.signer = function _callee8(conf, signer) {\n  var sdkSigner, publicKey;\n  return _regeneratorRuntime.async(function _callee8$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          sdkSigner = {\n            weight: +signer.weight\n          };\n\n          if (!(signer.type === \"tx\")) {\n            _context9.next = 5;\n            break;\n          }\n\n          sdkSigner.preAuthTx = signer.value;\n          _context9.next = 14;\n          break;\n\n        case 5:\n          if (!(signer.type === \"hash\")) {\n            _context9.next = 9;\n            break;\n          }\n\n          sdkSigner.sha256Hash = signer.value;\n          _context9.next = 14;\n          break;\n\n        case 9:\n          if (!(signer.type === \"key\")) {\n            _context9.next = 14;\n            break;\n          }\n\n          _context9.next = 12;\n          return _regeneratorRuntime.awrap(construct.address(conf, signer.value));\n\n        case 12:\n          publicKey = _context9.sent;\n          sdkSigner.ed25519PublicKey = publicKey;\n\n        case 14:\n          return _context9.abrupt(\"return\", sdkSigner);\n\n        case 15:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  });\n};\n/******************************************************************************/\n\n/**\n * Provide dummy aliases for every other type for convenience & backward\n * compatibility.\n */\n\n\nspecs.types.forEach(function (type) {\n  if (!exports[type]) exports[type] = function (conf, value) {\n    return value;\n  };\n});","\"use strict\";\n/**\n * Contains the methods to encode values formatted in `transaction descriptor`\n * format into URI format.\n *\n * @private\n * @exports encode\n */\n\nvar encode = exports;\n\nvar decode = require(\"./decode\");\n\nvar specs = require(\"./specs\");\n\nencode.query = function (conf, tdesc) {\n  if (conf.errors) return undefined;\n  var command;\n\n  if (!tdesc.operations.length || tdesc.operations.length > 1 || tdesc.operations[0].source) {\n    command = \"transaction\";\n  } else {\n    command = tdesc.operations[0].type;\n  }\n\n  var query = \"?type=\" + command;\n  specs.transactionOptionalFields.forEach(function (field) {\n    if (tdesc[field] !== undefined) query += encode.field(conf, field, tdesc[field]);\n  });\n  tdesc.operations.forEach(function (odesc) {\n    if (command === \"transaction\") query += \"&operation=\" + odesc.type;\n\n    for (var field in odesc) {\n      if (field === \"type\") continue; // Syntactic sugar for offer deletion.\n\n      if (odesc.type === \"manageOffer\" && odesc.amount == \"0\" && odesc.offerId) {\n        if (field === \"price\" && odesc.price === \"1\") continue;\n\n        if (field === \"buying\" && odesc.buying.code === \"XLM\" && odesc.buying.issuer === specs.neutralAccountId) {\n          continue;\n        }\n      }\n\n      query += encode.field(conf, field, odesc[field]);\n    }\n  });\n  return query;\n};\n/******************************************************************************/\n\n/**\n * Encode `value` into cosmic link query format and return\n * `&${field}=${encodedValue}`\n *\n * @param {string} field\n * @param {*} value `value` should use cosmic link JSON format\n * @return {string}\n */\n\n\nencode.field = function (conf, field, value) {\n  var type = specs.fieldType[field];\n  if (!type) throw new Error(\"Invalid field: \".concat(field));\n  var encodedValue = encode.type(conf, type, value);\n  if (encodedValue === \"\" && field !== \"homeDomain\") return \"\";else return \"&\".concat(field, \"=\").concat(encodedValue);\n};\n/**\n * Encode `value` into cosmic link query format according to `type`.\n *\n * @param {string} field\n * @param {*} value `value` should use cosmic link JSON format\n * @return {string}\n */\n\n\nencode.type = function (conf, type, value) {\n  if (value === undefined) return \"\";\n  var encodedValue = process[type] ? process[type](conf, value) : value;\n  if (encodedValue === undefined) return \"\";else return encodedValue;\n};\n/******************************************************************************/\n\n\nvar process = {};\n\nprocess.asset = function (conf, asset) {\n  if (asset.issuer) return encodeURIComponent(asset.code) + \":\" + encodeURIComponent(asset.issuer);\n};\n\nprocess.assetsArray = function (conf, assetsArray) {\n  return assetsArray.map(function (asset) {\n    return encode.asset(conf, asset);\n  }).toString();\n};\n\nprocess[\"boolean\"] = function (conf, _boolean) {\n  if (_boolean === false) return \"false\";\n};\n\nprocess.buffer = function (conf, buffer) {\n  if (buffer.type === \"text\") {\n    // Guard against prefix mis-interpretation.\n    var decoded = decode.buffer(conf, buffer.value);\n    if (decoded.type === \"text\") return encodeURIComponent(buffer.value);\n  } else if (buffer) {\n    return buffer.type + \":\" + encodeURIComponent(buffer.value);\n  }\n};\n\nprocess.date = function (conf, date) {\n  return date.replace(/Z$/, \"\");\n};\n\nprocess.memo = function (conf, memo) {\n  if (memo.type === \"text\") {\n    // Guard against prefix mis-interpretation.\n    var decoded = decode.memo(conf, memo.value);\n    if (decoded.type === \"text\") return encodeURIComponent(memo.value);\n  }\n\n  return memo.type + \":\" + encodeURIComponent(memo.value);\n};\n\nprocess.price = function (conf, price) {\n  if (typeof price === \"string\") return price;else return price.n + \":\" + price.d;\n};\n\nprocess.signer = function (conf, signer) {\n  return signer.weight + \":\" + signer.type + \":\" + signer.value;\n};\n\nprocess.string = encode.buffer;\n\nprocess.url = function (conf, url) {\n  if (url.substr(0, 8) === \"https://\") url = url.substr(8);\n  return encodeURIComponent(url);\n};\n/******************************************************************************/\n\n/**\n * Provide dummy aliases for every other type for convenience & backward\n * compatibility.\n */\n\n\nspecs.types.forEach(function (type) {\n  exports[type] = function (conf, value) {\n    return encode.type(conf, type, value);\n  };\n});","\"use strict\";\n/**\n * Contains the methods to parse transactions in various format and create a\n * `CosmicLink` object out of them.\n *\n * Also contains methods to update some of the `CosmicLink` datas when it\n * require update/re-parse of part or totallity of the object.\n *\n * @private\n * @exports parse\n */\n\nvar parse = exports;\n\nvar check = require(\"./check\");\n\nvar convert = require(\"./convert\");\n\nvar decode = require(\"./decode\");\n\nvar expand = require(\"./expand\");\n\nvar resolve = require(\"./resolve\");\n\nvar sep7Utils = require(\"./sep7-utils\");\n\nvar status = require(\"./status\");\n/**\n * Sets cosmicLink page as the base path of `uri`.\n *\n * @param {string} page URI basename\n */\n\n\nparse.page = function (cosmicLink, uri) {\n  var page = uri.split(\"?\")[0];\n  if (page) cosmicLink.page = encodeURI(page);\n};\n/**\n * Call the right functions to setup cosmicLink depending on `options` and\n * `value` type.\n *\n * @param {*} value A transaction in any format\n * @param {Object} options Same options as {@see CosmicLink#constructor}\n */\n\n\nparse.dispatch = function (cosmicLink) {\n  var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"?\";\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var type = guessType(value); // Strip out URL hash\n\n  switch (type) {\n    case \"uri\":\n    case \"query\":\n    case \"xdrUri\":\n    case \"sep7\":\n    case \"sep7Request\":\n      value = value.replace(/#.*$/, \"\");\n  } // Parse transaction\n\n\n  try {\n    if (parse.rule[type]) {\n      var params = parse.rule[type](cosmicLink, value, options);\n      setTdesc(cosmicLink, params.type, params.value, params.options);\n    } else {\n      setTdesc(cosmicLink, type, value, options);\n    }\n  } catch (error) {\n    if (!cosmicLink.errors) {\n      console.error(error);\n      status.error(cosmicLink, error.message);\n    }\n\n    status.fail(cosmicLink, \"Invalid \" + type);\n    if (error.tdesc) cosmicLink._tdesc = error.tdesc;\n  } // Asynchronously check SEP-0007 link.\n\n\n  if (cosmicLink.extra.originDomain) {\n    cosmicLink.verifySep7()[\"catch\"](function (error) {\n      status.error(cosmicLink, error.message);\n      status.fail(cosmicLink, \"Invalid SEP-0007 link\");\n    });\n  }\n\n  if (options.page) parse.page(cosmicLink, options.page);\n};\n/**\n * Returns `type` which is the format of transaction represented by `value`.\n */\n\n\nfunction guessType(value) {\n  var type;\n\n  if (typeof value === \"string\") {\n    var query = convert.uriToQuery(\"\", value);\n    if (value.substr(0, 12) === \"web+stellar:\") type = \"sep7\";else if (query && query.substr(0, 6) === \"?sep7=\") type = \"sep7Request\"; // DEPRECATED since 2019-09-11 / `req=` is deprecated in favor of `sep7=`.\n    else if (query && query.substr(0, 5) === \"?req=\") type = \"sep7Request\";else if (query && query.substr(0, 5) === \"?xdr=\") type = \"xdrUri\";else if (value.substr(0, 1) === \"?\") type = \"query\";else if (value.substr(0, 1) === \"{\") type = \"json\";else if (value.match(/^[a-zA-Z0-9+-=/]+$/)) type = \"xdr\";else type = \"uri\";\n  } else {\n    if (value.tx) type = \"transaction\";else type = \"tdesc\";\n  }\n\n  return type;\n}\n/******************************************************************************/\n\n/**\n * Parse-type type extension\n */\n\n\nparse.rule = {};\n/**\n * Initialize cosmicLink using `transaction`.\n */\n\nparse.rule.transaction = function (cosmicLink, transaction, options) {\n  var network = transaction._networkPassphrase;\n\n  if (network) {\n    options.network = resolve.networkName(cosmicLink, network);\n  }\n\n  return {\n    type: \"transaction\",\n    value: transaction,\n    options: options\n  };\n};\n/**\n * Initialize cosmicLink using `xdrUri`.\n */\n\n\nparse.rule.xdrUri = function (cosmicLink, xdrUri, options) {\n  parse.page(cosmicLink, xdrUri);\n  var query = convert.uriToQuery(cosmicLink, xdrUri);\n  var temp = query.split(\"&\");\n  var xdr = temp[0].substr(5);\n  temp.slice(1).forEach(function (entry) {\n    var field = entry.replace(/=.*$/, \"\");\n    var value = entry.substr(field.length + 1);\n\n    switch (field) {\n      case \"strip\":\n        switch (value) {\n          case \"source\":\n          case \"sequence\":\n          case \"signatures\":\n            options.strip = value;\n            break;\n\n          default:\n            throw new Error(\"Invalid strip directive: strip=\".concat(value));\n        }\n\n        break;\n\n      case \"network\":\n        options.network = decode.network(cosmicLink, value);\n        break;\n\n      case \"horizon\":\n      case \"callback\":\n        options[field] = decode.url(cosmicLink, value);\n        break;\n      // Backward compatibility, deprecated since the 2019-08-26.\n\n      case \"stripSignatures\":\n        options.strip = \"signatures\";\n        break;\n\n      case \"stripSequence\":\n        options.strip = \"sequence\";\n        break;\n\n      case \"stripSource\":\n        options.strip = \"source\";\n        break;\n\n      default:\n        status.error(cosmicLink, \"Unknow option: \" + entry);\n        status.fail(cosmicLink, \"Invalid query\");\n    }\n  });\n  return {\n    type: \"xdr\",\n    value: xdr,\n    options: options\n  };\n};\n/**\n * SEP-0007 parsing\n */\n\n\nparse.rule.sep7Request = sep7Utils.parseRequest;\nparse.rule.sep7 = sep7Utils.parseLink;\n/******************************************************************************/\n\n/**\n * Set cosmicLink_tdesc from format `type`. From there, the CosmicLink methods\n * can lazy-evaluate any requested format.\n */\n\nfunction setTdesc(cosmicLink, type, value, options) {\n  if (type !== \"uri\") cosmicLink[\"_\" + type] = value;\n\n  switch (type) {\n    case \"uri\":\n      parse.page(cosmicLink, value);\n      cosmicLink._query = convert.uriToQuery(cosmicLink, value, options);\n    // eslint-disable-next-line no-fallthrough\n\n    case \"query\":\n      cosmicLink._tdesc = convert.queryToTdesc(cosmicLink, cosmicLink.query, options);\n      delete cosmicLink._query;\n      break;\n\n    case \"json\":\n      value = convert.jsonToTdesc(cosmicLink, value);\n    // eslint-disable-next-line no-fallthrough\n\n    case \"tdesc\":\n      cosmicLink._tdesc = expand.tdesc(cosmicLink, value);\n      delete cosmicLink._json;\n      check.tdesc(cosmicLink, cosmicLink.tdesc);\n      break;\n\n    case \"sep7\":\n      cosmicLink._xdr = convert.sep7ToXdr(cosmicLink, cosmicLink.sep7);\n    // eslint-disable-next-line no-fallthrough\n\n    case \"xdr\":\n      cosmicLink._transaction = convert.xdrToTransaction(cosmicLink, cosmicLink.xdr, options);\n    // eslint-disable-next-line no-fallthrough\n\n    case \"transaction\":\n      cosmicLink._tdesc = convert.transactionToTdesc(cosmicLink, cosmicLink.transaction, options);\n      delete cosmicLink._sep7;\n\n      if (options.strip === \"source\" || options.strip === \"sequence\") {\n        delete cosmicLink._xdr;\n        delete cosmicLink._transaction;\n      } else if (options.strip === \"signatures\") {\n        cosmicLink.transaction.signatures = [];\n        delete cosmicLink._xdr;\n      }\n\n  }\n}","\"use strict\";\n/**\n * Methods that expand tdesc paramaters from their query/StellarSdk format into\n * their tdesc equivalent. This allows user to pass value in the format they\n * feel the most confortable with when creating CosmicLinks.\n *\n * @private\n * @exports expand\n */\n\nvar expand = exports;\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar decode = require(\"./decode\");\n\nvar destruct = require(\"./destruct\");\n\nvar normalize = require(\"./normalize\");\n\nvar specs = require(\"./specs\");\n/**\n * Replace each tdesc field value that is in query/StellarSdk format by its\n * tdesc format counterpart. This function alter the `tdesc` passed in\n * parameter.\n *\n * @param {Object} tdesc\n * @return tdesc\n */\n\n\nexpand.tdesc = function (conf, tdesc) {\n  for (var field in tdesc) {\n    if (field === \"operations\") continue;else tdesc[field] = expand.field(conf, field, tdesc[field]);\n  }\n\n  if (tdesc.operations) tdesc.operations.forEach(function (odesc) {\n    return expand.odesc(conf, odesc);\n  });\n  normalize.tdesc(conf, tdesc);\n  return tdesc;\n};\n/**\n * Replace each odesc field value that is in query/StellarSdk format by its\n * tdesc format counterpart. This function alter the `odesc` passed in\n * parameter.\n *\n * @param {Object} odesc\n * @return tdesc\n */\n\n\nexpand.odesc = function (conf, odesc) {\n  for (var field in odesc) {\n    if (field === \"type\") continue;else odesc[field] = expand.field(conf, field, odesc[field]);\n  }\n\n  normalize.odesc(conf, odesc);\n  return odesc;\n};\n/******************************************************************************/\n\n/**\n * Expands `value` to its tdesc format according to `field` type.\n *\n * @param {string} field\n * @param {string} value\n */\n\n\nexpand.field = function (conf, field, value) {\n  var type = specs.fieldType[field];\n  if (type) return expand.type(conf, type, value);else throw new Error(\"Invalid field: \".concat(field));\n};\n/**\n * Expands `value` to its tdesc format according to `type`.\n *\n * @param {string} type\n * @param {string} value\n */\n\n\nexpand.type = function (conf, type, value) {\n  if (value === null || value === undefined) return value;\n  if (typeof value === \"number\") value = value + \"\";\n  return expand[type] ? expand[type](conf, value) : value + \"\";\n};\n/******************************************************************************/\n\n\nexpand.asset = function (conf, asset) {\n  if (asset instanceof StellarSdk.Asset) return destruct.asset(conf, asset);else if (typeof asset === \"string\") return decode.asset(conf, asset);else return asset;\n};\n\nexpand.assetPath = function (conf, assetPath) {\n  if (Array.isArray(assetPath)) return assetPath.map(function (asset) {\n    return expand.asset(conf, asset);\n  });else if (typeof assetPath === \"string\") return decode.assetPath(conf, assetPath);\n};\n\nexpand.buffer = function (conf, buffer) {\n  if (!buffer) return \"\";\n  if (buffer instanceof Buffer) return destruct.buffer(conf, buffer);else if (typeof buffer === \"string\") return decode.buffer(conf, buffer);else return buffer;\n};\n\nexpand.date = function (conf, date) {\n  if (typeof date === \"number\") date = date + \"\";\n  if (!date.match(/^[0-9]*$/) || date.length < 5) return decode.date(conf, date);else return destruct.date(conf, date);\n};\n\nexpand.memo = function (conf, memo) {\n  if (memo instanceof StellarSdk.Memo) return destruct.memo(conf, memo);else if (typeof memo === \"string\") return decode.memo(conf, memo);else return memo;\n};\n\nexpand.price = function (conf, price) {\n  if (typeof price === \"string\" && price.match(/:/)) {\n    return decode.price(conf, price);\n  } else {\n    return price;\n  }\n};\n\nexpand.signer = function (conf, signer) {\n  if (signer.key) return destruct.signer(conf, signer);else if (typeof signer === \"string\") return decode.signer(conf, signer);else return signer;\n};\n\nexpand.string = function (conf, string) {\n  if (typeof string === \"number\") return string + \"\";else return string;\n};\n/******************************************************************************/\n\n/**\n * Provide dummy aliases for every other type for convenience & backward\n * compatibility.\n */\n\n\nspecs.types.forEach(function (type) {\n  if (!exports[type]) {\n    exports[type] = function (conf, value) {\n      if (typeof value === \"number\") return value + \"\";else return value;\n    };\n  }\n});","\"use strict\";\n/**\n * This library is a convenient wrapper around the official\n * [TrezorConnect](https://github.com/trezor/connect) library.\n *\n * It provides a way to support Trezor devices with a few one-liners:\n *\n * ```js\n * // Step 1: Connect\n * await trezorWallet.connect()\n *\n * // Step 2: Get public key\n * const pubkey = trezorWallet.publicKey\n *\n * // Step 3: Sign\n * await trezorWallet.sign(transaction)\n * ```\n *\n * This library is browser-only.\n *\n * **Beta Release**\n *\n * This is a beta release that is made public for testing purposes. While the\n * library is stable & secure, several issues are still being worked out with\n * Trezor teams.\n *\n * A few operations & parameters are not supported yet. An explicit error\n * message will get thrown if you try to sign a transaction including them:\n *\n * - Binary text memo containing NULL characters,\n * - The `manageData` operation,\n * - The `manageBuyOffer` operation\n *\n * If you encounter an unexpected error, please play the game and [fill an\n * issue](https://github.com/cosmic-plus/js-trezor-wallet/issues/new/choose).\n *\n * The public release will possibly contain one or more breaking changes.\n * Please check the [changelog](CHANGELOG.md) before upgrading.\n *\n * @exports trezorWallet\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar trezor = exports;\n\nvar TrezorConnect = require(\"trezor-connect\")[\"default\"];\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar TrezorTx = require(\"./trezor-tx\");\n/* Configuration */\n\n\nvar BIP_PATH = \"m/44'/148'\";\n/* Properties */\n\n/**\n * PublicKey of the connected account.\n *\n * @member {String}\n */\n\ntrezor.publicKey = null;\n/**\n * Derivation path of the connected account. (default: `m/44'/148'/0'`)\n *\n * @member {String}\n */\n\ntrezor.path = null;\n/* Methods */\n\nvar connection;\n/**\n * Registers yourself in the Trezor Connect Manifest. This provides them the\n * ability to reach you in case of any required maintenance.\n *\n * This subscription is mandatory and the library register the Cosmic.plus\n * contact by default.\n *\n * @see [Trezor Connect Manifest](https://github.com/trezor/connect/blob/develop/docs/index.md#trezor-connect-manifest)\n *\n * @param {String} appUrl - Application URL.\n * @param {String} email - Developer email.\n */\n\ntrezor.register = function (appUrl, email) {\n  TrezorConnect.manifest({\n    email: email,\n    appUrl: appUrl\n  });\n}; // Register this library by default.\n\n\ntrezor.register(\"@cosmic-plus/trezor-wallet\", \"mister.ticot@cosmic.plus\");\n/**\n * Waits for a connection with a Trezor wallet. If **account** is not provided,\n * account 1 is used. The library will stop listening for a connection if\n * `trezorWallet.disconnect()` is called.\n *\n * Once the connection is established, you can use `await\n * trezorWallet.connect()` again at any time to ensure the device is still\n * connected.\n *\n * When switching to another **account**, you can `await\n * trezorWallet.connect(new_account)` without prior disconnection.\n *\n * _Note:_ To stay consistent with the way Trezor number accounts, **account**\n * starts at 1 (derivation path: `m/44'/148'/0'`).\n *\n * @async\n * @param {Number|String} [account=1] - Either an account number (starts at 1)\n * or a derivation path (e.g: `m/44'/148'/0'`).\n */\n\ntrezor.connect = function _callee() {\n  var account,\n      path,\n      _args = arguments;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          account = _args.length > 0 && _args[0] !== undefined ? _args[0] : trezor.path;\n          path = account || \"\".concat(BIP_PATH, \"/0'\");\n\n          if (!(typeof account === \"number\")) {\n            _context.next = 6;\n            break;\n          }\n\n          if (!(account < 1)) {\n            _context.next = 5;\n            break;\n          }\n\n          throw new Error(\"Account number starts at 1.\");\n\n        case 5:\n          path = \"\".concat(BIP_PATH, \"/\").concat(account - 1, \"'\");\n\n        case 6:\n          // Update properties.\n          if (trezor.path !== path) {\n            reset();\n            trezor.path = path;\n          } // Connect & update data only when needed.\n\n\n          if (!connection) connection = connect();\n          return _context.abrupt(\"return\", connection);\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nfunction connect() {\n  var result;\n  return _regeneratorRuntime.async(function connect$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          // eslint-disable-next-line no-console\n          console.log(\"Attempting Trezor connection...\");\n          connection = TrezorConnect.stellarGetAddress({\n            path: trezor.path,\n            showOnTrezor: false\n          });\n          _context2.next = 4;\n          return _regeneratorRuntime.awrap(connection);\n\n        case 4:\n          result = _context2.sent;\n\n          if (!result.success) {\n            _context2.next = 10;\n            break;\n          }\n\n          trezor.publicKey = result.payload.address;\n          onConnect();\n          _context2.next = 11;\n          break;\n\n        case 10:\n          throw new Error(result.payload.error);\n\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n/**\n * Prompts the user to accept **transaction** using the connected account of\n * their Trezor device.\n *\n * If the user accepts, adds the signature to **transaction**. Else, throws an\n * error.\n *\n * @async\n * @param {Transaction} transaction - A StellarSdk Transaction\n */\n\n\ntrezor.sign = function _callee2(transaction) {\n  var StellarSdk, result, keypair, hint, signature, decorated;\n  return _regeneratorRuntime.async(function _callee2$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\n          if (trezor.publicKey) {\n            _context3.next = 3;\n            break;\n          }\n\n          throw new Error(\"No Trezor connected.\");\n\n        case 3:\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(TrezorConnect.stellarSignTransaction({\n            path: trezor.path,\n            networkPassphrase: transaction.networkPassphrase,\n            transaction: new TrezorTx(transaction)\n          }));\n\n        case 5:\n          result = _context3.sent;\n\n          if (result.success) {\n            _context3.next = 8;\n            break;\n          }\n\n          throw new Error(result.payload.error);\n\n        case 8:\n          keypair = StellarSdk.Keypair.fromPublicKey(trezor.publicKey);\n          hint = keypair.signatureHint();\n          signature = Buffer.from(result.payload.signature, \"hex\");\n          decorated = new StellarSdk.xdr.DecoratedSignature({\n            hint: hint,\n            signature: signature\n          });\n          transaction.signatures.push(decorated); // DEBUG\n\n          console.log(\"signed\", transaction);\n\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n};\n/**\n * Close the connection with the Trezor device, or stop waiting for one in case\n * a connection has not been established yet.\n */\n\n\ntrezor.disconnect = function () {\n  try {\n    // Try to close iframe. TODO: find a more reliable method\n    TrezorConnect.cancel();\n  } catch (error) {\n    null;\n  }\n\n  onDisconnect();\n};\n\nfunction reset() {\n  connection = null;\n  var fields = [\"path\", \"publicKey\"];\n  fields.forEach(function (name) {\n    return trezor[name] = null;\n  });\n}\n/**\n * Connects the first unused account.\n *\n * _Note:_ merged accounts are considered as used.\n *\n * @param {String|Server} [horizon=\"https://horizon.stellar.org\"] - The\n * Horizon server where to check for account existence. It can be either an URL\n * or a _StellarSdk.Server_ object.\n */\n\n\ntrezor.newAccount = function _callee3() {\n  var horizon,\n      accounts,\n      last,\n      _args4 = arguments;\n  return _regeneratorRuntime.async(function _callee3$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          horizon = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : \"https://horizon.stellar.org\";\n          _context4.next = 3;\n          return _regeneratorRuntime.awrap(trezor.scan({\n            horizon: horizon,\n            attempts: 1,\n            includeMerged: true\n          }));\n\n        case 3:\n          accounts = _context4.sent;\n          last = accounts[accounts.length - 1];\n          _context4.next = 7;\n          return _regeneratorRuntime.awrap(trezor.connect(last ? last.account + 1 : 1));\n\n        case 7:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n};\n/**\n * Scans the Trezor device for accounts that exist on **params.horizon**. The\n * scanning stops after encountering **params.attempts** unused accounts.\n *\n * Merged accounts are considered as existing accounts and will reset the\n * **params.attempts** counter when encountered.\n *\n * Returns an _Array_ of _Objects_ containing `account` number, `publicKey`,\n * `path`, and `state` (either `\"open\"` or `\"merged\"`).\n *\n * @param {Object} [params] - Optional parameters.\n * @param {String|Server} [params.horizon=\"https://horizon.stellar.org\"] - The\n * Horizon server where to check for account existence. It can be either an URL\n * or a _StellarSdk.Server_ object.\n * @param {Number} [params.attempts=3] - The number of empty accounts before\n * scanning stops.\n * @param {Boolean} [params.includeMerged=false] - List merged accounts as well.\n * @returns {Array}\n */\n\n\ntrezor.scan = function _callee4(_ref) {\n  var _ref$horizon, horizon, _ref$attempts, attempts, _ref$includeMerged, includeMerged, _require, Server, accounts, miss, index, payload, current, callBuilder, response, latest;\n\n  return _regeneratorRuntime.async(function _callee4$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _ref$horizon = _ref.horizon, horizon = _ref$horizon === void 0 ? \"https://horizon.stellar.org\" : _ref$horizon, _ref$attempts = _ref.attempts, attempts = _ref$attempts === void 0 ? 3 : _ref$attempts, _ref$includeMerged = _ref.includeMerged, includeMerged = _ref$includeMerged === void 0 ? false : _ref$includeMerged;\n\n          if (typeof horizon === \"string\") {\n            _require = require(\"@cosmic-plus/base/es5/stellar-sdk\"), Server = _require.Server;\n            horizon = new Server(horizon);\n          }\n\n          accounts = [];\n          miss = 0, index = 1, payload = [];\n\n        case 4:\n          if (!(miss < attempts)) {\n            _context5.next = 20;\n            break;\n          }\n\n          if (!(payload.length < index)) {\n            _context5.next = 11;\n            break;\n          }\n\n          _context5.t0 = payload;\n          _context5.next = 9;\n          return _regeneratorRuntime.awrap(trezor.getPublicKeys(index, attempts * 5));\n\n        case 9:\n          _context5.t1 = _context5.sent;\n          payload = _context5.t0.concat.call(_context5.t0, _context5.t1);\n\n        case 11:\n          current = payload[index - 1]; // effectForAccount let us know about merged account as well.\n\n          callBuilder = horizon.effects().forAccount(current.publicKey);\n          _context5.next = 15;\n          return _regeneratorRuntime.awrap(callBuilder.order(\"desc\").limit(1).call()[\"catch\"](function () {}));\n\n        case 15:\n          response = _context5.sent;\n\n          if (response) {\n            miss = 0;\n            latest = response.records[0];\n            current.state = latest.type === \"merge_account\" ? \"merged\" : \"open\";\n\n            if (includeMerged || current.state === \"open\") {\n              accounts.push(current);\n            }\n          } else {\n            miss++;\n          }\n\n          index++;\n          _context5.next = 4;\n          break;\n\n        case 20:\n          return _context5.abrupt(\"return\", accounts);\n\n        case 21:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n};\n/**\n * Request multiple public keys from the Trezor device. The request will return\n * **length** accounts, starting by **start** (minimum 1).\n *\n * Returns an _Array_ of _Objects_ with properties `account`, `publicKey`, and\n * `path`.\n *\n * @param {Number} [start=1] - Starting account number\n * @param {Number} [length=1] - Number of account to be listed.\n * @return {Array}\n */\n\n\ntrezor.getPublicKeys = function _callee5() {\n  var start,\n      length,\n      bundle,\n      account,\n      response,\n      _args6 = arguments;\n  return _regeneratorRuntime.async(function _callee5$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          start = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : 1;\n          length = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : 1;\n          bundle = [];\n\n          for (account = start; account < start + length; account++) {\n            bundle.push({\n              path: trezor.connect.path(account),\n              showOnTrezor: false\n            });\n          }\n\n          _context6.next = 6;\n          return _regeneratorRuntime.awrap(TrezorConnect.stellarGetAddress({\n            bundle: bundle\n          }));\n\n        case 6:\n          response = _context6.sent;\n          return _context6.abrupt(\"return\", response.payload.map(function (entry, index) {\n            return {\n              account: start + index,\n              publicKey: entry.address,\n              path: entry.serializedPath\n            };\n          }));\n\n        case 8:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  });\n};\n/* Events */\n\n\nTrezorConnect.on(\"DEVICE_EVENT\", function (event) {\n  // eslint-disable-next-line no-console\n  console.log(\"DEVICE_EVENT\", console.log(event));\n  if (event.type === \"device-disconnect\") onDisconnect();else if (event.type === \"device-connect\") onConnect();\n});\n/**\n * _Function_ to execute on each connection.\n *\n * @category event\n * @member {Function}\n */\n\ntrezor.onConnect = null;\n\nfunction onConnect() {\n  // eslint-disable-next-line no-console\n  console.log(\"Trezor connected\");\n  if (typeof trezor.onConnect === \"function\") trezor.onConnect();\n}\n/**\n * _Function_ to execute on each disconnection.\n *\n * @category event\n * @member {Function}\n */\n\n\ntrezor.onDisconnect = null;\n\nfunction onDisconnect() {\n  // eslint-disable-next-line no-console\n  console.log(\"Trezor disconnected\");\n  reset();\n  if (typeof trezor.onDisconnect === \"function\") trezor.onDisconnect();\n}","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nvar _exportNames = {\n  UI_EVENT: true,\n  DEVICE_EVENT: true,\n  RESPONSE_EVENT: true,\n  TRANSPORT_EVENT: true,\n  BLOCKCHAIN_EVENT: true,\n  TRANSPORT: true,\n  IFRAME: true,\n  UI: true,\n  DEVICE: true,\n  BLOCKCHAIN: true\n};\nexports.BLOCKCHAIN = exports.DEVICE = exports.UI = exports.IFRAME = exports.TRANSPORT = exports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _constants = require(\"./constants\");\n\nexports.UI_EVENT = _constants.UI_EVENT;\nexports.DEVICE_EVENT = _constants.DEVICE_EVENT;\nexports.RESPONSE_EVENT = _constants.RESPONSE_EVENT;\nexports.TRANSPORT_EVENT = _constants.TRANSPORT_EVENT;\nexports.BLOCKCHAIN_EVENT = _constants.BLOCKCHAIN_EVENT;\n\nvar TRANSPORT = _interopRequireWildcard(require(\"./constants/transport\"));\n\nexports.TRANSPORT = TRANSPORT;\n\nvar IFRAME = _interopRequireWildcard(require(\"./constants/iframe\"));\n\nexports.IFRAME = IFRAME;\n\nvar UI = _interopRequireWildcard(require(\"./constants/ui\"));\n\nexports.UI = UI;\n\nvar DEVICE = _interopRequireWildcard(require(\"./constants/device\"));\n\nexports.DEVICE = DEVICE;\n\nvar BLOCKCHAIN = _interopRequireWildcard(require(\"./constants/blockchain\"));\n\nexports.BLOCKCHAIN = BLOCKCHAIN;\n\nvar $T = _interopRequireWildcard(require(\"./types\"));\n\nvar _node = require(\"./env/node\");\n\nvar _blockchainEvent = require(\"./types/blockchainEvent\");\n\nObject.keys(_blockchainEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _blockchainEvent[key];\n});\n\nvar _account = require(\"./types/account\");\n\nObject.keys(_account).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  exports[key] = _account[key];\n});\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar TrezorConnect = function TrezorConnect() {};\n\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"manifest\", function (data) {\n  (0, _node.manifest)(data);\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"getSettings\", function _callee() {\n  return _regenerator[\"default\"].async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.getSettings)());\n\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"init\", function _callee2(settings) {\n  return _regenerator[\"default\"].async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.init)(settings));\n\n        case 2:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"on\", function (type, fn) {\n  _node.eventEmitter.on(type, fn);\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"off\", function (type, fn) {\n  _node.eventEmitter.removeListener(type, fn);\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"uiResponse\", function (response) {\n  (0, _node.uiResponse)(response);\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"blockchainDisconnect\", function _callee3(params) {\n  return _regenerator[\"default\"].async(function _callee3$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'blockchainDisconnect'\n          }, params)));\n\n        case 2:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"blockchainEstimateFee\", function _callee4(params) {\n  return _regenerator[\"default\"].async(function _callee4$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'blockchainEstimateFee'\n          }, params)));\n\n        case 2:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 3:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"blockchainGetTransactions\", function _callee5(params) {\n  return _regenerator[\"default\"].async(function _callee5$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'blockchainGetTransactions'\n          }, params)));\n\n        case 2:\n          return _context5.abrupt(\"return\", _context5.sent);\n\n        case 3:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"blockchainSubscribe\", function _callee6(params) {\n  return _regenerator[\"default\"].async(function _callee6$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'blockchainSubscribe'\n          }, params)));\n\n        case 2:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 3:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"blockchainUnsubscribe\", function _callee7(params) {\n  return _regenerator[\"default\"].async(function _callee7$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'blockchainUnsubscribe'\n          }, params)));\n\n        case 2:\n          return _context7.abrupt(\"return\", _context7.sent);\n\n        case 3:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"customMessage\", function _callee8(params) {\n  return _regenerator[\"default\"].async(function _callee8$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.customMessage)(params));\n\n        case 2:\n          return _context8.abrupt(\"return\", _context8.sent);\n\n        case 3:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"requestLogin\", function _callee9(params) {\n  return _regenerator[\"default\"].async(function _callee9$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.requestLogin)(params));\n\n        case 2:\n          return _context9.abrupt(\"return\", _context9.sent);\n\n        case 3:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"resetDevice\", function _callee10(params) {\n  return _regenerator[\"default\"].async(function _callee10$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'resetDevice'\n          }, params)));\n\n        case 2:\n          return _context10.abrupt(\"return\", _context10.sent);\n\n        case 3:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"cardanoGetAddress\", function _callee11(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee11$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context11.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'cardanoGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context11.abrupt(\"return\", _context11.sent);\n\n        case 4:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"cardanoGetPublicKey\", function _callee12(params) {\n  return _regenerator[\"default\"].async(function _callee12$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'cardanoGetPublicKey'\n          }, params)));\n\n        case 2:\n          return _context12.abrupt(\"return\", _context12.sent);\n\n        case 3:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"cardanoSignTransaction\", function _callee13(params) {\n  return _regenerator[\"default\"].async(function _callee13$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          _context13.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'cardanoSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context13.abrupt(\"return\", _context13.sent);\n\n        case 3:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"cipherKeyValue\", function _callee14(params) {\n  return _regenerator[\"default\"].async(function _callee14$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'cipherKeyValue'\n          }, params)));\n\n        case 2:\n          return _context14.abrupt(\"return\", _context14.sent);\n\n        case 3:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"composeTransaction\", function _callee15(params) {\n  return _regenerator[\"default\"].async(function _callee15$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'composeTransaction'\n          }, params)));\n\n        case 2:\n          return _context15.abrupt(\"return\", _context15.sent);\n\n        case 3:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"debugLinkDecision\", function _callee16(params) {\n  return _regenerator[\"default\"].async(function _callee16$(_context16) {\n    while (1) {\n      switch (_context16.prev = _context16.next) {\n        case 0:\n          _context16.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'debugLinkDecision'\n          }, params)));\n\n        case 2:\n          return _context16.abrupt(\"return\", _context16.sent);\n\n        case 3:\n        case \"end\":\n          return _context16.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"debugLinkGetState\", function _callee17(params) {\n  return _regenerator[\"default\"].async(function _callee17$(_context17) {\n    while (1) {\n      switch (_context17.prev = _context17.next) {\n        case 0:\n          _context17.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'debugLinkGetState'\n          }, params)));\n\n        case 2:\n          return _context17.abrupt(\"return\", _context17.sent);\n\n        case 3:\n        case \"end\":\n          return _context17.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"ethereumGetAddress\", function _callee18(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee18$(_context18) {\n    while (1) {\n      switch (_context18.prev = _context18.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context18.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'ethereumGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context18.abrupt(\"return\", _context18.sent);\n\n        case 4:\n        case \"end\":\n          return _context18.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"ethereumGetPublicKey\", function _callee19(params) {\n  return _regenerator[\"default\"].async(function _callee19$(_context19) {\n    while (1) {\n      switch (_context19.prev = _context19.next) {\n        case 0:\n          _context19.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'ethereumGetPublicKey'\n          }, params)));\n\n        case 2:\n          return _context19.abrupt(\"return\", _context19.sent);\n\n        case 3:\n        case \"end\":\n          return _context19.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"ethereumSignMessage\", function _callee20(params) {\n  return _regenerator[\"default\"].async(function _callee20$(_context20) {\n    while (1) {\n      switch (_context20.prev = _context20.next) {\n        case 0:\n          _context20.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'ethereumSignMessage'\n          }, params)));\n\n        case 2:\n          return _context20.abrupt(\"return\", _context20.sent);\n\n        case 3:\n        case \"end\":\n          return _context20.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"ethereumSignTransaction\", function _callee21(params) {\n  return _regenerator[\"default\"].async(function _callee21$(_context21) {\n    while (1) {\n      switch (_context21.prev = _context21.next) {\n        case 0:\n          _context21.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'ethereumSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context21.abrupt(\"return\", _context21.sent);\n\n        case 3:\n        case \"end\":\n          return _context21.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"ethereumVerifyMessage\", function _callee22(params) {\n  return _regenerator[\"default\"].async(function _callee22$(_context22) {\n    while (1) {\n      switch (_context22.prev = _context22.next) {\n        case 0:\n          _context22.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'ethereumVerifyMessage'\n          }, params)));\n\n        case 2:\n          return _context22.abrupt(\"return\", _context22.sent);\n\n        case 3:\n        case \"end\":\n          return _context22.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"getAccountInfo\", function _callee23(params) {\n  return _regenerator[\"default\"].async(function _callee23$(_context23) {\n    while (1) {\n      switch (_context23.prev = _context23.next) {\n        case 0:\n          _context23.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'getAccountInfo'\n          }, params)));\n\n        case 2:\n          return _context23.abrupt(\"return\", _context23.sent);\n\n        case 3:\n        case \"end\":\n          return _context23.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"getAddress\", function _callee24(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee24$(_context24) {\n    while (1) {\n      switch (_context24.prev = _context24.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context24.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'getAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context24.abrupt(\"return\", _context24.sent);\n\n        case 4:\n        case \"end\":\n          return _context24.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"getDeviceState\", function _callee25(params) {\n  return _regenerator[\"default\"].async(function _callee25$(_context25) {\n    while (1) {\n      switch (_context25.prev = _context25.next) {\n        case 0:\n          _context25.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'getDeviceState'\n          }, params)));\n\n        case 2:\n          return _context25.abrupt(\"return\", _context25.sent);\n\n        case 3:\n        case \"end\":\n          return _context25.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"getFeatures\", function _callee26(params) {\n  return _regenerator[\"default\"].async(function _callee26$(_context26) {\n    while (1) {\n      switch (_context26.prev = _context26.next) {\n        case 0:\n          _context26.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'getFeatures'\n          }, params)));\n\n        case 2:\n          return _context26.abrupt(\"return\", _context26.sent);\n\n        case 3:\n        case \"end\":\n          return _context26.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"getPublicKey\", function _callee27(params) {\n  return _regenerator[\"default\"].async(function _callee27$(_context27) {\n    while (1) {\n      switch (_context27.prev = _context27.next) {\n        case 0:\n          _context27.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'getPublicKey'\n          }, params)));\n\n        case 2:\n          return _context27.abrupt(\"return\", _context27.sent);\n\n        case 3:\n        case \"end\":\n          return _context27.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"liskGetAddress\", function _callee28(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee28$(_context28) {\n    while (1) {\n      switch (_context28.prev = _context28.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context28.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'liskGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context28.abrupt(\"return\", _context28.sent);\n\n        case 4:\n        case \"end\":\n          return _context28.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"liskGetPublicKey\", function _callee29(params) {\n  return _regenerator[\"default\"].async(function _callee29$(_context29) {\n    while (1) {\n      switch (_context29.prev = _context29.next) {\n        case 0:\n          _context29.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'liskGetPublicKey'\n          }, params)));\n\n        case 2:\n          return _context29.abrupt(\"return\", _context29.sent);\n\n        case 3:\n        case \"end\":\n          return _context29.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"liskSignMessage\", function _callee30(params) {\n  return _regenerator[\"default\"].async(function _callee30$(_context30) {\n    while (1) {\n      switch (_context30.prev = _context30.next) {\n        case 0:\n          _context30.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'liskSignMessage'\n          }, params)));\n\n        case 2:\n          return _context30.abrupt(\"return\", _context30.sent);\n\n        case 3:\n        case \"end\":\n          return _context30.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"liskSignTransaction\", function _callee31(params) {\n  return _regenerator[\"default\"].async(function _callee31$(_context31) {\n    while (1) {\n      switch (_context31.prev = _context31.next) {\n        case 0:\n          _context31.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'liskSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context31.abrupt(\"return\", _context31.sent);\n\n        case 3:\n        case \"end\":\n          return _context31.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"liskVerifyMessage\", function _callee32(params) {\n  return _regenerator[\"default\"].async(function _callee32$(_context32) {\n    while (1) {\n      switch (_context32.prev = _context32.next) {\n        case 0:\n          _context32.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'liskVerifyMessage'\n          }, params)));\n\n        case 2:\n          return _context32.abrupt(\"return\", _context32.sent);\n\n        case 3:\n        case \"end\":\n          return _context32.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"nemGetAddress\", function _callee33(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee33$(_context33) {\n    while (1) {\n      switch (_context33.prev = _context33.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context33.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'nemGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context33.abrupt(\"return\", _context33.sent);\n\n        case 4:\n        case \"end\":\n          return _context33.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"nemSignTransaction\", function _callee34(params) {\n  return _regenerator[\"default\"].async(function _callee34$(_context34) {\n    while (1) {\n      switch (_context34.prev = _context34.next) {\n        case 0:\n          _context34.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'nemSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context34.abrupt(\"return\", _context34.sent);\n\n        case 3:\n        case \"end\":\n          return _context34.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"pushTransaction\", function _callee35(params) {\n  return _regenerator[\"default\"].async(function _callee35$(_context35) {\n    while (1) {\n      switch (_context35.prev = _context35.next) {\n        case 0:\n          _context35.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'pushTransaction'\n          }, params)));\n\n        case 2:\n          return _context35.abrupt(\"return\", _context35.sent);\n\n        case 3:\n        case \"end\":\n          return _context35.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"rippleGetAddress\", function _callee36(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee36$(_context36) {\n    while (1) {\n      switch (_context36.prev = _context36.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context36.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'rippleGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context36.abrupt(\"return\", _context36.sent);\n\n        case 4:\n        case \"end\":\n          return _context36.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"rippleSignTransaction\", function _callee37(params) {\n  return _regenerator[\"default\"].async(function _callee37$(_context37) {\n    while (1) {\n      switch (_context37.prev = _context37.next) {\n        case 0:\n          _context37.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'rippleSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context37.abrupt(\"return\", _context37.sent);\n\n        case 3:\n        case \"end\":\n          return _context37.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"signMessage\", function _callee38(params) {\n  return _regenerator[\"default\"].async(function _callee38$(_context38) {\n    while (1) {\n      switch (_context38.prev = _context38.next) {\n        case 0:\n          _context38.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'signMessage'\n          }, params)));\n\n        case 2:\n          return _context38.abrupt(\"return\", _context38.sent);\n\n        case 3:\n        case \"end\":\n          return _context38.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"signTransaction\", function _callee39(params) {\n  return _regenerator[\"default\"].async(function _callee39$(_context39) {\n    while (1) {\n      switch (_context39.prev = _context39.next) {\n        case 0:\n          _context39.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'signTransaction'\n          }, params)));\n\n        case 2:\n          return _context39.abrupt(\"return\", _context39.sent);\n\n        case 3:\n        case \"end\":\n          return _context39.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"stellarGetAddress\", function _callee40(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee40$(_context40) {\n    while (1) {\n      switch (_context40.prev = _context40.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context40.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'stellarGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context40.abrupt(\"return\", _context40.sent);\n\n        case 4:\n        case \"end\":\n          return _context40.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"stellarSignTransaction\", function _callee41(params) {\n  return _regenerator[\"default\"].async(function _callee41$(_context41) {\n    while (1) {\n      switch (_context41.prev = _context41.next) {\n        case 0:\n          _context41.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'stellarSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context41.abrupt(\"return\", _context41.sent);\n\n        case 3:\n        case \"end\":\n          return _context41.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"tezosGetAddress\", function _callee42(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee42$(_context42) {\n    while (1) {\n      switch (_context42.prev = _context42.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context42.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'tezosGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context42.abrupt(\"return\", _context42.sent);\n\n        case 4:\n        case \"end\":\n          return _context42.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"tezosGetPublicKey\", function _callee43(params) {\n  return _regenerator[\"default\"].async(function _callee43$(_context43) {\n    while (1) {\n      switch (_context43.prev = _context43.next) {\n        case 0:\n          _context43.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'tezosGetPublicKey'\n          }, params)));\n\n        case 2:\n          return _context43.abrupt(\"return\", _context43.sent);\n\n        case 3:\n        case \"end\":\n          return _context43.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"tezosSignTransaction\", function _callee44(params) {\n  return _regenerator[\"default\"].async(function _callee44$(_context44) {\n    while (1) {\n      switch (_context44.prev = _context44.next) {\n        case 0:\n          _context44.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'tezosSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context44.abrupt(\"return\", _context44.sent);\n\n        case 3:\n        case \"end\":\n          return _context44.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"eosGetPublicKey\", function _callee45(params) {\n  return _regenerator[\"default\"].async(function _callee45$(_context45) {\n    while (1) {\n      switch (_context45.prev = _context45.next) {\n        case 0:\n          _context45.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'eosGetPublicKey'\n          }, params)));\n\n        case 2:\n          return _context45.abrupt(\"return\", _context45.sent);\n\n        case 3:\n        case \"end\":\n          return _context45.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"eosSignTransaction\", function _callee46(params) {\n  return _regenerator[\"default\"].async(function _callee46$(_context46) {\n    while (1) {\n      switch (_context46.prev = _context46.next) {\n        case 0:\n          _context46.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'eosSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context46.abrupt(\"return\", _context46.sent);\n\n        case 3:\n        case \"end\":\n          return _context46.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"binanceGetAddress\", function _callee47(params) {\n  var useEventListener;\n  return _regenerator[\"default\"].async(function _callee47$(_context47) {\n    while (1) {\n      switch (_context47.prev = _context47.next) {\n        case 0:\n          useEventListener = _node.eventEmitter.listenerCount(UI.ADDRESS_VALIDATION) > 0;\n          _context47.next = 3;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'binanceGetAddress'\n          }, params, {\n            useEventListener: useEventListener\n          })));\n\n        case 3:\n          return _context47.abrupt(\"return\", _context47.sent);\n\n        case 4:\n        case \"end\":\n          return _context47.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"binanceGetPublicKey\", function _callee48(params) {\n  return _regenerator[\"default\"].async(function _callee48$(_context48) {\n    while (1) {\n      switch (_context48.prev = _context48.next) {\n        case 0:\n          _context48.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'binanceGetPublicKey'\n          }, params)));\n\n        case 2:\n          return _context48.abrupt(\"return\", _context48.sent);\n\n        case 3:\n        case \"end\":\n          return _context48.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"binanceSignTransaction\", function _callee49(params) {\n  return _regenerator[\"default\"].async(function _callee49$(_context49) {\n    while (1) {\n      switch (_context49.prev = _context49.next) {\n        case 0:\n          _context49.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'binanceSignTransaction'\n          }, params)));\n\n        case 2:\n          return _context49.abrupt(\"return\", _context49.sent);\n\n        case 3:\n        case \"end\":\n          return _context49.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"verifyMessage\", function _callee50(params) {\n  return _regenerator[\"default\"].async(function _callee50$(_context50) {\n    while (1) {\n      switch (_context50.prev = _context50.next) {\n        case 0:\n          _context50.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'verifyMessage'\n          }, params)));\n\n        case 2:\n          return _context50.abrupt(\"return\", _context50.sent);\n\n        case 3:\n        case \"end\":\n          return _context50.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"wipeDevice\", function _callee51(params) {\n  return _regenerator[\"default\"].async(function _callee51$(_context51) {\n    while (1) {\n      switch (_context51.prev = _context51.next) {\n        case 0:\n          _context51.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'wipeDevice'\n          }, params)));\n\n        case 2:\n          return _context51.abrupt(\"return\", _context51.sent);\n\n        case 3:\n        case \"end\":\n          return _context51.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"applyFlags\", function _callee52(params) {\n  return _regenerator[\"default\"].async(function _callee52$(_context52) {\n    while (1) {\n      switch (_context52.prev = _context52.next) {\n        case 0:\n          _context52.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'applyFlags'\n          }, params)));\n\n        case 2:\n          return _context52.abrupt(\"return\", _context52.sent);\n\n        case 3:\n        case \"end\":\n          return _context52.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"applySettings\", function _callee53(params) {\n  return _regenerator[\"default\"].async(function _callee53$(_context53) {\n    while (1) {\n      switch (_context53.prev = _context53.next) {\n        case 0:\n          _context53.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'applySettings'\n          }, params)));\n\n        case 2:\n          return _context53.abrupt(\"return\", _context53.sent);\n\n        case 3:\n        case \"end\":\n          return _context53.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"backupDevice\", function _callee54() {\n  return _regenerator[\"default\"].async(function _callee54$(_context54) {\n    while (1) {\n      switch (_context54.prev = _context54.next) {\n        case 0:\n          _context54.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)({\n            method: 'backupDevice'\n          }));\n\n        case 2:\n          return _context54.abrupt(\"return\", _context54.sent);\n\n        case 3:\n        case \"end\":\n          return _context54.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"changePin\", function _callee55(params) {\n  return _regenerator[\"default\"].async(function _callee55$(_context55) {\n    while (1) {\n      switch (_context55.prev = _context55.next) {\n        case 0:\n          _context55.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'changePin'\n          }, params)));\n\n        case 2:\n          return _context55.abrupt(\"return\", _context55.sent);\n\n        case 3:\n        case \"end\":\n          return _context55.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"firmwareUpdate\", function _callee56(params) {\n  return _regenerator[\"default\"].async(function _callee56$(_context56) {\n    while (1) {\n      switch (_context56.prev = _context56.next) {\n        case 0:\n          _context56.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'firmwareUpdate'\n          }, params)));\n\n        case 2:\n          return _context56.abrupt(\"return\", _context56.sent);\n\n        case 3:\n        case \"end\":\n          return _context56.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"recoveryDevice\", function _callee57(params) {\n  return _regenerator[\"default\"].async(function _callee57$(_context57) {\n    while (1) {\n      switch (_context57.prev = _context57.next) {\n        case 0:\n          _context57.next = 2;\n          return _regenerator[\"default\"].awrap((0, _node.call)(_objectSpread({\n            method: 'recoveryDevice'\n          }, params)));\n\n        case 2:\n          return _context57.abrupt(\"return\", _context57.sent);\n\n        case 3:\n        case \"end\":\n          return _context57.stop();\n      }\n    }\n  });\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"dispose\", function () {\n  (0, _node.dispose)();\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"cancel\", function (error) {\n  (0, _node.cancel)(error);\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"renderWebUSBButton\", function (className) {\n  (0, _node.renderWebUSBButton)(className);\n});\n(0, _defineProperty2[\"default\"])(TrezorConnect, \"disableWebUSB\", function _callee58() {\n  return _regenerator[\"default\"].async(function _callee58$(_context58) {\n    while (1) {\n      switch (_context58.prev = _context58.next) {\n        case 0:\n          (0, _node.disableWebUSB)();\n\n        case 1:\n        case \"end\":\n          return _context58.stop();\n      }\n    }\n  });\n});\nvar _default = TrezorConnect;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.disableWebUSB = exports.requestLogin = exports.customMessage = exports.getSettings = exports.renderWebUSBButton = exports.uiResponse = exports.call = exports.init = exports.cancel = exports.dispose = exports.manifest = exports.eventEmitter = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nvar _PopupManager = _interopRequireDefault(require(\"../../popup/PopupManager\"));\n\nvar iframe = _interopRequireWildcard(require(\"../../iframe/builder\"));\n\nvar _button = _interopRequireDefault(require(\"../../webusb/button\"));\n\nvar _message = require(\"../../message\");\n\nvar _ConnectSettings = require(\"../../data/ConnectSettings\");\n\nvar _debug = _interopRequireWildcard(require(\"../../utils/debug\"));\n\nvar _constants = require(\"../../constants\");\n\nvar POPUP = _interopRequireWildcard(require(\"../../constants/popup\"));\n\nvar IFRAME = _interopRequireWildcard(require(\"../../constants/iframe\"));\n\nvar UI = _interopRequireWildcard(require(\"../../constants/ui\"));\n\nvar ERROR = _interopRequireWildcard(require(\"../../constants/errors\"));\n\nvar TRANSPORT = _interopRequireWildcard(require(\"../../constants/transport\"));\n\nvar $T = _interopRequireWildcard(require(\"../../types\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar eventEmitter = new _events[\"default\"]();\nexports.eventEmitter = eventEmitter;\n\nvar _log = (0, _debug.init)('[trezor-connect.js]');\n\nvar _settings;\n\nvar _popupManager;\n\nvar initPopupManager = function initPopupManager() {\n  var pm = new _PopupManager[\"default\"](_settings);\n  pm.on(POPUP.CLOSED, function (error) {\n    iframe.postMessage({\n      type: POPUP.CLOSED,\n      payload: error ? {\n        error: error\n      } : null\n    }, false);\n  });\n  return pm;\n};\n\nvar manifest = function manifest(data) {\n  _settings = (0, _ConnectSettings.parse)({\n    manifest: data\n  });\n};\n\nexports.manifest = manifest;\n\nvar dispose = function dispose() {\n  iframe.dispose();\n\n  if (_popupManager) {\n    _popupManager.close();\n  }\n};\n\nexports.dispose = dispose;\n\nvar cancel = function cancel(error) {\n  if (_popupManager) {\n    _popupManager.emit(POPUP.CLOSED, error);\n  }\n}; // handle message received from iframe\n\n\nexports.cancel = cancel;\n\nvar handleMessage = function handleMessage(messageEvent) {\n  // ignore messages from domain other then iframe origin\n  if (messageEvent.origin !== iframe.origin) return;\n  var message = (0, _message.parseMessage)(messageEvent.data);\n  var event = message.event,\n      type = message.type,\n      payload = message.payload;\n  var id = message.id || 0;\n\n  _log.log('handleMessage', message);\n\n  switch (event) {\n    case _constants.RESPONSE_EVENT:\n      if (iframe.messagePromises[id]) {\n        // resolve message promise (send result of call method)\n        iframe.messagePromises[id].resolve({\n          id: id,\n          success: message.success,\n          payload: payload\n        });\n        delete iframe.messagePromises[id];\n      } else {\n        _log.warn(\"Unknown message id \" + id);\n      }\n\n      break;\n\n    case _constants.DEVICE_EVENT:\n      // pass DEVICE event up to html\n      eventEmitter.emit(event, message);\n      eventEmitter.emit(type, payload); // DEVICE_EVENT also emit single events (connect/disconnect...)\n\n      break;\n\n    case _constants.TRANSPORT_EVENT:\n      eventEmitter.emit(event, message);\n      eventEmitter.emit(type, payload);\n      break;\n\n    case _constants.BLOCKCHAIN_EVENT:\n      eventEmitter.emit(event, message);\n      eventEmitter.emit(type, payload);\n      break;\n\n    case _constants.UI_EVENT:\n      if (type === IFRAME.BOOTSTRAP) {\n        iframe.clearTimeout();\n        break;\n      }\n\n      if (type === IFRAME.LOADED) {\n        iframe.initPromise.resolve();\n      }\n\n      if (type === IFRAME.ERROR) {\n        iframe.initPromise.reject(new Error(payload.error));\n      } // pass UI event up\n\n\n      eventEmitter.emit(event, message);\n      eventEmitter.emit(type, payload);\n      break;\n\n    default:\n      _log.log('Undefined message', event, messageEvent);\n\n  }\n};\n\nvar init = function init(settings) {\n  return _regenerator[\"default\"].async(function init$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (settings === void 0) {\n            settings = {};\n          }\n\n          if (!iframe.instance) {\n            _context.next = 3;\n            break;\n          }\n\n          throw ERROR.IFRAME_INITIALIZED;\n\n        case 3:\n          if (!_settings) {\n            _settings = (0, _ConnectSettings.parse)(settings);\n          }\n\n          if (_settings.manifest) {\n            _context.next = 6;\n            break;\n          }\n\n          throw ERROR.MANIFEST_NOT_SET;\n\n        case 6:\n          if (!_settings.lazyLoad) {\n            _context.next = 9;\n            break;\n          }\n\n          // reset \"lazyLoad\" after first use\n          _settings.lazyLoad = false;\n          return _context.abrupt(\"return\");\n\n        case 9:\n          if (!_popupManager) {\n            _popupManager = initPopupManager();\n          }\n\n          _log.enabled = _settings.debug;\n          window.addEventListener('message', handleMessage);\n          window.addEventListener('beforeunload', dispose);\n          _context.next = 15;\n          return _regenerator[\"default\"].awrap(iframe.init(_settings));\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexports.init = init;\n\nvar call = function call(params) {\n  var response;\n  return _regenerator[\"default\"].async(function call$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!(!iframe.instance && !iframe.timeout)) {\n            _context2.next = 15;\n            break;\n          }\n\n          // init popup with lazy loading before iframe initialization\n          _settings = (0, _ConnectSettings.parse)(_settings);\n\n          if (_settings.manifest) {\n            _context2.next = 4;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            success: false,\n            payload: {\n              error: ERROR.MANIFEST_NOT_SET.message\n            }\n          });\n\n        case 4:\n          if (!_popupManager) {\n            _popupManager = initPopupManager();\n          }\n\n          _popupManager.request(true); // auto init with default settings\n\n\n          _context2.prev = 6;\n          _context2.next = 9;\n          return _regenerator[\"default\"].awrap(init(_settings));\n\n        case 9:\n          _context2.next = 15;\n          break;\n\n        case 11:\n          _context2.prev = 11;\n          _context2.t0 = _context2[\"catch\"](6);\n\n          if (_popupManager) {\n            _popupManager.close();\n          }\n\n          return _context2.abrupt(\"return\", {\n            success: false,\n            payload: {\n              error: _context2.t0\n            }\n          });\n\n        case 15:\n          if (!iframe.timeout) {\n            _context2.next = 19;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            success: false,\n            payload: {\n              error: ERROR.NO_IFRAME.message\n            }\n          });\n\n        case 19:\n          if (!iframe.error) {\n            _context2.next = 21;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            success: false,\n            payload: {\n              error: iframe.error\n            }\n          });\n\n        case 21:\n          // request popup window it might be used in the future\n          if (_settings.popup && _popupManager) {\n            _popupManager.request();\n          } // post message to iframe\n\n\n          _context2.prev = 22;\n          _context2.next = 25;\n          return _regenerator[\"default\"].awrap(iframe.postMessage({\n            type: IFRAME.CALL,\n            payload: params\n          }));\n\n        case 25:\n          response = _context2.sent;\n\n          if (!response) {\n            _context2.next = 31;\n            break;\n          }\n\n          // TODO: unlock popupManager request only if there wasn't error \"in progress\"\n          if (response.payload.error !== ERROR.DEVICE_CALL_IN_PROGRESS.message && _popupManager) {\n            _popupManager.unlock();\n          }\n\n          return _context2.abrupt(\"return\", response);\n\n        case 31:\n          if (_popupManager) {\n            _popupManager.unlock();\n          }\n\n          return _context2.abrupt(\"return\", {\n            success: false,\n            payload: {\n              error: 'No response from iframe'\n            }\n          });\n\n        case 33:\n          _context2.next = 39;\n          break;\n\n        case 35:\n          _context2.prev = 35;\n          _context2.t1 = _context2[\"catch\"](22);\n\n          _log.error('__call error', _context2.t1);\n\n          return _context2.abrupt(\"return\", _context2.t1);\n\n        case 39:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[6, 11], [22, 35]]);\n};\n\nexports.call = call;\n\nvar customMessageResponse = function customMessageResponse(payload) {\n  iframe.postMessage({\n    event: _constants.UI_EVENT,\n    type: UI.CUSTOM_MESSAGE_RESPONSE,\n    payload: payload\n  });\n};\n\nvar uiResponse = function uiResponse(response) {\n  iframe.postMessage(_objectSpread({\n    event: _constants.UI_EVENT\n  }, response));\n};\n\nexports.uiResponse = uiResponse;\n\nvar renderWebUSBButton = function renderWebUSBButton(className) {\n  (0, _button[\"default\"])(className, _settings.webusbSrc, iframe.origin);\n};\n\nexports.renderWebUSBButton = renderWebUSBButton;\n\nvar getSettings = function getSettings() {\n  return _regenerator[\"default\"].async(function getSettings$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (iframe.instance) {\n            _context3.next = 2;\n            break;\n          }\n\n          return _context3.abrupt(\"return\", {\n            success: false,\n            payload: {\n              error: 'Iframe not initialized yet, you need to call TrezorConnect.init or any other method first.'\n            }\n          });\n\n        case 2:\n          _context3.next = 4;\n          return _regenerator[\"default\"].awrap(call({\n            method: 'getSettings'\n          }));\n\n        case 4:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n};\n\nexports.getSettings = getSettings;\n\nvar customMessage = function customMessage(params) {\n  var callback, customMessageListener, response;\n  return _regenerator[\"default\"].async(function customMessage$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          if (!(typeof params.callback !== 'function')) {\n            _context5.next = 2;\n            break;\n          }\n\n          return _context5.abrupt(\"return\", {\n            success: false,\n            payload: {\n              error: 'Parameter \"callback\" is not a function'\n            }\n          });\n\n        case 2:\n          // TODO: set message listener only if iframe is loaded correctly\n          callback = params.callback;\n\n          customMessageListener = function customMessageListener(event) {\n            var data, payload;\n            return _regenerator[\"default\"].async(function customMessageListener$(_context4) {\n              while (1) {\n                switch (_context4.prev = _context4.next) {\n                  case 0:\n                    data = event.data;\n\n                    if (!(data && data.type === UI.CUSTOM_MESSAGE_REQUEST)) {\n                      _context4.next = 6;\n                      break;\n                    }\n\n                    _context4.next = 4;\n                    return _regenerator[\"default\"].awrap(callback(data.payload));\n\n                  case 4:\n                    payload = _context4.sent;\n\n                    if (payload) {\n                      customMessageResponse(payload);\n                    } else {\n                      customMessageResponse({\n                        message: 'release'\n                      });\n                    }\n\n                  case 6:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }\n            });\n          };\n\n          window.addEventListener('message', customMessageListener, false);\n          _context5.next = 7;\n          return _regenerator[\"default\"].awrap(call(_objectSpread({\n            method: 'customMessage'\n          }, params, {\n            callback: null\n          })));\n\n        case 7:\n          response = _context5.sent;\n          window.removeEventListener('message', customMessageListener);\n          return _context5.abrupt(\"return\", response);\n\n        case 10:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n};\n\nexports.customMessage = customMessage;\n\nvar requestLogin = function requestLogin(params) {\n  var _callback, loginChallengeListener, response;\n\n  return _regenerator[\"default\"].async(function requestLogin$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          if (!(typeof params.callback === 'function')) {\n            _context7.next = 11;\n            break;\n          }\n\n          _callback = params.callback; // TODO: set message listener only if iframe is loaded correctly\n\n          loginChallengeListener = function loginChallengeListener(event) {\n            var data, payload;\n            return _regenerator[\"default\"].async(function loginChallengeListener$(_context6) {\n              while (1) {\n                switch (_context6.prev = _context6.next) {\n                  case 0:\n                    data = event.data;\n\n                    if (!(data && data.type === UI.LOGIN_CHALLENGE_REQUEST)) {\n                      _context6.next = 12;\n                      break;\n                    }\n\n                    _context6.prev = 2;\n                    _context6.next = 5;\n                    return _regenerator[\"default\"].awrap(_callback());\n\n                  case 5:\n                    payload = _context6.sent;\n                    iframe.postMessage({\n                      event: _constants.UI_EVENT,\n                      type: UI.LOGIN_CHALLENGE_RESPONSE,\n                      payload: payload\n                    });\n                    _context6.next = 12;\n                    break;\n\n                  case 9:\n                    _context6.prev = 9;\n                    _context6.t0 = _context6[\"catch\"](2);\n                    iframe.postMessage({\n                      event: _constants.UI_EVENT,\n                      type: UI.LOGIN_CHALLENGE_RESPONSE,\n                      payload: _context6.t0.message\n                    });\n\n                  case 12:\n                  case \"end\":\n                    return _context6.stop();\n                }\n              }\n            }, null, null, [[2, 9]]);\n          };\n\n          window.addEventListener('message', loginChallengeListener, false);\n          _context7.next = 6;\n          return _regenerator[\"default\"].awrap(call(_objectSpread({\n            method: 'requestLogin'\n          }, params, {\n            asyncChallenge: true,\n            callback: null\n          })));\n\n        case 6:\n          response = _context7.sent;\n          window.removeEventListener('message', loginChallengeListener);\n          return _context7.abrupt(\"return\", response);\n\n        case 11:\n          _context7.next = 13;\n          return _regenerator[\"default\"].awrap(call(_objectSpread({\n            method: 'requestLogin'\n          }, params)));\n\n        case 13:\n          return _context7.abrupt(\"return\", _context7.sent);\n\n        case 14:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  });\n};\n\nexports.requestLogin = requestLogin;\n\nvar disableWebUSB = function disableWebUSB() {\n  iframe.postMessage({\n    event: _constants.UI_EVENT,\n    type: TRANSPORT.DISABLE_WEBUSB\n  });\n};\n\nexports.disableWebUSB = disableWebUSB;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nvar POPUP = _interopRequireWildcard(require(\"../constants/popup\"));\n\nvar IFRAME = _interopRequireWildcard(require(\"../constants/iframe\"));\n\nvar UI = _interopRequireWildcard(require(\"../constants/ui\"));\n\nvar _showPopupRequest = require(\"./showPopupRequest\");\n\nvar _networkUtils = require(\"../env/browser/networkUtils\");\n\nvar _deferred = require(\"../utils/deferred\");\n\n// const POPUP_REQUEST_TIMEOUT: number = 602;\nvar POPUP_REQUEST_TIMEOUT = 850;\nvar POPUP_CLOSE_INTERVAL = 500;\nvar POPUP_OPEN_TIMEOUT = 3000;\n\nvar PopupManager =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  (0, _inheritsLoose2[\"default\"])(PopupManager, _EventEmitter);\n\n  // Window\n  function PopupManager(settings) {\n    var _this;\n\n    _this = _EventEmitter.call(this) || this;\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"requestTimeout\", 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"closeInterval\", 0);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"extensionTabId\", 0);\n    _this.settings = settings;\n    _this.origin = (0, _networkUtils.getOrigin)(settings.popupSrc);\n    _this.handleMessage = _this.handleMessage.bind((0, _assertThisInitialized2[\"default\"])(_this));\n    _this.iframeHandshake = (0, _deferred.create)(IFRAME.LOADED);\n\n    if (_this.settings.env === 'webextension') {\n      _this.handleExtensionConnect = _this.handleExtensionConnect.bind((0, _assertThisInitialized2[\"default\"])(_this));\n      _this.handleExtensionMessage = _this.handleExtensionMessage.bind((0, _assertThisInitialized2[\"default\"])(_this)); // $FlowIssue chrome not declared outside\n\n      chrome.runtime.onConnect.addListener(_this.handleExtensionConnect);\n    }\n\n    window.addEventListener('message', _this.handleMessage, false);\n    return _this;\n  }\n\n  var _proto = PopupManager.prototype;\n\n  _proto.request = function request(lazyLoad) {\n    var _this2 = this;\n\n    if (lazyLoad === void 0) {\n      lazyLoad = false;\n    }\n\n    // popup request\n    // TODO: ie - open immediately and hide it but post handshake after timeout\n    // bring popup window to front\n    if (this.locked) {\n      if (this._window) {\n        if (this.settings.env === 'webextension') {\n          // $FlowIssue chrome not declared outside\n          chrome.tabs.update(this._window.id, {\n            active: true\n          });\n        } else {\n          this._window.focus();\n        }\n      }\n\n      return;\n    }\n\n    var openFn = this.open.bind(this);\n    this.locked = true;\n\n    if (!this.settings.supportedBrowser) {\n      openFn();\n    } else {\n      var timeout = lazyLoad || this.settings.env === 'webextension' ? 1 : POPUP_REQUEST_TIMEOUT;\n      this.requestTimeout = window.setTimeout(function () {\n        _this2.requestTimeout = 0;\n        openFn(lazyLoad);\n      }, timeout);\n    }\n  };\n\n  _proto.cancel = function cancel() {\n    this.close();\n  };\n\n  _proto.unlock = function unlock() {\n    this.locked = false;\n  };\n\n  _proto.open = function open(lazyLoad) {\n    var _this3 = this;\n\n    var src = this.settings.popupSrc;\n\n    if (!this.settings.supportedBrowser) {\n      this.openWrapper(src + \"#unsupported\");\n      return;\n    }\n\n    this.openWrapper(lazyLoad ? src + \"#loading\" : src);\n    this.closeInterval = window.setInterval(function () {\n      if (!_this3._window) return;\n\n      if (_this3.settings.env === 'webextension') {\n        // $FlowIssue chrome not declared outside\n        chrome.tabs.get(_this3._window.id, function (tab) {\n          if (!tab) {\n            _this3.close();\n\n            _this3.emit(POPUP.CLOSED);\n          }\n        });\n      } else if (_this3._window.closed) {\n        _this3.close();\n\n        _this3.emit(POPUP.CLOSED);\n      }\n    }, POPUP_CLOSE_INTERVAL); // open timeout will be cancelled by POPUP.BOOTSTRAP message\n\n    this.openTimeout = window.setTimeout(function () {\n      _this3.close();\n\n      (0, _showPopupRequest.showPopupRequest)(_this3.open.bind(_this3), function () {\n        _this3.emit(POPUP.CLOSED);\n      });\n    }, POPUP_OPEN_TIMEOUT);\n  };\n\n  _proto.openWrapper = function openWrapper(url) {\n    var _this4 = this;\n\n    if (this.settings.env === 'webextension') {\n      // $FlowIssue chrome not declared outside\n      chrome.windows.getCurrent(null, function (currentWindow) {\n        // Request coming from extension popup,\n        // create new window above instead of opening new tab\n        if (currentWindow.type !== 'normal') {\n          // $FlowIssue chrome not declared outside\n          chrome.windows.create({\n            url: url\n          }, function (newWindow) {\n            // $FlowIssue chrome not declared outside\n            chrome.tabs.query({\n              windowId: newWindow.id,\n              active: true\n            }, function (tabs) {\n              _this4._window = tabs[0];\n            });\n          });\n        } else {\n          // $FlowIssue chrome not declared outside\n          chrome.tabs.query({\n            currentWindow: true,\n            active: true\n          }, function (tabs) {\n            _this4.extensionTabId = tabs[0].id; // $FlowIssue chrome not declared outside\n\n            chrome.tabs.create({\n              url: url,\n              index: tabs[0].index + 1\n            }, function (tab) {\n              _this4._window = tab;\n            });\n          });\n        }\n      });\n    } else if (this.settings.env === 'electron') {\n      this._window = window.open(url, 'modal');\n    } else {\n      this._window = window.open('', '_blank');\n\n      if (this._window) {\n        this._window.location.href = url; // otherwise android/chrome loose window.opener reference\n      }\n    }\n  };\n\n  _proto.handleExtensionConnect = function handleExtensionConnect(port) {\n    if (port.name !== 'trezor-connect') return;\n\n    if (!this._window || this._window && this._window.id !== port.sender.tab.id) {\n      port.disconnect();\n      return;\n    } // since POPUP.BOOTSTRAP will not be handled by \"handleMessage\" we need to threat \"content-script\" connection as the same event\n    // popup is opened properly, now wait for POPUP.LOADED message (in this case handled by \"handleExtensionMessage\")\n\n\n    window.clearTimeout(this.openTimeout);\n    this.extensionPort = port; // $FlowIssue need to update ChromePort definition\n\n    this.extensionPort.onMessage.addListener(this.handleExtensionMessage);\n  };\n\n  _proto.handleExtensionMessage = function handleExtensionMessage(message) {\n    var _this5 = this;\n\n    if (!this.extensionPort) return;\n    var data = message.data;\n    if (!data || typeof data !== 'object') return;\n\n    if (data.type === POPUP.ERROR) {\n      // handle popup error\n      var errorMessage = data.payload && typeof data.payload.error === 'string' ? data.payload.error : null;\n      this.emit(POPUP.CLOSED, errorMessage ? \"Popup error: \" + errorMessage : null);\n      this.close();\n    } else if (data.type === POPUP.LOADED) {\n      this.iframeHandshake.promise.then(function () {\n        _this5.extensionPort.postMessage({\n          type: POPUP.INIT,\n          payload: {\n            settings: _this5.settings\n          }\n        });\n      });\n    } else if (data.type === POPUP.EXTENSION_USB_PERMISSIONS) {\n      // $FlowIssue chrome not declared outside\n      chrome.tabs.query({\n        currentWindow: true,\n        active: true\n      }, function (tabs) {\n        // $FlowIssue chrome not declared outside\n        chrome.tabs.create({\n          url: 'trezor-usb-permissions.html',\n          index: tabs[0].index + 1\n        }, function (tab) {// do nothing\n        });\n      });\n    } else if (data.type === POPUP.CLOSE_WINDOW) {\n      this.emit(POPUP.CLOSED);\n      this.close();\n    }\n  };\n\n  _proto.handleMessage = function handleMessage(message) {\n    var _this6 = this;\n\n    // ignore messages from domain other then popup origin and without data\n    var data = message.data;\n    if ((0, _networkUtils.getOrigin)(message.origin) !== this.origin || !data || typeof data !== 'object') return;\n\n    if (data.type === IFRAME.LOADED) {\n      this.iframeHandshake.resolve();\n    } else if (data.type === POPUP.BOOTSTRAP) {\n      // popup is opened properly, now wait for POPUP.LOADED message\n      window.clearTimeout(this.openTimeout);\n    } else if (data.type === POPUP.ERROR && this._window) {\n      var errorMessage = data.payload && typeof data.payload.error === 'string' ? data.payload.error : null;\n      this.emit(POPUP.CLOSED, errorMessage ? \"Popup error: \" + errorMessage : null);\n      this.close();\n    } else if (data.type === POPUP.LOADED) {\n      // popup is successfully loaded\n      this.iframeHandshake.promise.then(function () {\n        _this6._window.postMessage({\n          type: POPUP.INIT,\n          payload: {\n            settings: _this6.settings\n          }\n        }, _this6.origin);\n      }); // send ConnectSettings to popup\n      // note this settings and iframe.ConnectSettings could be different (especially: origin, popup, webusb, debug)\n      // now popup is able to load assets\n    } else if (data.type === POPUP.CANCEL_POPUP_REQUEST || data.type === UI.CLOSE_UI_WINDOW) {\n      this.close();\n    }\n  };\n\n  _proto.close = function close() {\n    this.locked = false;\n\n    if (this.requestTimeout) {\n      window.clearTimeout(this.requestTimeout);\n      this.requestTimeout = 0;\n    }\n\n    if (this.openTimeout) {\n      window.clearTimeout(this.openTimeout);\n      this.openTimeout = 0;\n    }\n\n    if (this.closeInterval) {\n      window.clearInterval(this.closeInterval);\n      this.closeInterval = 0;\n    }\n\n    if (this.extensionPort) {\n      this.extensionPort.disconnect();\n      this.extensionPort = null;\n    } // switch to previously focused tab\n\n\n    if (this.extensionTabId) {\n      // $FlowIssue chrome not declared outside\n      chrome.tabs.update(this.extensionTabId, {\n        active: true\n      });\n      this.extensionTabId = 0;\n    }\n\n    if (this._window) {\n      if (this.settings.env === 'webextension') {\n        // eslint-disable-next-line no-unused-vars\n        var _e; // $FlowIssue chrome not declared outside\n\n\n        chrome.tabs.remove(this._window.id, function () {\n          _e = chrome.runtime.lastError;\n        });\n        _e = chrome.runtime.lastError;\n      } else {\n        this._window.close();\n      }\n\n      this._window = null;\n    }\n  };\n\n  _proto.postMessage = function postMessage(message) {\n    var _this7 = this;\n\n    // post message before popup request finalized\n    if (this.requestTimeout) {\n      return;\n    } // device needs interaction but there is no popup/ui\n    // maybe popup request wasn't handled\n    // ignore \"ui_request_window\" type\n\n\n    if (!this._window && message.type !== UI.REQUEST_UI_WINDOW && this.openTimeout) {\n      this.close();\n      (0, _showPopupRequest.showPopupRequest)(this.open.bind(this), function () {\n        _this7.emit(POPUP.CLOSED);\n      });\n      return;\n    } // post message to popup window\n\n\n    if (this._window) {\n      this._window.postMessage(message, this.origin);\n    }\n  };\n\n  _proto.onBeforeUnload = function onBeforeUnload() {\n    this.close();\n  };\n\n  return PopupManager;\n}(_events[\"default\"]);\n\nexports[\"default\"] = PopupManager;","\"use strict\";\n\nexports.__esModule = true;\nexports.showPopupRequest = void 0;\nvar layerID = 'TrezorConnectInteractionLayer';\nvar layerInnerHtml = \"\\n    <div class=\\\"trezorconnect-container\\\" id=\\\"\" + layerID + \"\\\">\\n        <div class=\\\"trezorconnect-window\\\">\\n            <div class=\\\"trezorconnect-head\\\">\\n                <svg class=\\\"trezorconnect-logo\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 163.7 41.9\\\" width=\\\"78px\\\" height=\\\"20px\\\" preserveAspectRatio=\\\"xMinYMin meet\\\">\\n                    <polygon points=\\\"101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1\\\"/>\\n                    <path d=\\\"M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z\\\"/>\\n                    <path d=\\\"M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z\\\"/>\\n                    <polygon points=\\\"82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 \\\"/>\\n                    <path d=\\\"M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z\\\"/>\\n                    <path d=\\\"M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z\\\"/>\\n                    <polygon points=\\\"40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 \\\"/>\\n                </svg>\\n                <div class=\\\"trezorconnect-close\\\">\\n                    <svg x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"24 24 60 60\\\" width=\\\"24px\\\" height=\\\"24px\\\" preserveAspectRatio=\\\"xMinYMin meet\\\">\\n                        <polygon class=\\\"st0\\\" points=\\\"40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 \\\"/>\\n                    </svg>\\n                </div>\\n            </div>\\n            <div class=\\\"trezorconnect-body\\\">\\n                <h3>Popup was blocked</h3>\\n                <p>Please click to \\u201CContinue\\u201D to open popup manually</p>\\n                <button class=\\\"trezorconnect-open\\\">Continue</button>\\n            </div>\\n        </div>\\n    </div>\\n\";\n\nvar showPopupRequest = function showPopupRequest(open, cancel) {\n  if (document.getElementById(layerID)) {\n    return;\n  }\n\n  var div = document.createElement('div');\n  div.id = layerID;\n  div.className = 'trezorconnect-container';\n  div.innerHTML = layerInnerHtml;\n\n  if (document.body) {\n    document.body.appendChild(div);\n  }\n\n  var button = div.getElementsByClassName('trezorconnect-open')[0];\n\n  button.onclick = function () {\n    open();\n\n    if (document.body) {\n      document.body.removeChild(div);\n    }\n  };\n\n  var close = div.getElementsByClassName('trezorconnect-close')[0];\n\n  close.onclick = function () {\n    cancel();\n\n    if (document.body) {\n      document.body.removeChild(div);\n    }\n  };\n};\n\nexports.showPopupRequest = showPopupRequest;","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.clearTimeout = exports.dispose = exports.postMessage = exports.init = exports.messagePromises = exports.error = exports.timeout = exports.initPromise = exports.origin = exports.instance = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _deferred = require(\"../utils/deferred\");\n\nvar IFRAME = _interopRequireWildcard(require(\"../constants/iframe\"));\n\nvar _errors = require(\"../constants/errors\");\n\nvar _networkUtils = require(\"../env/browser/networkUtils\");\n\nvar _inlineStyles = _interopRequireDefault(require(\"./inline-styles\"));\n\nvar instance;\nexports.instance = instance;\nvar origin;\nexports.origin = origin;\nvar initPromise = (0, _deferred.create)();\nexports.initPromise = initPromise;\nvar timeout = 0;\nexports.timeout = timeout;\nvar error;\nexports.error = error;\nvar _messageID = 0; // every postMessage to iframe has its own promise to resolve\n\nvar messagePromises = {};\nexports.messagePromises = messagePromises;\n\nvar init = function init(settings) {\n  var existedFrame, src, manifestString, manifest, onLoad;\n  return _regenerator[\"default\"].async(function init$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          exports.initPromise = initPromise = (0, _deferred.create)();\n          existedFrame = document.getElementById('trezorconnect');\n\n          if (existedFrame) {\n            exports.instance = instance = existedFrame;\n          } else {\n            exports.instance = instance = document.createElement('iframe');\n            instance.frameBorder = '0';\n            instance.width = '0px';\n            instance.height = '0px';\n            instance.style.position = 'absolute';\n            instance.style.display = 'none';\n            instance.style.border = '0px';\n            instance.style.width = '0px';\n            instance.style.height = '0px';\n            instance.id = 'trezorconnect';\n          }\n\n          if (settings.env === 'web') {\n            manifestString = settings.manifest ? JSON.stringify(settings.manifest) : 'undefined'; // note: btoa(undefined) === btoa('undefined') === \"dW5kZWZpbmVk\"\n\n            manifest = \"&version=\" + settings.version + \"&manifest=\" + encodeURIComponent(btoa(JSON.stringify(manifestString)));\n            src = settings.iframeSrc + \"?\" + Date.now() + manifest;\n          } else {\n            src = settings.iframeSrc;\n          }\n\n          instance.setAttribute('src', src);\n\n          if (settings.webusb) {\n            instance.setAttribute('allow', 'usb');\n          }\n\n          exports.origin = origin = (0, _networkUtils.getOrigin)(instance.src);\n          exports.timeout = timeout = window.setTimeout(function () {\n            initPromise.reject(_errors.IFRAME_TIMEOUT);\n          }, 10000);\n\n          onLoad = function onLoad() {\n            if (!instance) {\n              initPromise.reject(_errors.IFRAME_BLOCKED);\n              return;\n            }\n\n            try {\n              // if hosting page is able to access cross-origin location it means that the iframe is not loaded\n              var iframeOrigin = instance.contentWindow.location.origin;\n\n              if (!iframeOrigin || iframeOrigin === 'null') {\n                // eslint-disable-next-line no-use-before-define\n                handleIframeBlocked();\n                return;\n              }\n            } catch (e) {// empty\n            }\n\n            var extension; // $FlowIssue chrome is not declared outside\n\n            if (typeof chrome !== 'undefined' && chrome.runtime && typeof chrome.runtime.onConnect !== 'undefined') {\n              chrome.runtime.onConnect.addListener(function () {});\n              extension = chrome.runtime.id;\n            }\n\n            instance.contentWindow.postMessage({\n              type: IFRAME.INIT,\n              payload: {\n                settings: settings,\n                extension: extension\n              }\n            }, origin);\n            instance.onload = undefined;\n          }; // IE hack\n\n\n          if (instance.attachEvent) {\n            instance.attachEvent('onload', onLoad);\n          } else {\n            instance.onload = onLoad;\n          } // inject iframe into host document body\n\n\n          if (document.body) {\n            document.body.appendChild(instance); // eslint-disable-next-line no-use-before-define\n\n            injectStyleSheet();\n          }\n\n          _context.prev = 11;\n          _context.next = 14;\n          return _regenerator[\"default\"].awrap(initPromise.promise);\n\n        case 14:\n          _context.next = 20;\n          break;\n\n        case 16:\n          _context.prev = 16;\n          _context.t0 = _context[\"catch\"](11);\n\n          // reset state to allow initialization again\n          if (instance) {\n            if (instance.parentNode) {\n              instance.parentNode.removeChild(instance);\n            } // eslint-disable-next-line require-atomic-updates\n\n\n            exports.instance = instance = null;\n          }\n\n          throw _context.t0.message || _context.t0;\n\n        case 20:\n          _context.prev = 20;\n          window.clearTimeout(timeout);\n          exports.timeout = timeout = 0;\n          return _context.finish(20);\n\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[11, 16, 20, 24]]);\n};\n\nexports.init = init;\n\nvar injectStyleSheet = function injectStyleSheet() {\n  if (!instance) {\n    throw _errors.IFRAME_BLOCKED;\n  }\n\n  var doc = instance.ownerDocument;\n  var head = doc.head || doc.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.setAttribute('type', 'text/css');\n  style.setAttribute('id', 'TrezorConnectStylesheet'); // $FlowIssue\n\n  if (style.styleSheet) {\n    // IE\n    // $FlowIssue\n    style.styleSheet.cssText = _inlineStyles[\"default\"];\n    head.appendChild(style);\n  } else {\n    style.appendChild(document.createTextNode(_inlineStyles[\"default\"]));\n    head.append(style);\n  }\n};\n\nvar handleIframeBlocked = function handleIframeBlocked() {\n  window.clearTimeout(timeout);\n  exports.error = error = _errors.IFRAME_BLOCKED.message; // eslint-disable-next-line no-use-before-define\n\n  dispose();\n  initPromise.reject(_errors.IFRAME_BLOCKED);\n}; // post messages to iframe\n\n\nvar postMessage = function postMessage(message, usePromise) {\n  if (usePromise === void 0) {\n    usePromise = true;\n  }\n\n  if (!instance) {\n    throw _errors.IFRAME_BLOCKED;\n  }\n\n  if (usePromise) {\n    _messageID++;\n    message.id = _messageID;\n    messagePromises[_messageID] = (0, _deferred.create)();\n    instance.contentWindow.postMessage(message, origin);\n    return messagePromises[_messageID].promise;\n  }\n\n  instance.contentWindow.postMessage(message, origin);\n  return null;\n};\n\nexports.postMessage = postMessage;\n\nvar dispose = function dispose() {\n  if (instance && instance.parentNode) {\n    try {\n      instance.parentNode.removeChild(instance);\n    } catch (error) {// do nothing\n    }\n  }\n\n  exports.instance = instance = null;\n  exports.timeout = timeout = 0;\n};\n\nexports.dispose = dispose;\n\nvar clearTimeout = function clearTimeout() {\n  window.clearTimeout(timeout);\n};\n\nexports.clearTimeout = clearTimeout;","\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar css = '.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */';\nvar _default = css;\nexports[\"default\"] = _default;","\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar render = function render(className, url, origin) {\n  var query = className || '.trezor-webusb-button';\n  var buttons = document.querySelectorAll(query);\n  var src = url + \"?\" + Date.now();\n  buttons.forEach(function (b) {\n    if (b.getElementsByTagName('iframe').length < 1) {\n      var bounds = b.getBoundingClientRect();\n      var btnIframe = document.createElement('iframe');\n      btnIframe.frameBorder = '0';\n      btnIframe.width = Math.round(bounds.width) + 'px';\n      btnIframe.height = Math.round(bounds.height) + 'px';\n      btnIframe.style.position = 'absolute';\n      btnIframe.style.top = '0px';\n      btnIframe.style.left = '0px';\n      btnIframe.style.zIndex = '1'; // btnIframe.style.opacity = '0'; // this makes click impossible on cross-origin\n\n      btnIframe.setAttribute('allow', 'usb');\n      btnIframe.setAttribute('scrolling', 'no');\n\n      btnIframe.onload = function () {\n        btnIframe.contentWindow.postMessage({// style: JSON.stringify( window.getComputedStyle(b) ),\n          // outer: b.outerHTML,\n          // inner: b.innerHTML\n        }, origin);\n      };\n\n      btnIframe.src = src; // inject iframe into button\n\n      b.append(btnIframe);\n    }\n  });\n};\n\nvar _default = render;\nexports[\"default\"] = _default;","\"use strict\";\n\nexports.__esModule = true;\nexports.parseMessage = void 0;\n\n// parse MessageEvent .data into CoreMessage\nvar parseMessage = function parseMessage(messageData) {\n  var message = {\n    event: messageData.event,\n    type: messageData.type,\n    payload: messageData.payload\n  };\n\n  if (typeof messageData.id === 'number') {\n    message.id = messageData.id;\n  }\n\n  if (typeof messageData.success === 'boolean') {\n    message.success = messageData.success;\n  }\n\n  return message;\n};\n\nexports.parseMessage = parseMessage;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.parse = exports.getEnv = exports.DEFAULT_PRIORITY = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/*\n * Initial settings for connect.\n * It could be changed by passing values into TrezorConnect.init(...) method\n */\nvar VERSION = '8.0.10';\nvar versionN = VERSION.split('.').map(function (s) {\n  return parseInt(s);\n});\nvar DIRECTORY = \"\" + versionN[0] + (versionN[1] > 0 ? \".\" + versionN[1] : '') + \"/\";\nvar DEFAULT_DOMAIN = \"https://connect.trezor.io/\" + DIRECTORY;\nvar DEFAULT_PRIORITY = 2;\nexports.DEFAULT_PRIORITY = DEFAULT_PRIORITY;\nvar initialSettings = {\n  configSrc: './data/config.json',\n  // constant\n  version: VERSION,\n  // constant\n  debug: false,\n  origin: null,\n  priority: DEFAULT_PRIORITY,\n  trustedHost: false,\n  connectSrc: DEFAULT_DOMAIN,\n  iframeSrc: DEFAULT_DOMAIN + \"iframe.html\",\n  popup: true,\n  popupSrc: DEFAULT_DOMAIN + \"popup.html\",\n  webusbSrc: DEFAULT_DOMAIN + \"webusb.html\",\n  transportReconnect: false,\n  webusb: true,\n  pendingTransportEvent: true,\n  supportedBrowser: typeof navigator !== 'undefined' ? !/Trident|MSIE|Edge/.test(navigator.userAgent) : true,\n  extension: null,\n  manifest: null,\n  env: 'web',\n  lazyLoad: false,\n  timestamp: new Date().getTime()\n};\nvar currentSettings = initialSettings;\n\nvar parseManifest = function parseManifest(manifest) {\n  if (typeof manifest.email !== 'string') {\n    return null;\n  }\n\n  if (typeof manifest.appUrl !== 'string') {\n    return null;\n  }\n\n  return {\n    email: manifest.email,\n    appUrl: manifest.appUrl\n  };\n};\n\nvar getEnv = function getEnv() {\n  // $FlowIssue: chrome is not declared outside the project\n  if (typeof chrome !== 'undefined' && chrome.runtime && typeof chrome.runtime.onConnect !== 'undefined') {\n    return 'webextension';\n  }\n\n  if (typeof navigator !== 'undefined') {\n    if (typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative') {\n      return 'react-native';\n    }\n\n    var userAgent = navigator.userAgent.toLowerCase();\n\n    if (userAgent.indexOf(' electron/') > -1) {\n      return 'electron';\n    }\n  } // if (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative') {\n  //     return 'react-native';\n  // }\n  // if (typeof process !== 'undefined' && process.versions.hasOwnProperty('electron')) {\n  //     return 'electron';\n  // }\n\n\n  return 'web';\n};\n\nexports.getEnv = getEnv;\n\nvar parse = function parse(input) {\n  if (!input) return currentSettings;\n\n  var settings = _objectSpread({}, currentSettings);\n\n  if (Object.prototype.hasOwnProperty.call(input, 'debug')) {\n    if (Array.isArray(input)) {// enable log with prefix\n    }\n\n    if (typeof input.debug === 'boolean') {\n      settings.debug = input.debug;\n    } else if (typeof input.debug === 'string') {\n      settings.debug = input.debug === 'true';\n    }\n  }\n\n  if (typeof input.connectSrc === 'string') {\n    // TODO: escape string, validate url\n    settings.connectSrc = input.connectSrc;\n  } else if (typeof window !== 'undefined' && typeof window.__TREZOR_CONNECT_SRC === 'string') {\n    settings.connectSrc = window.__TREZOR_CONNECT_SRC;\n  }\n\n  settings.iframeSrc = settings.connectSrc + \"iframe.html\";\n  settings.popupSrc = settings.connectSrc + \"popup.html\";\n  settings.webusbSrc = settings.connectSrc + \"webusb.html\";\n\n  if (typeof input.transportReconnect === 'boolean') {\n    settings.transportReconnect = input.transportReconnect;\n  }\n\n  if (typeof input.webusb === 'boolean') {\n    settings.webusb = input.webusb;\n  }\n\n  if (typeof input.popup === 'boolean') {\n    settings.popup = input.popup;\n  }\n\n  if (typeof input.lazyLoad === 'boolean') {\n    settings.lazyLoad = input.lazyLoad;\n  }\n\n  if (typeof input.pendingTransportEvent === 'boolean') {\n    settings.pendingTransportEvent = input.pendingTransportEvent;\n  } // local files\n\n\n  if (typeof window !== 'undefined' && window.location && window.location.protocol === 'file:') {\n    settings.origin = \"file://\" + window.location.pathname;\n    settings.webusb = false;\n  }\n\n  if (typeof input.extension === 'string') {\n    settings.extension = input.extension;\n  } // $FlowIssue chrome is not declared outside\n\n\n  if (typeof input.env === 'string') {\n    settings.env = input.env;\n  } else {\n    settings.env = getEnv();\n  }\n\n  if (typeof input.timestamp === 'number') {\n    settings.timestamp = input.timestamp;\n  }\n\n  if (typeof input.manifest === 'object') {\n    settings.manifest = parseManifest(input.manifest);\n  }\n\n  currentSettings = settings;\n  return currentSettings;\n};\n\nexports.parse = parse;","\"use strict\";\n\nexports.__esModule = true;\nexports.popupConsole = exports.enableByPrefix = exports.getLog = exports.enable = exports.init = exports[\"default\"] = void 0;\n\nvar _this = void 0;\n\n// https://stackoverflow.com/questions/7505623/colors-in-javascript-console\n// https://github.com/pimterry/loglevel/blob/master/lib/loglevel.js\n// http://www.color-hex.com/color-palette/5016\nvar colors = {\n  // green\n  'DescriptorStream': 'color: #77ab59',\n  'DeviceList': 'color: #36802d',\n  'Device': 'color: #bada55',\n  'Core': 'color: #c9df8a',\n  'IFrame': 'color: #FFFFFF; background: #f4a742;',\n  'Popup': 'color: #f48a00'\n};\n\nvar Log =\n/*#__PURE__*/\nfunction () {\n  function Log(prefix, enabled) {\n    if (enabled === void 0) {\n      enabled = false;\n    }\n\n    this.prefix = prefix;\n    this.enabled = enabled;\n    this.messages = [];\n    this.css = colors[prefix] || 'color: #000000; background: #FFFFFF;';\n  }\n\n  var _proto = Log.prototype;\n\n  _proto.addMessage = function addMessage(level, prefix) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    this.messages.push({\n      level: level,\n      prefix: prefix,\n      message: args,\n      timestamp: new Date().getTime()\n    });\n  };\n\n  _proto.log = function log() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    this.addMessage.apply(this, ['log', this.prefix].concat(args)); // eslint-disable-next-line no-console\n\n    if (this.enabled) {\n      var _console;\n\n      (_console = console).log.apply(_console, [this.prefix].concat(args));\n    }\n  };\n\n  _proto.error = function error() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    this.addMessage.apply(this, ['error', this.prefix].concat(args)); // eslint-disable-next-line no-console\n\n    if (this.enabled) {\n      var _console2;\n\n      (_console2 = console).error.apply(_console2, [this.prefix].concat(args));\n    }\n  };\n\n  _proto.warn = function warn() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    this.addMessage.apply(this, ['warn', this.prefix].concat(args)); // eslint-disable-next-line no-console\n\n    if (this.enabled) {\n      var _console3;\n\n      (_console3 = console).warn.apply(_console3, [this.prefix].concat(args));\n    }\n  };\n\n  _proto.debug = function debug() {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    this.addMessage.apply(this, ['debug', this.prefix].concat(args)); // eslint-disable-next-line no-console\n\n    if (this.enabled) {\n      var _console4;\n\n      (_console4 = console).log.apply(_console4, ['%c' + this.prefix, this.css].concat(args));\n    }\n  };\n\n  return Log;\n}();\n\nexports[\"default\"] = Log;\nvar _logs = {};\n\nvar init = function init(prefix, enabled) {\n  var enab = typeof enabled === 'boolean' ? enabled : false;\n  var instance = new Log(prefix, enab);\n  _logs[prefix] = instance;\n  return instance;\n};\n\nexports.init = init;\n\nvar enable = function enable(enabled) {\n  for (var _i = 0, _Object$keys = Object.keys(_logs); _i < _Object$keys.length; _i++) {\n    var l = _Object$keys[_i];\n    _logs[l].enabled = enabled;\n  }\n};\n\nexports.enable = enable;\n\nvar getLog = function getLog(args) {\n  // if\n  var logs = [];\n\n  for (var _i2 = 0, _Object$keys2 = Object.keys(_logs); _i2 < _Object$keys2.length; _i2++) {\n    var l = _Object$keys2[_i2];\n    logs = logs.concat(_logs[l].messages);\n  }\n\n  logs.sort(function (a, b) {\n    return a.timestamp - b.timestamp;\n  });\n  return logs;\n};\n\nexports.getLog = getLog;\n\nvar enableByPrefix = function enableByPrefix(prefix, enabled) {\n  if (_logs[prefix]) {\n    _logs[prefix].enabled = enabled;\n  }\n}; // TODO: enable/disable log at runtime\n\n\nexports.enableByPrefix = enableByPrefix;\n\nvar popupConsole = function popupConsole(tag, postMessage) {\n  var c = global.console;\n  var orig = {\n    error: c.error,\n    // warn: c.warn,\n    info: c.info,\n    debug: c.debug,\n    log: c.log\n  };\n  var log = [];\n\n  var inject = function inject(method, level) {\n    return function () {\n      // args.unshift('[popup.js]');\n      var time = new Date().toUTCString();\n\n      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n\n      log.push([level, time].concat(args));\n      postMessage.apply(_this, [{\n        type: tag,\n        level: level,\n        time: time,\n        args: JSON.stringify(args)\n      } // { type: 'LOG', level: level, time: time, args: JSON.stringify(deepClone(args)) }\n      ]);\n      return method.apply(c, args);\n    };\n  };\n\n  for (var level in orig) {\n    c[level] = inject(orig[level], level);\n  }\n};\n\nexports.popupConsole = popupConsole;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar BLOCKCHAIN = _interopRequireWildcard(require(\"../constants/blockchain\"));","\"use strict\";\n/**\n * Trezor Tx - A class that creates a Trezor-formatted transaction from any\n * format of transaction.\n */\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar TxTransformer = require(\"./tx-transformer\");\n/* Definition */\n\n\nvar TrezorTransaction =\n/*#__PURE__*/\nfunction (_TxTransformer) {\n  _inherits(TrezorTransaction, _TxTransformer);\n\n  function TrezorTransaction(transaction) {\n    var _this;\n\n    _classCallCheck(this, TrezorTransaction);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TrezorTransaction).call(this, rules, transaction));\n    delete _this.network; // Fees\n\n    if (!_this.fee) _this.fee = 100 * _this.operations.length;else _this.fee = Number(_this.fee) / 10000000; // Timebounds\n\n    if (_this.minTime || _this.maxTime) {\n      _this.timebounds = {\n        minTime: _this.minTime == null ? null : _this.minTime,\n        maxTime: _this.maxTime == null ? null : _this.maxTime\n      };\n      delete _this.minTime;\n      delete _this.maxTime;\n    } // Operations\n\n\n    _this.operations.forEach(function (op) {\n      if (op.type === \"allowTrust\") {\n        op.assetType = op.assetCode.length <= 4 ? 1 : 2;\n        op.authorize = op.authorize ? 1 : 0;\n      } else if (op.type === \"changeTrust\") {\n        if (!op.limit) op.limit = \"9223372036854775807\";\n        op.line = op.asset;\n        delete op.asset;\n      } else if (op.type === \"createPassiveSellOffer\") {\n        op.type = \"createPassiveOffer\";\n      } else if (op.type === \"manageSellOffer\") {\n        op.type = \"manageOffer\";\n      } else if (op.type === \"manageBuyOffer\") {\n        notSupported(\"operation manageBuyOffer\");\n      } else if (op.type === \"setOptions\") {\n        if (op.signer && op.signer.type === 0) {\n          var keypair = StellarSdk.Keypair.fromPublicKey(op.signer.key);\n          op.signer.key = keypair.rawPublicKey().toString(\"hex\");\n        }\n      }\n    }); // DEBUG\n\n\n    console.log(\"Trezor TX\", JSON.stringify(_assertThisInitialized(_this), null, 2));\n    return _this;\n  }\n\n  return TrezorTransaction;\n}(TxTransformer);\n/* Rules */\n\n\nvar rules = {};\n\nrules.amount = function (amount) {\n  return Number(amount * 10000000).toFixed(0);\n};\n\nrules.asset = function (asset) {\n  if (asset.code === \"XLM\" && !asset.issuer) return null;\n  asset.type = asset.code.length <= 4 ? 1 : 2;\n  return asset;\n};\n\nrules.assetsArray = function (array) {\n  return array.map(rules.asset);\n};\n\nrules.buffer = function (buffer) {\n  if (!buffer.value) return \"\";\n\n  if (buffer.type === \"base64\") {\n    return Buffer.from(buffer.value, \"base64\").toString(\"hex\");\n  } else {\n    return Buffer.from(buffer.value).toString(\"hex\");\n  }\n};\n\nrules.date = function (date) {\n  return Number(new Date(date)) / 1000;\n};\n\nrules.memo = function (memo) {\n  if (memo.type === \"text\") {\n    memo.type = 1;\n    memo.text = memo.value;\n  } else if (memo.type === \"base64\") {\n    memo.type = 1;\n    memo.text = Buffer.from(memo.value, \"base64\").toString(\"utf8\");\n\n    if (memo.text.match(\"\\0\")) {\n      notSupported(\"binary text memo including NULL characters\");\n    }\n  } else if (memo.type === \"id\") {\n    memo.type = 2;\n    memo.id = memo.value;\n  } else if (memo.type === \"hash\") {\n    memo.type = 3;\n    memo.hash = memo.value;\n  } else if (memo.type === \"return\") {\n    memo.type = 4;\n    memo.hash = memo.value;\n  }\n\n  delete memo.value;\n  return memo;\n};\n\nrules.price = function (price) {\n  if (_typeof(price) !== \"object\") return {\n    n: Number(price),\n    d: 1\n  };else return price;\n};\n\nrules.sequence = function (sequence) {\n  return Number(sequence);\n};\n\nrules.signer = function (signer) {\n  signer.key = signer.value;\n  delete signer.value;\n  if (signer.type === \"key\") signer.type = 0;else if (signer.type === \"tx\") signer.type = 1;else if (signer.type === \"hash\") signer.type = 2;\n  return signer;\n};\n/* Helpers */\n\n\nfunction notSupported(feature) {\n  throw new Error(\"This feature is not supported yet: \".concat(feature, \".\"));\n}\n/* Export */\n\n\nmodule.exports = TrezorTransaction;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","\"use strict\";\n/**\n * Tx Transformer\n *\n * Derives new formats from CosmicLink Transitional Description.\n */\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _require = require(\"cosmic-lib\"),\n    CosmicLink = _require.CosmicLink,\n    specs = _require.specs;\n/* Definition */\n\n\nvar TxTransformer = function TxTransformer(rules, tx) {\n  var _this = this;\n\n  _classCallCheck(this, TxTransformer);\n\n  var tdesc = new CosmicLink(tx).tdesc;\n  specs.transactionOptionalFields.forEach(function (field) {\n    var value = tdesc[field];\n    if (value) _this[field] = transform.field(rules, field, value);\n  });\n  this.operations = tdesc.operations.map(function (o) {\n    return transform.odesc(rules, o);\n  });\n};\n/* Routines */\n\n\nvar transform = {};\n\ntransform.field = function (rules, field, value) {\n  var type = specs.fieldType[field];\n  return rules[type] ? rules[type](value) : value;\n};\n\ntransform.odesc = function (rules, odesc) {\n  var result = {};\n\n  for (var field in odesc) {\n    result[field] = transform.field(rules, field, odesc[field]);\n  }\n\n  return result;\n};\n/* Export */\n\n\nmodule.exports = TxTransformer;","\"use strict\";\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nif (env.isBrowser) require(\"@cosmic-plus/domutils/es5/polyfill\");\n/**\n * Automatically pass `config` to `module` functions as first argument.\n *\n * @param {Object} module A cosmic-lib module whose functions takes config as\n *   the first argument.\n * @param {Object} config A configuration object similar than config.js module.\n * @private\n */\n\nfunction exposeModule(module) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var layer = Object.assign({}, module);\n  misc.setHiddenProperty(layer, \"_config\", config);\n\n  var _loop = function _loop(name) {\n    if (typeof module[name] === \"function\") {\n      layer[name] = function () {\n        for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n          params[_key] = arguments[_key];\n        }\n\n        return module[name].apply(module, [this._config].concat(params));\n      };\n    } else {\n      layer[name] = module[name];\n    }\n  };\n\n  for (var name in module) {\n    _loop(name);\n  }\n\n  return layer;\n}\n/**\n * Create a clone of the library with an alternative config object derived from\n * **params**. Fields which are not defined in **params** stay in sync with parent\n * configuration.\n *\n * @example\n * const testnet = cosmicLib.withConfig({ network: 'test' })\n * const account = await testnet.resolve.account('tips*cosmic.link')\n *\n * @params {Object} params Alternative configuration\n * @return {Object} A clone of cosmicLib\n */\n\n\nexports.withConfig = function (params) {\n  var library = Object.create(this);\n  library.config = Object.assign({}, this.config, params);\n\n  for (var module in this) {\n    if (this[module].prototype && this[module].prototype.__proto__ === this.config) {\n      library[module] =\n      /*#__PURE__*/\n      function (_this$module) {\n        _inherits(_class, _this$module);\n\n        function _class() {\n          _classCallCheck(this, _class);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(_class).apply(this, arguments));\n        }\n\n        return _class;\n      }(this[module]);\n\n      Object.assign(library[module].prototype, this[module].prototype);\n      library[module].prototype.__proto__ = library.config;\n    } else if (this[module]._config) {\n      library[module] = Object.create(this[module]);\n      misc.setHiddenProperty(library[module], \"_config\", library.config);\n    }\n  }\n\n  return library;\n};\n/**\n * Export modules **names** after linking them to `config`.\n *\n * @param  {...String} names Module names\n */\n\n\nfunction exportModule(name, module) {\n  exports[name] = exposeModule(module, config);\n} // Export modules.\n\n\nvar config = exports.config = require(\"./config\");\n\nexports.CosmicLink = require(\"./cosmiclink\");\nif (env.isBrowser) exports.load = require(\"./load\");\nexportModule(\"resolve\", require(\"./resolve\"));\nexportModule(\"signersUtils\", require(\"./signers-utils\"));\nexports.specs = require(\"./specs\"); // sep7Utils\n\nvar _require = require(\"./sep7-utils\"),\n    isWebHandlerSupported = _require.isWebHandlerSupported,\n    registerWebHandler = _require.registerWebHandler;\n\nexports.sep7Utils = {\n  isWebHandlerSupported: isWebHandlerSupported,\n  registerWebHandler: registerWebHandler\n}; // Export helpers (not documented in the manual - please check the code).\n\nexportModule(\"check\", require(\"./check\"));\nexportModule(\"expand\", require(\"./expand\"));\nexportModule(\"construct\", require(\"./construct\"));\nexportModule(\"destruct\", require(\"./destruct\"));\nexportModule(\"encode\", require(\"./encode\"));\nexportModule(\"decode\", require(\"./decode\"));","\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar html = env.isBrowser && require(\"@cosmic-plus/domutils/es5/html\");\n\nvar SideFrame = env.isBrowser && require(\"./helpers/side-frame\");\n\nvar action = require(\"./action\");\n\nvar config = require(\"./config\");\n\nvar convert = require(\"./convert\");\n\nvar format = env.isBrowser && require(\"./format\");\n\nvar parse = require(\"./parse\");\n\nvar resolve = require(\"./resolve\");\n\nvar sep7Utils = require(\"./sep7-utils\");\n\nvar status = require(\"./status\");\n/**\n * | Formats                                     | Data                                | Actions                                        | Editor                                       | HTML\n * |---------------------------------------------|-------------------------------------|------------------------------------------------|----------------------------------------------|----------------------------------------\n * |---------------------|---------------------|---------------------|---------------------|---------------------\n * | [uri]{@link CosmicLink#uri}                 |[page]{@link CosmicLink#page}        |[open]{@link CosmicLink#open}                   |[parse]{@link CosmicLink#parse}               |[htmlDescription]{@link CosmicLink#htmlDescription}\n * | [query]{@link CosmicLink#query}             |[network]{@link CosmicLink#network}  |[lock]{@link CosmicLink#lock} async             |[setTxFields]{@link CosmicLink#setTxFields}   |[htmlLink]{@link CosmicLink#htmlLink}\n * | [tdesc]{@link CosmicLink#tdesc}             |[horizon]{@link CosmicLink#horizon}  |[sign]{@link CosmicLink#sign}                   |[addOperation]{@link CosmicLink#addOperation} |\n * | [json]{@link CosmicLink#json}               |[callback]{@link CosmicLink#callback}|[send]{@link CosmicLink#send} async             |[setOperation]{@link CosmicLink#setOperation}\n * | [transaction]{@link CosmicLink#transaction} |[source]{@link CosmicLink#source}    |[signSep7]{@link CosmicLink#signSep7}           |[insertOperation]{@link CosmicLink#insertOperation}\n * | [xdr]{@link CosmicLink#xdr}                 |[status]{@link CosmicLink#status}    |[verifySep7]{@link CosmicLink#verifySep7} async\n * | [sep7]{@link CosmicLink#sep7}               |[errors]{@link CosmicLink#errors}    |\n * |                                             |[locker]{@link CosmicLink#locker}\n * |                                             |[cache]{@link CosmicLink#cache}\n * |                                             |[extra]{@link CosmicLink#extra}\n * -----\n *\n * The **CosmicLink** class represents Stellar\n * [transactions]{@link https://stellar.org/developers/guides/concepts/transactions.html}\n * encoded in various formats. It allows to convert between those formats, to\n * edit the underlying transaction, to build it, to sign it and to send it to\n * the blockchain.\n *\n * There are 3 main formats from which the other are derived:\n *\n * * The StellarSdk [Transaction]{@link {@link https://stellar.github.io/js-stellar-sdk/Transaction.html}} object. (**transaction**)\n * * The CosmicLink, which is a transaction encoded as a query. (**query**)\n * * The Tdesc, which is an internal JSON-compatible format in-between those two.\n *   It is the easier format to work with. (**tdesc**)\n *\n * Those formats can be derived into other related formats:\n *\n * * The XDR, which's a base64 representation of StellarSdk Transaction. (**xdr**)\n * * The Sep-0007 link, in its XDR form. (**sep7**)\n * * The CosmicLink URL/URI, which is a page plus the query. (**uri**)\n * * The Tdesc JSON, which is its stringified version. (**json**)\n *\n * A CosmicLink object can be created from any of those formats. Some of the\n * other formats are immediately available, while others may need an\n * `await cosmicLink.lock()` operation to become computable:\n *\n * * If you create a CosmicLink from an **uri**, a **query**, a **tdesc** or a\n *   **json**, only those 4 formats are available at first. Transaction, xdr &\n *   sep7 will become available after a `cosmicLink.lock()`. (**free formats**)\n * * If you create a CosmicLink from a **transaction**, an **xdr** or a **sep7**,\n *   all formats will immediately be available. (**locked formats**)\n *\n * For a better efficiency, formats are lazy-evaluated. This means that they are\n * computed once only if/when you call them:\n *\n * ```js\n * const cosmicLink = new CosmicLink(xdr, { network: 'test' })\n * console.log(cosmicLink.query)\n * ```\n *\n * The role of `cosmicLink.lock()` is centric to this class. In practice, the\n * free formats don't have to be tied to a **network**, a **source** or a\n * **sequence number**. For example, the CosmicQuery `?inflation` is a valid\n * generic transaction that can be locked to any network/source/sequence\n * combination.\n *\n * On the other hand, locked formats are always tied to a particular combination\n * of those, hence the need for a **lock** command:\n *\n * ```js\n * const cosmicLib = require('cosmic-lib')\n * cosmicLib.network = 'test'\n * cosmicLib.source = 'tips*cosmic.link'\n *\n * const cosmicLink = new cosmicLib.CosmicLink('?inflation')\n *\n * console.log(cosmicLink.tdesc.source)    // => undefined\n * console.log(cosmicLink.tdesc.network)   // => undefined\n * console.log(cosmicLink.tdesc.sequence)  // => undefined\n * console.log(cosmicLink.xdr)             // => undefined\n *\n * await cosmicLink.lock({)\n *\n * console.log(cosmicLink.tdesc.source)    // => 'GC6Z...2JVW'\n * console.log(cosmicLink.tdesc.network)   // => 'test'\n * console.log(cosmicLink.tdesc.sequence)  // => 29...3903\n * console.log(cosmicLink.xdr)             // => 'AAAA....AA=='\n * ```\n *\n * The **lock** command is asynchronous because free formats accept\n * [federated addresses]{@link https://stellar.org/developers/guides/concepts/federation.html},\n * but locked formats don't. The library automatically resolve\n * those and this is an asynchronous operation. At the same time, it downloads\n * the required data from the blockchain to handle multi-signers transactions.\n *\n * After the lock operation, all free formats are updated according to the new\n * state of the transaction. It is now possible to `cosmicLink.sign(keypair)`\n * it, and to `cosmicLink.send()` it to the blockchain.\n */\n\n\nvar CosmicLink =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a new CosmicLink object. **transaction** can be one of the accepted\n   * format: uri, query, json, tdesc, transaction, xdr or sep7.\n   *\n   * @constructor\n   * @param {string|Object|Transaction} transaction A transaction in one of\n   *  thoses formats: uri, query, json, tdesc, transaction, xdr, sep7\n   * @param {Object} options Additional options\n   * @param {string} options.page The base URI to use when converting transaction\n   *     to URI format.\n   * @param {string} options.network For Transaction/XDR formats, the network for\n   *     which it have been created\n   * @param {string} options.strip Remove an element from the original\n   *     XDR transaction. Valid values are `source`, `sequence` and\n   *     `signatures`. Stripping out sequence means that the transaction request\n   *     can get signed anytime in the future, possibly several times.\n   *     Stripping out source means that it can get signed by any account.\n   * @param {boolean} options.stripNeutralAccount If set, strip source account\n   *     out of SEP-0007/XDR requests when it is equal to the neutral account\n   *     (`GAAA...AWHF`).\n   * @param {boolean} options.stripNeutralSequence If set, strip sequence out\n   *     of SEP-0007/XDR requests when it is equal to `0`.\n   * @return {CosmicLink}\n   */\n  function CosmicLink(transaction, options) {\n    _classCallCheck(this, CosmicLink);\n\n    initCosmicLink(this, transaction, options);\n  }\n  /**\n   * Refer to the underlying global configuration\n   * @private\n   */\n\n\n  _createClass(CosmicLink, [{\n    key: \"parse\",\n\n    /**\n     * Re-parse this CosmicLink. Useful in implementing transaction editors. The\n     * parameters are the same than [Constructor]{@link CosmicLink#Constructor},\n     * and the result is similar except that no new CosmicLink object is created.\n     */\n    value: function parse(transaction, options) {\n      initCosmicLink(this, transaction, options);\n    } /// Formats\n\n    /**\n     * A CosmicLink is a URI that embed a Cosmic [Query]{@link CosmicLink#query}.\n     * This format is simply the `cosmicLink.query` appended to the\n     * `cosmicLink.page`\n     */\n\n  }, {\n    key: \"setTxFields\",\n    /// Editor\n\n    /**\n     * Add/remove transaction fields and reparse the CosmicLink. **object** should\n     * follow the Tdesc format, but fields values can be written using query or\n     * StellarSdk format as well.\n     *\n     * @example\n     * cosmicLink.setTxFields({ minTime: '2018-10', maxTime: '2019-01' })\n     *\n     * @example\n     * cosmicLink.setTxFields({ minTime: null, maxTime: null })\n     *\n     * @example\n     * cosmicLink.setTxFields({ memo: 'Bonjour!' })\n     *\n     * @param {Object} object Transaction fields definition. Fields can be either\n     *   written using the JSON format or the query format\n     * @return {CosmicLink}\n     */\n    value: function setTxFields(object) {\n      checkLock(this);\n      this.parse(Object.assign(this.tdesc, object));\n      return this;\n    }\n    /**\n     * Add a new operation to CosmicLink. **params** should follow the Tdesc format,\n     * but fields values can be written using query or StellarSdk format as well.\n     *\n     * @example\n     * cosmicLink.addOperation('changeTrust', { asset: 'CNY:admin*ripplefox' })\n     *\n     * @example\n     * cosmicLink.addOperation('changeTrust', { asset: { code: 'CNY', issuer: 'admin*ripplefox } })\n     *\n     * @example\n     * cosmicLink.addOperation('changeTrust', { asset: new StellarSdk.Asset('CNY', ...) })\n     *\n     * @param {string} type The operation type.\n     * @param {Object} params The operation parameters.\n     * @return {CosmicLink}\n     */\n\n  }, {\n    key: \"addOperation\",\n    value: function addOperation(type, params) {\n      checkLock(this);\n      var odesc = Object.assign({\n        type: type\n      }, params);\n      this.tdesc.operations.push(odesc);\n      this.parse(this.tdesc);\n      return this;\n    }\n    /**\n     * Insert an operation at **index**. **params** should follow the\n     * Tdesc format, but fields can be written using query or StellarSdk format\n     * as well.\n     *\n     * @example\n     * cosmicLink.insertOperation(0, 'changeTrust', {\n     *   asset: 'CNY:admin*ripplefox'\n     * })\n     *\n     * @param {integer} index The operation index.\n     * @param {string} type  The operation type.\n     * @param {params} params The operation parameters.\n     * @return {CosmicLink}\n     */\n\n  }, {\n    key: \"insertOperation\",\n    value: function insertOperation(index, type, params) {\n      checkLock(this);\n\n      if (index > !this.tdesc.operations.length) {\n        throw new Error(\"Can't insert opereration at position \".concat(index, \": there are only \").concat(this.tdesc.operations.length, \" operations\"));\n      }\n\n      var odesc = Object.assign({\n        type: type\n      }, params);\n      this.tdesc.operations.splice(index, 0, odesc);\n      this.parse(this.tdesc);\n      return this;\n    }\n    /**\n     * Set/remove one of the CosmicLink operations. **params** should follow the\n     * Tdesc format, but fields can be written using query or StellarSdk format\n     * as well. If **type** is set to `null`, the operation at **index**\n     * is deleted.\n     *\n     * @example\n     * cosmicLink.setOperation(1, 'setOptions', { homeDomain: 'example.org' })\n     *\n     * @example\n     * cosmicLink.setOperation(2, null)\n     *\n     * @param {integer} index The operation index.\n     * @param {string} type  The operation type.\n     * @param {params} params The operation parameters.\n     * @return {CosmicLink}\n     */\n\n  }, {\n    key: \"setOperation\",\n    value: function setOperation(index, type, params) {\n      checkLock(this);\n\n      if (!this.tdesc.operations[index]) {\n        throw new Error(\"Operation \".concat(index, \" doesn't exists\"));\n      }\n\n      if (type === null) {\n        this.tdesc.operations.splice(index, 1);\n      } else {\n        this.tdesc.operations[index] = Object.assign({\n          type: type\n        }, params);\n        this.parse(this.tdesc);\n      }\n\n      return this;\n    } /// Actions\n\n    /**\n     * Select the network that this CosmicLink uses.\n     *\n     * @deprecated StellarSdk global `Network` setting is deprecated.\n     */\n\n  }, {\n    key: \"selectNetwork\",\n    value: function selectNetwork() {\n      return resolve.useNetwork(this);\n    }\n  }, {\n    key: \"lock\",\n    value: function lock(options) {\n      return action.lock(this, options);\n    }\n  }, {\n    key: \"sign\",\n    value: function sign() {\n      for (var _len = arguments.length, keypairs_or_preimage = new Array(_len), _key = 0; _key < _len; _key++) {\n        keypairs_or_preimage[_key] = arguments[_key];\n      }\n\n      return action.sign.apply(action, [this].concat(keypairs_or_preimage));\n    }\n  }, {\n    key: \"send\",\n    value: function send(horizon) {\n      return action.send(this, horizon);\n    }\n    /**\n     * The HTML DOM node that displays a description of the current transaction.\n     * This is a browser-only property.\n     *\n     * If your HTML page contains an element with `id=\"cosmiclink_description\"`,\n     * it will automatically get populated with the description of the last\n     * CosmicLink created.\n     */\n\n  }, {\n    key: \"open\",\n\n    /**\n     * Open CosmicLink in **target**.\n     *\n     * - `frame` (default): Open cosmicLink in a side-frame.\n     * - `tab`: Open cosmicLink in a new tab.\n     * - `current`: Open cosmicLink into the current window.\n     * - `sep7`: Open cosmicLink using user's SEP-0007 handler.\n     *\n     * @param {String} [target=\"frame\"] Open `cosmicLink` into the requested\n     *    target. Valid targets are: `frame`, `tab`, `current` and `sep7`.\n     */\n    value: function open() {\n      var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"frame\";\n\n      if (env.isNode) {\n        console.error(\"Warning: cosmicLink.open() is not supported in Node.js environment.\");\n        return;\n      }\n\n      if (this.status) throw new Error(this.status);\n\n      switch (target) {\n        case \"frame\":\n          return new SideFrame(this.uri);\n\n        case \"tab\":\n          window.open(this.uri);\n          break;\n\n        case \"current\":\n          location.href = this.uri;\n          break;\n\n        case \"sep7\":\n          if (!this.sep7) {\n            throw new Error(\"Please use cosmicLink.lock() to build SEP-0007 link.\");\n          } else {\n            location.href = this.sep7;\n          }\n\n          break;\n\n        default:\n          throw new Error(\"Invalid cosmicLink.open() target: \".concat(target));\n      }\n    }\n    /**\n     * Sign SEP-0007 link for **domain**, using **keypair**.\n     *\n     * @see [SEP-0007 request signing](https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0007.md#request-signing)\n     *\n     * @param {String} domain The domain or subdomain you want to sign the request\n     * for. (example: \"a-domain.org\")\n     * @param {Keypair} keypair A StellarSdk Keypair.\n     */\n\n  }, {\n    key: \"signSep7\",\n    value: function signSep7(domain, keypair) {\n      if (!this.locker) throw new Error(\"cosmicLink is not locked.\");\n      sep7Utils.signLink(this, domain, keypair);\n    }\n    /**\n     * Verify SEP-0007 signature by resolving [`cosmicLink.extra.domain`]{@link\n     * CosmicLink#extra}, if any.\n     * Throw an error if the signature is not valid.\n     *\n     * @return {undefined|String} The resolved `cosmicLink.extra.domain`, if any.\n     */\n\n  }, {\n    key: \"verifySep7\",\n    value: function verifySep7() {\n      var domain;\n      return _regeneratorRuntime.async(function verifySep7$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(this.extra.originDomain instanceof Promise)) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(this.extra.originDomain);\n\n            case 3:\n              domain = _context.sent;\n              this.extra.originDomain = domain;\n              _context.next = 8;\n              break;\n\n            case 7:\n              if (this.extra.originDomain) {\n                sep7Utils.verifySignature(this, this.extra.originDomain);\n              }\n\n            case 8:\n              return _context.abrupt(\"return\", this.extra.originDomain);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"config\",\n    get: function get() {\n      return this.__proto__.__proto__;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      if (this.query) return this.page + this.query;else return undefined;\n    }\n    /**\n     * CosmicLink's transaction encoded in the Cosmic\n     * [Query]{@link tutorial:specs_query} format. This format allows to\n     * conveniently pass around Stellar transactions over any URI.\n     */\n\n  }, {\n    key: \"query\",\n    get: function get() {\n      if (!this._query) {\n        if (this.xdr) this._query = convert.xdrToQuery(this, this.xdr, this.tdesc);else if (this.tdesc) this._query = convert.tdescToQuery(this, this.tdesc);else return undefined;\n      }\n\n      return this._query;\n    }\n    /**\n     * CosmicLink's transaction in Tdesc format. This is in-between an objectified\n     * query representation and a simplified StellarSdk Transaction object. It has\n     * been created to be convenient to understand, use and manipulate.\n     *\n     * If you need to read the transaction parameters, this is the format of\n     * choice:\n     *\n     * ```js\n     * console.log(cosmicLink.tdesc.network) // Does the transaction enforce a network?\n     * console.log(cosmicLink.tdesc.source)  // Does the transaction enforce a source?\n     * console.log(cosmicLink.tdesc.memo)    // A simplified memo object or undefined\n     * console.log(cosmicLink.operations)    // Transaction operations in simplified format\n     * ```\n     *\n     * This formats authorize [federated addresses]{@link https://stellar.org/developers/guides/concepts/federation.html}\n     * everywhere StellarSdk Transaction accept public keys. Those addresses are\n     * resolved when running the [lock]{@link CosmicLink#lock} method, and the\n     * tdesc is replaced by a resolved one.\n     *\n     * Tdesc is also very convenient to edit. To keep the CosmicLink in sync, you\n     * either need to [parse]{@link CosmicLink#parse} the edited tdesc, or to edit\n     * it using the dedicated methods:\n     *\n     * * [setTxFields]{@link CosmicLink#setTxFields}: set/clear transaction fields\n     * * [addOperation]{@link CosmicLink#addOperation}: add a new operation\n     * * [setOperation]{@link CosmicLink#setOperation}: edit/clear an operation\n     */\n\n  }, {\n    key: \"tdesc\",\n    get: function get() {\n      if (!this._tdesc) {\n        if (this.transaction) this._tdesc = convert.transactionToTdesc(this, this.transaction, this.locker);else return undefined;\n      }\n\n      return this._tdesc;\n    }\n    /**\n     * CosmicLink's transaction in JSON format. This is a stringified version of\n     * [Tdesc]{@link CosmicLink#tdesc} format.\n     */\n\n  }, {\n    key: \"json\",\n    get: function get() {\n      if (!this._json) this._json = convert.tdescToJson(this, this.tdesc);\n      return this._json;\n    }\n    /**\n     * CosmicLink's transaction in StellarSdk\n     * [Transaction]{@link https://stellar.github.io/js-stellar-sdk/Transaction.html}\n     * format.\n     *\n     * If you created the CosmicLink from uri, query, tdesc or json format, a\n     * [lock()]{@link CosmicLink#lock} operation is needed to make this format\n     * available.\n     */\n\n  }, {\n    key: \"transaction\",\n    get: function get() {\n      return this._transaction;\n    }\n    /**\n     * CosmicLink's transaction in\n     * [XDR]{@link https://stellar.org/developers/guides/concepts/xdr.html}\n     * format.\n     *\n     * If you created the CosmicLink from uri, query, tdesc or json format, a\n     * [lock()]{@link CosmicLink#lock} operation is needed to make this format\n     * available.\n     */\n\n  }, {\n    key: \"xdr\",\n    get: function get() {\n      if (!this._xdr) {\n        if (!this.transaction) return undefined;\n        this._xdr = convert.transactionToXdr(this, this.transaction);\n      }\n\n      return this._xdr;\n    }\n    /**\n     * CosmicLink transaction in\n     * [SEP-0007]{@link https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0007.md}\n     * link format. Only the XDR part of this protocol is currently supported by\n     * CosmicLink, minus the signature verification.\n     *\n     * If you created the CosmicLink from uri, query, tdesc or json format, a\n     * [lock()]{@link CosmicLink#lock} operation is needed to make this format\n     * available.\n     */\n\n  }, {\n    key: \"sep7\",\n    get: function get() {\n      if (!this._sep7) {\n        if (!this.xdr) return undefined;\n        this._sep7 = convert.xdrToSep7(this, this.xdr, this.tdesc);\n      }\n\n      return this._sep7;\n    } /// Data\n\n    /**\n     * The page this CosmicLink uses to construct its [URI]{@link CosmicLink#uri}.\n     *\n     * @var CosmicLink#page\n     */\n\n    /**\n     * The source for this transaction. This can be defined either locally\n     * (`cosmicLink.tdesc.source`) or globally (`cosmicLib.config.source`). The\n     * local configuration takes precedence, or, in other words, the global source\n     * is a fallback value in case the transaction emitter doesn't set one.\n     *\n     * **Note:** cosmicLink.tdesc should be edited using [setTxFields]{@link\n     * CosmicLink#setTxFields}.\n     */\n\n  }, {\n    key: \"source\",\n    get: function get() {\n      return this.tdesc && this.tdesc.source || this.config.source;\n    }\n    /**\n     * The network for this transaction. This can be defined either locally\n     * (`cosmicLink.tdesc.network`) or globally (`cosmicLib.config.network`). The\n     * local configuration takes precedence, or, in other words, the global\n     * network is a fallback value in case the transaction emitter doesn't set\n     * one.\n     *\n     * **Note:** cosmicLink.tdesc should be edited using [setTxFields]{@link\n     * CosmicLink#setTxFields}.\n     */\n\n  }, {\n    key: \"network\",\n    get: function get() {\n      return this.tdesc && this.tdesc.network || this.config.network;\n    }\n    /**\n     * The URL of the horizon node from which ledger data will be retrieved, and\n     * to which the signed transaction will be posted if there's no\n     * [callback]{@link CosmicLink#callback}.\n     *\n     * This can be defined either locally (`cosmicLink.tdesc.horizon`) or globally\n     * (using [setupNetwork]{@link module:config.setupNetwork}). This parameter is\n     * special in the sense that it's the only one for which the global\n     * configuration takes precedence.\n     *\n     * The rationale for this behavior is that we want transaction emitter to\n     * provide a fallback Horizon URL in the special case none is known for a\n     * custom network, but generally speaking it won't be right to allow the\n     * transaction emitter to force us to use a particular Horizon node.\n     *\n     * **Note:** cosmicLink.tdesc should be edited using [setTxFields]{@link\n     * CosmicLink#setTxFields}.\n     */\n\n  }, {\n    key: \"horizon\",\n    get: function get() {\n      return resolve.horizon(this.config, this.network) || this.tdesc && this.tdesc.horizon;\n    }\n    /**\n     * The URL at which the signed transaction will be posted. This can be defined\n     * either locally (`cosmicLink.tdesc.callback`) or globally\n     * (`cosmicLib.config.callback`). The local configuration takes precedence.\n     *\n     * When no callback is defined, the signed transaction is posted to\n     * [Horizon]{@link CosmicLink#horizon}. This is the default behavior.\n     *\n     * **Note:** cosmicLink.tdesc should be edited using [setTxFields]{@link\n     * CosmicLink#setTxFields}.\n     */\n\n  }, {\n    key: \"callback\",\n    get: function get() {\n      return this.tdesc && this.tdesc.callback || this.config.callback;\n    }\n  }, {\n    key: \"htmlDescription\",\n    get: function get() {\n      if (!this._htmlDescription) makeHtmlDescription(this);\n      return this._htmlDescription;\n    }\n    /**\n     * A link HTML Element that points to `cosmicLink.uri`\n     */\n\n  }, {\n    key: \"htmlLink\",\n    get: function get() {\n      if (!this._htmlLink) makeHtmlLink(this);\n      return this._htmlLink;\n    }\n  }]);\n\n  return CosmicLink;\n}();\n/**\n * Initialize or reset a CosmicLink.\n *\n * @private\n */\n\n\nfunction initCosmicLink(cosmicLink, transaction) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  checkLock(cosmicLink); /// Reset object in case of reparse.\n\n  formatsFields.forEach(function (type) {\n    return delete cosmicLink[type];\n  });\n  cosmicLink.page = cosmicLink.page || options.page || config.page;\n  /**\n   * The status of a CosmicLink. It becomes non-null in case of failure.\n   * @var CosmicLink#status\n   */\n\n  /**\n   * By default `false`, or an *Array* of errors.\n   * @var CosmicLink#errors\n   */\n\n  status.init(cosmicLink);\n  /**\n   * The CosmicLink cache contains the resolved federations addresses and the\n   * accounts object. Using the same set of data for all the CosmicLink related\n   * computations ensure consistent results.\n   *\n   * @var CosmicLink#cache\n   */\n\n  cosmicLink.cache = {\n    destination: {},\n    account: {}\n  };\n  /**\n   * After parsing a SEP-0007 link, `cosmicLink.extra` contains SEP-0007\n   * specific information:\n   *\n   * - `cosmicLink.extra.type` indicates the operation encoded into the SEP-0007\n   *   link (either `tx` or `pay`).\n   * - `cosmicLink.extra.originDomain` is a _Promise_ that resolves to the\n   *   origin_domain parameter when the link signature is valid. It rejects an\n   *   error when the signature check fails. This property is `undefined` when\n   *   the link has no origin_domain.\n   * - `cosmicLink.extra.signature` contains the link signature, if any.\n   * - `cosmicLink.extra.pubkey` contains the tx operation `pubkey`, if any.\n   * - `cosmicLink.extra.msg` contains the parsed `msg`, if any. This is\n   *   provided for compatibility purpose only. Displaying messages from\n   *   untrusted sources into trusted interfaces opens hard to mitigate attack\n   *   vectors & is discouraged.\n   *\n   * @var CosmicLink#extra\n   */\n\n  cosmicLink.extra = {};\n  parse.dispatch(cosmicLink, transaction, options);\n\n  if (env.isBrowser) {\n    makeHtmlLink(cosmicLink);\n\n    if (!cosmicLink._htmlDescription) {\n      /// #cosmiclib_htmlNode: Backward compatibility (2018-09 -> 2019-03).\n      cosmicLink._htmlDescription = html.grab(\"#cosmiclink_description\") || html.grab(\"#CL_htmlNode\");\n    }\n\n    if (cosmicLink._htmlDescription) {\n      if (cosmicLink.htmlDescription.id === \"#CL_htmlNode\") {\n        misc.deprecated(\"2019-03\", \"id=\\\"#CL_htmlNode\\\"\", \"id=\\\"cosmiclink_description\\\"\");\n      }\n\n      makeHtmlDescription(cosmicLink);\n    }\n  }\n}\n\nvar formatsFields = [\"_query\", \"_tdesc\", \"_json\", \"_transaction\", \"_xdr\"];\n/**\n * Initialize CosmicLink html nodes.\n *\n * @private\n */\n\nfunction makeHtmlDescription(cosmicLink) {\n  if (env.isNode) return;\n  var htmlDescription = cosmicLink._htmlDescription;\n\n  if (htmlDescription) {\n    html.clear(htmlDescription);\n    htmlDescription.className = \"cosmiclink_description\";\n  } else {\n    htmlDescription = html.create(\"div\", \".cosmiclink_description\");\n    cosmicLink._htmlDescription = htmlDescription;\n  }\n\n  cosmicLink._transactionNode = format.tdesc(cosmicLink, cosmicLink.tdesc);\n  cosmicLink._statusNode = status.makeHtmlNode(cosmicLink);\n  cosmicLink._signersNode = html.create(\"div\", \".cosmiclib_signersNode\");\n  html.append(htmlDescription, cosmicLink._transactionNode, cosmicLink._statusNode, cosmicLink._signersNode);\n}\n/**\n * Make the HTML link.\n * @private\n */\n\n\nfunction makeHtmlLink(cosmicLink) {\n  if (env.isNode) return;\n  var htmlLink = html.grab(\"#cosmiclink\") || html.create(\"a\");\n  htmlLink.className = \".cosmiclink\";\n  htmlLink.href = cosmicLink.page;\n\n  htmlLink.onclick = function () {\n    return htmlLink.href = cosmicLink.uri;\n  };\n\n  if (!htmlLink.title) htmlLink.title = \"Sign transaction\";\n  if (!htmlLink.textContent) htmlLink.textContent = \"CosmicLink\";\n  cosmicLink._htmlLink = htmlLink;\n  return htmlLink;\n}\n/**\n * Throw an error if CosmicLink is locked.\n * @private\n */\n\n\nfunction checkLock(cosmicLink) {\n  if (cosmicLink.locker) throw new Error(\"Cosmic link is locked.\");\n}\n\nCosmicLink.prototype.__proto__ = config;\nmodule.exports = CosmicLink;","\"use strict\";\n/**\n * Signing Side Frame\n *\n * @private\n */\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar html = require(\"@cosmic-plus/domutils/es5/html\");\n\nvar Observable = require(\"@cosmic-plus/jsutils/es5/observable\");\n\nvar _require = require(\"@cosmic-plus/jsutils/es5/misc\"),\n    timeout = _require.timeout;\n\nvar ClickWall = require(\"./click-wall\");\n\nvar cosmicLinkIcon = require(\"../../bundled/cosmic-link.svg\");\n/**\n * Class\n */\n\n\nvar SideFrame =\n/*#__PURE__*/\nfunction (_Observable) {\n  _inherits(SideFrame, _Observable);\n\n  function SideFrame(url) {\n    var _this;\n\n    _classCallCheck(this, SideFrame);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SideFrame).call(this));\n    if (SideFrame.current) SideFrame.current.close();\n    SideFrame.current = _assertThisInitialized(_this);\n    _this.shadow = makeShadow();\n    _this.closeButton = new SideFrame.CloseButton();\n    _this.domNode = html.create(\"iframe\", {\n      title: \"Signing Frame\",\n      src: url,\n      sandbox: \"allow-same-origin allow-scripts allow-forms allow-popups\",\n      hidden: true\n    });\n    Object.assign(_this.domNode.style, SideFrame.style);\n    _this.domNode.style.transform = \"translateX(100%)\";\n    html.append(document.body, _this.closeButton, _this.domNode);\n    _this.closeButton.domNode.style.zIndex = +_this.getRealZIndex() + 1;\n\n    _this.show();\n\n    return _this;\n  }\n\n  _createClass(SideFrame, [{\n    key: \"show\",\n    value: function show() {\n      var _this2 = this;\n\n      if (!this.domNode.hidden) return;\n      html.show(this.domNode); // That timeout is required for transition to play well.\n\n      this.setTransition(250, \"cubic-bezier(0, 0, 0.2, 1)\");\n      timeout(5).then(function () {\n        return _this2.domNode.style.transform = \"none\";\n      });\n      return this.shadow.enable().then(function () {\n        _this2.shadow.onclick = function () {\n          return _this2.close();\n        };\n\n        html.show(_this2.closeButton.domNode);\n\n        _this2.closeButton.domNode.onclick = function () {\n          return _this2.close();\n        };\n\n        _this2.trigger(\"show\");\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this3 = this;\n\n      if (this.domNode.hidden) return;\n      html.hide(this.closeButton.domNode);\n      this.setTransition(200, \"cubic-bezier(0.4, 0, 1, 1)\");\n      this.domNode.style.transform = \"translateX(100%)\";\n      return this.shadow.disable().then(function () {\n        html.hide(_this3.domNode);\n\n        _this3.trigger(\"hide\");\n      });\n    }\n  }, {\n    key: \"setTransition\",\n    value: function setTransition(delay, ease) {\n      var transition = \"transform \".concat(delay, \"ms \").concat(ease);\n      this.domNode.style.transition = transition;\n      this.shadow.domNode.style.transition = transition;\n      this.shadow.delay = delay;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this4 = this;\n\n      SideFrame.current = null;\n      this.hide().then(function () {\n        html.destroy(_this4.domNode);\n        html.destroy(_this4.closeButton.domNode);\n\n        _this4.shadow.destroy();\n\n        _this4.trigger(\"close\");\n\n        _this4.destroy();\n      });\n    }\n  }, {\n    key: \"getRealZIndex\",\n    value: function getRealZIndex() {\n      return document.defaultView.getComputedStyle(this.domNode).getPropertyValue(\"z-index\");\n    }\n  }]);\n\n  return SideFrame;\n}(Observable);\n/**\n * Event\n */\n\n\nwindow.addEventListener(\"message\", function (event) {\n  var frameWindow = SideFrame.current && SideFrame.current.domNode.contentWindow;\n\n  if (event.source === frameWindow) {\n    switch (event.data) {\n      case \"show\":\n        SideFrame.current.show();\n        break;\n\n      case \"hide\":\n        SideFrame.current.hide();\n        break;\n\n      case \"close\":\n        SideFrame.current.close();\n        break;\n    }\n  }\n});\n/**\n * Frame style\n */\n\nSideFrame.style = {\n  boxSizing: \"border-box\",\n  position: \"fixed\",\n  zIndex: 1000,\n  right: 0,\n  top: 0,\n  width: \"30em\",\n  minWidth: \"38%\",\n  maxWidth: \"100%\",\n  height: \"100vh\",\n  border: 0,\n  borderTop: \"2em solid hsl(240, 40%, 98%)\",\n  boxShadow: \"0px 7px 10px 1px rgba(0, 0, 0, 0.14), 0px 2px 16px 1px rgba(0, 0, 0, 0.12)\",\n  background: \"hsl(240, 40%, 98%)\",\n  backgroundImage: \"url('\".concat(cosmicLinkIcon, \"')\"),\n  backgroundRepeat: \"no-repeat\",\n  backgroundPosition: \"center\",\n  backgroundSize: \"12em 12em\",\n  willChange: \"transform\"\n};\n/**\n * Closing button\n */\n\nSideFrame.CloseButton = function CloseButton() {\n  _classCallCheck(this, CloseButton);\n\n  this.domNode = html.create(\"span\", {\n    hidden: true\n  }, \" Close\");\n  Object.assign(this.domNode.style, SideFrame.CloseButton.style);\n};\n\nSideFrame.CloseButton.style = {\n  position: \"fixed\",\n  top: \"0.1em\",\n  right: \"0.1em\",\n  width: \"29.8em\",\n  minWidth: \"38%\",\n  maxWidth: \"100%\",\n  lineHeight: \"1.8em\",\n  color: \"hsl(0, 0%, 40%)\",\n  fontWeight: \"bold\",\n  cursor: \"pointer\",\n  textAlign: \"center\"\n};\n/**\n * Shadow Layer\n */\n\nfunction makeShadow() {\n  return new ClickWall({\n    scrollbar: \"hide\",\n    opacity: 0.3,\n    delay: 400\n  });\n}\n/**\n * Export\n */\n\n\nmodule.exports = SideFrame;","\"use strict\";\n/**\n * Overlay that prevent user interaction\n *\n * @private\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar html = require(\"@cosmic-plus/domutils/es5/html\");\n\nvar _require = require(\"@cosmic-plus/jsutils/es5/misc\"),\n    timeout = _require.timeout;\n/**\n * Definition\n */\n\n\nvar ClickWall =\n/*#__PURE__*/\nfunction () {\n  function ClickWall() {\n    var _this = this;\n\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ClickWall);\n\n    this.domNode = html.create(\"div\", {\n      className: \"ClickWall\",\n      onclick: function onclick() {\n        return _this.click();\n      },\n      hidden: true\n    });\n    Object.assign(this.domNode.style, ClickWall.style);\n    html.append(document.body, this.domNode);\n    this.onclick = params.onclick;\n    this.scrollbar = params.scrollbar;\n    this.opacity = params.opacity;\n    this.delay = params.delay || ClickWall.delay;\n  }\n\n  _createClass(ClickWall, [{\n    key: \"click\",\n    value: function click() {\n      if (this.isEnabled && this.onclick) this.onclick();\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      return _regeneratorRuntime.async(function enable$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // Scrollbar hidding.\n              if (this.scrollbar === \"hide\") {\n                this.htmlOverflow = document.documentElement.style.overflow;\n                this.bodyOverflow = document.body.style.overflow;\n                document.documentElement.style.overflow = \"hidden\";\n                document.body.style.overflow = \"hidden\";\n              } // Fade in.\n\n\n              html.show(this.domNode);\n\n              if (!this.opacity) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(this.setOpacity(this.opacity));\n\n            case 5:\n              this.isEnabled = true;\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      return _regeneratorRuntime.async(function disable$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              // Handle scrollbar hidding.\n              if (this.scrollbar === \"hide\") {\n                document.documentElement.style.overflow = this.htmlOverflow;\n                document.body.style.overflow = this.bodyOverflow;\n              } // Fade out.\n\n\n              this.isEnabled = false;\n\n              if (!this.opacity) {\n                _context2.next = 5;\n                break;\n              }\n\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(this.setOpacity(0));\n\n            case 5:\n              html.hide(this.domNode);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      return _regeneratorRuntime.async(function destroy$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(this.disable());\n\n            case 2:\n              html.destroy(this.domNode);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"setOpacity\",\n    value: function setOpacity() {\n      var opacity,\n          _args4 = arguments;\n      return _regeneratorRuntime.async(function setOpacity$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              opacity = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : this.opacity;\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(timeout(0));\n\n            case 3:\n              Object.assign(this.domNode.style, {\n                transition: \"opacity \".concat(this.delay, \"ms\"),\n                opacity: opacity\n              });\n              return _context4.abrupt(\"return\", timeout(this.delay));\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this);\n    }\n  }]);\n\n  return ClickWall;\n}();\n/**\n * Configuration\n */\n\n\nClickWall.delay = 500;\nClickWall.style = {\n  position: \"fixed\",\n  zIndex: 999,\n  top: 0,\n  left: 0,\n  width: \"100%\",\n  height: \"100%\",\n  background: \"#000\",\n  opacity: 0,\n  willChange: \"opacity\"\n};\n/**\n * Export\n */\n\nmodule.exports = ClickWall;","module.exports=`data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\"%3E%3Cpath fill=\"%23c1c1c1\" d=\"M179.24078 179.33326l-139.467135 139.472c-42.36486 42.364-42.36486 111.057 0 153.421 42.364861 42.365 111.057145 42.365 153.421735 0l138.729-138.733c-25.99806 25.453-61.62709 35.207-95.00214 29.258l-76.60113 76.601c-24.2097 24.21-63.463495 24.21-87.673478 0-24.209708-24.21-24.209708-63.463 0-87.673l76.605518-76.606 63.49455-63.49c24.25805-23.586 63.04182-23.375 87.04055.624 24.17894 24.179 24.20971 63.362.0967 87.585l62.86162-62.866c-3.75663-21.094-13.78318-41.292-30.08405-57.593-16.29648-16.297-36.49024-26.323-57.58476-30.084-34.92606-6.226-70.73529 4.982-95.83698 30.084z\"/%3E%3Cpath fill=\"%239f9f9f\" d=\"M332.75922 332.66726l139.46713-139.472c42.36487-42.364 42.36487-111.057004 0-153.421004-42.36485-42.3660001-111.05714-42.3660001-153.42174 0L180.07562 178.50726c25.99805-25.453 61.62708-35.207 95.00214-29.258l76.60112-76.601004c24.2097-24.21 63.4635-24.21 87.67348 0 24.20972 24.209 24.20972 63.463004 0 87.673004l-76.60551 76.606-63.49456 63.49c-24.25805 23.586-63.04182 23.375-87.04054-.624-24.17895-24.179-24.20972-63.363-.0967-87.585l-62.86163 62.866c3.75663 21.094 13.78319 41.292 30.08406 57.593 16.29648 16.297 36.49023 26.323 57.58476 30.084 34.92606 6.226 70.73529-4.982 95.83698-30.084z\"/%3E%3Cpath fill=\"%23a6a6a6\" d=\"M356.90299 216.24526l-38.96398 38.964c.21537 15.871-5.62848 31.807-17.5269 44.048l62.33446-62.33c-1.25211-7.03-3.1987-13.959-5.84358-20.682zm-24.97861 117.248c-22.2722 21.797-52.72519 32.826-83.47734 30.682-3.84013-.268-7.68906-.738-11.5248-1.424l-13.98536 13.986c10.03974 2.622 20.58027 4.02 31.44193 4.02 12.3069 0 24.19213-1.793 35.41393-5.132l42.13191-42.132z\"/%3E%3Cpath fill=\"%23888\" d=\"M180.07562 178.50726c22.2722-21.797 52.72519-32.826 83.47733-30.682 3.84013.268 7.68907.738 11.52481 1.424l12.06515-12.065c-10.43531-2.852-21.42416-4.376-32.76438-4.376-11.45008 0-22.53563 1.551-33.06297 4.459zm13.98537 76.61c.20218-15.312 6.04576-30.563 17.52689-42.374l-62.33446 62.331c1.17768 6.608 2.97014 13.132 5.37795 19.473z\"/%3E%3C/svg%3E`\n","\"use strict\";\n/**\n * Contains the action methods for CosmicLink.\n *\n * @private\n * @exports action\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar action = exports;\n\nvar axios = require(\"@cosmic-plus/base/es5/axios\");\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nvar misc = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar convert = require(\"./convert\");\n\nvar format = env.isBrowser && require(\"./format\");\n\nvar resolve = require(\"./resolve\");\n\nvar signersUtils = require(\"./signers-utils\");\n\nvar status = require(\"./status\");\n/**\n * Lock a CosmicLink to a network/source pair. If the cosmicLink was created\n * from a query/uri/tdesc/json, it will create the corresponding\n * transaction/xdr/sep7 formats.\n *\n * This operation must be performed by the wallet before signing & sending the\n * transaction.\n *\n * @example\n * cosmicLib.config.network = \"test\"\n * const cosmicLink = new CosmicLink(\"?setOptions\")\n * console.log(cosmicLink.network) // => undefined\n * console.log(cosmicLink.xdr)     // => undefined\n * await cosmicLink.lock()\n * console.log(cosmicLink.network) // => \"test\"\n * console.log(cosmicLink.xdr)     // => \"AAAA...AA==\"\n *\n *\n * @alias CosmicLink#lock\n * @async\n * @param {Object} [options]\n * @param {string} options.network Local fallback network\n * @param {string} options.horizon Local fallback horizon (overwrited by global configuration)\n * @param {string} options.callback Local fallback callback\n * @param {string} options.source Local fallback source\n */\n\n\naction.lock = function _callee(cosmicLink) {\n  var options,\n      _args = arguments;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n          if (!cosmicLink.status) {\n            _context.next = 3;\n            break;\n          }\n\n          throw new Error(cosmicLink.status);\n\n        case 3:\n          if (!cosmicLink.locker) {\n            _context.next = 5;\n            break;\n          }\n\n          throw new Error(\"CosmicLink is already locked.\");\n\n        case 5:\n          _context.prev = 5;\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(applyLock(cosmicLink, options));\n\n        case 8:\n          _context.next = 14;\n          break;\n\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](5);\n\n          if (!cosmicLink.errors) {\n            console.error(_context.t0);\n            status.error(cosmicLink, _context.t0.message);\n          }\n\n          status.fail(cosmicLink, \"Transaction build failed\", \"throw\");\n\n        case 14:\n          updateSignersNode(cosmicLink);\n          return _context.abrupt(\"return\", cosmicLink);\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[5, 10]]);\n};\n\nfunction applyLock(cosmicLink, options) {\n  return _regeneratorRuntime.async(function applyLock$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          /**\n           * The locker property tells that a CosmicLink have been locked, and exposes\n           * the network & source values to which it have been locked.\n           *\n           * @alias CosmicLink#locker\n           */\n          cosmicLink.locker = {\n            source: cosmicLink.tdesc.source || options.source || cosmicLink.config.source,\n            network: cosmicLink.tdesc.network || options.network || cosmicLink.config.network,\n            horizon: options.horizon || cosmicLink.horizon,\n            callback: cosmicLink.tdesc.callback || options.callback || cosmicLink.config.callback\n          }; /// Preserve the underlying tdesc object.\n\n          cosmicLink._tdesc = Object.assign({}, cosmicLink.tdesc, cosmicLink.locker);\n          delete cosmicLink._query;\n          delete cosmicLink._json;\n\n          if (cosmicLink._transaction) {\n            _context2.next = 9;\n            break;\n          }\n\n          _context2.next = 7;\n          return _regeneratorRuntime.awrap(convert.tdescToTransaction(cosmicLink, cosmicLink.tdesc));\n\n        case 7:\n          cosmicLink._transaction = _context2.sent;\n          delete cosmicLink._tdesc;\n\n        case 9:\n          delete cosmicLink._transaction._cosmicplus;\n          _context2.next = 12;\n          return _regeneratorRuntime.awrap(signersUtils[\"extends\"](cosmicLink, cosmicLink._transaction));\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n/**\n * Sign CosmicLink's Transaction with **keypairs_or_preimage** and update the\n * other formats accordingly. Only legit signers are allowed to sign, and a\n * CosmicLink have to be [locked]{@link CosmicLink#lock} before signing.\n *\n * @alias CosmicLink#sign\n * @param {...Keypair|Buffer|string} ...keypairs_or_preimage\n */\n\n\naction.sign = function _callee2(cosmicLink) {\n  var transaction,\n      allFine,\n      _len,\n      keypairsOrPreimage,\n      _key,\n      index,\n      keypair,\n      publicKey,\n      _short,\n      _short2,\n      _short3,\n      _args3 = arguments;\n\n  return _regeneratorRuntime.async(function _callee2$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (cosmicLink.locker) {\n            _context3.next = 2;\n            break;\n          }\n\n          throw new Error(\"cosmicLink is not locked.\");\n\n        case 2:\n          transaction = cosmicLink.transaction;\n          allFine = true;\n\n          for (_len = _args3.length, keypairsOrPreimage = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            keypairsOrPreimage[_key - 1] = _args3[_key];\n          }\n\n          if (!(typeof keypairsOrPreimage[0] !== \"string\")) {\n            _context3.next = 33;\n            break;\n          }\n\n          _context3.t0 = _regeneratorRuntime.keys(keypairsOrPreimage);\n\n        case 7:\n          if ((_context3.t1 = _context3.t0()).done) {\n            _context3.next = 31;\n            break;\n          }\n\n          index = _context3.t1.value;\n          keypair = keypairsOrPreimage[index];\n          publicKey = keypair.publicKey();\n\n          if (cosmicLink.transaction.hasSigner(publicKey)) {\n            _context3.next = 16;\n            break;\n          }\n\n          _short = misc.shorter(publicKey);\n          status.error(cosmicLink, \"Not a legit signer: \" + _short);\n          allFine = false;\n          return _context3.abrupt(\"continue\", 7);\n\n        case 16:\n          if (!cosmicLink.transaction.hasSigned(publicKey)) {\n            _context3.next = 18;\n            break;\n          }\n\n          return _context3.abrupt(\"continue\", 7);\n\n        case 18:\n          _context3.prev = 18;\n          transaction.sign(keypair);\n          _context3.next = 29;\n          break;\n\n        case 22:\n          _context3.prev = 22;\n          _context3.t2 = _context3[\"catch\"](18);\n          console.error(_context3.t2);\n          _short2 = misc.shorter(publicKey);\n          status.error(cosmicLink, \"Failed to sign with key: \" + _short2);\n          allFine = false;\n          return _context3.abrupt(\"continue\", 7);\n\n        case 29:\n          _context3.next = 7;\n          break;\n\n        case 31:\n          _context3.next = 34;\n          break;\n\n        case 33:\n          try {\n            transaction.signHashX(keypairsOrPreimage[0]);\n          } catch (error) {\n            console.error(error);\n            _short3 = misc.shorter(keypairsOrPreimage[0]);\n            status.error(cosmicLink, \"Failed to sign with preimage: \" + _short3, \"throw\");\n          }\n\n        case 34:\n          /// Update other formats.\n          [\"_query\", \"_xdr\", \"_sep7\"].forEach(function (format) {\n            return delete cosmicLink[format];\n          });\n          updateSignersNode(cosmicLink);\n\n          if (allFine) {\n            _context3.next = 40;\n            break;\n          }\n\n          throw new Error(\"Some signers where invalid\");\n\n        case 40:\n          return _context3.abrupt(\"return\", transaction);\n\n        case 41:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[18, 22]]);\n};\n\nfunction updateSignersNode(cosmicLink) {\n  if (cosmicLink._signersNode) {\n    var signersNode = format.signatures(cosmicLink, cosmicLink._transaction);\n    cosmicLink.htmlDescription.replaceChild(signersNode, cosmicLink._signersNode);\n    cosmicLink._signersNode = signersNode;\n  }\n}\n/**\n * Send CosmicLink's transaction to a blockchain validator, or to\n * [StellarGuard]{@link https://stellarguard.me} when relevant. A\n * CosmicLink have to be [locked]{@link CosmicLink#lock} before sending.\n *\n * Returns a promise that resolve/reject to the horizon server response.\n *\n * @example\n * cosmicLink.send()\n *   .then(console.log)\n *   .catch(console.error)\n *\n * @alias CosmicLink#send\n * @param {horizon} [horizon] An horizon node URL\n * @return {Object} The server response\n */\n\n\naction.send = function _callee3(cosmicLink) {\n  var horizon,\n      _args4 = arguments;\n  return _regeneratorRuntime.async(function _callee3$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          horizon = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : cosmicLink.horizon;\n\n          if (cosmicLink.locker) {\n            _context4.next = 3;\n            break;\n          }\n\n          throw new Error(\"cosmicLink is not locked.\");\n\n        case 3:\n          _context4.prev = 3;\n\n          if (!cosmicLink.transaction.hasSigner(STELLARGUARD_PUBKEY)) {\n            _context4.next = 10;\n            break;\n          }\n\n          _context4.next = 7;\n          return _regeneratorRuntime.awrap(sendToStellarGuard(cosmicLink));\n\n        case 7:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 10:\n          if (!cosmicLink.callback) {\n            _context4.next = 16;\n            break;\n          }\n\n          _context4.next = 13;\n          return _regeneratorRuntime.awrap(axios.post(cosmicLink.callback, {\n            xdr: cosmicLink.xdr\n          }));\n\n        case 13:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 16:\n          _context4.next = 18;\n          return _regeneratorRuntime.awrap(sendToHorizon(cosmicLink, horizon));\n\n        case 18:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 19:\n          _context4.next = 25;\n          break;\n\n        case 21:\n          _context4.prev = 21;\n          _context4.t0 = _context4[\"catch\"](3);\n          if (_context4.t0.response) console.error(_context4.t0.message, _context4.t0.response);\n          throw _context4.t0;\n\n        case 25:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[3, 21]]);\n};\n\nfunction sendToHorizon(cosmicLink, horizon) {\n  var server;\n  return _regeneratorRuntime.async(function sendToHorizon$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          server = resolve.server(cosmicLink, horizon); // Keep connection alive until transaction gets validated or a non-504 error\n          // is returned. 504 error means the transaction is still following the\n          // validation process.\n          // eslint-disable-next-line no-constant-condition\n\n        case 1:\n          if (!true) {\n            _context5.next = 14;\n            break;\n          }\n\n          _context5.prev = 2;\n          _context5.next = 5;\n          return _regeneratorRuntime.awrap(server.submitTransaction(cosmicLink.transaction));\n\n        case 5:\n          return _context5.abrupt(\"return\", _context5.sent);\n\n        case 8:\n          _context5.prev = 8;\n          _context5.t0 = _context5[\"catch\"](2);\n\n          if (!(_context5.t0.response.status !== 504)) {\n            _context5.next = 12;\n            break;\n          }\n\n          throw _context5.t0;\n\n        case 12:\n          _context5.next = 1;\n          break;\n\n        case 14:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, [[2, 8]]);\n}\n\nfunction sendToStellarGuard(cosmicLink) {\n  var url = cosmicLink.network === \"test\" ? \"https://test.stellarguard.me/api/transactions\" : \"https://stellarguard.me/api/transactions\";\n  return axios.post(url, {\n    xdr: cosmicLink.xdr,\n    callback: cosmicLink.callback\n  }).then(function (result) {\n    return result.data;\n  });\n}\n\nvar STELLARGUARD_PUBKEY = \"GCVHEKSRASJBD6O2Z532LWH4N2ZLCBVDLLTLKSYCSMBLOYTNMEEGUARD\";","\"use strict\";\n/**\n * Asynchronously load external ressources.\n */\n\n/**/\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar load = require(\"@cosmic-plus/domutils/es5/load\");\n\nmodule.exports = load;\n/**\n *\n * Load cosmic-lib CSS from **href** or from default origin. All subsequent\n * calls will refer to the original request.\n *\n * @example\n * /// Preload at the start of your script:\n * cosmicLib.load.styles('css/cosmic-lib.css')\n *\n * /// Then wait for the request to resolve before you display CosmicLink HTML\n * /// description:\n * await cosmicLib.load.styles()\n *\n * @alias module:load#styles\n * @async\n * @param {string} [href='cosmic-lib.css']\n */\n\nload.styles = function _callee() {\n  var href,\n      promise,\n      _args = arguments;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          href = _args.length > 0 && _args[0] !== undefined ? _args[0] : \"https://cdn.cosmic.plus/cosmic-lib@2.x/cosmic-lib.css\";\n          promise = load.css(href);\n\n          load.styles = function () {\n            return promise;\n          };\n\n          return _context.abrupt(\"return\", promise);\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};"],"sourceRoot":""}